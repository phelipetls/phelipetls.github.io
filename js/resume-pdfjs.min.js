(()=>{var t,n,s,l,x=Object.create,r=Object.defineProperty,O=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,w=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,a=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),e=(e,t)=>function(){return t||(0,e[i(e)[0]])((t={exports:{}}).exports,t),t.exports},j=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of i(t))!_.call(e,o)&&o!==n&&r(e,o,{get:()=>t[o],enumerable:!(s=O(t,o))||s.enumerable});return e},h=(e,t,n)=>(n=e!=null?x(w(e)):{},j(t||!e||!e.__esModule?r(n,"default",{value:e,enumerable:!0}):n,e)),d=e({"node_modules/dommatrix/dist/dommatrix.js"(e,t){(function(n,s){typeof e=="object"&&typeof t!="undefined"?t.exports=s():typeof define=="function"&&define.amd?define(s):(n=typeof globalThis!="undefined"?globalThis:n||self,n.CSSMatrix=s())})(e,function(){"use strict";function n(t){var o,i,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,n=new e,s=Array.from(t);if(!s.every(function(e){return!Number.isNaN(e)}))throw TypeError('CSSMatrix: "'+t+'" must only have numbers.');if(s.length===16)c=s[0],i=s[1],x=s[2],O=s[3],o=s[4],l=s[5],w=s[6],_=s[7],y=s[8],v=s[9],C=s[10],g=s[11],f=s[12],m=s[13],b=s[14],j=s[15],n.m11=c,n.a=c,n.m21=o,n.c=o,n.m31=y,n.m41=f,n.e=f,n.m12=i,n.b=i,n.m22=l,n.d=l,n.m32=v,n.m42=m,n.f=m,n.m13=x,n.m23=w,n.m33=C,n.m43=b,n.m14=O,n.m24=_,n.m34=g,n.m44=j;else if(s.length===6)h=s[0],u=s[1],d=s[2],r=s[3],a=s[4],p=s[5],n.m11=h,n.a=h,n.m12=u,n.b=u,n.m21=d,n.c=d,n.m22=r,n.d=r,n.m41=a,n.e=a,n.m42=p,n.f=p;else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return n}function h(t){var s=Object.keys(new e);if(typeof t=="object"&&s.every(function(e){return e in t}))return n([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError('CSSMatrix: "'+JSON.stringify(t)+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function u(t){if(typeof t!="string")throw TypeError('CSSMatrix: "'+t+'" is not a string.');var i=String(t).replace(/\s/g,""),s=new e,o='CSSMatrix: invalid transform string "'+t+'"';return i.split(")").filter(function(e){return e}).forEach(function(e){var t,a,r,c,l,d,u,h,m,p,g,v,b,j,_,f=e.split("("),i=f[0],y=f[1];if(!y)throw TypeError(o);if(c=y.split(",").map(function(e){return e.includes("rad")?parseFloat(e)*(180/Math.PI):parseFloat(e)}),t=c[0],a=c[1],r=c[2],u=c[3],h=[t,a,r],j=[t,a,r,u],i==="perspective"&&t&&[a,r].every(function(e){return e===void 0}))s.m34=-1/t;else if(i.includes("matrix")&&[6,16].includes(c.length)&&c.every(function(e){return!Number.isNaN(+e)}))v=c.map(function(e){return Math.abs(e)<1e-6?0:e}),s=s.multiply(n(v));else if(i==="translate3d"&&h.every(function(e){return!Number.isNaN(+e)}))s=s.translate(t,a,r);else if(i==="translate"&&t&&r===void 0)s=s.translate(t,a||0,0);else if(i==="rotate3d"&&j.every(function(e){return!Number.isNaN(+e)})&&u)s=s.rotateAxisAngle(t,a,r,u);else if(i==="rotate"&&t&&[a,r].every(function(e){return e===void 0}))s=s.rotate(0,0,t);else if(i==="scale3d"&&h.every(function(e){return!Number.isNaN(+e)})&&h.some(function(e){return e!==1}))s=s.scale(t,a,r);else if(i==="scale"&&!Number.isNaN(t)&&t!==1&&r===void 0)p=Number.isNaN(+a),g=p?t:a,s=s.scale(t,g,1);else if(i==="skew"&&(t||!Number.isNaN(t)&&a)&&r===void 0)s=s.skew(t,a||0);else if(/[XYZ]/.test(i)&&t&&[a,r].every(function(e){return e===void 0})&&["translate","rotate","scale","skew"].some(function(e){return i.includes(e)}))["skewX","skewY"].includes(i)?s=s[i](t):(d=i.replace(/[XYZ]/,""),b=i.replace(d,""),m=["X","Y","Z"].indexOf(b),l=d==="scale"?1:0,_=[m===0?t:l,m===1?t:l,m===2?t:l],s=s[d].apply(s,_));else throw TypeError(o)}),s}function i(e,t){return t?[e.a,e.b,e.c,e.d,e.e,e.f]:[e.m11,e.m12,e.m13,e.m14,e.m21,e.m22,e.m23,e.m24,e.m31,e.m32,e.m33,e.m34,e.m41,e.m42,e.m43,e.m44]}function a(t,n,s){var o=new e;return o.m41=t,o.e=t,o.m42=n,o.f=n,o.m43=s,o}function r(t,n,s){var u,h,o=new e,m=Math.PI/180,f=t*m,b=n*m,v=s*m,l=Math.cos(f),i=-Math.sin(f),d=Math.cos(b),c=-Math.sin(b),r=Math.cos(v),a=-Math.sin(v),p=d*r,g=-d*a;return o.m11=p,o.a=p,o.m12=g,o.b=g,o.m13=c,u=i*c*r+l*a,o.m21=u,o.c=u,h=l*r-i*c*a,o.m22=h,o.d=h,o.m23=-i*d,o.m31=i*a-l*c*r,o.m32=i*r+l*c*a,o.m33=l*d,o}function c(t,n,s,o){var a,r,c,l,d,u,m,f,p,g,v,b,j,y,i=new e,h=Math.sqrt(t*t+n*n+s*s);return h===0?i:(l=t/h,r=n/h,c=s/h,f=o*(Math.PI/360),d=Math.sin(f),u=Math.cos(f),a=d*d,m=l*l,p=r*r,g=c*c,v=1-2*(p+g)*a,i.m11=v,i.a=v,b=2*(l*r*a+c*d*u),i.m12=b,i.b=b,i.m13=2*(l*c*a-r*d*u),j=2*(r*l*a-c*d*u),i.m21=j,i.c=j,y=1-2*(g+m)*a,i.m22=y,i.d=y,i.m23=2*(r*c*a+l*d*u),i.m31=2*(c*l*a+r*d*u),i.m32=2*(c*r*a-l*d*u),i.m33=1-2*(m+p)*a,i)}function m(t,n,s){var o=new e;return o.m11=t,o.a=t,o.m22=n,o.d=n,o.m33=s,o}function s(t,n){var o,i,a,r,s=new e;return t&&(a=t*Math.PI/180,o=Math.tan(a),s.m21=o,s.c=o),n&&(r=n*Math.PI/180,i=Math.tan(r),s.m12=i,s.b=i),s}function l(e){return s(e,0)}function d(e){return s(0,e)}function t(e,t){var s=t.m11*e.m11+t.m12*e.m21+t.m13*e.m31+t.m14*e.m41,o=t.m11*e.m12+t.m12*e.m22+t.m13*e.m32+t.m14*e.m42,i=t.m11*e.m13+t.m12*e.m23+t.m13*e.m33+t.m14*e.m43,a=t.m11*e.m14+t.m12*e.m24+t.m13*e.m34+t.m14*e.m44,r=t.m21*e.m11+t.m22*e.m21+t.m23*e.m31+t.m24*e.m41,c=t.m21*e.m12+t.m22*e.m22+t.m23*e.m32+t.m24*e.m42,l=t.m21*e.m13+t.m22*e.m23+t.m23*e.m33+t.m24*e.m43,d=t.m21*e.m14+t.m22*e.m24+t.m23*e.m34+t.m24*e.m44,u=t.m31*e.m11+t.m32*e.m21+t.m33*e.m31+t.m34*e.m41,h=t.m31*e.m12+t.m32*e.m22+t.m33*e.m32+t.m34*e.m42,m=t.m31*e.m13+t.m32*e.m23+t.m33*e.m33+t.m34*e.m43,f=t.m31*e.m14+t.m32*e.m24+t.m33*e.m34+t.m34*e.m44,p=t.m41*e.m11+t.m42*e.m21+t.m43*e.m31+t.m44*e.m41,g=t.m41*e.m12+t.m42*e.m22+t.m43*e.m32+t.m44*e.m42,v=t.m41*e.m13+t.m42*e.m23+t.m43*e.m33+t.m44*e.m43,b=t.m41*e.m14+t.m42*e.m24+t.m43*e.m34+t.m44*e.m44;return n([s,o,i,a,r,c,l,d,u,h,m,f,p,g,v,b])}var f,p,e=function(){for(var t,o,n=[],s=arguments.length;s--;)n[s]=arguments[s];return t=this,t.a=1,t.b=0,t.c=0,t.d=1,t.e=0,t.f=0,t.m11=1,t.m12=0,t.m13=0,t.m14=0,t.m21=0,t.m22=1,t.m23=0,t.m24=0,t.m31=0,t.m32=0,t.m33=1,t.m34=0,t.m41=0,t.m42=0,t.m43=0,t.m44=1,n.length?(o=[16,6].some(function(e){return e===n.length})?n:n[0],t.setMatrixValue(o)):t},o={isIdentity:{configurable:!0},is2D:{configurable:!0}};return o.isIdentity.get=function(){var e=this;return e.m11===1&&e.m12===0&&e.m13===0&&e.m14===0&&e.m21===0&&e.m22===1&&e.m23===0&&e.m24===0&&e.m31===0&&e.m32===0&&e.m33===1&&e.m34===0&&e.m41===0&&e.m42===0&&e.m43===0&&e.m44===1},o.is2D.get=function(){var e=this;return e.m31===0&&e.m32===0&&e.m33===1&&e.m34===0&&e.m43===0&&e.m44===1},e.prototype.setMatrixValue=function(s){var o=this;return typeof s=="string"&&s.length&&s!=="none"?u(s):[Array,Float64Array,Float32Array].some(function(e){return s instanceof e})?n(s):[e,DOMMatrix,Object].some(function(e){return s instanceof e})?h(s):o},e.prototype.toFloat32Array=function(t){return Float32Array.from(i(this,t))},e.prototype.toFloat64Array=function(t){return Float64Array.from(i(this,t))},e.prototype.toString=function(){var t=this,n=t.is2D,s=t.toFloat64Array(n).join(", "),o=n?"matrix":"matrix3d";return o+"("+s+")"},e.prototype.toJSON=function(){var t=this,n=t.is2D,s=t.isIdentity;return Object.assign({},t,{is2D:n,isIdentity:s})},e.prototype.multiply=function(n){return t(this,n)},e.prototype.translate=function(n,s,o){var c=n,i=s,r=o;return i===void 0&&(i=0),r===void 0&&(r=0),t(this,a(c,i,r))},e.prototype.scale=function(n,s,o){var r=n,i=s,a=o;return i===void 0&&(i=n),a===void 0&&(a=1),t(this,m(r,i,a))},e.prototype.rotate=function(n,s,o){var i=n,a=s||0,c=o||0;return typeof n=="number"&&s===void 0&&o===void 0&&(c=i,i=0,a=0),t(this,r(i,a,c))},e.prototype.rotateAxisAngle=function(n,s,o,i){if([n,s,o,i].some(function(e){return Number.isNaN(+e)}))throw new TypeError("CSSMatrix: expecting 4 values");return t(this,c(n,s,o,i))},e.prototype.skewX=function(n){return t(this,l(n))},e.prototype.skewY=function(n){return t(this,d(n))},e.prototype.skew=function(n,o){return t(this,s(n,o))},e.prototype.transformPoint=function(t){var n=this,s=n.m11*t.x+n.m21*t.y+n.m31*t.z+n.m41*t.w,o=n.m12*t.x+n.m22*t.y+n.m32*t.z+n.m42*t.w,i=n.m13*t.x+n.m23*t.y+n.m33*t.z+n.m43*t.w,a=n.m14*t.x+n.m24*t.y+n.m34*t.z+n.m44*t.w;return t instanceof DOMPoint?new DOMPoint(s,o,i,a):{x:s,y:o,z:i,w:a}},Object.defineProperties(e.prototype,o),Object.assign(e,{Translate:a,Rotate:r,RotateAxisAngle:c,Scale:m,SkewX:l,SkewY:d,Skew:s,Multiply:t,fromArray:n,fromMatrix:h,fromString:u,toArray:i}),f="1.0.3",p=f,Object.assign(e,{Version:p}),e})}}),u=e({"node_modules/web-streams-polyfill/dist/ponyfill.js"(e,t){(function(n,s){typeof e=="object"&&typeof t!="undefined"?s(e):typeof define=="function"&&define.amd?define(["exports"],s):(n=typeof globalThis!="undefined"?globalThis:n||self,s(n.WebStreamsPolyfill={}))})(e,function(e){"use strict";var a,p,C,M,T,N,R,P,B,V,$,K,X,n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(e){return"Symbol("+e+")"},_t,bt,ae,Pt,Ht,It,Ke,St,vt,we,Ce,yt,Gt,ht,le,ut,it,We,zt,lt,Be,Pn,tt,mt,te,ee;function kt(){}function co(){return typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:void 0}_t=co();function i(e){return typeof e=="object"&&e!==null||typeof e=="function"}bt=kt,ae=Promise,Pt=Promise.prototype.then,Ht=Promise.resolve.bind(ae),It=Promise.reject.bind(ae);function o(e){return new ae(e)}function s(e){return Ht(e)}function t(e){return It(e)}function f(e,t,n){return Pt.call(e,t,n)}function d(e,t,n){f(f(e,t,n),void 0,bt)}function ct(e,t){d(e,t)}function Xe(e,t){d(e,void 0,t)}function F(e,t,n){return f(e,t,n)}function G(e){f(e,void 0,bt)}X=function(){var t,e=_t&&_t.queueMicrotask;return typeof e=="function"?e:(t=s(void 0),function(e){return f(t,e)})}();function Le(e,t,n){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}function k(e,n,o){try{return s(Le(e,n,o))}catch(e){return t(e)}}Ke=16384,a=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(e){var t=this._back,n=t;t._elements.length===Ke-1&&(n={_elements:[],_next:void 0}),t._elements.push(e),n!==t&&(this._back=n,t._next=n),++this._size},e.prototype.shift=function(){var e=this._front,t=e,n=this._cursor,s=n+1,o=e._elements,i=o[n];return s===Ke&&(t=e._next,s=0),--this._size,this._cursor=s,e!==t&&(this._front=t),o[n]=void 0,i},e.prototype.forEach=function(e){for(var t=this._cursor,n=this._front,s=n._elements;t!==s.length||n._next!==void 0;){if(t===s.length&&(n=n._next,s=n._elements,t=0,s.length===0))break;e(s[t]),++t}},e.prototype.peek=function(){var e=this._front,t=this._cursor;return e._elements[t]},e}();function Bt(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Ye(e):t._state==="closed"?$s(e):Vt(e,t._storedError)}function qe(e,t){var n=e._ownerReadableStream;return l(n,t)}function g(e){e._ownerReadableStream._state==="readable"?et(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ls(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function D(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Ye(e){e._closedPromise=o(function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n})}function Vt(e,t){Ye(e),et(e,t)}function $s(e){Ye(e),Kt(e)}function et(e,t){if(e._closedPromise_reject===void 0)return;G(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function Ls(e,t){Vt(e,t)}function Kt(e){if(e._closedPromise_resolve===void 0)return;e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}St=n("[[AbortSteps]]"),vt=n("[[ErrorSteps]]"),we=n("[[CancelSteps]]"),Ce=n("[[PullSteps]]"),yt=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Gt=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Fs(e){return typeof e=="object"||typeof e=="function"}function h(e,t){if(e!==void 0&&!Fs(e))throw new TypeError(t+" is not an object.")}function r(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function.")}function Ss(e){return typeof e=="object"&&e!==null||typeof e=="function"}function en(e,t){if(!Ss(e))throw new TypeError(t+" is not an object.")}function m(e,t,n){if(e===void 0)throw new TypeError("Parameter "+t+" is required in '"+n+"'.")}function Et(e,t,n){if(e===void 0)throw new TypeError(t+" is required in '"+n+"'.")}function Ct(e){return Number(e)}function tn(e){return e===0?0:e}function Cs(e){return tn(Gt(e))}function sn(e,t){var s=0,o=Number.MAX_SAFE_INTEGER,n=Number(e),n=tn(n);if(!yt(n))throw new TypeError(t+" is not a finite number");if(n=Cs(n),n<s||n>o)throw new TypeError(t+" is outside the accepted range of "+s+" to "+o+", inclusive");return!yt(n)||n===0?0:n}function at(e,t){if(!_(e))throw new TypeError(t+" is not a ReadableStream.")}function L(e){return new N(e)}function cn(e,t){e._reader._readRequests.push(t)}function At(e,t,n){var o=e._reader,s=o._readRequests.shift();n?s._closeSteps():s._chunkSteps(t)}function ue(e){return e._reader._readRequests.length}function mn(e){var t=e._reader;return t!==void 0&&!!j(t)}N=function(){function e(e){if(m(e,1,"ReadableStreamDefaultReader"),at(e,"First parameter"),b(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Bt(this,e),this._readRequests=new a}return Object.defineProperty(e.prototype,"closed",{get:function(){return j(this)?this._closedPromise:t(re("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return e===void 0&&(e=void 0),j(this)?this._ownerReadableStream===void 0?t(D("cancel")):qe(this,e):t(re("cancel"))},e.prototype.read=function(){if(!j(this))return t(re("read"));if(this._ownerReadableStream===void 0)return t(D("read from"));var e,n,s=o(function(t,s){e=t,n=s}),i={_chunkSteps:function(t){return e({value:t,done:!1})},_closeSteps:function(){return e({value:void 0,done:!0})},_errorSteps:function(e){return n(e)}};return W(this,i),s},e.prototype.releaseLock=function(){if(!j(this))throw re("releaseLock");if(this._ownerReadableStream===void 0)return;if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");g(this)},e}(),Object.defineProperties(N.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(N.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function j(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof N}function W(e,t){var n=e._ownerReadableStream;n._disturbed=!0,n._state==="closed"?t._closeSteps():n._state==="errored"?t._errorSteps(n._storedError):n._readableStreamController[Ce](t)}function re(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}typeof n.asyncIterator=="symbol"&&(le=(ht={},ht[n.asyncIterator]=function(){return this},ht),Object.defineProperty(le,n.asyncIterator,{enumerable:!1})),ut=function(){function e(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}return e.prototype.next=function(){var t=this,e=function(){return t._nextSteps()};return this._ongoingPromise=this._ongoingPromise?F(this._ongoingPromise,e,e):e(),this._ongoingPromise},e.prototype.return=function(e){var n=this,t=function(){return n._returnSteps(e)};return this._ongoingPromise?F(this._ongoingPromise,t,t):t()},e.prototype._nextSteps=function(){var n,s,i,a,r,e=this;return this._isFinished?Promise.resolve({value:void 0,done:!0}):(n=this._reader,n._ownerReadableStream===void 0?t(D("iterate")):(a=o(function(e,t){s=e,i=t}),r={_chunkSteps:function(t){e._ongoingPromise=void 0,X(function(){return s({value:t,done:!1})})},_closeSteps:function(){e._ongoingPromise=void 0,e._isFinished=!0,g(n),s({value:void 0,done:!0})},_errorSteps:function(t){e._ongoingPromise=void 0,e._isFinished=!0,g(n),i(t)}},W(n,r),a))},e.prototype._returnSteps=function(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;var o,n=this._reader;return n._ownerReadableStream===void 0?t(D("finish iterating")):this._preventCancel?(g(n),s({value:e,done:!0})):(o=qe(n,e),g(n),F(o,function(){return{value:e,done:!0}}))},e}(),it={next:function(){return gn(this)?this._asyncIteratorImpl.next():t(jn("next"))},return:function(e){return gn(this)?this._asyncIteratorImpl.return(e):t(jn("return"))}},le!==void 0&&Object.setPrototypeOf(it,le);function ys(e,t){var s=L(e),o=new ut(s,t),n=Object.create(it);return n._asyncIteratorImpl=o,n}function gn(e){if(!i(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ut}catch{return!1}}function jn(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}We=Number.isNaN||function(e){return e!==e};function J(e){return e.slice()}function yn(e,t,n,s,o){new Uint8Array(e).set(new Uint8Array(n,s,o),t)}function oe(e){return e}function je(){return!1}function _n(e,t,n){if(e.slice)return e.slice(t,n);var s=n-t,o=new ArrayBuffer(s);return yn(o,0,e,t,s),o}function Qn(e){return typeof e=="number"&&!We(e)&&!(e<0)}function Cn(e){var t=_n(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function Qe(e){var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Ge(e,t,n){if(!Qn(n)||n===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:n}),e._queueTotalSize+=n}function Gn(e){var t=e._queue.peek();return t.value}function v(e){e._queue=new a,e._queueTotalSize=0}R=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!Ue(this))throw ot("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(e){if(!Ue(this))throw ot("respond");if(m(e,1,"respond"),e=sn(e,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");je(this._view.buffer),ve(this._associatedReadableByteStreamController,e)},e.prototype.respondWithNewView=function(e){if(!Ue(this))throw ot("respondWithNewView");if(m(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");je(e.buffer),fe(this._associatedReadableByteStreamController,e)},e}(),Object.defineProperties(R.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(R.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0}),C=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!O(this))throw ne("byobRequest");return ft(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!O(this))throw ne("desiredSize");return xn(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!O(this))throw ne("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableByteStream._state;if(e!=="readable")throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");Y(this)},e.prototype.enqueue=function(e){if(!O(this))throw ne("enqueue");if(m(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(e.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(e.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");xe(this,e)},e.prototype.error=function(e){if(e===void 0&&(e=void 0),!O(this))throw ne("error");c(this,e)},e.prototype[we]=function(e){Mn(this),v(this);var t=this._cancelAlgorithm(e);return ke(this),t},e.prototype[Ce]=function(e){var t,n,s,o,i,a=this._controlledReadableByteStream;if(this._queueTotalSize>0){t=this._queue.shift(),this._queueTotalSize-=t.byteLength,Hn(this),o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e._chunkSteps(o);return}if(n=this._autoAllocateChunkSize,n!==void 0){s=void 0;try{s=new ArrayBuffer(n)}catch(t){e._errorSteps(t);return}i={buffer:s,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"},this._pendingPullIntos.push(i)}cn(a,e),S(this)},e}(),Object.defineProperties(C.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(C.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function O(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof C}function Ue(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof R}function S(e){var t,n=Xn(e);if(!n)return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0,t=e._pullAlgorithm(),d(t,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,S(e))},function(t){c(e,t)})}function Mn(e){He(e),e._pendingPullIntos=new a}function $e(e,t){var s,n=!1;e._state==="closed"&&(n=!0),s=Fn(t),t.readerType==="default"?At(e,s,n):Os(e,s,n)}function Fn(e){var t=e.bytesFilled,n=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/n)}function Ne(e,t,n,s){e._queue.push({buffer:t,byteOffset:n,byteLength:s}),e._queueTotalSize+=s}function zn(e,t){var n,s,i,u,a=t.elementSize,h=t.bytesFilled-t.bytesFilled%a,l=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),d=t.bytesFilled+l,r=d-d%a,o=l,c=!1;for(r>h&&(o=r-t.bytesFilled,c=!0),i=e._queue;o>0;)s=i.peek(),n=Math.min(o,s.byteLength),u=t.byteOffset+t.bytesFilled,yn(t.buffer,u,s.buffer,s.byteOffset,n),s.byteLength===n?i.shift():(s.byteOffset+=n,s.byteLength-=n),e._queueTotalSize-=n,Mt(e,n,t),o-=n;return c}function Mt(e,t,n){n.bytesFilled+=t}function Hn(e){e._queueTotalSize===0&&e._closeRequested?(ke(e),U(e._controlledReadableByteStream)):S(e)}function He(e){if(e._byobRequest===null)return;e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null}function Dn(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;var t=e._pendingPullIntos.peek();zn(e,t)&&(Me(e),$e(e._controlledReadableByteStream,t))}}function Un(e,t,n){var s,i,a,r,l,d,o=e._controlledReadableByteStream,u=1;if(t.constructor!==DataView&&(u=t.constructor.BYTES_PER_ELEMENT),a=t.constructor,r=oe(t.buffer),s={buffer:r,bufferByteLength:r.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:u,viewConstructor:a,readerType:"byob"},e._pendingPullIntos.length>0){e._pendingPullIntos.push(s),ln(o,n);return}if(o._state==="closed"){l=new a(s.buffer,s.byteOffset,0),n._closeSteps(l);return}if(e._queueTotalSize>0){if(zn(e,s)){d=Fn(s),Hn(e),n._chunkSteps(d);return}if(e._closeRequested){i=new TypeError("Insufficient bytes to fill elements in the given buffer"),c(e,i),n._errorSteps(i);return}}e._pendingPullIntos.push(s),ln(o,n),S(e)}function In(e){var s,n=e._controlledReadableByteStream;if(dt(n))for(;rn(n)>0;)s=Me(e),$e(n,s)}function Yn(e,t,n){if(Mt(e,t,n),n.bytesFilled<n.elementSize)return;Me(e);var o,i,s=n.bytesFilled%n.elementSize;s>0&&(o=n.byteOffset+n.bytesFilled,i=_n(n.buffer,o-s,o),Ne(e,i,0,i.byteLength)),n.bytesFilled-=s,$e(e._controlledReadableByteStream,n),Dn(e)}function En(e,t){var n,s=e._pendingPullIntos.peek();He(e),n=e._controlledReadableByteStream._state,n==="closed"?In(e):Yn(e,t,s),S(e)}function Me(e){var t=e._pendingPullIntos.shift();return t}function Xn(e){var n,t=e._controlledReadableByteStream;return t._state==="readable"&&!e._closeRequested&&!!e._started&&(!!(mn(t)&&ue(t)>0)||!!(dt(t)&&rn(t)>0)||(n=xn(e),n>0))}function ke(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Y(e){var t,s,n=e._controlledReadableByteStream;if(e._closeRequested||n._state!=="readable")return;if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&(s=e._pendingPullIntos.peek(),s.bytesFilled>0))throw t=new TypeError("Insufficient bytes to fill elements in the given buffer"),c(e,t),t;ke(e),U(n)}function xe(e,t){var s,o,i,a,r,c,n=e._controlledReadableByteStream;if(e._closeRequested||n._state!=="readable")return;r=t.buffer,s=t.byteOffset,o=t.byteLength,i=oe(r),e._pendingPullIntos.length>0&&(a=e._pendingPullIntos.peek(),je(a.buffer),a.buffer=oe(a.buffer)),He(e),mn(n)?ue(n)===0?Ne(e,i,s,o):(e._pendingPullIntos.length>0&&Me(e),c=new Uint8Array(i,s,o),At(n,c,!1)):dt(n)?(Ne(e,i,s,o),Dn(e)):Ne(e,i,s,o),S(e)}function c(e,t){var n=e._controlledReadableByteStream;if(n._state!=="readable")return;Mn(e),v(e),ke(e),Zt(n,t)}function ft(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){var t=e._pendingPullIntos.peek(),s=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(R.prototype);ns(n,e,s),e._byobRequest=n}return e._byobRequest}function xn(e){var t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function ve(e,t){var n=e._pendingPullIntos.peek(),s=e._controlledReadableByteStream._state;if(s==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=oe(n.buffer),En(e,t)}function fe(e,t){var s,n=e._pendingPullIntos.peek(),o=e._controlledReadableByteStream._state;if(o==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+t.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");s=t.byteLength,n.buffer=oe(t.buffer),En(e,s)}function On(e,t,n,o,i,r,l){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,v(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=r,t._pullAlgorithm=o,t._cancelAlgorithm=i,t._autoAllocateChunkSize=l,t._pendingPullIntos=new a,e._readableStreamController=t;var u=n();d(s(u),function(){t._started=!0,S(t)},function(e){c(t,e)})}function Zn(e,t,n){var i,o=Object.create(C.prototype),a=function(){},r=function(){return s(void 0)},c=function(){return s(void 0)};if(t.start!==void 0&&(a=function(){return t.start(o)}),t.pull!==void 0&&(r=function(){return t.pull(o)}),t.cancel!==void 0&&(c=function(e){return t.cancel(e)}),i=t.autoAllocateChunkSize,i===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");On(e,o,a,r,c,n,i)}function ns(e,t,n){e._associatedReadableByteStreamController=t,e._view=n}function ot(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function ne(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function vn(e){return new V(e)}function ln(e,t){e._reader._readIntoRequests.push(t)}function Os(e,t,n){var o=e._reader,s=o._readIntoRequests.shift();n?s._closeSteps(t):s._chunkSteps(t)}function rn(e){return e._reader._readIntoRequests.length}function dt(e){var t=e._reader;return t!==void 0&&!!w(t)}V=function(){function e(e){if(m(e,1,"ReadableStreamBYOBReader"),at(e,"First parameter"),b(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!O(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Bt(this,e),this._readIntoRequests=new a}return Object.defineProperty(e.prototype,"closed",{get:function(){return w(this)?this._closedPromise:t(ce("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return e===void 0&&(e=void 0),w(this)?this._ownerReadableStream===void 0?t(D("cancel")):qe(this,e):t(ce("cancel"))},e.prototype.read=function(e){if(!w(this))return t(ce("read"));if(!ArrayBuffer.isView(e))return t(new TypeError("view must be an array buffer view"));if(e.byteLength===0)return t(new TypeError("view must have non-zero byteLength"));if(e.buffer.byteLength===0)return t(new TypeError("view's buffer must have non-zero byteLength"));if(je(e.buffer),this._ownerReadableStream===void 0)return t(D("read from"));var n,s,i=o(function(e,t){n=e,s=t}),a={_chunkSteps:function(e){return n({value:e,done:!1})},_closeSteps:function(e){return n({value:e,done:!0})},_errorSteps:function(e){return s(e)}};return Qt(this,e,a),i},e.prototype.releaseLock=function(){if(!w(this))throw ce("releaseLock");if(this._ownerReadableStream===void 0)return;if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");g(this)},e}(),Object.defineProperties(V.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(V.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function w(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof V}function Qt(e,t,n){var s=e._ownerReadableStream;s._disturbed=!0,s._state==="errored"?n._errorSteps(s._storedError):Un(s._readableStreamController,t,n)}function ce(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function se(e,t){var n=e.highWaterMark;if(n===void 0)return t;if(We(n)||n<0)throw new RangeError("Invalid highWaterMark");return n}function pe(e){var t=e.size;return t||function(){return 1}}function ge(e,t){h(e,t);var n=e?.highWaterMark,s=e?.size;return{highWaterMark:n===void 0?void 0:Ct(n),size:s===void 0?void 0:Ms(s,t+" has member 'size' that")}}function Ms(e,t){return r(e,t),function(t){return Ct(e(t))}}function Ts(e,t){h(e,t);var n=e?.abort,s=e?.close,o=e?.start,a=e?.type,i=e?.write;return{abort:n===void 0?void 0:zs(n,e,t+" has member 'abort' that"),close:s===void 0?void 0:Ps(s,e,t+" has member 'close' that"),start:o===void 0?void 0:Gs(o,e,t+" has member 'start' that"),write:i===void 0?void 0:Xs(i,e,t+" has member 'write' that"),type:a}}function zs(e,t,n){return r(e,n),function(n){return k(e,t,[n])}}function Ps(e,t,n){return r(e,n),function(){return k(e,t,[])}}function Gs(e,t,n){return r(e,n),function(n){return Le(e,t,[n])}}function Xs(e,t,n){return r(e,n),function(n,s){return k(e,t,[n,s])}}function Rt(e,t){if(!I(e))throw new TypeError(t+" is not a WritableStream.")}function eo(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}zt=typeof AbortController=="function";function no(){return zt?new AbortController:void 0}$=function(){function e(e,t){e===void 0&&(e={}),t===void 0&&(t={}),e===void 0?e=null:en(e,"First parameter");var o,i,a,n=ge(t,"Second parameter"),s=Ts(e,"First parameter");if(hn(this),o=s.type,o!==void 0)throw new RangeError("Invalid type is specified");i=pe(n),a=se(n,1),ws(this,s,a,i)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!I(this))throw he("locked");return H(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){return e===void 0&&(e=void 0),I(this)?H(this)?t(new TypeError("Cannot abort a stream that already has a writer")):Fe(this,e):t(he("abort"))},e.prototype.close=function(){return I(this)?H(this)?t(new TypeError("Cannot close a stream that already has a writer")):u(this)?t(new TypeError("Cannot close an already-closing stream")):Nt(this):t(he("close"))},e.prototype.getWriter=function(){if(!I(this))throw he("getWriter");return Ft(this)},e}(),Object.defineProperties($.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty($.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});function Ft(e){return new P(e)}function lo(e,t,n,s,o,i){o===void 0&&(o=1),i===void 0&&(i=function(){return 1});var r,a=Object.create($.prototype);return hn(a),r=Object.create(T.prototype),dn(a,r,e,t,n,s,o,i),a}function hn(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new a,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function I(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof $}function H(e){return e._writer!==void 0}function Fe(e,t){if(e._state==="closed"||e._state==="errored")return s(void 0);e._writableStreamController._abortReason=t,(i=e._writableStreamController._abortController)===null||i===void 0?void 0:i.abort();var n,i,r,a=e._state;return a==="closed"||a==="errored"?s(void 0):e._pendingAbortRequest!==void 0?e._pendingAbortRequest._promise:(n=!1,a==="erroring"&&(n=!0,t=void 0),r=o(function(s,o){e._pendingAbortRequest={_promise:void 0,_resolve:s,_reject:o,_reason:t,_wasAlreadyErroring:n}}),e._pendingAbortRequest._promise=r,n||Ot(e,t),r)}function Nt(e){var s,i,n=e._state;return n==="closed"||n==="errored"?t(new TypeError("The stream (in "+n+" state) is not in the writable state and cannot be closed")):(i=o(function(t,n){var s={_resolve:t,_reject:n};e._closeRequest=s}),s=e._writer,s!==void 0&&e._backpressure&&n==="writable"&&Pe(s),_s(e._writableStreamController),i)}function Js(e){var t=o(function(t,n){var s={_resolve:t,_reject:n};e._writeRequests.push(s)});return t}function xt(e,t){var n=e._state;if(n==="writable"){Ot(e,t);return}wt(e)}function Ot(e,t){var n,s=e._writableStreamController;e._state="erroring",e._storedError=t,n=e._writer,n!==void 0&&nn(n,t),!Rs(e)&&s._started&&wt(e)}function wt(e){e._state="errored",e._writableStreamController[vt]();var t,s,n=e._storedError;if(e._writeRequests.forEach(function(e){e._reject(n)}),e._writeRequests=new a,e._pendingAbortRequest===void 0){Se(e);return}if(t=e._pendingAbortRequest,e._pendingAbortRequest=void 0,t._wasAlreadyErroring){t._reject(n),Se(e);return}s=e._writableStreamController[St](t._reason),d(s,function(){t._resolve(),Se(e)},function(n){t._reject(n),Se(e)})}function Ys(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function qs(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,xt(e,t)}function Ks(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var t,n=e._state;n==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed",t=e._writer,t!==void 0&&Tn(t)}function Us(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),xt(e,t)}function u(e){return e._closeRequest!==void 0||e._inFlightCloseRequest!==void 0}function Rs(e){return e._inFlightWriteRequest!==void 0||e._inFlightCloseRequest!==void 0}function Ns(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Ds(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Se(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;t!==void 0&&Ve(t,e._storedError)}function jt(e,t){var n=e._writer;n!==void 0&&t!==e._backpressure&&(t?Wn(n):Pe(n)),e._backpressure=t}P=function(){function e(e){if(m(e,1,"WritableStreamDefaultWriter"),Rt(e,"First parameter"),H(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var n,t=e._state;t==="writable"?(!u(e)&&e._backpressure?ie(this):Nn(this),ze(this)):t==="erroring"?(Ie(this,e._storedError),ze(this)):t==="closed"?(Nn(this),qn(this)):(n=e._storedError,Ie(this,n),An(this,n))}return Object.defineProperty(e.prototype,"closed",{get:function(){return E(this)?this._closedPromise:t(A("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!E(this))throw A("desiredSize");if(this._ownerWritableStream===void 0)throw q("desiredSize");return xs(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return E(this)?this._readyPromise:t(A("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){return e===void 0&&(e=void 0),E(this)?this._ownerWritableStream===void 0?t(q("abort")):As(this,e):t(A("abort"))},e.prototype.close=function(){if(!E(this))return t(A("close"));var e=this._ownerWritableStream;return e===void 0?t(q("close")):u(e)?t(new TypeError("Cannot close an already-closing stream")):Jt(this)},e.prototype.releaseLock=function(){if(!E(this))throw A("releaseLock");var e=this._ownerWritableStream;if(e===void 0)return;on(this)},e.prototype.write=function(e){return e===void 0&&(e=void 0),E(this)?this._ownerWritableStream===void 0?t(q("write to")):an(this,e):t(A("write"))},e}(),Object.defineProperties(P.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(P.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function E(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof P}function As(e,t){var n=e._ownerWritableStream;return Fe(n,t)}function Jt(e){var t=e._ownerWritableStream;return Nt(t)}function ks(e){var n=e._ownerWritableStream,o=n._state;return u(n)||o==="closed"?s(void 0):o==="errored"?t(n._storedError):Jt(e)}function Es(e,t){e._closedPromiseState==="pending"?Ve(e,t):Kn(e,t)}function nn(e,t){e._readyPromiseState==="pending"?Ln(e,t):$n(e,t)}function xs(e){var n=e._ownerWritableStream,t=n._state;return t==="errored"||t==="erroring"?null:t==="closed"?0:pn(n._writableStreamController)}function on(e){var n=e._ownerWritableStream,t=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");nn(e,t),Es(e,t),n._writer=void 0,e._ownerWritableStream=void 0}function an(e,n){var o,a,s=e._ownerWritableStream,i=s._writableStreamController,r=vs(i,n);return s!==e._ownerWritableStream?t(q("write to")):(o=s._state,o==="errored"?t(s._storedError):u(s)||o==="closed"?t(new TypeError("The stream is closing or closed and cannot be written to")):o==="erroring"?t(s._storedError):(a=Js(s),os(i,n,r),a))}lt={},T=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"abortReason",{get:function(){if(!rt(this))throw Ze("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){if(!rt(this))throw Ze("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),e.prototype.error=function(e){if(e===void 0&&(e=void 0),!rt(this))throw Ze("error");var t=this._controlledWritableStream._state;if(t!=="writable")return;wn(this,e)},e.prototype[St]=function(e){var t=this._abortAlgorithm(e);return Oe(this),t},e.prototype[vt]=function(){v(this)},e}(),Object.defineProperties(T.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(T.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function rt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof T}function dn(e,t,n,o,i,a,r,c){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,v(t),t._abortReason=void 0,t._abortController=no(),t._started=!1,t._strategySizeAlgorithm=c,t._strategyHWM=r,t._writeAlgorithm=o,t._closeAlgorithm=i,t._abortAlgorithm=a;var l,u,h=nt(t);jt(e,h),l=n(),u=s(l),d(u,function(){t._started=!0,Re(t)},function(n){t._started=!0,xt(e,n)})}function ws(e,t,n,o){var i=Object.create(T.prototype),a=function(){},r=function(){return s(void 0)},c=function(){return s(void 0)},l=function(){return s(void 0)};t.start!==void 0&&(a=function(){return t.start(i)}),t.write!==void 0&&(r=function(e){return t.write(e,i)}),t.close!==void 0&&(c=function(){return t.close()}),t.abort!==void 0&&(l=function(e){return t.abort(e)}),dn(e,i,a,r,c,l,n,o)}function Oe(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function _s(e){Ge(e,lt,0),Re(e)}function vs(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return st(e,t),1}}function pn(e){return e._strategyHWM-e._queueTotalSize}function os(e,t,n){try{Ge(e,t,n)}catch(t){st(e,t);return}var o,s=e._controlledWritableStream;!u(s)&&s._state==="writable"&&(o=nt(e),jt(s,o)),Re(e)}function Re(e){var n,s,t=e._controlledWritableStream;if(!e._started)return;if(t._inFlightWriteRequest!==void 0)return;if(s=t._state,s==="erroring"){wt(t);return}if(e._queue.length===0)return;n=Gn(e),n===lt?ts(e):Jn(e,n)}function st(e,t){e._controlledWritableStream._state==="writable"&&wn(e,t)}function ts(e){var n,t=e._controlledWritableStream;Ns(t),Qe(e),n=e._closeAlgorithm(),Oe(e),d(n,function(){Ks(t)},function(e){Us(t,e)})}function Jn(e,t){var s,n=e._controlledWritableStream;Ds(n),s=e._writeAlgorithm(t),d(s,function(){Ys(n);var t,s=n._state;Qe(e),!u(n)&&s==="writable"&&(t=nt(e),jt(n,t)),Re(e)},function(t){n._state==="writable"&&Oe(e),qs(n,t)})}function nt(e){var t=pn(e);return t<=0}function wn(e,t){var n=e._controlledWritableStream;Oe(e),Ot(n,t)}function he(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function Ze(e){return new TypeError("WritableStreamDefaultController.prototype."+e+" can only be used on a WritableStreamDefaultController")}function A(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function q(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function ze(e){e._closedPromise=o(function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"})}function An(e,t){ze(e),Ve(e,t)}function qn(e){ze(e),Tn(e)}function Ve(e,t){if(e._closedPromise_reject===void 0)return;G(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}function Kn(e,t){An(e,t)}function Tn(e){if(e._closedPromise_resolve===void 0)return;e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}function ie(e){e._readyPromise=o(function(t,n){e._readyPromise_resolve=t,e._readyPromise_reject=n}),e._readyPromiseState="pending"}function Ie(e,t){ie(e),Ln(e,t)}function Nn(e){ie(e),Pe(e)}function Ln(e,t){if(e._readyPromise_reject===void 0)return;G(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}function Wn(e){ie(e)}function $n(e,t){Ie(e,t)}function Pe(e){if(e._readyPromise_resolve===void 0)return;e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}Be=typeof DOMException!="undefined"?DOMException:void 0;function Bn(e){if(typeof e!="function"&&typeof e!="object")return!1;try{return new e,!0}catch{return!1}}function Vn(){var e=function(t,n){this.message=t||"",this.name=n||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}Pn=Bn(Be)?Be:Vn();function Rn(e,t,n,i,a,r){var c,m,p=L(e),h=Ft(t);return e._disturbed=!0,c=!1,m=s(void 0),o(function(v,b){if(r!==void 0){if(y=function(){var n=new Pn("Aborted","AbortError"),o=[];i||o.push(function(){return t._state==="writable"?Fe(t,n):s(void 0)}),a||o.push(function(){return e._state==="readable"?l(e,n):s(void 0)}),j(function(){return Promise.all(o.map(function(e){return e()}))},!0,n)},r.aborted){y();return}r.addEventListener("abort",y)}function k(){return o(function(e,t){function n(s){s?e():f(A(),n,t)}n(!1)})}function A(){return c?s(!0):f(h._readyPromise,function(){return o(function(e,t){W(p,{_chunkSteps:function(t){m=f(an(h,t),void 0,kt),e(!1)},_closeSteps:function(){return e(!0)},_errorSteps:t})})})}if(C(e,p._closedPromise,function(e){i?_(!0,e):j(function(){return Fe(t,e)},!0,e)}),C(t,h._closedPromise,function(t){a?_(!0,t):j(function(){return l(e,t)},!0,t)}),E(e,p._closedPromise,function(){n?_():j(function(){return ks(h)})}),u(t)||t._state==="closed"){var y,x=new TypeError("the destination writable stream closed before all data could be piped to it");a?_(!0,x):j(function(){return l(e,x)},!0,x)}G(k());function O(){var e=m;return f(m,function(){return e!==m?O():void 0})}function C(e,t,n){e._state==="errored"?n(e._storedError):Xe(t,n)}function E(e,t,n){e._state==="closed"?n():ct(t,n)}function j(e,n,s){if(c)return;c=!0,t._state==="writable"&&!u(t)?ct(O(),o):o();function o(){d(e(),function(){return w(n,s)},function(e){return w(!0,e)})}}function _(e,n){if(c)return;c=!0,t._state==="writable"&&!u(t)?ct(O(),function(){return w(e,n)}):w(e,n)}function w(e,t){on(h),g(p),r!==void 0&&r.removeEventListener("abort",y),e?b(t):v(void 0)}})}M=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!De(this))throw be("desiredSize");return Je(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!De(this))throw be("close");if(!z(this))throw new TypeError("The stream is not in a state that permits close");Q(this)},e.prototype.enqueue=function(e){if(e===void 0&&(e=void 0),!De(this))throw be("enqueue");if(!z(this))throw new TypeError("The stream is not in a state that permits enqueue");return _e(this,e)},e.prototype.error=function(e){if(e===void 0&&(e=void 0),!De(this))throw be("error");y(this,e)},e.prototype[we]=function(e){v(this);var t=this._cancelAlgorithm(e);return Ee(this),t},e.prototype[Ce]=function(e){var n,t=this._controlledReadableStream;this._queue.length>0?(n=Qe(this),this._closeRequested&&this._queue.length===0?(Ee(this),U(t)):Z(this),e._chunkSteps(n)):(cn(t,e),Z(this))},e}(),Object.defineProperties(M.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(M.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function De(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof M}function Z(e){var t,n=kn(e);if(!n)return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0,t=e._pullAlgorithm(),d(t,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Z(e))},function(t){y(e,t)})}function kn(e){var n,t=e._controlledReadableStream;return!!z(e)&&!!e._started&&(!!(b(t)&&ue(t)>0)||(n=Je(e),n>0))}function Ee(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Q(e){if(!z(e))return;var t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Ee(e),U(t))}function _e(e,t){if(!z(e))return;var s,n=e._controlledReadableStream;if(b(n)&&ue(n)>0)At(n,t,!1);else{s=void 0;try{s=e._strategySizeAlgorithm(t)}catch(t){throw y(e,t),t}try{Ge(e,t,s)}catch(t){throw y(e,t),t}}Z(e)}function y(e,t){var n=e._controlledReadableStream;if(n._state!=="readable")return;v(e),Ee(e),Zt(n,t)}function Je(e){var t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function es(e){return!kn(e)}function z(e){var t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function bn(e,t,n,o,i,a,r){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,v(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=r,t._strategyHWM=a,t._pullAlgorithm=o,t._cancelAlgorithm=i,e._readableStreamController=t;var c=n();d(s(c),function(){t._started=!0,Z(t)},function(e){y(t,e)})}function ss(e,t,n,o){var i=Object.create(M.prototype),a=function(){},r=function(){return s(void 0)},c=function(){return s(void 0)};t.start!==void 0&&(a=function(){return t.start(i)}),t.pull!==void 0&&(r=function(){return t.pull(i)}),t.cancel!==void 0&&(c=function(e){return t.cancel(e)}),bn(e,i,a,r,c,n,o)}function be(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function is(e){return O(e._readableStreamController)?cs(e):rs(e)}function rs(e){var r,c,d,h,m,p=L(e),a=!1,f=!1,n=!1,i=!1,g=o(function(e){d=e});function u(){if(a)return f=!0,s(void 0);a=!0;var e={_chunkSteps:function(e){X(function(){f=!1;var t=e,s=e;n||_e(c._readableStreamController,t),i||_e(r._readableStreamController,s),a=!1,f&&u()})},_closeSteps:function(){a=!1,n||Q(c._readableStreamController),i||Q(r._readableStreamController),(!n||!i)&&d(void 0)},_errorSteps:function(){a=!1}};return W(p,e),s(void 0)}function b(t){if(n=!0,h=t,i){var s=J([h,m]),o=l(e,s);d(o)}return g}function j(t){if(i=!0,m=t,n){var s=J([h,m]),o=l(e,s);d(o)}return g}function v(){}return c=pt(v,u,b),r=pt(v,u,j),Xe(p._closedPromise,function(e){y(c._readableStreamController,e),y(r._readableStreamController,e),(!n||!i)&&d(void 0)}),[c,r]}function cs(e){var n,i,u,p,y,t=L(e),d=!1,m=!1,h=!1,a=!1,r=!1,x=o(function(e){u=e});function b(e){Xe(e._closedPromise,function(s){if(e!==t)return;c(n._readableStreamController,s),c(i._readableStreamController,s),(!a||!r)&&u(void 0)})}function _(){w(t)&&(g(t),t=L(e),b(t));var s={_chunkSteps:function(t){X(function(){m=!1,h=!1;var o=t,s=t;if(!a&&!r)try{s=Cn(t)}catch(t){c(n._readableStreamController,t),c(i._readableStreamController,t),u(l(e,t));return}a||xe(n._readableStreamController,o),r||xe(i._readableStreamController,s),d=!1,m?f():h&&v()})},_closeSteps:function(){d=!1,a||Y(n._readableStreamController),r||Y(i._readableStreamController),n._readableStreamController._pendingPullIntos.length>0&&ve(n._readableStreamController,0),i._readableStreamController._pendingPullIntos.length>0&&ve(i._readableStreamController,0),(!a||!r)&&u(void 0)},_errorSteps:function(){d=!1}};W(t,s)}function O(s,o){j(t)&&(g(t),t=vn(e),b(t));var p=o?i:n,y=o?n:i,_={_chunkSteps:function(t){X(function(){m=!1,h=!1;var n,s=o?r:a,i=o?a:r;if(i)s||fe(p._readableStreamController,t);else{n=void 0;try{n=Cn(t)}catch(t){c(p._readableStreamController,t),c(y._readableStreamController,t),u(l(e,t));return}s||fe(p._readableStreamController,t),xe(y._readableStreamController,n)}d=!1,m?f():h&&v()})},_closeSteps:function(e){d=!1;var t=o?r:a,n=o?a:r;t||Y(p._readableStreamController),n||Y(y._readableStreamController),e!==void 0&&(t||fe(p._readableStreamController,e),!n&&y._readableStreamController._pendingPullIntos.length>0&&ve(y._readableStreamController,0)),(!t||!n)&&u(void 0)},_errorSteps:function(){d=!1}};Qt(t,s,_)}function f(){if(d)return m=!0,s(void 0);d=!0;var e=ft(n._readableStreamController);return e===null?_():O(e._view,!1),s(void 0)}function v(){if(d)return h=!0,s(void 0);d=!0;var e=ft(i._readableStreamController);return e===null?_():O(e._view,!0),s(void 0)}function E(t){if(a=!0,p=t,r){var n=J([p,y]),s=l(e,n);u(s)}return x}function k(t){if(r=!0,y=t,a){var n=J([p,y]),s=l(e,n);u(s)}return x}function C(){}return n=un(C,f,E),i=un(C,v,k),b(t),[n,i]}function ls(e,t){h(e,t);var n=e,s=n?.autoAllocateChunkSize,o=n?.cancel,i=n?.pull,a=n?.start,r=n?.type;return{autoAllocateChunkSize:s===void 0?void 0:sn(s,t+" has member 'autoAllocateChunkSize' that"),cancel:o===void 0?void 0:ds(o,n,t+" has member 'cancel' that"),pull:i===void 0?void 0:us(i,n,t+" has member 'pull' that"),start:a===void 0?void 0:hs(a,n,t+" has member 'start' that"),type:r===void 0?void 0:ms(r,t+" has member 'type' that")}}function ds(e,t,n){return r(e,n),function(n){return k(e,t,[n])}}function us(e,t,n){return r(e,n),function(n){return k(e,t,[n])}}function hs(e,t,n){return r(e,n),function(n){return Le(e,t,[n])}}function ms(e,t){if(e=""+e,e!=="bytes")throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamType");return e}function fs(e,t){h(e,t);var n=e?.mode;return{mode:n===void 0?void 0:ps(n,t+" has member 'mode' that")}}function ps(e,t){if(e=""+e,e!=="byob")throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode");return e}function gs(e,t){h(e,t);var n=e?.preventCancel;return{preventCancel:Boolean(n)}}function fn(e,t){h(e,t);var s=e?.preventAbort,o=e?.preventCancel,i=e?.preventClose,n=e?.signal;return n!==void 0&&bs(n,t+" has member 'signal' that"),{preventAbort:Boolean(s),preventCancel:Boolean(o),preventClose:Boolean(i),signal:n}}function bs(e,t){if(!eo(e))throw new TypeError(t+" is not an AbortSignal.")}function js(e,t){h(e,t);var n,s=e?.readable;return Et(s,"readable","ReadableWritablePair"),at(s,t+" has member 'readable' that"),n=e?.writable,Et(n,"writable","ReadableWritablePair"),Rt(n,t+" has member 'writable' that"),{readable:s,writable:n}}p=function(){function e(e,t){e===void 0&&(e={}),t===void 0&&(t={}),e===void 0?e=null:en(e,"First parameter");var s,i,n=ge(t,"Second parameter"),o=ls(e,"First parameter");if(gt(this),o.type==="bytes"){if(n.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");s=se(n,0),Zn(this,o,s)}else i=pe(n),s=se(n,1),ss(this,o,s,i)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!_(this))throw x("locked");return b(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return e===void 0&&(e=void 0),_(this)?b(this)?t(new TypeError("Cannot cancel a stream that already has a reader")):l(this,e):t(x("cancel"))},e.prototype.getReader=function(e){if(e===void 0&&(e=void 0),!_(this))throw x("getReader");var t=fs(e,"First parameter");return t.mode===void 0?L(this):vn(this)},e.prototype.pipeThrough=function(e,t){if(t===void 0&&(t={}),!_(this))throw x("pipeThrough");m(e,1,"pipeThrough");var o,s=js(e,"First parameter"),n=fn(t,"Second parameter");if(b(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(H(s.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return o=Rn(this,s.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal),G(o),s.readable},e.prototype.pipeTo=function(e,n){if(n===void 0&&(n={}),!_(this))return t(x("pipeTo"));if(e===void 0)return t("Parameter 1 is required in 'pipeTo'.");if(!I(e))return t(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var s;try{s=fn(n,"Second parameter")}catch(e){return t(e)}return b(this)?t(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):H(e)?t(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Rn(this,e,s.preventClose,s.preventAbort,s.preventCancel,s.signal)},e.prototype.tee=function(){if(!_(this))throw x("tee");var e=is(this);return J(e)},e.prototype.values=function(e){if(e===void 0&&(e=void 0),!_(this))throw x("values");var t=gs(e,"First parameter");return ys(this,t.preventCancel)},e}(),Object.defineProperties(p.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(p.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),typeof n.asyncIterator=="symbol"&&Object.defineProperty(p.prototype,n.asyncIterator,{value:p.prototype.values,writable:!0,configurable:!0});function pt(e,t,n,s,o){s===void 0&&(s=1),o===void 0&&(o=function(){return 1});var a,i=Object.create(p.prototype);return gt(i),a=Object.create(M.prototype),bn(i,a,e,t,n,s,o),i}function un(e,t,n){var o,s=Object.create(p.prototype);return gt(s),o=Object.create(C.prototype),On(s,o,e,t,n,0,void 0),s}function gt(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function _(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof p}function b(e){return e._reader!==void 0}function l(e,n){if(e._disturbed=!0,e._state==="closed")return s(void 0);if(e._state==="errored")return t(e._storedError);U(e);var i,o=e._reader;return o!==void 0&&w(o)&&(o._readIntoRequests.forEach(function(e){e._closeSteps(void 0)}),o._readIntoRequests=new a),i=e._readableStreamController[we](n),F(i,kt)}function U(e){e._state="closed";var t=e._reader;if(t===void 0)return;Kt(t),j(t)&&(t._readRequests.forEach(function(e){e._closeSteps()}),t._readRequests=new a)}function Zt(e,t){e._state="errored",e._storedError=t;var n=e._reader;if(n===void 0)return;et(n,t),j(n)?(n._readRequests.forEach(function(e){e._errorSteps(t)}),n._readRequests=new a):(n._readIntoRequests.forEach(function(e){e._errorSteps(t)}),n._readIntoRequests=new a)}function x(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function Xt(e,t){h(e,t);var n=e?.highWaterMark;return Et(n,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Ct(n)}}tt=function(e){return e.byteLength};try{Object.defineProperty(tt,"name",{value:"size",configurable:!0})}catch{}K=function(){function e(e){m(e,1,"ByteLengthQueuingStrategy"),e=Xt(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!qt(this))throw Yt("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!qt(this))throw Yt("size");return tt},enumerable:!1,configurable:!0}),e}(),Object.defineProperties(K.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(K.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Yt(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function qt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof K}mt=function(){return 1};try{Object.defineProperty(mt,"name",{value:"size",configurable:!0})}catch{}te=function(){function e(e){m(e,1,"CountQueuingStrategy"),e=Xt(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Wt(this))throw Ut("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Wt(this))throw Ut("size");return mt},enumerable:!1,configurable:!0}),e}(),Object.defineProperties(te.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(te.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ut(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function Wt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof te}function Hs(e,t){h(e,t);var n=e?.flush,i=e?.readableType,s=e?.start,o=e?.transform,a=e?.writableType;return{flush:n===void 0?void 0:Is(n,e,t+" has member 'flush' that"),readableType:i,start:s===void 0?void 0:Bs(s,e,t+" has member 'start' that"),transform:o===void 0?void 0:Vs(o,e,t+" has member 'transform' that"),writableType:a}}function Is(e,t,n){return r(e,n),function(n){return k(e,t,[n])}}function Bs(e,t,n){return r(e,n),function(n){return Le(e,t,[n])}}function Vs(e,t,n){return r(e,n),function(n,s){return k(e,t,[n,s])}}ee=function(){function e(e,t,n){e===void 0&&(e={}),t===void 0&&(t={}),n===void 0&&(n={}),e===void 0&&(e=null);var i,r,c,l,d,h,a=ge(t,"Second parameter"),u=ge(n,"Third parameter"),s=Hs(e,"First parameter");if(s.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(s.writableType!==void 0)throw new RangeError("Invalid writableType specified");r=se(u,0),c=pe(u),l=se(a,1),d=pe(a),h=o(function(e){i=e}),Ws(this,h,l,d,r,c),Zs(this,s),i(s.start!==void 0?s.start(this._transformStreamController):void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!$t(this))throw Sn("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!$t(this))throw Sn("writable");return this._writable},enumerable:!1,configurable:!0}),e}(),Object.defineProperties(ee.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(ee.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});function Ws(e,t,n,o,i,a){function r(){return t}function c(t){return oo(e,t)}function l(t){return io(e,t)}function d(){return ao(e)}e._writable=lo(r,c,d,l,n,o);function u(){return ro(e)}function h(t){return Ae(e,t),s(void 0)}e._readable=pt(r,u,h,i,a),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,de(e,!0),e._transformStreamController=void 0}function $t(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof ee}function ye(e,t){y(e._readable._readableStreamController,t),Ae(e,t)}function Ae(e,t){Lt(e._transformStreamController),st(e._writable._writableStreamController,t),e._backpressure&&de(e,!1)}function de(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=o(function(t){e._backpressureChangePromise_resolve=t}),e._backpressure=t}B=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!me(this))throw Te("desiredSize");var e=this._controlledTransformStream._readable._readableStreamController;return Je(e)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(e){if(e===void 0&&(e=void 0),!me(this))throw Te("enqueue");Dt(this,e)},e.prototype.error=function(e){if(e===void 0&&(e=void 0),!me(this))throw Te("error");to(this,e)},e.prototype.terminate=function(){if(!me(this))throw Te("terminate");so(this)},e}(),Object.defineProperties(B.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(B.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function me(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof B}function Qs(e,t,n,s){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=n,t._flushAlgorithm=s}function Zs(e,n){var o=Object.create(B.prototype),i=function(e){try{return Dt(o,e),s(void 0)}catch(e){return t(e)}},a=function(){return s(void 0)};n.transform!==void 0&&(i=function(e){return n.transform(e,o)}),n.flush!==void 0&&(a=function(){return n.flush(o)}),Qs(e,o,i,a)}function Lt(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Dt(e,t){var o,n=e._controlledTransformStream,s=n._readable._readableStreamController;if(!z(s))throw new TypeError("Readable side is not in a state that permits enqueue");try{_e(s,t)}catch(e){throw Ae(n,e),n._readable._storedError}o=es(s),o!==n._backpressure&&de(n,!0)}function to(e,t){ye(e._controlledTransformStream,t)}function Tt(e,t){var n=e._transformAlgorithm(t);return F(n,void 0,function(t){throw ye(e._controlledTransformStream,t),t})}function so(e){var n,t=e._controlledTransformStream,s=t._readable._readableStreamController;Q(s),n=new TypeError("TransformStream terminated"),Ae(t,n)}function oo(e,t){var s,n=e._transformStreamController;return e._backpressure?(s=e._backpressureChangePromise,F(s,function(){var s=e._writable,o=s._state;if(o==="erroring")throw s._storedError;return Tt(n,t)})):Tt(n,t)}function io(e,t){return ye(e,t),s(void 0)}function ao(e){var t=e._readable,n=e._transformStreamController,s=n._flushAlgorithm();return Lt(n),F(s,function(){if(t._state==="errored")throw t._storedError;Q(t._readableStreamController)},function(n){throw ye(e,n),t._storedError})}function ro(e){return de(e,!1),e._backpressureChangePromise}function Te(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function Sn(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}e.ByteLengthQueuingStrategy=K,e.CountQueuingStrategy=te,e.ReadableByteStreamController=C,e.ReadableStream=p,e.ReadableStreamBYOBReader=V,e.ReadableStreamBYOBRequest=R,e.ReadableStreamDefaultController=M,e.ReadableStreamDefaultReader=N,e.TransformStream=ee,e.TransformStreamDefaultController=B,e.WritableStream=$,e.WritableStreamDefaultController=T,e.WritableStreamDefaultWriter=P,Object.defineProperty(e,"__esModule",{value:!0})})}}),o=e({"(disabled):fs"(){}}),m=e({"(disabled):canvas"(){}}),f=e({"(disabled):zlib"(){}}),p=e({"(disabled):http"(){}}),g=e({"(disabled):https"(){}}),v=e({"(disabled):url"(){}}),b=e({"node_modules/pdfjs-dist/legacy/build/pdf.js"(e,t){(function(s,o){typeof e=="object"&&typeof t=="object"?t.exports=o():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],o):typeof e=="object"?e["pdfjs-dist/build/pdf"]=o():s["pdfjs-dist/build/pdf"]=s.pdfjsLib=o()})(globalThis,()=>(()=>{var t,s=[,(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.arrayByteLength=P,t.arraysToBytes=we,t.assert=de,t.bytesToString=je,t.createPromiseCapability=Be,t.createValidAbsoluteUrl=le,t.escapeString=ze,t.getModificationDate=Ie,t.getVerbosityLevel=he,t.info=ue,t.isArrayBuffer=Pe,t.isArrayEqual=He,t.isAscii=De,t.objectFromMap=Ce,t.objectSize=xe,t.setVerbosityLevel=me,t.shadow=m,t.string32=Oe,t.stringToBytes=v,t.stringToPDFString=Te,t.stringToUTF16BEString=Ne,t.stringToUTF8String=oe,t.unreachable=c,t.utf8StringToString=Re,t.warn=ie,n(2);function d(e){return Me(e)||Fe(e)||b(e)||Le()}function Le(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fe(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Me(e){if(Array.isArray(e))return g(e)}function Se(e,t){return ye(e)||_e(e,t)||b(e,t)||Ae()}function Ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _e(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function ye(e){if(Array.isArray(e))return e}function be(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=b(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function b(e,t){if(!e)return;if(typeof e=="string")return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}function g(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function l(e){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function x(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},j(e,t)}function a(e){var t=pe();return function(){var s,i,o=p(e);return t?(i=p(this).constructor,s=Reflect.construct(o,arguments,i)):s=o.apply(this,arguments),ve(this,s)}}function ve(e,t){if(t&&(l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ge(e)}function ge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(e)}var o,u,h,f,y,_,w,O,C,E,k,A,S,M,F,T,z,D,N,L,R,H,I,B,V,$,W,U,K,q,Y,G,X,Q,Z,J,fe=[1,0,0,1,0,0],re,ae,ee,se,ne,te;t.IDENTITY_MATRIX=fe,E=[.001,0,0,.001,0,0],t.FONT_IDENTITY_MATRIX=E,k=1.35,t.LINE_FACTOR=k,A=.35,t.LINE_DESCENT_FACTOR=A,S={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},t.RenderingIntentFlag=S,M={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},t.AnnotationMode=M,F="pdfjs_internal_editor_",t.AnnotationEditorPrefix=F,y={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},t.AnnotationEditorType=y,z={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},t.AnnotationEditorParamsType=z,D={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.PermissionFlag=D,N={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.TextRenderingMode=N,L={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.ImageKind=L,R={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationType=R,re={MARKED:"Marked",REVIEW:"Review"},t.AnnotationStateModelType=re,H={MARKED:"Marked",UNMARKED:"Unmarked"},t.AnnotationMarkedState=H,I={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},t.AnnotationReviewState=I,B={GROUP:"Group",REPLY:"R"},t.AnnotationReplyType=B,V={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFlag=V,$={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationFieldFlag=$,W={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationBorderStyleType=W,U={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.AnnotationActionEventType=U,K={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.DocumentActionEventType=K,q={O:"PageOpen",C:"PageClose"},t.PageActionEventType=q,Y={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},t.StreamType=Y,ae={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"},t.FontType=ae,h={ERRORS:0,WARNINGS:1,INFOS:5},t.VerbosityLevel=h,Q={NONE:0,BINARY:1,STREAM:2},t.CMapCompressionType=Q,Z={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.OPS=Z,J={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},t.UNSUPPORTED_FEATURES=J,ee={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},t.PasswordResponses=ee,u=h.WARNINGS;function me(e){Number.isInteger(e)&&(u=e)}function he(){return u}function ue(e){u>=h.INFOS&&console.log("Info: ".concat(e))}function ie(e){u>=h.WARNINGS&&console.log("Warning: ".concat(e))}function c(e){throw new Error(e)}function de(e,t){e||c(t)}function ce(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function le(e){var n,s,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e)return null;try{if(t&&typeof e=="string"&&(t.addDefaultProtocol&&e.startsWith("www.")&&(n=e.match(/\./g),n&&n.length>=2&&(e="http://".concat(e))),t.tryConvertEncoding))try{e=oe(e)}catch{}if(s=o?new URL(e,o):new URL(e),ce(s))return s}catch{}return null}function m(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}o=function(){function t(e,n){this.constructor===t&&c("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}(),t.BaseException=o,se=function(e){r(t,e);var n=a(t);function t(e,s){var o;return i(this,t),o=n.call(this,e,"PasswordException"),o.code=s,o}return s(t)}(o),t.PasswordException=se,ne=function(e){r(t,e);var n=a(t);function t(e,s){var o;return i(this,t),o=n.call(this,e,"UnknownErrorException"),o.details=s,o}return s(t)}(o),t.UnknownErrorException=ne,C=function(e){r(t,e);var n=a(t);function t(e){return i(this,t),n.call(this,e,"InvalidPDFException")}return s(t)}(o),t.InvalidPDFException=C,O=function(e){r(t,e);var n=a(t);function t(e){return i(this,t),n.call(this,e,"MissingPDFException")}return s(t)}(o),t.MissingPDFException=O,w=function(e){r(t,e);var n=a(t);function t(e,s){var o;return i(this,t),o=n.call(this,e,"UnexpectedResponseException"),o.status=s,o}return s(t)}(o),t.UnexpectedResponseException=w,_=function(e){r(t,e);var n=a(t);function t(e){return i(this,t),n.call(this,e,"FormatError")}return s(t)}(o),t.FormatError=_,T=function(e){r(t,e);var n=a(t);function t(e){return i(this,t),n.call(this,e,"AbortException")}return s(t)}(o),t.AbortException=T;function je(e){(l(e)!=="object"||e===null||e.length===void 0)&&c("Invalid argument for bytesToString");var t,o,i,a,n=e.length,s=8192;if(n<s)return String.fromCharCode.apply(null,e);o=[];for(t=0;t<n;t+=s)i=Math.min(t+s,n),a=e.subarray(t,i),o.push(String.fromCharCode.apply(null,a));return o.join("")}function v(e){typeof e!="string"&&c("Invalid argument for stringToBytes");for(var n=e.length,s=new Uint8Array(n),t=0;t<n;++t)s[t]=e.charCodeAt(t)&255;return s}function P(e){if(e.length!==void 0)return e.length;if(e.byteLength!==void 0)return e.byteLength;c("Invalid argument for arrayByteLength")}function we(e){var t,n,s,o,i,a,c,r=e.length;if(r===1&&e[0]instanceof Uint8Array)return e[0];o=0;for(n=0;n<r;n++)o+=P(e[n]);i=0,a=new Uint8Array(o);for(s=0;s<r;s++)t=e[s],t instanceof Uint8Array||(typeof t=="string"?t=v(t):t=new Uint8Array(t)),c=t.byteLength,a.set(t,i),i+=c;return a}function Oe(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function xe(e){return Object.keys(e).length}function Ce(e){n=Object.create(null),t=be(e);try{for(t.s();!(s=t.n()).done;){var t,n,s,o=Se(s.value,2),i=o[0],a=o[1];n[i]=a}}catch(e){t.e(e)}finally{t.f()}return n}function Ee(){var t,e=new Uint8Array(4);return e[0]=1,t=new Uint32Array(e.buffer,0,1),t[0]===1}function ke(){try{return new Function(""),!0}catch{return!1}}G=function(){function e(){i(this,e)}return s(e,null,[{key:"isLittleEndian",get:function(){return m(this,"isLittleEndian",Ee())}},{key:"isEvalSupported",get:function(){return m(this,"isEvalSupported",ke())}},{key:"isOffscreenCanvasSupported",get:function(){return m(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}}]),e}(),t.FeatureTest=G,f=d(Array(256).keys()).map(function(e){return e.toString(16).padStart(2,"0")}),X=function(){function e(){i(this,e)}return s(e,null,[{key:"makeHexColor",value:function(t,n,s){return"#".concat(f[t]).concat(f[n]).concat(f[s])}},{key:"scaleMinMax",value:function(t,n){var s;t[0]?(t[0]<0&&(s=n[0],n[0]=n[1],n[1]=s),n[0]*=t[0],n[1]*=t[0],t[3]<0&&(s=n[2],n[2]=n[3],n[3]=s),n[2]*=t[3],n[3]*=t[3]):(s=n[0],n[0]=n[2],n[2]=s,s=n[1],n[1]=n[3],n[3]=s,t[1]<0&&(s=n[2],n[2]=n[3],n[3]=s),n[2]*=t[1],n[3]*=t[1],t[2]<0&&(s=n[0],n[0]=n[1],n[1]=s),n[0]*=t[2],n[1]*=t[2]),n[0]+=t[4],n[1]+=t[4],n[2]+=t[5],n[3]+=t[5]}},{key:"transform",value:function(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}},{key:"applyTransform",value:function(t,n){var s=t[0]*n[0]+t[1]*n[2]+n[4],o=t[0]*n[1]+t[1]*n[3]+n[5];return[s,o]}},{key:"applyInverseTransform",value:function(t,n){var s=n[0]*n[3]-n[1]*n[2],o=(t[0]*n[3]-t[1]*n[2]+n[2]*n[5]-n[4]*n[3])/s,i=(-t[0]*n[1]+t[1]*n[0]+n[4]*n[1]-n[5]*n[0])/s;return[o,i]}},{key:"getAxialAlignedBoundingBox",value:function(n,s){var o=e.applyTransform(n,s),i=e.applyTransform(n.slice(2,4),s),a=e.applyTransform([n[0],n[3]],s),r=e.applyTransform([n[2],n[1]],s);return[Math.min(o[0],i[0],a[0],r[0]),Math.min(o[1],i[1],a[1],r[1]),Math.max(o[0],i[0],a[0],r[0]),Math.max(o[1],i[1],a[1],r[1])]}},{key:"inverseTransform",value:function(t){var n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}},{key:"apply3dTransform",value:function(t,n){return[t[0]*n[0]+t[1]*n[1]+t[2]*n[2],t[3]*n[0]+t[4]*n[1]+t[5]*n[2],t[6]*n[0]+t[7]*n[1]+t[8]*n[2]]}},{key:"singularValueDecompose2dScale",value:function(t){var n=[t[0],t[2],t[1],t[3]],s=t[0]*n[0]+t[1]*n[2],r=t[0]*n[1]+t[1]*n[3],c=t[2]*n[0]+t[3]*n[2],o=t[2]*n[1]+t[3]*n[3],i=(s+o)/2,a=Math.sqrt(Math.pow(s+o,2)-4*(s*o-c*r))/2,l=i+a||1,d=i-a||1;return[Math.sqrt(l),Math.sqrt(d)]}},{key:"normalizeRect",value:function(t){var n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}},{key:"intersect",value:function(t,n){var s,o,i=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));return i>a?null:(s=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3])),s>o?null:[i,s,a,o])}},{key:"bezierBoundingBox",value:function(t,n,s,o,i,a,r,c){for(var l,u,m,f,p,g,b,j,y,_,w,v=[],h=[[],[]],O=0;O<2;++O){if(O===0?(m=6*t-12*s+6*i,p=-3*t+9*s-9*i+3*r,j=3*s-3*t):(m=6*n-12*o+6*a,p=-3*n+9*o-9*a+3*c,j=3*o-3*n),Math.abs(p)<1e-12){if(Math.abs(m)<1e-12)continue;l=-j/m,0<l&&l<1&&v.push(l);continue}if(_=m*m-4*j*p,w=Math.sqrt(_),_<0)continue;b=(-m+w)/(2*p),0<b&&b<1&&v.push(b),y=(-m-w)/(2*p),0<y&&y<1&&v.push(y)}for(g=v.length,f=g;g--;)l=v[g],u=1-l,h[0][g]=u*u*u*t+3*u*u*l*s+3*u*l*l*i+l*l*l*r,h[1][g]=u*u*u*n+3*u*u*l*o+3*u*l*l*a+l*l*l*c;return h[0][f]=t,h[1][f]=n,h[0][f+1]=r,h[1][f+1]=c,h[0].length=h[1].length=f+2,[Math.min.apply(Math,d(h[0])),Math.min.apply(Math,d(h[1])),Math.max.apply(Math,d(h[0])),Math.max.apply(Math,d(h[1]))]}}]),e}(),t.Util=X,te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Te(e){if(e[0]>="\xEF"&&(e[0]==="\xFE"&&e[1]==="\xFF"?t="utf-16be":e[0]==="\xFF"&&e[1]==="\xFE"?t="utf-16le":e[0]==="\xEF"&&e[1]==="\xBB"&&e[2]==="\xBF"&&(t="utf-8"),t))try{return i=new TextDecoder(t,{fatal:!0}),a=v(e),i.decode(a)}catch(e){ie('stringToPDFString: "'.concat(e,'".'))}s=[];for(var t,s,o,i,a,n=0,r=e.length;n<r;n++)o=te[e.charCodeAt(n)],s.push(o?String.fromCharCode(o):e.charAt(n));return s.join("")}function ze(e){return e.replace(/([()\\\n\r])/g,function(e){return e===`
`?`\\n`:e===``?`\\r`:"\\".concat(e)})}function De(e){return/^[\x00-\x7F]*$/.test(e)}function Ne(e){t=["\xFE\xFF"];for(var t,s,n=0,o=e.length;n<o;n++)s=e.charCodeAt(n),t.push(String.fromCharCode(s>>8&255),String.fromCharCode(s&255));return t.join("")}function oe(e){return decodeURIComponent(escape(e))}function Re(e){return unescape(encodeURIComponent(e))}function Pe(e){return l(e)==="object"&&e!==null&&e.byteLength!==void 0}function He(e,t){if(e.length!==t.length)return!1;for(var n=0,s=e.length;n<s;n++)if(e[n]!==t[n])return!1;return!0}function Ie(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date,t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")}function Be(){var e=Object.create(null),t=!1;return Object.defineProperty(e,"settled",{get:function(){return t}}),e.promise=new Promise(function(n,s){e.resolve=function(e){t=!0,n(e)},e.reject=function(e){t=!0,s(e)}}),e}},(e,t,n)=>{"use strict";var s=n(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,function(){if(globalThis.btoa||!s.isNodeJS)return;globalThis.btoa=function(e){return Buffer.from(e,"binary").toString("base64")}}(),function(){if(globalThis.atob||!s.isNodeJS)return;globalThis.atob=function(e){return Buffer.from(e,"base64").toString("binary")}}(),function(){if(globalThis.DOMMatrix||!s.isNodeJS)return;globalThis.DOMMatrix=d()}(),function(){if(globalThis.ReadableStream||!s.isNodeJS)return;globalThis.ReadableStream=u().ReadableStream}(),function(){if(Array.prototype.at)return;n(4)}(),function(){if(Uint8Array.prototype.at)return;n(76)}(),function(){if(globalThis.structuredClone)return;n(86)}())},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;function n(e){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var s=(typeof process=="undefined"?"undefined":n(process))==="object"&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=s},(e,t,n)=>{n(5);var s=n(75);e.exports=s("Array","at")},(e,t,n)=>{"use strict";var s=n(6),o=n(41),i=n(65),a=n(63),r=n(70);s({target:"Array",proto:!0},{at:function(t){var r=o(this),c=i(r),n=a(t),s=n>=0?n:c+n;return s<0||s>=c?void 0:r[s]}}),r("at")},(e,t,n)=>{var s=n(7),o=n(8).f,i=n(45),a=n(49),r=n(39),c=n(57),l=n(69);e.exports=function(e,t){var n,d,u,h,f,p,m=e.target,g=e.global,v=e.stat;if(g?d=s:v?d=s[m]||r(m,{}):d=(s[m]||{}).prototype,d)for(u in t){if(h=t[u],e.dontCallGetSet?(f=o(d,u),n=f&&f.value):n=d[u],p=l(g?u:m+(v?".":"#")+u,e.forced),!p&&n!==void 0){if(typeof h==typeof n)continue;c(h,n)}(e.sham||n&&n.sham)&&i(h,"sham",!0),a(d,u,h,e)}}},e=>{var t=function(e){return e&&e.Math==Math&&e};e.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof global=="object"&&global)||function(){return this}()||Function("return this")()},(e,t,n)=>{var o=n(9),i=n(11),u=n(13),a=n(14),r=n(15),c=n(20),l=n(40),d=n(43),s=Object.getOwnPropertyDescriptor;t.f=o?s:function(t,n){if(t=r(t),n=c(n),d)try{return s(t,n)}catch{}if(l(t,n))return a(!i(u.f,t,n),t[n])}},(e,t,n)=>{var s=n(10);e.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},e=>{e.exports=function(e){try{return!!e()}catch{return!0}}},(e,t,n)=>{var o=n(12),s=Function.prototype.call;e.exports=o?s.bind(s):function(){return s.apply(s,arguments)}},(e,t,n)=>{var s=n(10);e.exports=!s(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})},(e,t)=>{"use strict";var n={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,o=s&&!n.call({1:2},1);t.f=o?function(t){var n=s(this,t);return!!n&&n.enumerable}:n},e=>{e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},(e,t,n)=>{var s=n(16),o=n(19);e.exports=function(e){return s(o(e))}},(e,t,n)=>{var o=n(17),i=n(10),a=n(18),s=Object,r=o("".split);e.exports=i(function(){return!s("z").propertyIsEnumerable(0)})?function(e){return a(e)=="String"?r(e,""):s(e)}:s},(e,t,n)=>{var o=n(12),i=Function.prototype,a=i.bind,s=i.call,r=o&&a.bind(s,s);e.exports=o?function(e){return e&&r(e)}:function(e){return e&&function(){return s.apply(e,arguments)}}},(e,t,n)=>{var s=n(17),o=s({}.toString),i=s("".slice);e.exports=function(e){return i(o(e),8,-1)}},e=>{var t=TypeError;e.exports=function(e){if(e==null)throw t("Can't call method on "+e);return e}},(e,t,n)=>{var s=n(21),o=n(24);e.exports=function(e){var t=s(e,"string");return o(t)?t:t+""}},(e,t,n)=>{var i=n(11),s=n(22),o=n(24),a=n(31),r=n(34),c=n(35),l=TypeError,d=c("toPrimitive");e.exports=function(e,t){if(!s(e)||o(e))return e;var n,c=a(e,d);if(c){if(t===void 0&&(t="default"),n=i(c,e,t),!s(n)||o(n))return n;throw l("Can't convert object to primitive value")}return t===void 0&&(t="number"),r(e,t)}},(e,t,n)=>{var s=n(23);e.exports=function(e){return typeof e=="object"?e!==null:s(e)}},e=>{e.exports=function(e){return typeof e=="function"}},(e,t,n)=>{var s=n(25),o=n(23),i=n(26),a=n(27),r=Object;e.exports=a?function(e){return typeof e=="symbol"}:function(e){var t=s("Symbol");return o(t)&&i(t.prototype,r(e))}},(e,t,n)=>{var s=n(7),o=n(23),i=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(s[e]):s[e]&&s[e][t]}},(e,t,n)=>{var s=n(17);e.exports=s({}.isPrototypeOf)},(e,t,n)=>{var s=n(28);e.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(e,t,n)=>{var s=n(29),o=n(10);e.exports=!!Object.getOwnPropertySymbols&&!o(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&s&&s<41})},(e,t,n)=>{var s,o,d=n(7),i=n(30),a=d.process,r=d.Deno,c=a&&a.versions||r&&r.version,l=c&&c.v8;l&&(s=l.split("."),o=s[0]>0&&s[0]<4?1:+(s[0]+s[1])),!o&&i&&(s=i.match(/Edge\/(\d+)/),(!s||s[1]>=74)&&(s=i.match(/Chrome\/(\d+)/),s&&(o=+s[1]))),e.exports=o},(e,t,n)=>{var s=n(25);e.exports=s("navigator","userAgent")||""},(e,t,n)=>{var s=n(32);e.exports=function(e,t){var n=e[t];return n==null?void 0:s(n)}},(e,t,n)=>{var s=n(23),o=n(33),i=TypeError;e.exports=function(e){if(s(e))return e;throw i(o(e)+" is not a function")}},e=>{var t=String;e.exports=function(e){try{return t(e)}catch{return"Object"}}},(e,t,n)=>{var s=n(11),o=n(23),i=n(22),a=TypeError;e.exports=function(e,t){var n,r;if(t==="string"&&o(n=e.toString)&&!i(r=s(n,e)))return r;if(o(n=e.valueOf)&&!i(r=s(n,e)))return r;if(t!=="string"&&o(n=e.toString)&&!i(r=s(n,e)))return r;throw a("Can't convert object to primitive value")}},(e,t,n)=>{var d=n(7),u=n(36),i=n(40),l=n(42),a=n(28),r=n(27),o=u("wks"),s=d.Symbol,c=s&&s.for,h=r?s:s&&s.withoutSetter||l;e.exports=function(e){if(!i(o,e)||!a&&typeof o[e]!="string"){var t="Symbol."+e;a&&i(s,e)?o[e]=s[e]:r&&c?o[e]=c(t):o[e]=h(t)}return o[e]}},(e,t,n)=>{var o=n(37),s=n(38);(e.exports=function(e,t){return s[e]||(s[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.23.5",mode:o?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.5/LICENSE",source:"https://github.com/zloirock/core-js"})},e=>{e.exports=!1},(e,t,n)=>{var o=n(7),i=n(39),s="__core-js_shared__",a=o[s]||i(s,{});e.exports=a},(e,t,n)=>{var s=n(7),o=Object.defineProperty;e.exports=function(e,t){try{o(s,e,{value:t,configurable:!0,writable:!0})}catch{s[e]=t}return t}},(e,t,n)=>{var s=n(17),o=n(41),i=s({}.hasOwnProperty);e.exports=Object.hasOwn||function(t,n){return i(o(t),n)}},(e,t,n)=>{var s=n(19),o=Object;e.exports=function(e){return o(s(e))}},(e,t,n)=>{var s=n(17),o=0,i=Math.random(),a=s(1..toString);e.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+a(++o+i,36)}},(e,t,n)=>{var s=n(9),o=n(10),i=n(44);e.exports=!s&&!o(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!=7})},(e,t,n)=>{var i=n(7),o=n(22),s=i.document,a=o(s)&&o(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},(e,t,n)=>{var s=n(9),o=n(46),i=n(14);e.exports=s?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},(e,t,n)=>{var u=n(9),l=n(43),m=n(47),s=n(48),c=n(20),d=TypeError,o=Object.defineProperty,h=Object.getOwnPropertyDescriptor,i="enumerable",r="configurable",a="writable";t.f=u?m?function(t,n,l){if(s(t),n=c(n),s(l),typeof t=="function"&&n==="prototype"&&"value"in l&&a in l&&!l[a]){var d=h(t,n);d&&d[a]&&(t[n]=l.value,l={configurable:r in l?l[r]:d[r],enumerable:i in l?l[i]:d[i],writable:!1})}return o(t,n,l)}:o:function(t,n,i){if(s(t),n=c(n),s(i),l)try{return o(t,n,i)}catch{}if("get"in i||"set"in i)throw d("Accessors not supported");return"value"in i&&(t[n]=i.value),t}},(e,t,n)=>{var s=n(9),o=n(10);e.exports=s&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(e,t,n)=>{var s=n(22),o=String,i=TypeError;e.exports=function(e){if(s(e))return e;throw i(o(e)+" is not an object")}},(e,t,n)=>{var s=n(23),o=n(46),i=n(50),a=n(39);e.exports=function(e,t,n,r){r||(r={});var c=r.enumerable,l=r.name!==void 0?r.name:t;if(s(n)&&i(n,l,r),r.global)c?e[t]=n:a(t,n);else{try{r.unsafe?e[t]&&(c=!0):delete e[t]}catch{}c?e[t]=n:o.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e}},(e,t,n)=>{var r=n(10),h=n(23),o=n(40),i=n(9),l=n(51).CONFIGURABLE,c=n(52),a=n(53),d=a.enforce,u=a.get,s=Object.defineProperty,m=i&&!r(function(){return s(function(){},"length",{value:8}).length!==8}),f=String(String).split("String"),p=e.exports=function(e,t,n){String(t).slice(0,7)==="Symbol("&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||l&&e.name!==t)&&(i?s(e,"name",{value:t,configurable:!0}):e.name=t),m&&n&&o(n,"arity")&&e.length!==n.arity&&s(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?i&&s(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var a=d(e);return o(a,"source")||(a.source=f.join(typeof t=="string"?t:"")),e};Function.prototype.toString=p(function(){return h(this)&&u(this).source||c(this)},"toString")},(e,t,n)=>{var s=n(9),a=n(40),i=Function.prototype,r=s&&Object.getOwnPropertyDescriptor,o=a(i,"name"),c=o&&function(){}.name==="something",l=o&&(!s||s&&r(i,"name").configurable);e.exports={EXISTS:o,PROPER:c,CONFIGURABLE:l}},(e,t,n)=>{var o=n(17),i=n(23),s=n(38),a=o(Function.toString);i(s.inspectSource)||(s.inspectSource=function(e){return a(e)}),e.exports=s.inspectSource},(e,t,n)=>{var s,o,i,a,r,d,m,g,x=n(54),p=n(7),h=n(17),O=n(22),w=n(45),c=n(40),l=n(38),_=n(55),y=n(56),f="Object already initialized",u=p.TypeError,v=p.WeakMap,b=function(e){return r(e)?i(e):a(e,{})},j=function(e){return function(t){var n;if(!O(t)||(n=i(t)).type!==e)throw u("Incompatible receiver, "+e+" required");return n}};x||l.state?(s=l.state||(l.state=new v),g=h(s.get),d=h(s.has),m=h(s.set),a=function(e,t){if(d(s,e))throw new u(f);return t.facade=e,m(s,e,t),t},i=function(e){return g(s,e)||{}},r=function(e){return d(s,e)}):(o=_("state"),y[o]=!0,a=function(e,t){if(c(e,o))throw new u(f);return t.facade=e,w(e,o,t),t},i=function(e){return c(e,o)?e[o]:{}},r=function(e){return c(e,o)}),e.exports={set:a,get:i,has:r,enforce:b,getterFor:j}},(e,t,n)=>{var o=n(7),i=n(23),a=n(52),s=o.WeakMap;e.exports=i(s)&&/native code/.test(a(s))},(e,t,n)=>{var o=n(36),i=n(42),s=o("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},e=>{e.exports={}},(e,t,n)=>{var s=n(40),o=n(58),i=n(8),a=n(46);e.exports=function(e,t,n){for(var r,l=o(t),d=a.f,u=i.f,c=0;c<l.length;c++)r=l[c],!s(e,r)&&!(n&&s(n,r))&&d(e,r,u(t,r))}},(e,t,n)=>{var s=n(25),o=n(17),i=n(59),a=n(68),r=n(48),c=o([].concat);e.exports=s("Reflect","ownKeys")||function(t){var n=i.f(r(t)),s=a.f;return s?c(n,s(t)):n}},(e,t,n)=>{var s=n(60),o=n(67),i=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(t){return s(t,i)}},(e,t,n)=>{var i=n(17),s=n(40),a=n(15),r=n(61).indexOf,c=n(56),o=i([].push);e.exports=function(e,t){var n,l=a(e),d=0,i=[];for(n in l)!s(c,n)&&s(l,n)&&o(i,n);for(;t.length>d;)s(l,n=t[d++])&&(~r(i,n)||o(i,n));return i}},(e,t,n)=>{var o=n(15),i=n(62),a=n(65),s=function(e){return function(t,n,s){var d,c=o(t),l=a(c),r=i(s,l);if(e&&n!=n){for(;l>r;)if(d=c[r++],d!=d)return!0}else for(;l>r;r++)if((e||r in c)&&c[r]===n)return e||r||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},(e,t,n)=>{var s=n(63),o=Math.max,i=Math.min;e.exports=function(e,t){var n=s(e);return n<0?o(n+t,0):i(n,t)}},(e,t,n)=>{var s=n(64);e.exports=function(e){var t=+e;return t!==t||t===0?0:s(t)}},e=>{var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(s){var o=+s;return(o>0?n:t)(o)}},(e,t,n)=>{var s=n(66);e.exports=function(e){return s(e.length)}},(e,t,n)=>{var s=n(63),o=Math.min;e.exports=function(e){return e>0?o(s(e),9007199254740991):0}},e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(e,t)=>{t.f=Object.getOwnPropertySymbols},(e,t,n)=>{var o=n(10),i=n(23),a=/#|\.prototype\./,s=function(e,t){var n=c[r(e)];return n==d||n!=l&&(i(t)?o(t):!!t)},r=s.normalize=function(e){return String(e).replace(a,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",d=s.POLYFILL="P";e.exports=s},(e,t,n)=>{var i=n(35),a=n(71),r=n(46).f,s=i("unscopables"),o=Array.prototype;o[s]==void 0&&r(o,s,{configurable:!0,value:a(null)}),e.exports=function(e){o[s][e]=!0}},(e,t,n)=>{var o,y=n(48),j=n(72),m=n(67),p=n(56),g=n(74),f=n(44),v=n(55),d=">",u="<",r="prototype",a="script",c=v("IE_PROTO"),i=function(){},h=function(e){return u+a+d+e+u+"/"+a+d},l=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=f("iframe"),n="java"+a+":";return t.style.display="none",g.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(h("document.F=Object")),e.close(),e.F},s=function(){try{o=new ActiveXObject("htmlfile")}catch{}s=typeof document!="undefined"?document.domain&&o?l(o):b():l(o);for(var e=m.length;e--;)delete s[r][m[e]];return s()};p[c]=!0,e.exports=Object.create||function(t,n){var o;return t!==null?(i[r]=y(t),o=new i,i[r]=null,o[c]=t):o=s(),n===void 0?o:j.f(o,n)}},(e,t,n)=>{var s=n(9),o=n(47),i=n(46),a=n(48),r=n(15),c=n(73);t.f=s&&!o?Object.defineProperties:function(t,n){a(t);for(var l,d=r(n),s=c(n),u=s.length,o=0;u>o;)i.f(t,l=s[o++],d[l]);return t}},(e,t,n)=>{var s=n(60),o=n(67);e.exports=Object.keys||function(t){return s(t,o)}},(e,t,n)=>{var s=n(25);e.exports=s("document","documentElement")},(e,t,n)=>{var s=n(7),o=n(17);e.exports=function(e,t){return o(s[e].prototype[t])}},(e,t,n)=>{n(77)},(e,t,n)=>{"use strict";var s=n(78),o=n(65),i=n(63),a=s.aTypedArray,r=s.exportTypedArrayMethod;r("at",function(t){var r=a(this),c=o(r),n=i(t),s=n>=0?n:c+n;return s<0||s>=c?void 0:r[s]})},(e,t,n)=>{"use strict";var o,d,h,K=n(79),y=n(9),s=n(7),k=n(23),f=n(22),l=n(40),_=n(80),V=n(33),B=n(45),b=n(49),H=n(46).f,P=n(26),p=n(82),u=n(84),R=n(35),N=n(42),S=n(53),A=S.enforce,D=S.get,m=s.Int8Array,v=m&&m.prototype,F=s.Uint8ClampedArray,C=F&&F.prototype,a=m&&p(m),i=v&&p(v),z=Object.prototype,j=s.TypeError,M=R("toStringTag"),O=N("TYPED_ARRAY_TAG"),g="TypedArrayConstructor",c=K&&!!u&&_(s.opera)!=="Opera",E=!1,r={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},w={BigInt64Array:8,BigUint64Array:8},I=function(t){if(!f(t))return!1;var n=_(t);return n==="DataView"||l(r,n)||l(w,n)},T=function(e){var t,n=p(e);if(!f(n))return;return t=D(n),t&&l(t,g)?t[g]:T(n)},x=function(e){if(!f(e))return!1;var t=_(e);return l(r,t)||l(w,t)},$=function(e){if(x(e))return e;throw j("Target is not a typed array")},W=function(e){if(k(e)&&(!u||P(a,e)))return e;throw j(V(e)+" is not a typed array constructor")},U=function(e,t,n,o){if(!y)return;if(n)for(d in r){var d,a=s[d];if(a&&l(a.prototype,e))try{delete a.prototype[e]}catch{try{a.prototype[e]=t}catch{}}}(!i[e]||n)&&b(i,e,n?t:c&&v[e]||t,o)},L=function(e,t,n){var o,i;if(!y)return;if(u){if(n)for(i in r)if(o=s[i],o&&l(o,e))try{delete o[e]}catch{}if(!a[e]||n)try{return b(a,e,n?t:c&&a[e]||t)}catch{}else return}for(i in r)o=s[i],o&&(!o[e]||n)&&b(o,e,t)};for(o in r)d=s[o],h=d&&d.prototype,h?A(h)[g]=d:c=!1;for(o in w)d=s[o],h=d&&d.prototype,h&&(A(h)[g]=d);if((!c||!k(a)||a===Function.prototype)&&(a=function(){throw j("Incorrect invocation")},c))for(o in r)s[o]&&u(s[o],a);if((!c||!i||i===z)&&(i=a.prototype,c))for(o in r)s[o]&&u(s[o].prototype,i);if(c&&p(C)!==i&&u(C,i),y&&!l(i,M)){E=!0,H(i,M,{get:function(){return f(this)?this[O]:void 0}});for(o in r)s[o]&&B(s[o],O,o)}e.exports={NATIVE_ARRAY_BUFFER_VIEWS:c,TYPED_ARRAY_TAG:E&&O,aTypedArray:$,aTypedArrayConstructor:W,exportTypedArrayMethod:U,exportTypedArrayStaticMethod:L,getTypedArrayConstructor:T,isView:I,isTypedArray:x,TypedArray:a,TypedArrayPrototype:i}},e=>{e.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},(e,t,n)=>{var o=n(81),i=n(23),s=n(18),a=n(35),r=a("toStringTag"),c=Object,l=s(function(){return arguments}())=="Arguments",d=function(e,t){try{return e[t]}catch{}};e.exports=o?s:function(e){var t,n,o;return e===void 0?"Undefined":e===null?"Null":typeof(n=d(t=c(e),r))=="string"?n:l?s(t):(o=s(t))=="Object"&&i(t.callee)?"Arguments":o}},(e,t,n)=>{var o=n(35),i=o("toStringTag"),s={};s[i]="z",e.exports=String(s)==="[object z]"},(e,t,n)=>{var l=n(40),i=n(23),a=n(41),r=n(55),c=n(83),o=r("IE_PROTO"),s=Object,d=s.prototype;e.exports=c?s.getPrototypeOf:function(e){var n,t=a(e);return l(t,o)?t[o]:(n=t.constructor,i(n)&&t instanceof n?n.prototype:t instanceof s?d:null)}},(e,t,n)=>{var s=n(10);e.exports=!s(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},(e,t,n)=>{var s=n(17),o=n(48),i=n(85);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch{}return function(s,a){return o(s),i(a),t?e(s,a):s.__proto__=a,s}}():void 0)},(e,t,n)=>{var s=n(23),o=String,i=TypeError;e.exports=function(e){if(typeof e=="object"||s(e))return e;throw i("Can't set "+o(e)+" as a prototype")}},(e,t,n)=>{n(87),n(93),n(95),n(117),n(119);var s=n(128);e.exports=s.structuredClone},(e,t,n)=>{"use strict";var o,c=n(15),s=n(70),i=n(88),a=n(53),l=n(46).f,f=n(89),d=n(37),u=n(9),r="Array Iterator",h=a.set,m=a.getterFor(r);if(e.exports=f(Array,"Array",function(e,t){h(this,{type:r,target:c(e),index:0,kind:t})},function(){var t=m(this),n=t.target,s=t.kind,e=t.index++;return!n||e>=n.length?(t.target=void 0,{value:void 0,done:!0}):s=="keys"?{value:e,done:!1}:s=="values"?{value:n[e],done:!1}:{value:[e,n[e]],done:!1}},"values"),o=i.Arguments=i.Array,s("keys"),s("values"),s("entries"),!d&&u&&o.name!=="values")try{l(o,"name",{value:"values"})}catch{}},e=>{e.exports={}},(e,t,n)=>{"use strict";var C=n(6),x=n(11),i=n(37),h=n(51),O=n(23),w=n(90),l=n(82),d=n(84),_=n(92),y=n(45),r=n(49),v=n(35),p=n(88),g=n(91),j=h.PROPER,b=h.CONFIGURABLE,c=g.IteratorPrototype,a=g.BUGGY_SAFARI_ITERATORS,s=v("iterator"),u="keys",o="values",m="entries",f=function(){return this};e.exports=function(e,t,n,h,g,v,E){w(n,t,h);var A,F,z,T=function(e){if(e===g&&S)return S;if(!a&&e in k)return k[e];switch(e){case u:return function(){return new n(this,e)};case o:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this)}},L=t+" Iterator",D=!1,k=e.prototype,M=k[s]||k["@@iterator"]||g&&k[g],S=!a&&M||T(g),N=t=="Array"?k.entries||M:M;if(N&&(A=l(N.call(new e)),A!==Object.prototype&&A.next&&(!i&&l(A)!==c&&(d?d(A,c):O(A[s])||r(A,s,f)),_(A,L,!0,!0),i&&(p[L]=f))),j&&g==o&&M&&M.name!==o&&(!i&&b?y(k,"name",o):(D=!0,S=function(){return x(M,this)})),g)if(F={values:T(o),keys:v?S:T(u),entries:T(m)},E)for(z in F)(a||D||!(z in k))&&r(k,z,F[z]);else C({target:t,proto:!0,forced:a||D},F);return(!i||E)&&k[s]!==S&&r(k,s,S,{name:g}),p[t]=S,F}},(e,t,n)=>{"use strict";var s=n(91).IteratorPrototype,o=n(71),i=n(14),a=n(92),r=n(88),c=function(){return this};e.exports=function(e,t,n,l){var d=t+" Iterator";return e.prototype=o(s,{next:i(+!l,n)}),a(e,d,!1,!0),r[d]=c,e}},(e,t,n)=>{"use strict";var s,i,a,l,p=n(10),f=n(23),m=n(71),r=n(82),h=n(49),u=n(35),d=n(37),o=u("iterator"),c=!1;[].keys&&(i=[].keys(),"next"in i?(a=r(r(i)),a!==Object.prototype&&(s=a)):c=!0),l=s==null||p(function(){var e={};return s[o].call(e)!==e}),l?s={}:d&&(s=m(s)),f(s[o])||h(s,o,function(){return this}),e.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:c}},(e,t,n)=>{var o=n(46).f,i=n(40),a=n(35),s=a("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,s)&&o(e,s,{configurable:!0,value:t})}},(e,t,n)=>{var s=n(81),o=n(49),i=n(94);s||o(Object.prototype,"toString",i,{unsafe:!0})},(e,t,n)=>{"use strict";var s=n(81),o=n(80);e.exports=s?{}.toString:function(){return"[object "+o(this)+"]"}},(e,t,n)=>{n(96)},(e,t,n)=>{"use strict";var s=n(97),o=n(114);s("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},o)},(e,t,n)=>{"use strict";var a=n(6),m=n(7),h=n(17),i=n(69),r=n(49),c=n(98),l=n(105),d=n(111),u=n(23),o=n(22),s=n(10),f=n(112),p=n(92),g=n(113);e.exports=function(e,t,n){var O,C,k,A,S,_=e.indexOf("Map")!==-1,j=e.indexOf("Weak")!==-1,w=_?"set":"add",b=m[e],y=b&&b.prototype,v=b,E={},x=function(e){var t=h(y[e]);r(y,e,e=="add"?function(n){return t(this,n===0?0:n),this}:e=="delete"?function(e){return!(j&&!o(e))&&t(this,e===0?0:e)}:e=="get"?function(n){return j&&!o(n)?void 0:t(this,n===0?0:n)}:e=="has"?function(n){return!(j&&!o(n))&&t(this,n===0?0:n)}:function(n,s){return t(this,n===0?0:n,s),this})},M=i(e,!u(b)||!(j||y.forEach&&!s(function(){(new b).entries().next()})));return M?(v=n.getConstructor(t,e,_,w),c.enable()):i(e,!0)&&(O=new v,k=O[w](j?{}:-0,1)!=O,A=s(function(){O.has(1)}),S=f(function(e){new b(e)}),C=!j&&s(function(){for(var t=new b,e=5;e--;)t[w](e,e);return!t.has(-0)}),S||(v=t(function(e,t){d(e,y);var n=g(new b,e,v);return t!=null&&l(t,n[w],{that:n,AS_ENTRIES:_}),n}),v.prototype=y,y.constructor=v),(A||C)&&(x("delete"),x("has"),_&&x("get")),(C||k)&&x(w),j&&y.clear&&delete y.clear),E[e]=v,a({global:!0,constructor:!0,forced:v!=b},E),p(v,e),j||n.setStrong(v,e,_),v}},(e,t,n)=>{var l=n(6),v=n(17),p=n(56),f=n(22),i=n(40),u=n(46).f,r=n(59),d=n(99),a=n(102),h=n(42),m=n(104),c=!1,s=h("meta"),g=0,o=function(e){u(e,s,{value:{objectID:"O"+g++,weakData:{}}})},b=function(e,t){if(!f(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!i(e,s)){if(!a(e))return"F";if(!t)return"E";o(e)}return e[s].objectID},j=function(e,t){if(!i(e,s)){if(!a(e))return!0;if(!t)return!1;o(e)}return e[s].weakData},y=function(e){return m&&c&&a(e)&&!i(e,s)&&o(e),e},_=function(){w.enable=function(){},c=!0;var e=r.f,n=v([].splice),t={};t[s]=1,e(t).length&&(r.f=function(t){o=e(t);for(var o,i=0,a=o.length;i<a;i++)if(o[i]===s){n(o,i,1);break}return o},l({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},w=e.exports={enable:_,fastKey:b,getWeakData:j,onFreeze:y};p[s]=!0},(e,t,n)=>{var i=n(18),a=n(15),s=n(59).f,r=n(100),o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return s(e)}catch{return r(o)}};e.exports.f=function(t){return o&&i(t)=="Window"?c(t):s(a(t))}},(e,t,n)=>{var s=n(62),o=n(65),i=n(101),a=Array,r=Math.max;e.exports=function(e,t,n){for(var l=o(e),c=s(t,l),h=s(n===void 0?l:n,l),d=a(r(h-c,0)),u=0;c<h;c++,u++)i(d,u,e[c]);return d.length=u,d}},(e,t,n)=>{"use strict";var s=n(20),o=n(46),i=n(14);e.exports=function(e,t,n){var a=s(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},(e,t,n)=>{var i=n(10),a=n(22),r=n(18),o=n(103),s=Object.isExtensible,c=i(function(){s(1)});e.exports=c||o?function(t){return!!a(t)&&!(o&&r(t)=="ArrayBuffer")&&(!s||s(t))}:s},(e,t,n)=>{var s=n(10);e.exports=s(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})},(e,t,n)=>{var s=n(10);e.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},(e,t,n)=>{var p=n(106),f=n(11),h=n(48),l=n(33),r=n(107),c=n(65),o=n(26),d=n(108),u=n(109),i=n(110),m=TypeError,s=function(e,t){this.stopped=e,this.result=t},a=s.prototype;e.exports=function(e,t,n){var g,v,j,y,O,C,k,M=n&&n.that,S=!!(n&&n.AS_ENTRIES),x=!!(n&&n.IS_RECORD),A=!!(n&&n.IS_ITERATOR),w=!!(n&&n.INTERRUPTED),b=p(t,M),E=function(e){return v&&i(v,"normal",e),new s(!0,e)},_=function(e){return S?(h(e),w?b(e[0],e[1],E):b(e[0],e[1])):w?b(e,E):b(e)};if(x)v=e.iterator;else if(A)v=e;else{if(y=u(e),!y)throw m(l(e)+" is not iterable");if(r(y)){for(j=0,C=c(e);C>j;j++)if(g=_(e[j]),g&&o(a,g))return g;return new s(!1)}v=d(e,y)}for(k=x?e.next:v.next;!(O=f(k,v)).done;){try{g=_(O.value)}catch(e){i(v,"throw",e)}if(typeof g=="object"&&g&&o(a,g))return g}return new s(!1)}},(e,t,n)=>{var s=n(17),o=n(32),i=n(12),a=s(s.bind);e.exports=function(e,t){return o(e),t===void 0?e:i?a(e,t):function(){return e.apply(t,arguments)}}},(e,t,n)=>{var s=n(35),o=n(88),i=s("iterator"),a=Array.prototype;e.exports=function(e){return e!==void 0&&(o.Array===e||a[i]===e)}},(e,t,n)=>{var s=n(11),o=n(32),i=n(48),a=n(33),r=n(109),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?r(e):t;if(o(n))return i(s(n,e));throw c(a(e)+" is not iterable")}},(e,t,n)=>{var o=n(80),s=n(31),i=n(88),a=n(35),r=a("iterator");e.exports=function(e){if(e!=null)return s(e,r)||s(e,"@@iterator")||i[o(e)]}},(e,t,n)=>{var o=n(11),s=n(48),i=n(31);e.exports=function(e,t,n){var a,r;s(e);try{if(a=i(e,"return"),!a){if(t==="throw")throw n;return n}a=o(a,e)}catch(e){r=!0,a=e}if(t==="throw")throw n;if(r)throw a;return s(a),n}},(e,t,n)=>{var s=n(26),o=TypeError;e.exports=function(e,t){if(s(t,e))return e;throw o("Incorrect invocation")}},(e,t,n)=>{var s,a,r=n(35),o=r("iterator"),i=!1;try{a=0,s={next:function(){return{done:!!a++}},return:function(){i=!0}},s[o]=function(){return this},Array.from(s,function(){throw 2})}catch{}e.exports=function(e,t){if(!t&&!i)return!1;var n,s=!1;try{n={},n[o]=function(){return{next:function(){return{done:s=!0}}}},e(n)}catch{}return s}},(e,t,n)=>{var o=n(23),i=n(22),s=n(84);e.exports=function(e,t,n){var a,r;return s&&o(a=t.constructor)&&a!==n&&i(r=a.prototype)&&r!==n.prototype&&s(e,r),e}},(e,t,n)=>{"use strict";var p=n(46).f,f=n(71),a=n(115),m=n(106),h=n(111),u=n(105),l=n(89),d=n(116),s=n(9),c=n(98).fastKey,r=n(53),i=r.set,o=r.getterFor;e.exports={getConstructor:function(e,t,n,r){var v=e(function(e,o){h(e,d),i(e,{type:t,index:f(null),first:void 0,last:void 0,size:0}),s||(e.size=0),o!=null&&u(o,e[r],{that:e,AS_ENTRIES:n})}),d=v.prototype,l=o(t),b=function(e,t,n){var a,r,o=l(e),i=g(e,t);return i?i.value=n:(o.last=i={index:r=c(t,!0),key:t,value:n,previous:a=o.last,next:void 0,removed:!1},o.first||(o.first=i),a&&(a.next=i),s?o.size++:e.size++,r!=="F"&&(o.index[r]=i)),e},g=function(e,t){var n,s=l(e),o=c(t);if(o!=="F")return s.index[o];for(n=s.first;n;n=n.next)if(n.key==t)return n};return a(d,{clear:function(){for(var o=this,n=l(o),i=n.index,t=n.first;t;)t.removed=!0,t.previous&&(t.previous=t.previous.next=void 0),delete i[t.index],t=t.next;n.first=n.last=void 0,s?n.size=0:o.size=0},delete:function(e){var o,i,a=this,n=l(a),t=g(a,e);return t&&(o=t.next,i=t.previous,delete n.index[t.index],t.removed=!0,i&&(i.next=o),o&&(o.previous=i),n.first==t&&(n.first=o),n.last==t&&(n.last=i),s?n.size--:a.size--),!!t},forEach:function(t){for(var n,s=l(this),o=m(t,arguments.length>1?arguments[1]:void 0);n=n?n.next:s.first;)for(o(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!g(this,t)}}),a(d,n?{get:function(t){var n=g(this,t);return n&&n.value},set:function(t,n){return b(this,t===0?0:t,n)}}:{add:function(t){return b(this,t=t===0?0:t,t)}}),s&&p(d,"size",{get:function(){return l(this).size}}),v},setStrong:function(e,t,n){var s=t+" Iterator",a=o(t),r=o(s);l(e,t,function(e,t){i(this,{type:s,target:e,state:a(e),kind:t,last:void 0})},function(){for(var t=r(this),n=t.kind,e=t.last;e&&e.removed;)e=e.previous;return!t.target||!(t.last=e=e?e.next:t.state.first)?(t.target=void 0,{value:void 0,done:!0}):n=="keys"?{value:e.key,done:!1}:n=="values"?{value:e.value,done:!1}:{value:[e.key,e.value],done:!1}},n?"entries":"values",!n,!0),d(t)}}},(e,t,n)=>{var s=n(49);e.exports=function(e,t,n){for(var o in t)s(e,o,t[o],n);return e}},(e,t,n)=>{"use strict";var o=n(25),i=n(46),a=n(35),r=n(9),s=a("species");e.exports=function(e){var t=o(e),n=i.f;r&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},(e,t,n)=>{n(118)},(e,t,n)=>{"use strict";var s=n(97),o=n(114);s("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},o)},(e,t,n)=>{var ae=n(37),pe=n(6),s=n(7),m=n(25),a=n(17),g=n(10),fe=n(42),y=n(23),L=n(120),O=n(22),me=n(24),he=n(105),z=n(48),F=n(80),ue=n(40),ce=n(101),j=n(45),E=n(65),ie=n(121),oe=n(122),se=n(124),x=n(29),ne=n(125),Y=n(126),K=n(127),f=s.Object,k=s.Date,h=s.Error,W=s.EvalError,$=s.RangeError,V=s.ReferenceError,P=s.SyntaxError,N=s.TypeError,R=s.URIError,U=s.PerformanceMark,d=s.WebAssembly,H=d&&d.CompileError||h,I=d&&d.LinkError||h,B=d&&d.RuntimeError||h,l=m("DOMException"),T=m("Set"),p=m("Map"),_=p.prototype,A=a(_.has),q=a(_.get),v=a(_.set),G=a(T.prototype.add),X=m("Object","keys"),Q=a([].push),Z=a((!0).valueOf),J=a(1..valueOf),ee=a("".valueOf),te=a(k.prototype.getTime),C=fe("structuredClone"),u="DataCloneError",w="Transferring",S=function(e){return!g(function(){var t=new s.Set([7]),n=e(t),o=e(f(7));return n==t||!n.has(7)||typeof o!="object"||o!=7})&&e},M=function(e,t){return!g(function(){var s=new t,n=e({a:s,b:s});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===s.stack)})},re=function(e){return!g(function(){var t=e(new s.AggregateError([1],C,{cause:3}));return t.name!="AggregateError"||t.errors[0]!=1||t.message!=C||t.cause!=3})},c=s.structuredClone,le=ae||!M(c,h)||!M(c,l)||!re(c),de=!c&&S(function(e){return new U(C,{detail:e}).detail}),r=S(c)||de,b=function(e){throw new l("Uncloneable type: "+e,u)},i=function(e,t){throw new l((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",u)},o=function(e,t){if(me(e)&&b("Symbol"),!O(e))return e;if(t){if(A(t,e))return q(t,e)}else t=new p;var n,c,d,_,w,x,C,S,M,z,a=F(e),g=!1;switch(a){case"Array":n=[],g=!0;break;case"Object":n={},g=!0;break;case"Map":n=new p,g=!0;break;case"Set":n=new T,g=!0;break;case"RegExp":n=new RegExp(e.source,oe(e));break;case"Error":switch(w=e.name,w){case"AggregateError":n=m("AggregateError")([]);break;case"EvalError":n=W();break;case"RangeError":n=$();break;case"ReferenceError":n=V();break;case"SyntaxError":n=P();break;case"TypeError":n=N();break;case"URIError":n=R();break;case"CompileError":n=H();break;case"LinkError":n=I();break;case"RuntimeError":n=B();break;default:n=h()}g=!0;break;case"DOMException":n=new l(e.message,e.name),g=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":c=s[a],O(c)||i(a),n=new c(o(e.buffer,t),e.byteOffset,a==="DataView"?e.byteLength:e.length);break;case"DOMQuad":try{n=new DOMQuad(o(e.p1,t),o(e.p2,t),o(e.p3,t),o(e.p4,t))}catch{r?n=r(e):i(a)}break;case"FileList":if(c=s.DataTransfer,L(c)){x=new c;for(d=0,_=E(e);d<_;d++)x.items.add(o(e[d],t));n=x.files}else r?n=r(e):i(a);break;case"ImageData":try{n=new ImageData(o(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch{r?n=r(e):i(a)}break;default:if(r)n=r(e);else switch(a){case"BigInt":n=f(e.valueOf());break;case"Boolean":n=f(Z(e));break;case"Number":n=f(J(e));break;case"String":n=f(ee(e));break;case"Date":n=new k(te(e));break;case"ArrayBuffer":c=s.DataView,!c&&typeof e.slice!="function"&&i(a);try{if(typeof e.slice=="function")n=e.slice(0);else{_=e.byteLength,n=new ArrayBuffer(_),M=new c(e),z=new c(n);for(d=0;d<_;d++)z.setUint8(d,M.getUint8(d))}}catch{throw new l("ArrayBuffer is detached",u)}break;case"SharedArrayBuffer":n=e;break;case"Blob":try{n=e.slice(0,e.size,e.type)}catch{i(a)}break;case"DOMPoint":case"DOMPointReadOnly":c=s[a];try{n=c.fromPoint?c.fromPoint(e):new c(e.x,e.y,e.z,e.w)}catch{i(a)}break;case"DOMRect":case"DOMRectReadOnly":c=s[a];try{n=c.fromRect?c.fromRect(e):new c(e.x,e.y,e.width,e.height)}catch{i(a)}break;case"DOMMatrix":case"DOMMatrixReadOnly":c=s[a];try{n=c.fromMatrix?c.fromMatrix(e):new c(e)}catch{i(a)}break;case"AudioData":case"VideoFrame":y(e.clone)||i(a);try{n=e.clone()}catch{b(a)}break;case"File":try{n=new File([e],e.name,e)}catch{i(a)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":i(a);default:b(a)}}if(v(t,e,n),g)switch(a){case"Array":case"Object":C=X(e);for(d=0,_=E(C);d<_;d++)S=C[d],ce(n,S,o(e[S],t));break;case"Map":e.forEach(function(e,s){v(n,o(s,t),o(e,t))});break;case"Set":e.forEach(function(e){G(n,o(e,t))});break;case"Error":j(n,"message",o(e.message,t)),ue(e,"cause")&&j(n,"cause",o(e.cause,t)),w=="AggregateError"&&(n.errors=o(e.errors,t));case"DOMException":se&&j(n,"stack",o(e.stack,t))}return n},D=c&&!g(function(){if(Y&&x>92||K&&x>94||ne&&x>97)return!1;var e=new ArrayBuffer(8),t=c(e,{transfer:[e]});return e.byteLength!=0||t.byteLength!=8}),ge=function(e,t){if(!O(e))throw N("Transfer option cannot be converted to a sequence");var n,a,r,d,h,m,f,p,g,o=[];if(he(e,function(e){Q(o,z(e))}),a=0,h=E(o),D)for(p=c(o,{transfer:o});a<h;)v(t,o[a],p[a++]);else for(;a<h;){if(n=o[a++],A(t,n))throw new l("Duplicate transferable",u);switch(r=F(n),r){case"ImageBitmap":m=s.OffscreenCanvas,L(m)||i(r,w);try{f=new m(n.width,n.height),g=f.getContext("bitmaprenderer"),g.transferFromImageBitmap(n),d=f.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!y(n.clone)||!y(n.close))&&i(r,w);try{d=n.clone(),n.close()}catch{}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":i(r,w)}if(d===void 0)throw new l("This object cannot be transferred: "+r,u);v(t,n,d)}};pe({global:!0,enumerable:!0,sham:!D,forced:le},{structuredClone:function(t){var n,s=ie(arguments.length,1)>1&&arguments[1]!=null?z(arguments[1]):void 0,i=s?s.transfer:void 0;return i!==void 0&&(n=new p,ge(i,n)),o(t,n)}})},(e,t,n)=>{var g=n(17),p=n(10),a=n(23),h=n(80),u=n(25),d=n(52),i=function(){},l=[],r=u("Reflect","construct"),o=/^\s*(?:class|function)\b/,m=g(o.exec),f=!o.exec(i),s=function(t){if(!a(t))return!1;try{return r(i,l,t),!0}catch{return!1}},c=function(t){if(!a(t))return!1;switch(h(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!m(o,d(t))}catch{return!0}};c.sham=!0,e.exports=!r||p(function(){var e;return s(s.call)||!s(Object)||!s(function(){e=!0})||e})?c:s},e=>{var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},(e,t,n)=>{var o=n(11),i=n(40),a=n(26),r=n(123),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in s)&&!i(e,"flags")&&a(s,e)?o(r,e):t}},(e,t,n)=>{"use strict";var s=n(48);e.exports=function(){var t=s(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},(e,t,n)=>{var s=n(10),o=n(14);e.exports=!s(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),e.stack!==7)})},e=>{e.exports=typeof window=="object"&&typeof Deno!="object"},e=>{e.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(e,t,n)=>{var s=n(18),o=n(7);e.exports=s(o.process)=="process"},(e,t,n)=>{var s=n(7);e.exports=s},(e,t,n)=>{"use strict";function l(e){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.binarySearchFirstItem=K,t.deprecated=I,t.getColorValues=U,t.getFilenameFromUrl=N,t.getPdfFilenameFromUrl=L,t.getRGB=C,t.getXfaPageViewport=$,t.isDataScheme=j,t.isPdfFile=D,t.isValidFetchUrl=w,t.loadScript=H;var a,m,p,_,O,x,A,S,M,T,z,d=n(130),s=n(1);function v(){"use strict";v=function(){return n};var t,s,a,c,d,n={},O=Object.prototype,o=O.hasOwnProperty,p=typeof Symbol=="function"?Symbol:{},h=p.iterator||"@@iterator",k=p.asyncIterator||"@@asyncIterator",y=p.toStringTag||"@@toStringTag";function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{e({},"")}catch{e=function(t,n,s){return t[n]=s}}function x(e,n,s,o){var a=n&&n.prototype instanceof f?n:f,i=Object.create(a.prototype),r=new g(o||[]);return i._invoke=function(e,n,s){var o="suspendedStart";return function(i,a){if(o==="executing")throw new Error("Generator is already running");if(o==="completed"){if(i==="throw")throw a;return C()}for(s.method=i,s.arg=a;;){var r,c,l=s.delegate;if(l&&(c=w(l,s),c)){if(c===t)continue;return c}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(o==="suspendedStart")throw o="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);if(o="executing",r=b(e,n,s),r.type==="normal"){if(o=s.done?"completed":"suspendedYield",r.arg===t)continue;return{value:r.arg,done:s.done}}r.type==="throw"&&(o="completed",s.method="throw",s.arg=r.arg)}}}(e,s,r),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=x,t={};function f(){}function u(){}function i(){}c={},e(c,h,function(){return this}),d=Object.getPrototypeOf,a=d&&d(d(m([]))),a&&a!==O&&o.call(a,h)&&(c=a),s=i.prototype=f.prototype=Object.create(c);function _(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function r(e,t){function n(s,i,a,r){if(d=b(e[s],e,i),d.type!=="throw"){var d,u=d.arg,c=u.value;return c&&l(c)=="object"&&o.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,a,r)},function(e){n("throw",e,a,r)}):t.resolve(c).then(function(e){u.value=e,a(u)},function(e){return n("throw",e,a,r)})}r(d.arg)}var s;this._invoke=function(e,o){function i(){return new t(function(t,s){n(e,o,t,s)})}return s=s?s.then(i,i):i()}}function w(e,n){var s,o,i=e.iterator[n.method];if(i===void 0){if(n.delegate=null,n.method==="throw"){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),n.method==="throw"))return t;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return o=b(i,e.iterator,n.arg),o.type==="throw"?(n.method="throw",n.arg=o.arg,n.delegate=null,t):(s=o.arg,s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,t):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,t))}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function g(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function m(e){if(e){if(t=e[h],t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t,n=-1,s=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=i,e(s,"constructor",i),e(i,"constructor",u),u.displayName=e(i,y,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===u||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,e(t,y,"GeneratorFunction")),t.prototype=Object.create(s),t},n.awrap=function(e){return{__await:e}},_(r.prototype),e(r.prototype,k,function(){return this}),n.AsyncIterator=r,n.async=function(e,t,s,o,i){i===void 0&&(i=Promise);var a=new r(x(e,t,s,o),i);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(s),e(s,y,"Generator"),e(s,h,function(){return this}),e(s,"toString",function(){return"[object Generator]"}),n.keys=function(e){var n,t=[];for(n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},n.values=m,g.prototype={constructor:g,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var n in this)n.charAt(0)==="t"&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;i=this;function s(e,n){return l.type="throw",l.arg=t,i.next=e,n&&(i.method="next",i.arg=void 0),!!n}for(a=this.tryEntries.length-1;a>=0;--a){var i,a,r,c,n=this.tryEntries[a],l=n.completion;if(n.tryLoc==="root")return s("end");if(n.tryLoc<=this.prev)if(r=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc"),r&&c){{if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}else if(r){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}},abrupt:function(n,s){for(var i,a,r,c=this.tryEntries.length-1;c>=0;--c)if(a=this.tryEntries[c],a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){i=a;break}return i&&(n==="break"||n==="continue")&&i.tryLoc<=s&&s<=i.finallyLoc&&(i=null),r=i?i.completion:{},r.type=n,r.arg=s,i?(this.method="next",this.next=i.finallyLoc,t):this.complete(r)},complete:function(n,s){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&s&&(this.next=s),t},finish:function(n){for(var s,o=this.tryEntries.length-1;o>=0;--o)if(s=this.tryEntries[o],s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),j(s),t},catch:function(t){for(var n,o,i,s=this.tryEntries.length-1;s>=0;--s)if(n=this.tryEntries[s],n.tryLoc===t)return o=n.completion,o.type==="throw"&&(i=o.arg,j(n)),i;throw new Error("illegal catch attempt")},delegateYield:function(n,s,o){return this.delegate={iterator:m(n),resultName:s,nextLoc:o},this.method==="next"&&(this.arg=void 0),t}},n}function f(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=V(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function V(e,t){if(!e)return;if(typeof e=="string")return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}function F(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function k(e,t,n,s,o,i,a){try{var c=e[i](a),r=c.value}catch(e){n(e);return}c.done?t(r):Promise.resolve(r).then(s,o)}function W(e){return function(){var t=this,n=arguments;return new Promise(function(s,o){var a=e.apply(t,n);function i(e){k(a,s,o,i,r,"next",e)}function r(e){k(a,s,o,i,r,"throw",e)}i(void 0)})}}function r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},b(e,t)}function c(e){var t=R();return function(){var s,i,o=u(e);return t?(i=u(this).constructor,s=Reflect.construct(o,arguments,i)):s=o.apply(this,arguments),B(this,s)}}function B(e,t){if(t&&(l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(e)}function y(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function o(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}O="http://www.w3.org/2000/svg",a=o(function e(){i(this,e)}),t.PixelsPerInch=a,g(a,"CSS",96),g(a,"PDF",72),g(a,"PDF_TO_CSS_UNITS",a.CSS/a.PDF),z=function(e){r(t,e);var n=c(t);function t(){var e,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=o.ownerDocument,a=s===void 0?globalThis.document:s;return i(this,t),e=n.call(this),e._document=a,e}return o(t,[{key:"_createCanvas",value:function(t,n){var s=this._document.createElement("canvas");return s.width=t,s.height=n,s}}]),t}(d.BaseCanvasFactory),t.DOMCanvasFactory=z;function E(){return h.apply(this,arguments)}function h(){return h=W(v().mark(function e(t){var n,o,i=arguments;return v().wrap(function(a){for(;1;)switch(a.prev=a.next){case 0:if(n=i.length>1&&i[1]!==void 0&&i[1],!w(t,document.baseURI)){a.next=21;break}return a.next=4,fetch(t);case 4:if(o=a.sent,o.ok){a.next=7;break}throw new Error(o.statusText);case 7:if(!n){a.next=15;break}return a.t1=Uint8Array,a.next=11,o.arrayBuffer();case 11:a.t2=a.sent,a.t0=new a.t1(a.t2),a.next=20;break;case 15:return a.t3=s.stringToBytes,a.next=18,o.text();case 18:a.t4=a.sent,a.t0=(0,a.t3)(a.t4);case 20:return a.abrupt("return",a.t0);case 21:return a.abrupt("return",new Promise(function(e,o){var i=new XMLHttpRequest;i.open("GET",t,!0),n&&(i.responseType="arraybuffer"),i.onreadystatechange=function(){if(i.readyState!==XMLHttpRequest.DONE)return;if(i.status===200||i.status===0){var t;if(n&&i.response?t=new Uint8Array(i.response):!n&&i.responseText&&(t=(0,s.stringToBytes)(i.responseText)),t){e(t);return}}o(new Error(i.statusText))},i.send(null)}));case 22:case"end":return a.stop()}},e)})),h.apply(this,arguments)}A=function(e){r(t,e);var n=c(t);function t(){return i(this,t),n.apply(this,arguments)}return o(t,[{key:"_fetchData",value:function(t,n){return E(t,this.isCompressed).then(function(e){return{cMapData:e,compressionType:n}})}}]),t}(d.BaseCMapReaderFactory),t.DOMCMapReaderFactory=A,S=function(e){r(t,e);var n=c(t);function t(){return i(this,t),n.apply(this,arguments)}return o(t,[{key:"_fetchData",value:function(t){return E(t,!0)}}]),t}(d.BaseStandardFontDataFactory),t.DOMStandardFontDataFactory=S,M=function(e){r(t,e);var n=c(t);function t(){return i(this,t),n.apply(this,arguments)}return o(t,[{key:"_createSVG",value:function(t){return document.createElementNS(O,t)}}]),t}(d.BaseSVGFactory),t.DOMSVGFactory=M,m=function(){function e(t){var o,a,r,c,d,u,h,m,p,v,n=t.viewBox,s=t.scale,l=t.rotation,b=t.offsetX,g=b===void 0?0:b,y=t.offsetY,f=y===void 0?0:y,j=t.dontFlip,_=j!==void 0&&j;switch(i(this,e),this.viewBox=n,this.scale=s,this.rotation=l,this.offsetX=g,this.offsetY=f,u=(n[2]+n[0])/2,d=(n[3]+n[1])/2,l%=360,l<0&&(l+=360),l){case 180:r=-1,c=0,a=0,o=1;break;case 90:r=0,c=1,a=1,o=0;break;case 270:r=0,c=-1,a=-1,o=0;break;case 0:r=1,c=0,a=0,o=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}_&&(a=-a,o=-o),r===0?(h=Math.abs(d-n[1])*s+g,m=Math.abs(u-n[0])*s+f,v=Math.abs(n[3]-n[1])*s,p=Math.abs(n[2]-n[0])*s):(h=Math.abs(u-n[0])*s+g,m=Math.abs(d-n[1])*s+f,v=Math.abs(n[2]-n[0])*s,p=Math.abs(n[3]-n[1])*s),this.transform=[r*s,c*s,a*s,o*s,h-r*s*u-a*s*d,m-c*s*u-o*s*d],this.width=v,this.height=p}return o(e,[{key:"clone",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=n.scale,c=s===void 0?this.scale:s,o=n.rotation,l=o===void 0?this.rotation:o,i=n.offsetX,d=i===void 0?this.offsetX:i,a=n.offsetY,u=a===void 0?this.offsetY:a,r=n.dontFlip,h=r!==void 0&&r;return new e({viewBox:this.viewBox.slice(),scale:c,rotation:l,offsetX:d,offsetY:u,dontFlip:h})}},{key:"convertToViewportPoint",value:function(t,n){return s.Util.applyTransform([t,n],this.transform)}},{key:"convertToViewportRectangle",value:function(t){var n=s.Util.applyTransform([t[0],t[1]],this.transform),o=s.Util.applyTransform([t[2],t[3]],this.transform);return[n[0],n[1],o[0],o[1]]}},{key:"convertToPdfPoint",value:function(t,n){return s.Util.applyInverseTransform([t,n],this.transform)}}]),e}(),t.PageViewport=m,T=function(e){r(t,e);var n=c(t);function t(e,s){var o;return i(this,t),o=n.call(this,e,"RenderingCancelledException"),o.type=s,o}return o(t)}(s.BaseException),t.RenderingCancelledException=T;function j(e){for(var n=e.length,t=0;t<n&&e[t].trim()==="";)t++;return e.substring(t,t+5).toLowerCase()==="data:"}function D(e){return typeof e=="string"&&/\.pdf$/i.test(e)}function N(e){var t=e.indexOf("#"),n=e.indexOf("?"),s=Math.min(t>0?t:e.length,n>0?n:e.length);return e.substring(e.lastIndexOf("/",s)+1,s)}function L(e){var t,n,o,a,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof e!="string")return i;if(j(e))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),i;if(a=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=a.exec(e),t=n.exec(o[1])||n.exec(o[2])||n.exec(o[3]),t&&(t=t[0],t.includes("%")))try{t=n.exec(decodeURIComponent(t))[0]}catch{}return t||i}_=function(){function e(){i(this,e),this.started=Object.create(null),this.times=[]}return o(e,[{key:"time",value:function(t){t in this.started&&(0,s.warn)("Timer is already running for ".concat(t)),this.started[t]=Date.now()}},{key:"timeEnd",value:function(t){t in this.started||(0,s.warn)("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}},{key:"toString",value:function(){var t,s,i,a,r,l,d,c=[],o=0,n=f(this.times);try{for(n.s();!(d=n.n()).done;)r=d.value,i=r.name,i.length>o&&(o=i.length)}catch(e){n.e(e)}finally{n.f()}t=f(this.times);try{for(t.s();!(l=t.n()).done;)s=l.value,a=s.end-s.start,c.push("".concat(s.name.padEnd(o)," ").concat(a,`ms
`))}catch(e){t.e(e)}finally{t.f()}return c.join("")}}]),e}(),t.StatTimer=_;function w(e,t){try{var s=t?new URL(e,t):new URL(e),n=s.protocol;return n==="http:"||n==="https:"}catch{return!1}}function H(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(n,s){var o=document.createElement("script");o.src=e,o.onload=function(e){t&&o.remove(),n(e)},o.onerror=function(){s(new Error("Cannot load script at: ".concat(o.src)))},(document.head||document.documentElement).append(o)})}function I(e){console.log("Deprecated API usage: "+e)}x=function(){function e(){i(this,e)}return o(e,null,[{key:"toDateObject",value:function(t){if(!t||typeof t!="string")return null;p||(p=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var s,o,i,a,r,c,l,d,u,n=p.exec(t);return n?(u=parseInt(n[1],10),c=parseInt(n[2],10),c=c>=1&&c<=12?c-1:0,l=parseInt(n[3],10),l=l>=1&&l<=31?l:1,s=parseInt(n[4],10),s=s>=0&&s<=23?s:0,o=parseInt(n[5],10),o=o>=0&&o<=59?o:0,r=parseInt(n[6],10),r=r>=0&&r<=59?r:0,d=n[7]||"Z",i=parseInt(n[8],10),i=i>=0&&i<=23?i:0,a=parseInt(n[9],10)||0,a=a>=0&&a<=59?a:0,d==="-"?(s+=i,o+=a):d==="+"&&(s-=i,o-=a),new Date(Date.UTC(u,c,l,s,o,r))):null}}]),e}(),t.PDFDateString=x;function $(e,t){var n=t.scale,i=n===void 0?1:n,s=t.rotation,a=s===void 0?0:s,o=e.attributes.style,r=o.width,c=o.height,l=[0,0,parseInt(r),parseInt(c)];return new m({viewBox:l,scale:i,rotation:a})}function C(e){if(e.startsWith("#")){var t=parseInt(e.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(function(e){return parseInt(e)}):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(function(e){return parseInt(e)}).slice(0,3):((0,s.warn)('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function U(e){var n,s,o,i,t=document.createElement("span");t.style.visibility="hidden",document.body.append(t),n=f(e.keys());try{for(n.s();!(o=n.n()).done;)s=o.value,t.style.color=s,i=window.getComputedStyle(t).color,e.set(s,C(i))}catch(e){n.e(e)}finally{n.f()}t.remove()}function K(e,t){var o,i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=a,s=e.length-1;if(s<0||!t(e[s]))return e.length;if(t(e[n]))return n;for(;n<s;)o=n+s>>1,i=e[o],t(i)?s=o:n=o+1;return n}},(e,t,n)=>{"use strict";function r(e){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var u,h,m,f,s=n(1);function o(){"use strict";o=function(){return n};var t,s,c,d,u,n={},O=Object.prototype,i=O.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},m=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{e({},"")}catch{e=function(t,n,s){return t[n]=s}}function x(e,n,s,o){var a=n&&n.prototype instanceof p?n:p,i=Object.create(a.prototype),r=new v(o||[]);return i._invoke=function(e,n,s){var o="suspendedStart";return function(i,a){if(o==="executing")throw new Error("Generator is already running");if(o==="completed"){if(i==="throw")throw a;return C()}for(s.method=i,s.arg=a;;){var r,c,l=s.delegate;if(l&&(c=w(l,s),c)){if(c===t)continue;return c}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(o==="suspendedStart")throw o="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);if(o="executing",r=b(e,n,s),r.type==="normal"){if(o=s.done?"completed":"suspendedYield",r.arg===t)continue;return{value:r.arg,done:s.done}}r.type==="throw"&&(o="completed",s.method="throw",s.arg=r.arg)}}}(e,s,r),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=x,t={};function p(){}function h(){}function a(){}d={},e(d,m,function(){return this}),u=Object.getPrototypeOf,c=u&&u(u(f([]))),c&&c!==O&&i.call(c,m)&&(d=c),s=a.prototype=p.prototype=Object.create(d);function _(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function l(e,t){function n(s,o,a,c){if(d=b(e[s],e,o),d.type!=="throw"){var d,u=d.arg,l=u.value;return l&&r(l)=="object"&&i.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,c)},function(e){n("throw",e,a,c)}):t.resolve(l).then(function(e){u.value=e,a(u)},function(e){return n("throw",e,a,c)})}c(d.arg)}var s;this._invoke=function(e,o){function i(){return new t(function(t,s){n(e,o,t,s)})}return s=s?s.then(i,i):i()}}function w(e,n){var s,o,i=e.iterator[n.method];if(i===void 0){if(n.delegate=null,n.method==="throw"){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),n.method==="throw"))return t;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return o=b(i,e.iterator,n.arg),o.type==="throw"?(n.method="throw",n.arg=o.arg,n.delegate=null,t):(s=o.arg,s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,t):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,t))}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function f(e){if(e){if(t=e[m],t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t,n=-1,s=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=a,e(s,"constructor",a),e(a,"constructor",h),h.displayName=e(a,y,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===h||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,e(t,y,"GeneratorFunction")),t.prototype=Object.create(s),t},n.awrap=function(e){return{__await:e}},_(l.prototype),e(l.prototype,k,function(){return this}),n.AsyncIterator=l,n.async=function(e,t,s,o,i){i===void 0&&(i=Promise);var a=new l(x(e,t,s,o),i);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(s),e(s,y,"Generator"),e(s,m,function(){return this}),e(s,"toString",function(){return"[object Generator]"}),n.keys=function(e){var n,t=[];for(n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},n.values=f,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var n in this)n.charAt(0)==="t"&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;o=this;function s(e,n){return l.type="throw",l.arg=t,o.next=e,n&&(o.method="next",o.arg=void 0),!!n}for(a=this.tryEntries.length-1;a>=0;--a){var o,a,r,c,n=this.tryEntries[a],l=n.completion;if(n.tryLoc==="root")return s("end");if(n.tryLoc<=this.prev)if(r=i.call(n,"catchLoc"),c=i.call(n,"finallyLoc"),r&&c){{if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}else if(r){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}},abrupt:function(n,s){for(var o,a,r,c=this.tryEntries.length-1;c>=0;--c)if(a=this.tryEntries[c],a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){o=a;break}return o&&(n==="break"||n==="continue")&&o.tryLoc<=s&&s<=o.finallyLoc&&(o=null),r=o?o.completion:{},r.type=n,r.arg=s,o?(this.method="next",this.next=o.finallyLoc,t):this.complete(r)},complete:function(n,s){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&s&&(this.next=s),t},finish:function(n){for(var s,o=this.tryEntries.length-1;o>=0;--o)if(s=this.tryEntries[o],s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),j(s),t},catch:function(t){for(var n,o,i,s=this.tryEntries.length-1;s>=0;--s)if(n=this.tryEntries[s],n.tryLoc===t)return o=n.completion,o.type==="throw"&&(i=o.arg,j(n)),i;throw new Error("illegal catch attempt")},delegateYield:function(n,s,o){return this.delegate={iterator:f(n),resultName:s,nextLoc:o},this.method==="next"&&(this.arg=void 0),t}},n}function c(e,t,n,s,o,i,a){try{var c=e[i](a),r=c.value}catch(e){n(e);return}c.done?t(r):Promise.resolve(r).then(s,o)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(s,o){var a=e.apply(t,n);function i(e){c(a,s,o,i,r,"next",e)}function r(e){c(a,s,o,i,r,"throw",e)}i(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}u=function(){function e(){i(this,e),this.constructor===e&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}return a(e,[{key:"create",value:function(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");var s=this._createCanvas(t,n);return{canvas:s,context:s.getContext("2d")}}},{key:"reset",value:function(t,n,s){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=s}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}},{key:"_createCanvas",value:function(){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}]),e}(),t.BaseCanvasFactory=u,h=function(){function e(t){var n=t.baseUrl,a=n===void 0?null:n,o=t.isCompressed,r=o!==void 0&&o;i(this,e),this.constructor===e&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=r}return a(e,[{key:"fetch",value:function(){var e=l(o().mark(function e(t){var n,i,a,r=this;return o().wrap(function(o){for(;1;)switch(o.prev=o.next){case 0:if(n=t.name,this.baseUrl){o.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(n){o.next=5;break}throw new Error("CMap name must be specified.");case 5:return i=this.baseUrl+n+(this.isCompressed?".bcmap":""),a=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE,o.abrupt("return",this._fetchData(i,a).catch(function(){throw new Error("Unable to load ".concat(r.isCompressed?"binary ":"","CMap at: ").concat(i))}));case 8:case"end":return o.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_fetchData",value:function(){(0,s.unreachable)("Abstract method `_fetchData` called.")}}]),e}(),t.BaseCMapReaderFactory=h,m=function(){function e(t){var n=t.baseUrl,o=n===void 0?null:n;i(this,e),this.constructor===e&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=o}return a(e,[{key:"fetch",value:function(){var e=l(o().mark(function e(t){var n,s;return o().wrap(function(o){for(;1;)switch(o.prev=o.next){case 0:if(n=t.filename,this.baseUrl){o.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(n){o.next=5;break}throw new Error("Font filename must be specified.");case 5:return s="".concat(this.baseUrl).concat(n),o.abrupt("return",this._fetchData(s).catch(function(){throw new Error("Unable to load font data at: ".concat(s))}));case 7:case"end":return o.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_fetchData",value:function(){(0,s.unreachable)("Abstract method `_fetchData` called.")}}]),e}(),t.BaseStandardFontDataFactory=m,f=function(){function e(){i(this,e),this.constructor===e&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}return a(e,[{key:"create",value:function(t,n){var s,o=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");return s=this._createSVG("svg:svg"),s.setAttribute("version","1.1"),o||(s.setAttribute("width","".concat(t,"px")),s.setAttribute("height","".concat(n,"px"))),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),s}},{key:"createElement",value:function(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function(){(0,s.unreachable)("Abstract method `_createSVG` called.")}}]),e}(),t.BaseSVGFactory=f},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.build=t.RenderTask=t.PDFWorkerUtil=t.PDFWorker=t.PDFPageProxy=t.PDFDocumentProxy=t.PDFDocumentLoadingTask=t.PDFDataRangeTransport=t.LoopbackPort=t.DefaultStandardFontDataFactory=t.DefaultCanvasFactory=t.DefaultCMapReaderFactory=void 0,t.getDocument=je,t.setPDFNetworkStreamFactory=ye,t.version=void 0,s=n(1),M=n(132),o=n(129),K=n(136),ge=n(137),D=n(140),m=n(3),w=n(141),pe=n(142),fe=n(143),Q=n(144),he=n(145);function Te(e,t){le(e,t),t.add(e)}function de(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function j(e,t,n){le(e,t),t.set(e,n)}function le(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(e,t,n){var s=ce(e,t,"set");return oe(e,s,n),n}function i(e,t){var n=ce(e,t,"get");return te(e,n)}function ce(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Fe(e){return Ae(e)||Se(e)||V(e)||Me()}function Me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Se(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ae(e){if(Array.isArray(e))return $(e)}function r(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=V(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function l(){"use strict";l=function(){return n};var t,s,a,c,d,n={},O=Object.prototype,o=O.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},h=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{e({},"")}catch{e=function(t,n,s){return t[n]=s}}function x(e,n,s,o){var a=n&&n.prototype instanceof p?n:p,i=Object.create(a.prototype),r=new v(o||[]);return i._invoke=function(e,n,s){var o="suspendedStart";return function(i,a){if(o==="executing")throw new Error("Generator is already running");if(o==="completed"){if(i==="throw")throw a;return C()}for(s.method=i,s.arg=a;;){var r,c,l=s.delegate;if(l&&(c=w(l,s),c)){if(c===t)continue;return c}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(o==="suspendedStart")throw o="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);if(o="executing",r=b(e,n,s),r.type==="normal"){if(o=s.done?"completed":"suspendedYield",r.arg===t)continue;return{value:r.arg,done:s.done}}r.type==="throw"&&(o="completed",s.method="throw",s.arg=r.arg)}}}(e,s,r),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=x,t={};function p(){}function u(){}function i(){}c={},e(c,h,function(){return this}),d=Object.getPrototypeOf,a=d&&d(d(m([]))),a&&a!==O&&o.call(a,h)&&(c=a),s=i.prototype=p.prototype=Object.create(c);function _(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function r(e,t){function n(s,i,a,r){if(l=b(e[s],e,i),l.type!=="throw"){var l,d=l.arg,c=d.value;return c&&f(c)=="object"&&o.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,a,r)},function(e){n("throw",e,a,r)}):t.resolve(c).then(function(e){d.value=e,a(d)},function(e){return n("throw",e,a,r)})}r(l.arg)}var s;this._invoke=function(e,o){function i(){return new t(function(t,s){n(e,o,t,s)})}return s=s?s.then(i,i):i()}}function w(e,n){var s,o,i=e.iterator[n.method];if(i===void 0){if(n.delegate=null,n.method==="throw"){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),n.method==="throw"))return t;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return o=b(i,e.iterator,n.arg),o.type==="throw"?(n.method="throw",n.arg=o.arg,n.delegate=null,t):(s=o.arg,s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,t):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,t))}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function m(e){if(e){if(t=e[h],t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t,n=-1,s=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=i,e(s,"constructor",i),e(i,"constructor",u),u.displayName=e(i,y,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===u||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,e(t,y,"GeneratorFunction")),t.prototype=Object.create(s),t},n.awrap=function(e){return{__await:e}},_(r.prototype),e(r.prototype,k,function(){return this}),n.AsyncIterator=r,n.async=function(e,t,s,o,i){i===void 0&&(i=Promise);var a=new r(x(e,t,s,o),i);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(s),e(s,y,"Generator"),e(s,h,function(){return this}),e(s,"toString",function(){return"[object Generator]"}),n.keys=function(e){var n,t=[];for(n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},n.values=m,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var n in this)n.charAt(0)==="t"&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;i=this;function s(e,n){return l.type="throw",l.arg=t,i.next=e,n&&(i.method="next",i.arg=void 0),!!n}for(a=this.tryEntries.length-1;a>=0;--a){var i,a,r,c,n=this.tryEntries[a],l=n.completion;if(n.tryLoc==="root")return s("end");if(n.tryLoc<=this.prev)if(r=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc"),r&&c){{if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}else if(r){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}},abrupt:function(n,s){for(var i,a,r,c=this.tryEntries.length-1;c>=0;--c)if(a=this.tryEntries[c],a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){i=a;break}return i&&(n==="break"||n==="continue")&&i.tryLoc<=s&&s<=i.finallyLoc&&(i=null),r=i?i.completion:{},r.type=n,r.arg=s,i?(this.method="next",this.next=i.finallyLoc,t):this.complete(r)},complete:function(n,s){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&s&&(this.next=s),t},finish:function(n){for(var s,o=this.tryEntries.length-1;o>=0;--o)if(s=this.tryEntries[o],s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),j(s),t},catch:function(t){for(var n,o,i,s=this.tryEntries.length-1;s>=0;--s)if(n=this.tryEntries[s],n.tryLoc===t)return o=n.completion,o.type==="throw"&&(i=o.arg,j(n)),i;throw new Error("illegal catch attempt")},delegateYield:function(n,s,o){return this.delegate={iterator:m(n),resultName:s,nextLoc:o},this.method==="next"&&(this.arg=void 0),t}},n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ke(e,t,n,s){return ve(e,t),se(n,"set"),oe(e,n,s),s}function oe(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function h(e,t,n){return ve(e,t),se(n,"get"),te(e,n)}function se(e,t){if(e===void 0)throw new TypeError("attempted to "+t+" private static field before its declaration")}function ve(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function te(e,t){return t.get?t.get.call(e):t.value}function ee(e,t,n,s,o,i,a){try{var c=e[i](a),r=c.value}catch(e){n(e);return}c.done?t(r):Promise.resolve(r).then(s,o)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(s,o){var a=e.apply(t,n);function i(e){ee(a,s,o,i,r,"next",e)}function r(e){ee(a,s,o,i,r,"throw",e)}i(void 0)})}}function k(e,t){return xe(e)||Ce(e,t)||V(e,t)||Ee()}function Ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V(e,t){if(!e)return;if(typeof e=="string")return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}function $(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Ce(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function xe(e){if(Array.isArray(e))return e}function f(e){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}if(J=65536,Z=100,S=o.DOMCanvasFactory,t.DefaultCanvasFactory=S,T=o.DOMCMapReaderFactory,t.DefaultCMapReaderFactory=T,A=o.DOMStandardFontDataFactory,t.DefaultStandardFontDataFactory=A,m.isNodeJS){var s,o,c,m,p,v,b,_,w,O,x,C,E,A,S,M,F,T,z,D,N,L,R,P,H,I,B,W,U,K,G,X,Q,Z,J,ge,pe,fe,he,Y=n(146),Oe=Y.NodeCanvasFactory,we=Y.NodeCMapReaderFactory,_e=Y.NodeStandardFontDataFactory,ne,be,re,ue,me;t.DefaultCanvasFactory=S=Oe,t.DefaultCMapReaderFactory=T=we,t.DefaultStandardFontDataFactory=A=_e}function ye(e){ne=e}function je(e){if(a=new G,typeof e=="string"||e instanceof URL)c={url:e};else if((0,s.isArrayBuffer)(e))c={data:e};else if(e instanceof W)c={range:e};else{if(f(e)!=="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");c=e}var n,i,a,c,d,u,t=Object.create(null),l=null,r=null;for(i in c){switch(n=c[i],i){case"url":if(typeof window!="undefined")try{t[i]=new URL(n,window.location).href;continue}catch(e){(0,s.warn)('Cannot create valid URL: "'.concat(e,'".'))}else if(typeof n=="string"||n instanceof URL){t[i]=n.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":l=n;continue;case"worker":r=n;continue;case"data":if(m.isNodeJS&&typeof Buffer!="undefined"&&n instanceof Buffer)t[i]=new Uint8Array(n);else if(n instanceof Uint8Array)break;if(typeof n=="string")t[i]=(0,s.stringToBytes)(n);else if(f(n)==="object"&&n!==null&&!isNaN(n.length))t[i]=new Uint8Array(n);else if((0,s.isArrayBuffer)(n))t[i]=new Uint8Array(n);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");continue}t[i]=n}return t.CMapReaderFactory=t.CMapReaderFactory||T,t.StandardFontDataFactory=t.StandardFontDataFactory||A,t.ignoreErrors=t.stopAtErrors!==!0,t.fontExtraProperties=t.fontExtraProperties===!0,t.pdfBug=t.pdfBug===!0,t.enableXfa=t.enableXfa===!0,(!Number.isInteger(t.rangeChunkSize)||t.rangeChunkSize<1)&&(t.rangeChunkSize=J),(typeof t.docBaseUrl!="string"||(0,o.isDataScheme)(t.docBaseUrl))&&(t.docBaseUrl=null),(!Number.isInteger(t.maxImageSize)||t.maxImageSize<-1)&&(t.maxImageSize=-1),typeof t.cMapUrl!="string"&&(t.cMapUrl=null),typeof t.standardFontDataUrl!="string"&&(t.standardFontDataUrl=null),typeof t.useWorkerFetch!="boolean"&&(t.useWorkerFetch=t.CMapReaderFactory===o.DOMCMapReaderFactory&&t.StandardFontDataFactory===o.DOMStandardFontDataFactory),typeof t.isEvalSupported!="boolean"&&(t.isEvalSupported=!0),typeof t.disableFontFace!="boolean"&&(t.disableFontFace=m.isNodeJS),typeof t.useSystemFonts!="boolean"&&(t.useSystemFonts=!m.isNodeJS&&!t.disableFontFace),(f(t.ownerDocument)!=="object"||t.ownerDocument===null)&&(t.ownerDocument=globalThis.document),typeof t.disableRange!="boolean"&&(t.disableRange=!1),typeof t.disableStream!="boolean"&&(t.disableStream=!1),typeof t.disableAutoFetch!="boolean"&&(t.disableAutoFetch=!1),(0,s.setVerbosityLevel)(t.verbosity),r||(d={verbosity:t.verbosity,port:D.GlobalWorkerOptions.workerPort},r=d.port?E.fromPort(d):new E(d),a._worker=r),u=a.docId,r.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");var e=ze(r,t,l,u),n=new Promise(function(e){var n;l?n=new Q.PDFDataTransportStream({length:t.length,initialData:t.initialData,progressiveDone:t.progressiveDone,contentDispositionFilename:t.contentDispositionFilename,disableRange:t.disableRange,disableStream:t.disableStream},l):t.data||(n=ne({url:t.url,length:t.length,httpHeaders:t.httpHeaders,withCredentials:t.withCredentials,rangeChunkSize:t.rangeChunkSize,disableRange:t.disableRange,disableStream:t.disableStream})),e(n)});return Promise.all([e,n]).then(function(e){var n,o,s=k(e,2),i=s[0],c=s[1];if(a.destroyed)throw new Error("Loading aborted");n=new w.MessageHandler(u,i,r.port),o=new be(n,a,c,t),a._transport=o,n.send("Ready",null)})}).catch(a._capability.reject),a}function ze(){return q.apply(this,arguments)}function q(){return q=g(l().mark(function e(t,n,s,o){var i;return l().wrap(function(a){for(;1;)switch(a.prev=a.next){case 0:if(!t.destroyed){a.next=2;break}throw new Error("Worker was destroyed");case 2:return s&&(n.length=s.length,n.initialData=s.initialData,n.progressiveDone=s.progressiveDone,n.contentDispositionFilename=s.contentDispositionFilename),a.next=5,t.messageHandler.sendWithPromise("GetDocRequest",{docId:o,apiVersion:"2.15.349",source:{data:n.data,url:n.url,password:n.password,disableAutoFetch:n.disableAutoFetch,rangeChunkSize:n.rangeChunkSize,length:n.length},maxImageSize:n.maxImageSize,disableFontFace:n.disableFontFace,docBaseUrl:n.docBaseUrl,ignoreErrors:n.ignoreErrors,isEvalSupported:n.isEvalSupported,fontExtraProperties:n.fontExtraProperties,enableXfa:n.enableXfa,useSystemFonts:n.useSystemFonts,cMapUrl:n.useWorkerFetch?n.cMapUrl:null,standardFontDataUrl:n.useWorkerFetch?n.standardFontDataUrl:null});case 5:if(i=a.sent,n.data&&(n.data=null),!t.destroyed){a.next=9;break}throw new Error("Worker was destroyed");case 9:return a.abrupt("return",i);case 10:case"end":return a.stop()}},e)})),q.apply(this,arguments)}G=function(){function e(){var t,n;d(this,e),this._capability=(0,s.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat((ke(e,e,I,(t=h(e,e,I),n=t++,t)),n)),this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return u(e,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:function(){var e=g(l().mark(function e(){var t;return l().wrap(function(n){for(;1;)switch(n.prev=n.next){case 0:return this.destroyed=!0,n.next=3,(t=this._transport)===null||t===void 0?void 0:t.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return n.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),e}(),t.PDFDocumentLoadingTask=G,I={writable:!0,value:0},W=function(){function e(t,n){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;d(this,e),this.length=t,this.initialData=n,this.progressiveDone=o,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,s.createPromiseCapability)()}return u(e,[{key:"addRangeListener",value:function(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function(t,n){var o,i,s=r(this._rangeListeners);try{for(s.s();!(o=s.n()).done;)i=o.value,i(t,n)}catch(e){s.e(e)}finally{s.f()}}},{key:"onDataProgress",value:function(t,n){var s=this;this._readyCapability.promise.then(function(){var o,i,e=r(s._progressListeners);try{for(e.s();!(o=e.n()).done;)i=o.value,i(t,n)}catch(t){e.e(t)}finally{e.f()}})}},{key:"onDataProgressiveRead",value:function(t){var n=this;this._readyCapability.promise.then(function(){var s,o,e=r(n._progressiveReadListeners);try{for(e.s();!(s=e.n()).done;)o=s.value,o(t)}catch(t){e.e(t)}finally{e.f()}})}},{key:"onDataProgressiveDone",value:function(){var t=this;this._readyCapability.promise.then(function(){var n,s,e=r(t._progressiveDoneListeners);try{for(e.s();!(n=e.n()).done;)s=n.value,s()}catch(t){e.e(t)}finally{e.f()}})}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(){(0,s.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),e}(),t.PDFDataRangeTransport=W,H=function(){function e(t,n){var s=this;d(this,e),this._pdfInfo=t,this._transport=n,Object.defineProperty(this,"fingerprint",{get:function(){return(0,o.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:function(){var e=g(l().mark(function e(){return l().wrap(function(t){for(;1;)switch(t.prev=t.next){case 0:return(0,o.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),t.abrupt("return",s.stats||{streamTypes:{},fontTypes:{}});case 2:case"end":return t.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()})}return u(e,[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"stats",get:function(){return this._transport.stats}},{key:"isPureXfa",get:function(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"saveDocument",value:function(){return this._transport.annotationStorage.size<=0&&(0,o.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),e}(),t.PDFDocumentProxy=H,R=function(){function e(t,n,s,i){var a=arguments.length>4&&arguments[4]!==void 0&&arguments[4];d(this,e),this._pageIndex=t,this._pageInfo=n,this._ownerDocument=i,this._transport=s,this._stats=a?new o.StatTimer:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new B,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}return u(e,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.scale,n=t.rotation,c=n===void 0?this.rotate:n,s=t.offsetX,l=s===void 0?0:s,i=t.offsetY,d=i===void 0?0:i,a=t.dontFlip,u=a!==void 0&&a;return new o.PageViewport({viewBox:this.view,scale:r,rotation:c,offsetX:l,offsetY:d,dontFlip:u})}},{key:"getAnnotations",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.intent,a=s===void 0?"display":s,n=this._transport.getRenderingIntent(a),t=this._annotationPromises.get(n.cacheKey);return t||(t=this._transport.getAnnotations(this._pageIndex,n.renderingIntent),this._annotationPromises.set(n.cacheKey,t),t=t.then(function(e){var n,s,t=r(e);try{s=function(){var t=n.value;t.titleObj!==void 0&&Object.defineProperty(t,"title",{get:function(){return(0,o.deprecated)("`title`-property on annotation, please use `titleObj` instead."),t.titleObj.str}}),t.contentsObj!==void 0&&Object.defineProperty(t,"contents",{get:function(){return(0,o.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),t.contentsObj.str}})};for(t.s();!(n=t.n()).done;)s()}catch(e){t.e(e)}finally{t.f()}return e})),t}},{key:"getJSActions",value:function(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:function(){var e=g(l().mark(function e(){var t;return l().wrap(function(n){for(;1;)switch(n.prev=n.next){case 0:return n.abrupt("return",((t=this._transport._htmlForXfa)===null||t===void 0?void 0:t.children[this._pageIndex])||null);case 1:case"end":return n.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(t){var n,a,r,l,d,f,v,x,C,R,i=this,L=t.canvasContext,N=t.viewport,p=t.intent,D=p===void 0?"display":p,m=t.annotationMode,c=m===void 0?s.AnnotationMode.ENABLE:m,h=t.transform,z=h===void 0?null:h,g=t.imageLayer,P=g===void 0?null:g,b=t.canvasFactory,F=b===void 0?null:b,y=t.background,A=y===void 0?null:y,w=t.optionalContentConfigPromise,u=w===void 0?null:w,O=t.annotationCanvasMap,E=O===void 0?null:O,_=t.pageColors,M=_===void 0?null:_,j=t.printAnnotationStorage,T=j===void 0?null:j;return((x=arguments[0])===null||x===void 0?void 0:x.renderInteractiveForms)!==void 0&&((0,o.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&c===s.AnnotationMode.ENABLE&&(c=s.AnnotationMode.ENABLE_FORMS)),((v=arguments[0])===null||v===void 0?void 0:v.includeAnnotationStorage)!==void 0&&((0,o.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&c===s.AnnotationMode.ENABLE&&(c=s.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall"),r=this._transport.getRenderingIntent(D,c,T),this.pendingCleanup=!1,u||(u=this._transport.getOptionalContentConfig()),n=this._intentStates.get(r.cacheKey),n||(n=Object.create(null),this._intentStates.set(r.cacheKey,n)),n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null),f=F||new S({ownerDocument:this._ownerDocument}),d=!!(r.renderingIntent&s.RenderingIntentFlag.PRINT),n.displayReadyCapability||(n.displayReadyCapability=(0,s.createPromiseCapability)(),n.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(r)),l=function(t){n.renderTasks.delete(a),(i.cleanupAfterRender||d)&&(i.pendingCleanup=!0),i._tryCleanup(),t?(a.capability.reject(t),i._abortOperatorList({intentState:n,reason:t instanceof Error?t:new Error(t)})):a.capability.resolve(),i._stats&&(i._stats.timeEnd("Rendering"),i._stats.timeEnd("Overall"))},a=new re({callback:l,params:{canvasContext:L,viewport:N,transform:z,imageLayer:P,background:A},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:E,operatorList:n.operatorList,pageIndex:this._pageIndex,canvasFactory:f,useRequestAnimationFrame:!d,pdfBug:this._pdfBug,pageColors:M}),((R=n).renderTasks||(R.renderTasks=new Set)).add(a),C=a.task,Promise.all([n.displayReadyCapability.promise,u]).then(function(e){var t=k(e,2),n=t[0],s=t[1];if(i.pendingCleanup){l();return}i._stats&&i._stats.time("Rendering"),a.initializeGraphics({transparency:n,optionalContentConfig:s}),a.operatorListChanged()}).catch(l),C}},{key:"getOperatorList",value:function(){var t,n,o,l,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=i.intent,h=a===void 0?"display":a,c=i.annotationMode,m=c===void 0?s.AnnotationMode.ENABLE:c,r=i.printAnnotationStorage,d=r===void 0?null:r;function u(){t.operatorList.lastChunk&&(t.opListReadCapability.resolve(t.operatorList),t.renderTasks.delete(o))}return n=this._transport.getRenderingIntent(h,m,d,!0),t=this._intentStates.get(n.cacheKey),t||(t=Object.create(null),this._intentStates.set(n.cacheKey,t)),t.opListReadCapability||(o=Object.create(null),o.operatorListChanged=u,t.opListReadCapability=(0,s.createPromiseCapability)(),((l=t).renderTasks||(l.renderTasks=new Set)).add(o),t.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(n)),t.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.disableCombineTextItems,o=n!==void 0&&n,s=t.includeMarkedContent,i=s!==void 0&&s,a=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:o!==!0,includeMarkedContent:i===!0},{highWaterMark:a,size:function(t){return t.items.length}})}},{key:"getTextContent",value:function(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport._htmlForXfa?this.getXfa().then(function(e){return he.XfaText.textContent(e)}):(t=this.streamTextContent(n),new Promise(function(e,n){function o(){i.read().then(function(t){var n,i=t.value,a=t.done;if(a){e(s);return}Object.assign(s.styles,i.styles),(n=s.items).push.apply(n,Fe(i.items)),o()},n)}var i=t.getReader(),s={items:[],styles:Object.create(null)};o()}))}},{key:"getStructTree",value:function(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function(){this.destroyed=!0;var t,n,s,i,a,c,d,u,l=[],o=r(this._intentStates.values());try{for(o.s();!(u=o.n()).done;){if(s=u.value,this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),s.opListReadCapability)continue;n=r(s.renderTasks);try{for(n.s();!(c=n.n()).done;)i=c.value,l.push(i.completed),i.cancel()}catch(e){n.e(e)}finally{n.f()}}}catch(e){o.e(e)}finally{o.f()}this.objs.clear(),t=r(this._bitmaps);try{for(t.s();!(a=t.n()).done;)d=a.value,d.close()}catch(e){t.e(e)}finally{t.f()}return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(l)}},{key:"cleanup",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(t)}},{key:"_tryCleanup",value:function(){if(a=arguments.length>0&&arguments[0]!==void 0&&arguments[0],!this.pendingCleanup)return!1;n=r(this._intentStates.values());try{for(n.s();!(s=n.n()).done;){var t,n,s,a,c,l,i=s.value,d=i.renderTasks,u=i.operatorList;if(d.size>0||!u.lastChunk)return!1}}catch(e){n.e(e)}finally{n.f()}this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,a&&this._stats&&(this._stats=new o.StatTimer),t=r(this._bitmaps);try{for(t.s();!(c=t.n()).done;)l=c.value,l.close()}catch(e){t.e(e)}finally{t.f()}return this._bitmaps.clear(),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(t,n){var s=this._intentStates.get(n);if(!s)return;this._stats&&this._stats.timeEnd("Page Request"),s.displayReadyCapability&&s.displayReadyCapability.resolve(t)}},{key:"_renderPageChunk",value:function(t,n){for(var s,i,a,o=0,c=t.length;o<c;o++)n.operatorList.fnArray.push(t.fnArray[o]),n.operatorList.argsArray.push(t.argsArray[o]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots,s=r(n.renderTasks);try{for(s.s();!(i=s.n()).done;)a=i.value,a.operatorListChanged()}catch(e){s.e(e)}finally{s.f()}t.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(t){var o,s=this,d=t.renderingIntent,i=t.cacheKey,c=t.annotationStorageMap,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:d,cacheKey:i,annotationStorage:c}),a=l.getReader(),n=this._intentStates.get(i);n.streamReader=a,o=function e(){a.read().then(function(t){var o=t.value,i=t.done;if(i){n.streamReader=null;return}if(s._transport.destroyed)return;s._renderPageChunk(o,n),e()},function(e){if(n.streamReader=null,s._transport.destroyed)return;if(n.operatorList){n.operatorList.lastChunk=!0;var o,i,t=r(n.renderTasks);try{for(t.s();!(o=t.n()).done;)i=o.value,i.operatorListChanged()}catch(e){t.e(e)}finally{t.f()}s._tryCleanup()}if(n.displayReadyCapability)n.displayReadyCapability.reject(e);else if(n.opListReadCapability)n.opListReadCapability.reject(e);else throw e})},o()}},{key:"_abortOperatorList",value:function(t){var i,c,h=this,n=t.intentState,a=t.reason,l=t.force,u=l!==void 0&&l;if(!n.streamReader)return;if(!u){if(n.renderTasks.size>0)return;if(a instanceof o.RenderingCancelledException){n.streamReaderCancelTimeout=setTimeout(function(){h._abortOperatorList({intentState:n,reason:a,force:!0}),n.streamReaderCancelTimeout=null},Z);return}}if(n.streamReader.cancel(new s.AbortException(a.message)).catch(function(){}),n.streamReader=null,this._transport.destroyed)return;i=r(this._intentStates);try{for(i.s();!(c=i.n()).done;){var d=k(c.value,2),m=d[0],f=d[1];if(f===n){this._intentStates.delete(m);break}}}catch(e){i.e(e)}finally{i.f()}this.cleanup()}},{key:"stats",get:function(){return this._stats}}]),e}(),t.PDFPageProxy=R,L=function(){function e(){d(this,e),this._listeners=[],this._deferred=Promise.resolve()}return u(e,[{key:"postMessage",value:function(t,n){var s=this,o={data:structuredClone(t,n)};this._deferred.then(function(){var t,n,e=r(s._listeners);try{for(e.s();!(t=e.n()).done;)n=t.value,n.call(s,o)}catch(t){e.e(t)}finally{e.f()}})}},{key:"addEventListener",value:function(t,n){this._listeners.push(n)}},{key:"removeEventListener",value:function(t,n){var s=this._listeners.indexOf(n);this._listeners.splice(s,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),e}(),t.LoopbackPort=L,c={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0},t.PDFWorkerUtil=c,m.isNodeJS&&typeof a=="function"?(c.isWorkerDisabled=!0,c.fallbackWorkerSrc="./pdf.worker.js"):(typeof document=="undefined"?"undefined":f(document))==="object"&&(U=(P=document)===null||P===void 0?void 0:(N=P.currentScript)===null||N===void 0?void 0:N.src,U&&(c.fallbackWorkerSrc=U.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))),c.isSameOrigin=function(e,t){try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}var n,s=new URL(t,n);return n.origin===s.origin},c.createCDNWrapper=function(e){var t='importScripts("'.concat(e,'");');return URL.createObjectURL(new Blob([t]))},E=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=n.name,r=o===void 0?null:o,i=n.port,t=i===void 0?null:i,a=n.verbosity,c=a===void 0?(0,s.getVerbosityLevel)():a;if(d(this,e),t&&h(e,e,O).has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=r,this.destroyed=!1,this.verbosity=c,this._readyCapability=(0,s.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t){h(e,e,O).set(t,this),this._initializeFromPort(t);return}this._initialize()}return u(e,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(t){this._port=t,this._messageHandler=new w.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var o,i,a,r,l,d,n=this;if(typeof Worker!="undefined"&&!c.isWorkerDisabled&&!e._mainThreadWorkerMessageHandler){a=e.workerSrc;try{c.isSameOrigin(window.location.href,a)||(a=c.createCDNWrapper(new URL(a,window.location).href)),o=new Worker(a),i=new w.MessageHandler("main","worker",o),l=function(){o.removeEventListener("error",r),i.destroy(),o.terminate(),n.destroyed?n._readyCapability.reject(new Error("Worker was destroyed")):n._setupFakeWorker()},r=function(){n._webWorker||l()},o.addEventListener("error",r),i.on("test",function(e){if(o.removeEventListener("error",r),n.destroyed){l();return}e?(n._messageHandler=i,n._port=o,n._webWorker=o,n._readyCapability.resolve(),i.send("configure",{verbosity:n.verbosity})):(n._setupFakeWorker(),i.destroy(),o.terminate())}),i.on("ready",function(){if(o.removeEventListener("error",r),n.destroyed){l();return}try{d()}catch{n._setupFakeWorker()}}),d=function(){var t=new Uint8Array;i.send("test",t,[t.buffer])},d();return}catch{(0,s.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var n=this;c.isWorkerDisabled||((0,s.warn)("Setting up fake worker."),c.isWorkerDisabled=!0),e._setupFakeWorkerGlobal.then(function(e){if(n.destroyed){n._readyCapability.reject(new Error("Worker was destroyed"));return}var t,o,i,s=new L;n._port=s,t="fake".concat(c.fakeWorkerId++),i=new w.MessageHandler(t+"_worker",t,s),e.setup(i,s),o=new w.MessageHandler(t,t+"_worker",s),n._messageHandler=o,n._readyCapability.resolve(),o.send("configure",{verbosity:n.verbosity})}).catch(function(e){n._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),h(e,e,O).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(n){if(!(n!=null&&n.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return h(this,e,O).has(n.port)?h(this,e,O).get(n.port):new e(n)}},{key:"workerSrc",get:function(){if(D.GlobalWorkerOptions.workerSrc)return D.GlobalWorkerOptions.workerSrc;if(c.fallbackWorkerSrc!==null)return m.isNodeJS||(0,o.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),c.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var t;return((t=globalThis.pdfjsWorker)===null||t===void 0?void 0:t.WorkerMessageHandler)||null}catch{return null}}},{key:"_setupFakeWorkerGlobal",get:function(){var t=this,n=function(){var e=g(l().mark(function e(){var n,s;return l().wrap(function(i){for(;1;)switch(i.prev=i.next){case 0:if(n=t._mainThreadWorkerMessageHandler,!n){i.next=3;break}return i.abrupt("return",n);case 3:if(!m.isNodeJS||typeof a!="function"){i.next=6;break}return s=eval("require")(t.workerSrc),i.abrupt("return",s.WorkerMessageHandler);case 6:return i.next=8,(0,o.loadScript)(t.workerSrc);case 8:return i.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return i.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return(0,s.shadow)(this,"_setupFakeWorkerGlobal",n())}}]),e}(),t.PDFWorker=E,O={writable:!0,value:new WeakMap},E.getWorkerSrc=function(){return(0,o.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc},z=new WeakMap,p=new WeakMap,x=new WeakMap,_=new WeakMap,be=function(){function e(t,n,o,i){d(this,e),j(this,z,{writable:!0,value:null}),j(this,p,{writable:!0,value:new Map}),j(this,x,{writable:!0,value:new Map}),j(this,_,{writable:!0,value:null}),this.messageHandler=t,this.loadingTask=n,this.commonObjs=new B,this.fontLoader=new K.FontLoader({docId:n.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,i.useWorkerFetch||(this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked}),this.StandardFontDataFactory=new i.StandardFontDataFactory({baseUrl:i.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,s.createPromiseCapability)(),this.setupMessageHandler()}return u(e,[{key:"annotationStorage",get:function(){return(0,s.shadow)(this,"annotationStorage",new M.AnnotationStorage)}},{key:"stats",get:function(){return i(this,z)}},{key:"getRenderingIntent",value:function(t){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.AnnotationMode.ENABLE,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,c=arguments.length>3&&arguments[3]!==void 0&&arguments[3],n=s.RenderingIntentFlag.DISPLAY,o=null;switch(t){case"any":n=s.RenderingIntentFlag.ANY;break;case"display":break;case"print":n=s.RenderingIntentFlag.PRINT;break;default:(0,s.warn)("getRenderingIntent - invalid intent: ".concat(t))}switch(i){case s.AnnotationMode.DISABLE:n+=s.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case s.AnnotationMode.ENABLE:break;case s.AnnotationMode.ENABLE_FORMS:n+=s.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case s.AnnotationMode.ENABLE_STORAGE:n+=s.RenderingIntentFlag.ANNOTATIONS_STORAGE,r=n&s.RenderingIntentFlag.PRINT&&a instanceof M.PrintAnnotationStorage?a:this.annotationStorage,o=r.serializable;break;default:(0,s.warn)("getRenderingIntent - invalid annotationMode: ".concat(i))}return c&&(n+=s.RenderingIntentFlag.OPLIST),{renderingIntent:n,cacheKey:"".concat(n,"_").concat(M.AnnotationStorage.getHash(o)),annotationStorageMap:o}}},{key:"destroy",value:function(){var n,o,a,c,l,t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,s.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback")),o=[],n=r(i(this,p).values());try{for(n.s();!(a=n.n()).done;)c=a.value,o.push(c._destroy())}catch(e){n.e(e)}finally{n.f()}return i(this,p).clear(),i(this,x).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified(),l=this.messageHandler.sendWithPromise("Terminate",null),o.push(l),Promise.all(o).then(function(){t.commonObjs.clear(),t.fontLoader.clear(),y(t,_,null),t._getFieldObjectsPromise=null,t._hasJSActionsPromise=null,t._networkStream&&t._networkStream.cancelAllRequests(new s.AbortException("Worker was terminated.")),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var t=this,n=this.messageHandler,o=this.loadingTask;n.on("GetReader",function(e,n){(0,s.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available."),t._fullReader=t._networkStream.getFullReader(),t._fullReader.onProgress=function(e){t._lastProgress={loaded:e.loaded,total:e.total}},n.onPull=function(){t._fullReader.read().then(function(e){var t=e.value,o=e.done;if(o){n.close();return}(0,s.assert)((0,s.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(t),1,[t])}).catch(function(e){n.error(e)})},n.onCancel=function(e){t._fullReader.cancel(e),n.ready.catch(function(e){if(t.destroyed)return;throw e})}}),n.on("ReaderHeadersReady",function(){var i=(0,s.createPromiseCapability)(),n=t._fullReader;return n.headersReady.then(function(){if(!n.isStreamingSupported||!n.isRangeSupported){if(t._lastProgress){var e;(e=o.onProgress)===null||e===void 0?void 0:e.call(o,t._lastProgress)}n.onProgress=function(e){var t;(t=o.onProgress)===null||t===void 0?void 0:t.call(o,{loaded:e.loaded,total:e.total})}}i.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})},i.reject),i.promise}),n.on("GetRangeReader",function(e,n){(0,s.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var o=t._networkStream.getRangeReader(e.begin,e.end);if(!o){n.close();return}n.onPull=function(){o.read().then(function(e){var t=e.value,o=e.done;if(o){n.close();return}(0,s.assert)((0,s.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(t),1,[t])}).catch(function(e){n.error(e)})},n.onCancel=function(e){o.cancel(e),n.ready.catch(function(e){if(t.destroyed)return;throw e})}}),n.on("GetDoc",function(e){var n=e.pdfInfo;t._numPages=n.numPages,t._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,o._capability.resolve(new H(n,t))}),n.on("DocException",function(e){var t;switch(e.name){case"PasswordException":t=new s.PasswordException(e.message,e.code);break;case"InvalidPDFException":t=new s.InvalidPDFException(e.message);break;case"MissingPDFException":t=new s.MissingPDFException(e.message);break;case"UnexpectedResponseException":t=new s.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":t=new s.UnknownErrorException(e.message,e.details);break;default:(0,s.unreachable)("DocException - expected a valid Error.")}o._capability.reject(t)}),n.on("PasswordRequest",function(e){if(t._passwordCapability=(0,s.createPromiseCapability)(),o.onPassword){var n=function(n){n instanceof Error?t._passwordCapability.reject(n):t._passwordCapability.resolve({password:n})};try{o.onPassword(n,e.code)}catch(e){t._passwordCapability.reject(e)}}else t._passwordCapability.reject(new s.PasswordException(e.message,e.code));return t._passwordCapability.promise}),n.on("DataLoaded",function(e){var n;(n=o.onProgress)===null||n===void 0?void 0:n.call(o,{loaded:e.length,total:e.length}),t.downloadInfoCapability.resolve(e)}),n.on("StartRenderPage",function(e){if(t.destroyed)return;var n=i(t,p).get(e.pageIndex);n._startRenderPage(e.transparency,e.cacheKey)}),n.on("commonobj",function(e){var o,a,c,d,u,l=k(e,3),i=l[0],h=l[1],r=l[2];if(t.destroyed)return;if(t.commonObjs.has(i))return;switch(h){case"Font":if(o=t._params,"error"in r){d=r.error,(0,s.warn)("Error during font loading: ".concat(d)),t.commonObjs.resolve(i,d);break}u=null,o.pdfBug&&(c=globalThis.FontInspector)!==null&&c!==void 0&&c.enabled&&(u={registerFont:function(t,n){globalThis.FontInspector.fontAdded(t,n)}}),a=new K.FontFaceObject(r,{isEvalSupported:o.isEvalSupported,disableFontFace:o.disableFontFace,ignoreErrors:o.ignoreErrors,onUnsupportedFeature:t._onUnsupportedFeature.bind(t),fontRegistry:u}),t.fontLoader.bind(a).catch(function(){return n.sendWithPromise("FontFallback",{id:i})}).finally(function(){!o.fontExtraProperties&&a.data&&(a.data=null),t.commonObjs.resolve(i,a)});break;case"FontPath":case"Image":t.commonObjs.resolve(i,r);break;default:throw new Error("Got unknown common object type ".concat(h))}}),n.on("obj",function(e){var s,r,c,d,o=k(e,4),a=o[0],u=o[1],l=o[2],n=o[3];if(t.destroyed)return;if(s=i(t,p).get(u),s.objs.has(a))return;switch(l){case"Image":if(s.objs.resolve(a,n),d=8e6,n){if(n.bitmap){var h=n.bitmap,m=n.width,f=n.height;r=m*f*4,s._bitmaps.add(h)}else r=((c=n.data)===null||c===void 0?void 0:c.length)||0;r>d&&(s.cleanupAfterRender=!0)}break;case"Pattern":s.objs.resolve(a,n);break;default:throw new Error("Got unknown object type ".concat(l))}}),n.on("DocProgress",function(e){var n;if(t.destroyed)return;(n=o.onProgress)===null||n===void 0?void 0:n.call(o,{loaded:e.loaded,total:e.total})}),n.on("DocStats",function(e){if(t.destroyed)return;y(t,z,Object.freeze({streamTypes:Object.freeze(e.streamTypes),fontTypes:Object.freeze(e.fontTypes)}))}),n.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),n.on("FetchBuiltInCMap",function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.CMapReaderFactory?t.CMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}),n.on("FetchStandardFontData",function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.StandardFontDataFactory?t.StandardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))})}},{key:"_onUnsupportedFeature",value:function(t){var n,s,o=t.featureId;if(this.destroyed)return;(n=(s=this.loadingTask).onUnsupportedFeature)===null||n===void 0?void 0:n.call(s,o)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(t){if(n=this,!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var n,o,s=t-1,a=i(this,x).get(s);return a||(o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(function(e){if(n.destroyed)throw new Error("Transport destroyed");var t=new R(s,e,n,n._params.ownerDocument,n._params.pdfBug);return i(n,p).set(s,t),t}),i(this,x).set(s,o),o)}},{key:"getPageIndex",value:function(t){return f(t)!=="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}},{key:"getAnnotations",value:function(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}},{key:"saveDocument",value:function(){var t,n,s=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(t=(n=this._fullReader)===null||n===void 0?void 0:n.filename)!==null&&t!==void 0?t:null}).finally(function(){s.annotationStorage.resetModified()})}},{key:"getFieldObjects",value:function(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(e){return new fe.OptionalContentConfig(e)})}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var t=this;return i(this,_)||y(this,_,this.messageHandler.sendWithPromise("GetMetadata",null).then(function(e){var n,s,o,i;return{info:e[0],metadata:e[1]?new pe.Metadata(e[1]):null,contentDispositionFilename:(n=(s=t._fullReader)===null||s===void 0?void 0:s.filename)!==null&&n!==void 0?n:null,contentLength:(o=(i=t._fullReader)===null||i===void 0?void 0:i.contentLength)!==null&&o!==void 0?o:null}}))}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:function(){var e=g(l().mark(function e(){var t,n,o,a,c,s=arguments;return l().wrap(function(l){for(;1;)switch(l.prev=l.next){case 0:return o=s.length>0&&s[0]!==void 0&&s[0],l.next=3,this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){l.next=5;break}return l.abrupt("return");case 5:t=r(i(this,p).values()),l.prev=6,t.s();case 8:if((a=t.n()).done){l.next=15;break}if(n=a.value,c=n.cleanup(),c){l.next=13;break}throw new Error("startCleanup: Page ".concat(n.pageNumber," is currently rendering."));case 13:l.next=8;break;case 15:l.next=20;break;case 17:l.prev=17,l.t0=l.catch(6),t.e(l.t0);case 20:return l.prev=20,t.f(),l.finish(20);case 23:this.commonObjs.clear(),o||this.fontLoader.clear(),y(this,_,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null;case 28:case"end":return l.stop()}},e,this,[[6,17,20,23]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadingParams",get:function(){var t=this._params;return(0,s.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}]),e}(),v=new WeakMap,F=new WeakSet,B=function(){function e(){d(this,e),Te(this,F),j(this,v,{writable:!0,value:Object.create(null)})}return u(e,[{key:"get",value:function(t){var n,s,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(o)return s=de(this,F,ie).call(this,t),s.capability.promise.then(function(){return o(s.data)}),null;if(n=i(this,v)[t],!(n!=null&&n.capability.settled))throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return n.data}},{key:"has",value:function(t){var n=i(this,v)[t];return n?.capability.settled||!1}},{key:"resolve",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=de(this,F,ie).call(this,t);n.data=s,n.capability.resolve()}},{key:"clear",value:function(){y(this,v,Object.create(null))}}]),e}();function ie(e){var t=i(this,v)[e];return t?t:i(this,v)[e]={capability:(0,s.createPromiseCapability)(),data:null}}b=new WeakMap,X=function(){function e(t){d(this,e),j(this,b,{writable:!0,value:null}),y(this,b,t),this.onContinue=null}return u(e,[{key:"promise",get:function(){return i(this,b).capability.promise}},{key:"cancel",value:function(){i(this,b).cancel()}},{key:"separateAnnots",get:function(){if(t=i(this,b).operatorList.separateAnnots,!t)return!1;var t,s=i(this,b),n=s.annotationCanvasMap;return t.form||t.canvas&&n?.size>0}}]),e}(),t.RenderTask=X,re=function(){function e(t){var r=t.callback,o=t.params,g=t.objs,f=t.commonObjs,h=t.annotationCanvasMap,c=t.operatorList,l=t.pageIndex,u=t.canvasFactory,n=t.useRequestAnimationFrame,m=n!==void 0&&n,a=t.pdfBug,p=a!==void 0&&a,i=t.pageColors,v=i===void 0?null:i;d(this,e),this.callback=r,this.params=o,this.objs=g,this.commonObjs=f,this.annotationCanvasMap=h,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=l,this.canvasFactory=u,this._pdfBug=p,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,s.createPromiseCapability)(),this.task=new X(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=o.canvasContext.canvas}return u(e,[{key:"completed",get:function(){return this.capability.promise.catch(function(){})}},{key:"initializeGraphics",value:function(n){var i=n.transparency,a=i!==void 0&&i,r=n.optionalContentConfig;if(this.cancelled)return;if(this._canvas){if(h(e,e,C).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(e,e,C).add(this._canvas)}this._pdfBug&&(o=globalThis.StepperManager)!==null&&o!==void 0&&o.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var o,s=this.params,c=s.canvasContext,l=s.viewport,d=s.transform,u=s.imageLayer,m=s.background;this.gfx=new ge.CanvasGraphics(c,this.commonObjs,this.objs,this.canvasFactory,u,r,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:d,viewport:l,transparency:a,background:m}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}},{key:"cancel",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&h(e,e,C).delete(this._canvas),this.callback(n||new o.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}if(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running)return;this._continue()}},{key:"_continue",value:function(){if(this.running=!0,this.cancelled)return;this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext()}},{key:"_scheduleNext",value:function(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame(function(){t._nextBound().catch(t._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:function(){var t=g(l().mark(function t(){return l().wrap(function(n){for(;1;)switch(n.prev=n.next){case 0:if(!this.cancelled){n.next=2;break}return n.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&h(e,e,C).delete(this._canvas),this.callback()));case 4:case"end":return n.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()}]),e}(),C={writable:!0,value:new WeakSet},ue="2.15.349",t.version=ue,me="b8aa9c622",t.build=me},(e,t,n)=>{"use strict";function d(e){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var s,a,r,u,m=n(1),D=n(133),z=n(135);function O(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},l(e,t)}function x(e){var t=R();return function(){var s,a,i=o(e);return t?(a=o(this).constructor,s=Reflect.construct(i,arguments,a)):s=i.apply(this,arguments),L(this,s)}}function L(e,t){if(t&&(d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}function i(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(e)}function F(e,t,n){f(e,t),t.set(e,n)}function S(e,t){var n=b(e,t,"get");return A(e,n)}function A(e,t){return t.get?t.get.call(e):t.value}function k(e,t,n){var s=b(e,t,"set");return C(e,s,n),n}function b(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function C(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function j(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=h(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function c(e,t){return E(e)||_(e,t)||h(e,t)||w()}function w(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(e,t){if(!e)return;if(typeof e=="string")return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}function y(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function _(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function E(e){if(Array.isArray(e))return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function p(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M(e,t){f(e,t),t.add(e)}function f(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}r=new WeakSet,a=function(){function e(){v(this,e),M(this,r),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}return p(e,[{key:"getValue",value:function(t,n){var s=this._storage.get(t);return s===void 0?n:Object.assign(n,s)}},{key:"getRawValue",value:function(t){return this._storage.get(t)}},{key:"removeKey",value:function(t){this._storage.delete(t),this._storage.size===0&&this.resetModified()}},{key:"setValue",value:function(t,n){if(s=this._storage.get(t),o=!1,s!==void 0)for(i=0,a=Object.entries(n);i<a.length;i++){var s,o,i,a,l=c(a[i],2),d=l[0],u=l[1];s[d]!==u&&(o=!0,s[d]=u)}else o=!0,this._storage.set(t,n);o&&T(this,r,N).call(this)}},{key:"has",value:function(t){return this._storage.has(t)}},{key:"getAll",value:function(){return this._storage.size>0?(0,m.objectFromMap)(this._storage):null}},{key:"size",get:function(){return this._storage.size}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}},{key:"print",get:function(){return new u(this)}},{key:"serializable",get:function(){if(this._storage.size===0)return null;n=new Map,t=j(this._storage);try{for(t.s();!(i=t.n()).done;){var t,n,i,a=c(i.value,2),r=a[0],s=a[1],o=s instanceof D.AnnotationEditor?s.serialize():s;o&&n.set(r,o)}}catch(e){t.e(e)}finally{t.f()}return n}}],[{key:"getHash",value:function(t){if(!t)return"";s=new z.MurmurHash3_64,n=j(t);try{for(n.s();!(o=n.n()).done;){var n,s,o,i=c(o.value,2),a=i[0],r=i[1];s.update("".concat(a,":").concat(JSON.stringify(r)))}}catch(e){n.e(e)}finally{n.f()}return s.hexdigest()}}]),e}(),t.AnnotationStorage=a;function N(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}s=new WeakMap,u=function(e){O(t,e);var n=x(t);function t(e){var o;return v(this,t),o=n.call(this),F(i(o),s,{writable:!0,value:null}),k(i(o),s,structuredClone(e.serializable)),o}return p(t,[{key:"print",get:function(){(0,m.unreachable)("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function(){return S(this,s)}}]),t}(a),t.PrintAnnotationStorage=u},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var a,r,c,d,u,h,f,p=n(134),m=n(1);function s(e,t){return O(e)||x(e,t)||E(e,t)||k()}function k(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(e,t){if(!e)return;if(typeof e=="string")return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}function v(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function x(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function O(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function C(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){A(e,t),t.set(e,n)}function A(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function l(e,t,n){var s=g(e,t,"set");return w(e,s,n),n}function w(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function o(e,t){var n=g(e,t,"get");return _(e,n)}function g(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function _(e,t){return t.get?t.get.call(e):t.value}c=new WeakMap,d=new WeakMap,r=new WeakMap,u=new WeakMap,a=new WeakMap,f=new WeakMap,h=function(){function e(t){y(this,e),i(this,c,{writable:!0,value:this.focusin.bind(this)}),i(this,d,{writable:!0,value:this.focusout.bind(this)}),i(this,r,{writable:!0,value:!1}),i(this,u,{writable:!0,value:!1}),i(this,a,{writable:!0,value:!1}),i(this,f,{writable:!0,value:e._zIndex++}),this.constructor===e&&(0,m.unreachable)("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null;var n=s(this.parent.viewportBaseDimensions,2),o=n[0],l=n[1];this.x=t.x/o,this.y=t.y/l,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}return C(e,[{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"setInForeground",value:function(){this.div.style.zIndex=o(this,f)}},{key:"focusin",value:function(){o(this,r)?l(this,r,!1):this.parent.setSelected(this)}},{key:"focusout",value:function(t){if(!this.isAttachedToDOM)return;var n=t.relatedTarget;if(n!=null&&n.closest("#".concat(this.id)))return;t.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove()}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function(){this.parent.addToAnnotationStorage(this)}},{key:"dragstart",value:function(t){var n=this.parent.div.getBoundingClientRect();this.startX=t.clientX-n.x,this.startY=t.clientY-n.y,t.dataTransfer.setData("text/plain",this.id),t.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function(t,n,o,i){var a=s(this.parent.viewportBaseDimensions,2),c=a[0],l=a[1],d=this.screenToPageTranslation(o,i),r=s(d,2);o=r[0],i=r[1],this.x=(t+o)/c,this.y=(n+i)/l,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function(t,n){var o=s(this.parent.viewportBaseDimensions,2),a=o[0],r=o[1],c=this.screenToPageTranslation(t,n),i=s(c,2);t=i[0],n=i[1],this.x+=t/a,this.y+=n/r,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function(t,n){var s=this.parent.viewport.rotation;switch(s){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}}},{key:"setDims",value:function(t,n){var o=s(this.parent.viewportBaseDimensions,2),i=o[0],a=o[1];this.div.style.width="".concat(100*t/i,"%"),this.div.style.height="".concat(100*n/a,"%")}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"render",value:function(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",o(this,c)),this.div.addEventListener("focusout",o(this,d));var n=this.getInitialTranslation(),t=s(n,2),i=t[0],a=t[1];return this.translate(i,a),(0,p.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}},{key:"pointerdown",value:function(t){var n=p.KeyboardManager.platform.isMac;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this),l(this,r,!0)}},{key:"getRect",value:function(t,n){var h=s(this.parent.viewportBaseDimensions,2),f=h[0],p=h[1],m=s(this.parent.pageDimensions,2),u=m[0],o=m[1],i=u*t/f,a=o*n/p,r=this.x*u,c=this.y*o,l=this.width*u,d=this.height*o;switch(this.rotation){case 0:return[r+i,o-c-a-d,r+i+l,o-c-a];case 90:return[r+a,o-c+i,r+a+d,o-c+i+l];case 180:return[r-i-l,o-c+a,r-i,o-c+a+d];case 270:return[r-a-d,o-c-i-l,r-a,o-c-i];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(t,n){var o=s(t,4),r=o[0],c=o[1],l=o[2],d=o[3],i=l-r,a=d-c;switch(this.rotation){case 0:return[r,n-d,i,a];case 90:return[r,n-c,a,i];case 180:return[l,n-c,i,a];case 270:return[l,n-d,a,i];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function(){}},{key:"isEmpty",value:function(){return!1}},{key:"enableEditMode",value:function(){l(this,a,!0)}},{key:"disableEditMode",value:function(){l(this,a,!1)}},{key:"isInEditMode",value:function(){return o(this,a)}},{key:"shouldGetKeyboardEvents",value:function(){return!1}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var t;(t=this.div)===null||t===void 0?void 0:t.addEventListener("focusin",o(this,c))}},{key:"serialize",value:function(){(0,m.unreachable)("An editor must be serializable")}},{key:"remove",value:function(){this.div.removeEventListener("focusin",o(this,c)),this.div.removeEventListener("focusout",o(this,d)),this.isEmpty()||this.commit(),this.parent.remove(this)}},{key:"select",value:function(){var t;(t=this.div)===null||t===void 0?void 0:t.classList.add("selectedEditor")}},{key:"unselect",value:function(){var t;(t=this.div)===null||t===void 0?void 0:t.classList.remove("selectedEditor")}},{key:"updateParams",value:function(){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"getIdForTextLayer",value:function(){return this.id}},{key:"propertiesToUpdate",get:function(){return{}}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return o(this,u)},set:function(t){l(this,u,t),t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}],[{key:"_defaultLineColor",get:function(){return(0,m.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deserialize",value:function(t,n){o=new this.prototype.constructor({parent:n,id:n.getNextId()}),o.rotation=t.rotation;var o,r=s(n.pageDimensions,2),c=r[0],a=r[1],l=o.getRectInCurrentCoords(t.rect,a),i=s(l,4),d=i[0],u=i[1],h=i[2],m=i[3];return o.x=d/c,o.y=u/a,o.width=h/c,o.height=m/a,o}}]),e}(),t.AnnotationEditor=h,b(h,"_colorManager",new p.ColorManager),b(h,"_zIndex",1)},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=Ee,t.opacityToHex=_e;var c,l,d,u,h,m,f,g,v,b,j,w,O,x,E,k,A,M,F,T,z,D,N,L,R,P,H,I,V,W,K,q,Y,G,Q,Z,J,_=n(1),ie,ee,he,se=n(129);function ce(e){return ge(e)||pe(e)||ne(e)||me()}function me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ge(e){if(Array.isArray(e))return U(e)}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){return ve(e)||Ce(e,t)||ne(e,t)||fe()}function fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function ve(e){if(Array.isArray(e))return e}function y(e,t){ae(e,t),t.add(e)}function o(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function S(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){ae(e,t),t.set(e,n)}function ae(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(e,t,n){var s=le(e,t,"set");return ye(e,s,n),n}function ye(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function s(e,t){var n=le(e,t,"get");return xe(e,n)}function le(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function xe(e,t){return t.get?t.get.call(e):t.value}function r(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=ne(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function ne(e,t){if(!e)return;if(typeof e=="string")return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}function U(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Ee(e,t,n){var o,i,s=r(n);try{for(s.s();!(i=s.n()).done;)o=i.value,t.addEventListener(o,e[o].bind(e))}catch(e){s.e(e)}finally{s.f()}}function _e(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}V=new WeakMap,ie=function(){function e(){C(this,e),a(this,V,{writable:!0,value:0})}return S(e,[{key:"getId",value:function(){var t,n;return"".concat(_.AnnotationEditorPrefix).concat((i(this,V,(t=s(this,V),n=t++,t)),n))}}]),e}(),d=new WeakMap,x=new WeakMap,N=new WeakMap,l=new WeakMap,ee=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;C(this,e),a(this,d,{writable:!0,value:[]}),a(this,x,{writable:!0,value:!1}),a(this,N,{writable:!0,value:void 0}),a(this,l,{writable:!0,value:-1}),i(this,N,t)}return S(e,[{key:"add",value:function(t){var n,o,a=t.cmd,p=t.undo,m=t.mustExec,u=t.type,h=u===void 0?NaN:u,c=t.overwriteIfSameType,f=c!==void 0&&c,r=t.keepUndo,g=r!==void 0&&r;if(m&&a(),s(this,x))return;if(n={cmd:a,undo:p,type:h},s(this,l)===-1){s(this,d).length>0&&(s(this,d).length=0),i(this,l,0),s(this,d).push(n);return}if(f&&s(this,d)[s(this,l)].type===h){g&&(n.undo=s(this,d)[s(this,l)].undo),s(this,d)[s(this,l)]=n;return}o=s(this,l)+1,o===s(this,N)?s(this,d).splice(0,1):(i(this,l,o),o<s(this,d).length&&s(this,d).splice(o)),s(this,d).push(n)}},{key:"undo",value:function(){if(s(this,l)===-1)return;i(this,x,!0),s(this,d)[s(this,l)].undo(),i(this,x,!1),i(this,l,s(this,l)-1)}},{key:"redo",value:function(){s(this,l)<s(this,d).length-1&&(i(this,l,s(this,l)+1),i(this,x,!0),s(this,d)[s(this,l)].cmd(),i(this,x,!1))}},{key:"hasSomethingToUndo",value:function(){return s(this,l)!==-1}},{key:"hasSomethingToRedo",value:function(){return s(this,l)<s(this,d).length-1}},{key:"destroy",value:function(){i(this,d,null)}}]),e}(),t.CommandManager=ee,J=new WeakSet,G=function(){function e(t){C(this,e),y(this,J),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set,a=e.platform.isMac,o=r(t);try{for(o.s();!(d=o.n()).done;){var n,o,i,a,l,d,u=te(d.value,2),h=u[0],c=u[1],s=r(h);try{for(s.s();!(l=s.n()).done;)n=l.value,i=n.startsWith("mac+"),a&&i?(this.callbacks.set(n.slice(4),c),this.allKeys.add(n.split("+").at(-1))):!a&&!i&&(this.callbacks.set(n,c),this.allKeys.add(n.split("+").at(-1)))}catch(e){s.e(e)}finally{s.f()}}}catch(e){o.e(e)}finally{o.f()}}return S(e,[{key:"exec",value:function(t,n){if(!this.allKeys.has(n.key))return;var s=this.callbacks.get(o(this,J,je).call(this,n));if(!s)return;s.bind(t)(),n.stopPropagation(),n.preventDefault()}}],[{key:"platform",get:function(){var t=typeof navigator!="undefined"?navigator.platform:"";return(0,_.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]),e}(),t.KeyboardManager=G;function je(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);var t=this.buffer.join("+");return this.buffer.length=0,t}g=new WeakMap,he=function(){function e(){C(this,e),a(this,g,{writable:!0,value:null})}return S(e,[{key:"copy",value:function(t){if(!t)return;Array.isArray(t)?i(this,g,t.map(function(e){return e.serialize()})):i(this,g,[t.serialize()]),i(this,g,s(this,g).filter(function(e){return!!e})),s(this,g).length===0&&i(this,g,null)}},{key:"paste",value:function(){return s(this,g)}},{key:"isEmpty",value:function(){return s(this,g)===null}},{key:"destroy",value:function(){i(this,g,null)}}]),e}(),q=function(){function e(){C(this,e)}return S(e,[{key:"_colors",get:function(){var t=new Map([["CanvasText",null],["Canvas",null]]);return(0,se.getColorValues)(t),(0,_.shadow)(this,"_colors",t)}},{key:"convert",value:function(n){if(o=(0,se.getRGB)(n),!window.matchMedia("(forced-colors: active)").matches)return o;s=r(this._colors);try{for(s.s();!(i=s.n()).done;){var s,o,i,a=te(i.value,2),c=a[0],l=a[1];if(l.every(function(e,t){return e===o[t]}))return e._colorsMapping.get(c)}}catch(e){s.e(e)}finally{s.f()}return o}},{key:"getHexCode",value:function(t){var n=this._colors.get(t);return n?_.Util.makeHexColor.apply(_.Util,ce(n)):t}}]),e}(),t.ColorManager=q,de(q,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),h=new WeakMap,v=new WeakMap,m=new WeakMap,w=new WeakMap,j=new WeakMap,W=new WeakMap,T=new WeakMap,f=new WeakMap,Z=new WeakMap,O=new WeakMap,A=new WeakMap,c=new WeakMap,I=new WeakMap,R=new WeakMap,H=new WeakMap,z=new WeakMap,L=new WeakMap,E=new WeakMap,Y=new WeakSet,P=new WeakSet,u=new WeakSet,k=new WeakSet,Q=new WeakSet,K=new WeakSet,D=new WeakSet,M=new WeakSet,F=new WeakSet,b=function(){function e(t,n){C(this,e),y(this,F),y(this,M),y(this,D),y(this,K),y(this,Q),y(this,k),y(this,u),y(this,P),y(this,Y),a(this,h,{writable:!0,value:null}),a(this,v,{writable:!0,value:new Map}),a(this,m,{writable:!0,value:new Map}),a(this,w,{writable:!0,value:new he}),a(this,j,{writable:!0,value:new ee}),a(this,W,{writable:!0,value:0}),a(this,T,{writable:!0,value:null}),a(this,f,{writable:!0,value:null}),a(this,Z,{writable:!0,value:new ie}),a(this,O,{writable:!0,value:!1}),a(this,A,{writable:!0,value:_.AnnotationEditorType.NONE}),a(this,c,{writable:!0,value:new Set}),a(this,I,{writable:!0,value:this.keydown.bind(this)}),a(this,R,{writable:!0,value:this.onEditingAction.bind(this)}),a(this,H,{writable:!0,value:this.onPageChanging.bind(this)}),a(this,z,{writable:!0,value:this.onTextLayerRendered.bind(this)}),a(this,L,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),a(this,E,{writable:!0,value:null}),i(this,E,t),i(this,f,n),s(this,f)._on("editingaction",s(this,R)),s(this,f)._on("pagechanging",s(this,H)),s(this,f)._on("textlayerrendered",s(this,z))}return S(e,[{key:"destroy",value:function(){o(this,P,ue).call(this),s(this,f)._off("editingaction",s(this,R)),s(this,f)._off("pagechanging",s(this,H)),s(this,f)._off("textlayerrendered",s(this,z));var n,a,t=r(s(this,m).values());try{for(t.s();!(n=t.n()).done;)a=n.value,a.destroy()}catch(e){t.e(e)}finally{t.f()}s(this,m).clear(),s(this,v).clear(),i(this,h,null),s(this,c).clear(),s(this,w).destroy(),s(this,j).destroy()}},{key:"onPageChanging",value:function(t){var n=t.pageNumber;i(this,W,n-1)}},{key:"onTextLayerRendered",value:function(t){var o=t.pageNumber,i=o-1,n=s(this,m).get(i);n?.onTextLayerRendered()}},{key:"focusMainContainer",value:function(){s(this,E).focus()}},{key:"keydown",value:function(n){var s;(s=this.getActive())!==null&&s!==void 0&&s.shouldGetKeyboardEvents()||e._keyboardManager.exec(this,n)}},{key:"onEditingAction",value:function(t){["undo","redo","cut","copy","paste","delete","selectAll"].includes(t.name)&&this[t.name]()}},{key:"setEditingState",value:function(t){t?(o(this,Y,be).call(this),o(this,u,p).call(this,{isEditing:s(this,A)!==_.AnnotationEditorType.NONE,isEmpty:o(this,M,B).call(this),hasSomethingToUndo:s(this,j).hasSomethingToUndo(),hasSomethingToRedo:s(this,j).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:s(this,w).isEmpty()})):(o(this,P,ue).call(this),o(this,u,p).call(this,{isEditing:!1}))}},{key:"registerEditorTypes",value:function(t){i(this,T,t);var a,c,n=r(s(this,T));try{for(n.s();!(a=n.n()).done;)c=a.value,o(this,k,$).call(this,c.defaultPropertiesToUpdate)}catch(e){n.e(e)}finally{n.f()}}},{key:"getId",value:function(){return s(this,Z).getId()}},{key:"addLayer",value:function(t){s(this,m).set(t.pageIndex,t),s(this,O)?t.enable():t.disable()}},{key:"removeLayer",value:function(t){s(this,m).delete(t.pageIndex)}},{key:"updateMode",value:function(t){if(i(this,A,t),t===_.AnnotationEditorType.NONE)this.setEditingState(!1),o(this,K,Oe).call(this);else{this.setEditingState(!0),o(this,Q,we).call(this);var a,c,n=r(s(this,m).values());try{for(n.s();!(a=n.n()).done;)c=a.value,c.updateMode(t)}catch(e){n.e(e)}finally{n.f()}}}},{key:"updateToolbar",value:function(t){if(t===s(this,A))return;s(this,f).dispatch("switchannotationeditormode",{source:this,mode:t})}},{key:"updateParams",value:function(t,n){var o,a,l,d,u,i=r(s(this,c));try{for(i.s();!(a=i.n()).done;)l=a.value,l.updateParams(t,n)}catch(e){i.e(e)}finally{i.f()}o=r(s(this,T));try{for(o.s();!(d=o.n()).done;)u=d.value,u.updateDefaultParams(t,n)}catch(e){o.e(e)}finally{o.f()}}},{key:"getEditors",value:function(t){var o,a,i=[],n=r(s(this,v).values());try{for(n.s();!(a=n.n()).done;)o=a.value,o.pageIndex===t&&i.push(o)}catch(e){n.e(e)}finally{n.f()}return i}},{key:"getEditor",value:function(t){return s(this,v).get(t)}},{key:"addEditor",value:function(t){s(this,v).set(t.id,t)}},{key:"removeEditor",value:function(t){s(this,v).delete(t.id),this.unselect(t)}},{key:"setActiveEditor",value:function(t){if(s(this,h)===t)return;i(this,h,t),t&&o(this,k,$).call(this,t.propertiesToUpdate)}},{key:"toggleSelected",value:function(t){if(s(this,c).has(t)){s(this,c).delete(t),t.unselect(),o(this,u,p).call(this,{hasSelectedEditor:this.hasSelection});return}s(this,c).add(t),t.select(),o(this,k,$).call(this,t.propertiesToUpdate),o(this,u,p).call(this,{hasSelectedEditor:!0})}},{key:"setSelected",value:function(t){var i,a,n=r(s(this,c));try{for(n.s();!(a=n.n()).done;)i=a.value,i!==t&&i.unselect()}catch(e){n.e(e)}finally{n.f()}s(this,c).clear(),s(this,c).add(t),t.select(),o(this,k,$).call(this,t.propertiesToUpdate),o(this,u,p).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function(t){return s(this,c).has(t)}},{key:"unselect",value:function(t){t.unselect(),s(this,c).delete(t),o(this,u,p).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function(){return s(this,c).size!==0}},{key:"undo",value:function(){s(this,j).undo(),o(this,u,p).call(this,{hasSomethingToUndo:s(this,j).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:o(this,M,B).call(this)})}},{key:"redo",value:function(){s(this,j).redo(),o(this,u,p).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:s(this,j).hasSomethingToRedo(),isEmpty:o(this,M,B).call(this)})}},{key:"addCommands",value:function(t){s(this,j).add(t),o(this,u,p).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:o(this,M,B).call(this)})}},{key:"delete",value:function(){var t,i,a,n=this;if(s(this,h)&&s(this,h).commitOrRemove(),!this.hasSelection)return;t=ce(s(this,c)),i=function(){var s,o,n=r(t);try{for(n.s();!(s=n.n()).done;)o=s.value,o.remove()}catch(e){n.e(e)}finally{n.f()}},a=function(){var i,a,s=r(t);try{for(s.s();!(i=s.n()).done;)a=i.value,o(n,D,re).call(n,a)}catch(e){s.e(e)}finally{s.f()}},this.addCommands({cmd:i,undo:a,mustExec:!0})}},{key:"copy",value:function(){if(s(this,h)&&s(this,h).commitOrRemove(),this.hasSelection){var i,a,n=[],t=r(s(this,c));try{for(t.s();!(a=t.n()).done;)i=a.value,i.isEmpty()||n.push(i)}catch(e){t.e(e)}finally{t.f()}if(n.length===0)return;s(this,w).copy(n),o(this,u,p).call(this,{hasEmptyClipboard:!1})}}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){var n,i,a,c,t=this;if(s(this,w).isEmpty())return;this.unselectAll(),i=s(this,m).get(s(this,W)),n=s(this,w).paste().map(function(e){return i.deserialize(e)}),a=function(){var i,a,s=r(n);try{for(s.s();!(i=s.n()).done;)a=i.value,o(t,D,re).call(t,a)}catch(e){s.e(e)}finally{s.f()}o(t,F,X).call(t,n)},c=function(){var s,o,t=r(n);try{for(t.s();!(s=t.n()).done;)o=s.value,o.remove()}catch(e){t.e(e)}finally{t.f()}},this.addCommands({cmd:a,undo:c,mustExec:!0})}},{key:"selectAll",value:function(){var n,i,t=r(s(this,c));try{for(t.s();!(n=t.n()).done;)i=n.value,i.commit()}catch(e){t.e(e)}finally{t.f()}o(this,F,X).call(this,s(this,v).values())}},{key:"unselectAll",value:function(){if(s(this,h)){s(this,h).commitOrRemove();return}if(o(this,F,X).size===0)return;var n,i,t=r(s(this,c));try{for(t.s();!(n=t.n()).done;)i=n.value,i.unselect()}catch(e){t.e(e)}finally{t.f()}s(this,c).clear(),o(this,u,p).call(this,{hasSelectedEditor:!1})}},{key:"isActive",value:function(t){return s(this,h)===t}},{key:"getActive",value:function(){return s(this,h)}},{key:"getMode",value:function(){return s(this,A)}}]),e}(),t.AnnotationEditorUIManager=b;function be(){s(this,E).addEventListener("keydown",s(this,I))}function ue(){s(this,E).removeEventListener("keydown",s(this,I))}function p(e){var t=this,n=Object.entries(e).some(function(e){var n=te(e,2),o=n[0],i=n[1];return s(t,L)[o]!==i});n&&s(this,f).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(s(this,L),e)})}function $(e){s(this,f).dispatch("annotationeditorparamschanged",{source:this,details:e})}function we(){if(!s(this,O)){i(this,O,!0);var t,n,e=r(s(this,m).values());try{for(e.s();!(t=e.n()).done;)n=t.value,n.enable()}catch(t){e.e(t)}finally{e.f()}}}function Oe(){if(this.unselectAll(),s(this,O)){i(this,O,!1);var t,n,e=r(s(this,m).values());try{for(e.s();!(t=e.n()).done;)n=t.value,n.disable()}catch(t){e.e(t)}finally{e.f()}}}function re(e){var t=s(this,m).get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)}function B(){if(s(this,v).size===0)return!0;if(s(this,v).size===1){var t,n,e=r(s(this,v).values());try{for(e.s();!(t=e.n()).done;)return n=t.value,n.isEmpty()}catch(t){e.e(t)}finally{e.f()}}return!1}function X(e){s(this,c).clear();var n,i,t=r(e);try{for(t.s();!(i=t.n()).done;){if(n=i.value,n.isEmpty())continue;s(this,c).add(n),n.select()}}catch(e){t.e(e)}finally{t.f()}o(this,u,p).call(this,{hasSelectedEditor:!0})}de(b,"_keyboardManager",new G([[["ctrl+a","mac+meta+a"],b.prototype.selectAll],[["ctrl+c","mac+meta+c"],b.prototype.copy],[["ctrl+v","mac+meta+v"],b.prototype.paste],[["ctrl+x","mac+meta+x"],b.prototype.cut],[["ctrl+z","mac+meta+z"],b.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],b.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],b.prototype.delete],[["Escape","mac+Escape"],b.prototype.unselectAll]]))},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var s,o,i,a,l=n(1);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}i=3285377520,s=4294901760,o=65535,a=function(){function e(t){d(this,e),this.h1=t?t&4294967295:i,this.h2=t?t&4294967295:i}return c(e,[{key:"update",value:function(t){if(typeof t=="string"){a=new Uint8Array(t.length*2),u=0;for(var n,i,a,r,c,d,u,h,m,f,p,g,v,j,y,b=0,_=t.length;b<_;b++)m=t.charCodeAt(b),m<=255?a[u++]=m:(a[u++]=m>>>8,a[u++]=m&255)}else if((0,l.isArrayBuffer)(t))a=t.slice(),u=a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");d=u>>2,y=u-d*4,j=new Uint32Array(a.buffer,0,d),n=0,i=0,c=this.h1,r=this.h2,f=3432918353,p=461845907,g=f&o,v=p&o;for(h=0;h<d;h++)h&1?(n=j[h],n=n*f&s|n*g&o,n=n<<15|n>>>17,n=n*p&s|n*v&o,c^=n,c=c<<13|c>>>19,c=c*5+3864292196):(i=j[h],i=i*f&s|i*g&o,i=i<<15|i>>>17,i=i*p&s|i*v&o,r^=i,r=r<<13|r>>>19,r=r*5+3864292196);switch(n=0,y){case 3:n^=a[d*4+2]<<16;case 2:n^=a[d*4+1]<<8;case 1:n^=a[d*4],n=n*f&s|n*g&o,n=n<<15|n>>>17,n=n*p&s|n*v&o,d&1?c^=n:r^=n}this.h1=c,this.h2=r}},{key:"hexdigest",value:function(){var i,a,t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&s|t*36045&o,n=n*4283543511&s|((n<<16|t>>>16)*2950163797&s)>>>16,t^=n>>>1,t=t*444984403&s|t*60499&o,n=n*3301882366&s|((n<<16|t>>>16)*3120437893&s)>>>16,t^=n>>>1,i=(t>>>0).toString(16),a=(n>>>0).toString(16),i.padStart(8,"0")+a.padStart(8,"0")}}]),e}(),t.MurmurHash3_64=a},(e,t,n)=>{"use strict";function a(e){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var h,m,g,s=n(1);function w(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},r(e,t)}function _(e){var t=b();return function(){var s,a,o=i(e);return t?(a=i(this).constructor,s=Reflect.construct(o,arguments,a)):s=o.apply(this,arguments),y(this,s)}}function y(e,t){if(t&&(a(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}function d(){"use strict";d=function(){return n};var t,s,r,l,u,n={},O=Object.prototype,o=O.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},m=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{e({},"")}catch{e=function(t,n,s){return t[n]=s}}function x(e,n,s,o){var a=n&&n.prototype instanceof p?n:p,i=Object.create(a.prototype),r=new v(o||[]);return i._invoke=function(e,n,s){var o="suspendedStart";return function(i,a){if(o==="executing")throw new Error("Generator is already running");if(o==="completed"){if(i==="throw")throw a;return C()}for(s.method=i,s.arg=a;;){var r,c,l=s.delegate;if(l&&(c=w(l,s),c)){if(c===t)continue;return c}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(o==="suspendedStart")throw o="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);if(o="executing",r=b(e,n,s),r.type==="normal"){if(o=s.done?"completed":"suspendedYield",r.arg===t)continue;return{value:r.arg,done:s.done}}r.type==="throw"&&(o="completed",s.method="throw",s.arg=r.arg)}}}(e,s,r),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=x,t={};function p(){}function h(){}function i(){}l={},e(l,m,function(){return this}),u=Object.getPrototypeOf,r=u&&u(u(f([]))),r&&r!==O&&o.call(r,m)&&(l=r),s=i.prototype=p.prototype=Object.create(l);function _(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function c(e,t){function n(s,i,r,c){if(d=b(e[s],e,i),d.type!=="throw"){var d,u=d.arg,l=u.value;return l&&a(l)=="object"&&o.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,r,c)},function(e){n("throw",e,r,c)}):t.resolve(l).then(function(e){u.value=e,r(u)},function(e){return n("throw",e,r,c)})}c(d.arg)}var s;this._invoke=function(e,o){function i(){return new t(function(t,s){n(e,o,t,s)})}return s=s?s.then(i,i):i()}}function w(e,n){var s,o,i=e.iterator[n.method];if(i===void 0){if(n.delegate=null,n.method==="throw"){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),n.method==="throw"))return t;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return o=b(i,e.iterator,n.arg),o.type==="throw"?(n.method="throw",n.arg=o.arg,n.delegate=null,t):(s=o.arg,s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,t):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,t))}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function f(e){if(e){if(t=e[m],t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t,n=-1,s=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=i,e(s,"constructor",i),e(i,"constructor",h),h.displayName=e(i,y,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===h||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,e(t,y,"GeneratorFunction")),t.prototype=Object.create(s),t},n.awrap=function(e){return{__await:e}},_(c.prototype),e(c.prototype,k,function(){return this}),n.AsyncIterator=c,n.async=function(e,t,s,o,i){i===void 0&&(i=Promise);var a=new c(x(e,t,s,o),i);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(s),e(s,y,"Generator"),e(s,m,function(){return this}),e(s,"toString",function(){return"[object Generator]"}),n.keys=function(e){var n,t=[];for(n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},n.values=f,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var n in this)n.charAt(0)==="t"&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;i=this;function s(e,n){return l.type="throw",l.arg=t,i.next=e,n&&(i.method="next",i.arg=void 0),!!n}for(a=this.tryEntries.length-1;a>=0;--a){var i,a,r,c,n=this.tryEntries[a],l=n.completion;if(n.tryLoc==="root")return s("end");if(n.tryLoc<=this.prev)if(r=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc"),r&&c){{if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}else if(r){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}},abrupt:function(n,s){for(var i,a,r,c=this.tryEntries.length-1;c>=0;--c)if(a=this.tryEntries[c],a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){i=a;break}return i&&(n==="break"||n==="continue")&&i.tryLoc<=s&&s<=i.finallyLoc&&(i=null),r=i?i.completion:{},r.type=n,r.arg=s,i?(this.method="next",this.next=i.finallyLoc,t):this.complete(r)},complete:function(n,s){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&s&&(this.next=s),t},finish:function(n){for(var s,o=this.tryEntries.length-1;o>=0;--o)if(s=this.tryEntries[o],s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),j(s),t},catch:function(t){for(var n,o,i,s=this.tryEntries.length-1;s>=0;--s)if(n=this.tryEntries[s],n.tryLoc===t)return o=n.completion,o.type==="throw"&&(i=o.arg,j(n)),i;throw new Error("illegal catch attempt")},delegateYield:function(n,s,o){return this.delegate={iterator:f(n),resultName:s,nextLoc:o},this.method==="next"&&(this.arg=void 0),t}},n}function p(e,t,n,s,o,i,a){try{var c=e[i](a),r=c.value}catch(e){n(e);return}c.done?t(r):Promise.resolve(r).then(s,o)}function O(e){return function(){var t=this,n=arguments;return new Promise(function(s,o){var a=e.apply(t,n);function i(e){p(a,s,o,i,r,"next",e)}function r(e){p(a,s,o,i,r,"throw",e)}i(void 0)})}}function o(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=v(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function v(e,t){if(!e)return;if(typeof e=="string")return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}function f(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}m=function(){function e(t){var i=t.docId,a=t.onUnsupportedFeature,n=t.ownerDocument,r=n===void 0?globalThis.document:n,o=t.styleElement,c=o===void 0?null:o;l(this,e),this.constructor===e&&(0,s.unreachable)("Cannot initialize BaseFontLoader."),this.docId=i,this._onUnsupportedFeature=a,this._document=r,this.nativeFontFaces=[],this.styleElement=null}return c(e,[{key:"addNativeFontFace",value:function(t){this.nativeFontFaces.push(t),this._document.fonts.add(t)}},{key:"insertRule",value:function(t){var s,n=this.styleElement;n||(n=this.styleElement=this._document.createElement("style"),n.id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].append(n)),s=n.sheet,s.insertRule(t,s.cssRules.length)}},{key:"clear",value:function(){var n,s,t=o(this.nativeFontFaces);try{for(t.s();!(n=t.n()).done;)s=n.value,this._document.fonts.delete(s)}catch(e){t.e(e)}finally{t.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:function(){var e=O(d().mark(function e(t){var n,o,i=this;return d().wrap(function(a){for(;1;)switch(a.prev=a.next){case 0:if(!t.attached&&!t.missingFile){a.next=2;break}return a.abrupt("return");case 2:if(t.attached=!0,!this.isFontLoadingAPISupported){a.next=19;break}if(n=t.createNativeFontFace(),!n){a.next=18;break}return this.addNativeFontFace(n),a.prev=7,a.next=10,n.loaded;case 10:a.next=18;break;case 12:throw a.prev=12,a.t0=a.catch(7),this._onUnsupportedFeature({featureId:s.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,s.warn)("Failed to load font '".concat(n.family,"': '").concat(a.t0,"'.")),t.disableFontFace=!0,a.t0;case 18:return a.abrupt("return");case 19:if(o=t.createFontFaceRule(),!o){a.next=26;break}if(this.insertRule(o),!this.isSyncFontLoadingSupported){a.next=24;break}return a.abrupt("return");case 24:return a.next=26,new Promise(function(e){var n=i._queueLoadingCallback(e);i._prepareFontLoadEvent([o],[t],n)});case 26:case"end":return a.stop()}},e,this,[[7,12]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"_queueLoadingCallback",value:function(){(0,s.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function(){var t,n=!!((t=this._document)!==null&&t!==void 0&&t.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",n)}},{key:"isSyncFontLoadingSupported",get:function(){(0,s.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,s.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function(){(0,s.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),e}(),t.FontLoader=h,t.FontLoader=h=function(e){w(t,e);var n=_(t);function t(e){var s;return l(this,t),s=n.call(this,e),s.loadingContext={requests:[],nextRequestId:0},s.loadTestFontId=0,s}return c(t,[{key:"isSyncFontLoadingSupported",get:function(){var t,n=!1;return typeof navigator=="undefined"?n=!0:(t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent),t?.[1]>=14&&(n=!0)),(0,s.shadow)(this,"isSyncFontLoadingSupported",n)}},{key:"_queueLoadingCallback",value:function(t){function i(){for((0,s.assert)(!o.done,"completeRequest() cannot be called twice."),o.done=!0;n.requests.length>0&&n.requests[0].done;){var e=n.requests.shift();setTimeout(e.callback,0)}}var n=this.loadingContext,o={id:"pdfjs-font-loading-".concat(n.nextRequestId++),done:!1,complete:i,callback:t};return n.requests.push(o),o}},{key:"_loadTestFont",get:function(){var t=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,s.shadow)(this,"_loadTestFont",t())}},{key:"_prepareFontLoadEvent",value:function(t,n,i){function y(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3)&255}function k(e,t,n,s){var o=e.substring(0,t),i=e.substring(t+n);return o+s+i}f=this._document.createElement("canvas"),f.width=1,f.height=1,m=f.getContext("2d"),b=0;function x(e,t){if(b++,b>30){(0,s.warn)("Load test font never loaded."),t();return}m.font="30px "+e,m.fillText(".",0,20);var n=m.getImageData(0,0,1,1);if(n.data[3]>0){t();return}setTimeout(x.bind(null,e,t))}r="lt".concat(Date.now()).concat(this.loadTestFontId++),c=this._loadTestFont,O=976,c=k(c,O,r.length,r),v=16,j=1482184792,l=y(c,v);for(d=0,E=r.length-3;d<E;d+=4)l=l-j+y(r,d)|0;d<r.length&&(l=l-j+y(r+"XXX",d)|0),c=k(c,v,4,(0,s.string32)(l)),_="url(data:font/opentype;base64,".concat(btoa(c),");"),w='@font-face {font-family:"'.concat(r,'";src:').concat(_,"}"),this.insertRule(w),p=[],u=o(n);try{for(u.s();!(M=u.n()).done;)C=M.value,p.push(C.loadedName)}catch(e){u.e(e)}finally{u.f()}p.push(r),a=this._document.createElement("div"),a.style.visibility="hidden",a.style.width=a.style.height="10px",a.style.position="absolute",a.style.top=a.style.left="0px";for(var a,r,c,l,d,u,h,m,f,p,v,b,j,_,w,O,C,E,S,M,g=0,A=p;g<A.length;g++)S=A[g],h=this._document.createElement("span"),h.textContent="Hi",h.style.fontFamily=S,a.append(h);this._document.body.append(a),x(r,function(){a.remove(),i.complete()})}}]),t}(m),g=function(){function e(t,n){var a,s=n.isEvalSupported,u=s===void 0||s,i=n.disableFontFace,m=i!==void 0&&i,r=n.ignoreErrors,c=r!==void 0&&r,d=n.onUnsupportedFeature,o=n.fontRegistry,h=o===void 0?null:o;l(this,e),this.compiledGlyphs=Object.create(null);for(a in t)this[a]=t[a];this.isEvalSupported=u!==!1,this.disableFontFace=m===!0,this.ignoreErrors=c===!0,this._onUnsupportedFeature=d,this.fontRegistry=h}return c(e,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){var t,n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}else t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var n,o,i=(0,s.bytesToString)(this.data),t="url(data:".concat(this.mimetype,";base64,").concat(btoa(i),");");return this.cssFontInfo?(o="font-weight: ".concat(this.cssFontInfo.fontWeight,";"),this.cssFontInfo.italicAngle&&(o+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(o,"src:").concat(t,"}")):n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}"),this.fontRegistry&&this.fontRegistry.registerFont(this,t),n}},{key:"getPathGenerator",value:function(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];try{r=t.get(this.loadedName+"_path_"+n)}catch(e){if(!this.ignoreErrors)throw e;return this._onUnsupportedFeature({featureId:s.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,s.warn)('getPathGenerator - ignoring character: "'.concat(e,'".')),this.compiledGlyphs[n]=function(){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){var a,r,l,d,c=[],i=o(r);try{for(i.s();!(d=i.n()).done;)a=d.value,l=a.args!==void 0?a.args.join(","):"",c.push("c.",a.cmd,"(",l,`);
`)}catch(e){i.e(e)}finally{i.f()}return this.compiledGlyphs[n]=new Function("c","size",c.join(""))}return this.compiledGlyphs[n]=function(e,t){var n,i,s=o(r);try{for(s.s();!(i=s.n()).done;)n=i.value,n.cmd==="scale"&&(n.args=[t,-t]),e[n.cmd].apply(e,n.args)}catch(e){s.e(e)}finally{s.f()}}}}]),e}(),t.FontFaceObject=g},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var o,c,d,h,f,p,b,_,x,C,E,S,z,D,N,R,P,H,s=n(1),F=n(129),i=n(138),te=n(139),ee=n(3);function Q(e){return V(e)||ne(e)||w(e)||B()}function B(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ne(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V(e){if(Array.isArray(e))return O(e)}function y(e){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function X(e,t){J(e,t),t.add(e)}function J(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function r(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=w(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function j(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){return oe(e)||W(e,t)||w(e,t)||se()}function se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(e,t){if(!e)return;if(typeof e=="string")return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}function O(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function W(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function oe(e){if(Array.isArray(e))return e}f=16,C=100,c=4096,S=15,b=10,H=!0,p=1e3,o=16,D=1.000001;function Z(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=function(){e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},e.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},e.transform=function(n,s,o,i,a,r){t.transform(n,s,o,i,a,r),this.__originalTransform(n,s,o,i,a,r)},e.setTransform=function(n,s,o,i,a,r){t.setTransform(n,s,o,i,a,r),this.__originalSetTransform(n,s,o,i,a,r)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(n){t.rotate(n),this.__originalRotate(n)},e.clip=function(n){t.clip(n),this.__originalClip(n)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,s,o,i,a){t.bezierCurveTo(e,n,s,o,i,a),this.__originalBezierCurveTo(e,n,s,o,i,a)},e.rect=function(e,n,s,o){t.rect(e,n,s,o),this.__originalRect(e,n,s,o)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}function g(e){if(e._transformStack&&(e._transformStack=[]),e.mozCurrentTransform)return;e._originalSave=e.save,e._originalRestore=e.restore,e._originalRotate=e.rotate,e._originalScale=e.scale,e._originalTranslate=e.translate,e._originalTransform=e.transform,e._originalSetTransform=e.setTransform,e._originalResetTransform=e.resetTransform,e._transformMatrix=e._transformMatrix||[1,0,0,1,0,0],e._transformStack=[];try{var t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"lineWidth");e._setLineWidth=t.set,e._getLineWidth=t.get,Object.defineProperty(e,"lineWidth",{set:function(t){this._setLineWidth(t*D)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(e,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(e,"mozCurrentTransformInverse",{get:function(){var t=a(this._transformMatrix,6),n=t[0],s=t[1],o=t[2],i=t[3],l=t[4],d=t[5],r=n*i-s*o,c=s*o-n*i;return[i/r,s/c,o/c,n/r,(i*l-o*d)/c,(s*l-n*d)/r]}}),e.save=function(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},e.restore=function(){this._transformStack.length===0&&(0,s.warn)("Tried to restore a ctx when the stack was already empty.");var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},e.translate=function(t,n){var s=this._transformMatrix;s[4]=s[0]*t+s[2]*n+s[4],s[5]=s[1]*t+s[3]*n+s[5],this._originalTranslate(t,n)},e.scale=function(t,n){var s=this._transformMatrix;s[0]*=t,s[1]*=t,s[2]*=n,s[3]*=n,this._originalScale(t,n)},e.transform=function(n,s,o,i,a,r){var c=this._transformMatrix;this._transformMatrix=[c[0]*n+c[2]*s,c[1]*n+c[3]*s,c[0]*o+c[2]*i,c[1]*o+c[3]*i,c[0]*a+c[2]*r+c[4],c[1]*a+c[3]*r+c[5]],e._originalTransform(n,s,o,i,a,r)},e.setTransform=function(n,s,o,i,a,r){this._transformMatrix=[n,s,o,i,a,r],e._originalSetTransform(n,s,o,i,a,r)},e.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],e._originalResetTransform()},e.rotate=function(t){var s=Math.cos(t),o=Math.sin(t),n=this._transformMatrix;this._transformMatrix=[n[0]*s+n[2]*o,n[1]*s+n[3]*o,n[0]*-o+n[2]*s,n[1]*-o+n[3]*s,n[4],n[5]],this._originalRotate(t)}}R=function(){function e(t){v(this,e),this.canvasFactory=t,this.cache=Object.create(null)}return j(e,[{key:"getCanvas",value:function(t,n,s,o){var i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,n,s),i.context.setTransform(1,0,0,1,0,0)):(i=this.canvasFactory.create(n,s),this.cache[t]=i),o&&g(i.context),i}},{key:"delete",value:function(t){delete this.cache[t]}},{key:"clear",value:function(){for(t in this.cache){var t,n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}]),e}();function m(e,t,n,s,o,i,r,c,l,d){var b,j,y,_,w,O,x,C,E,k,A,S,M,F,T,z,D,N,p=a(e.mozCurrentTransform,6),u=p[0],h=p[1],m=p[2],f=p[3],g=p[4],v=p[5];return h===0&&m===0?(z=r*u+g,j=Math.round(z),F=c*f+v,_=Math.round(F),S=(r+l)*u+g,C=Math.abs(Math.round(S)-j)||1,k=(c+d)*f+v,b=Math.abs(Math.round(k)-_)||1,e.setTransform(Math.sign(u),0,0,Math.sign(f),j,_),e.drawImage(t,n,s,o,i,0,0,C,b),e.setTransform(u,h,m,f,g,v),[C,b]):u===0&&f===0?(E=c*m+g,x=Math.round(E),A=r*h+v,w=Math.round(A),M=(c+d)*m+g,y=Math.abs(Math.round(M)-x)||1,T=(r+l)*h+v,O=Math.abs(Math.round(T)-w)||1,e.setTransform(0,Math.sign(h),Math.sign(m),0,x,w),e.drawImage(t,n,s,o,i,0,0,O,y),e.setTransform(u,h,m,f,g,v),[O,y]):(e.drawImage(t,n,s,o,i,r,c,l,d),D=Math.hypot(u,h),N=Math.hypot(m,f),[D*l,N*d])}function $(e){var t,n,s,o,i,a,c,l,u,h,m,g,v,b,j,y,_,w,O,x,C,E,k,A,S,M,F,d=e.width,f=e.height;if(!H||d>p||f>p)return null;w=1e3,_=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=d+1,o=new Uint8Array(c*(f+1)),h=d+7&~7,n=new Uint8Array(h*f),t=0,b=r(e.data);try{for(b.s();!(M=b.n()).done;)for(E=M.value,y=128;y>0;)n[t++]=E&y?0:255,y>>=1}catch(e){b.e(e)}finally{b.f()}a=0,t=0,n[t]!==0&&(o[0]=1,++a);for(i=1;i<d;i++)n[t]!==n[t+1]&&(o[i]=n[t]?2:1,++a),t++;n[t]!==0&&(o[i]=2,++a);for(l=1;l<f;l++){t=l*h,u=l*c,n[t-h]!==n[t]&&(o[u]=n[t]?1:8,++a),j=(n[t]?4:0)+(n[t-h]?8:0);for(i=1;i<d;i++)j=(j>>2)+(n[t+1]?4:0)+(n[t-h+1]?8:0),_[j]&&(o[u+i]=_[j],++a),t++;if(n[t-h]!==n[t]&&(o[u+i]=n[t]?2:4,++a),a>w)return null}t=h*(f-1),u=l*c,n[t]!==0&&(o[u]=8,++a);for(i=1;i<d;i++)n[t]!==n[t+1]&&(o[u+i]=n[t]?4:8,++a),t++;if(n[t]!==0&&(o[u+i]=4,++a),a>w)return null;A=new Int32Array([0,c,-1,0,-c,0,0,0,1]),ee.isNodeJS?O=[]:m=new Path2D;for(l=0;a&&l<=f;l++){for(s=l*c,C=s+d;s<C&&!o[s];)s++;if(s===C)continue;m?m.moveTo(s%c,l):x=[s%c,l],k=s,g=o[s];do{S=A[g];do s+=S;while(!o[s])v=o[s],v!==5&&v!==10?(g=v,o[s]=0):(g=v&51*g>>4,o[s]&=g>>2|g<<2),m?m.lineTo(s%c,s/c|0):x.push(s%c,s/c|0),o[s]||--a}while(k!==s)m||O.push(x),--l}return n=null,o=null,F=function(t){if(t.save(),t.scale(1/d,-1/f),t.translate(0,-f),m)t.fill(m);else{t.beginPath(),s=r(O);try{for(s.s();!(i=s.n()).done;){n=i.value,t.moveTo(n[0],n[1]);for(var n,s,i,o=2,a=n.length;o<a;o+=2)t.lineTo(n[o],n[o+1])}}catch(e){s.e(e)}finally{s.f()}t.fill()}t.beginPath(),t.restore()},F}_=function(){function e(t,n){v(this,e),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,t,n])}return j(e,[{key:"clone",value:function(){var t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}},{key:"setCurrentPoint",value:function(t,n){this.x=t,this.y=n}},{key:"updatePathMinMax",value:function(t,n,o){var r=s.Util.applyTransform([n,o],t),i=a(r,2);n=i[0],o=i[1],this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,o),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,o)}},{key:"updateRectMinMax",value:function(t,n){var o=s.Util.applyTransform(n,t),i=s.Util.applyTransform(n.slice(2),t);this.minX=Math.min(this.minX,o[0],i[0]),this.minY=Math.min(this.minY,o[1],i[1]),this.maxX=Math.max(this.maxX,o[0],i[0]),this.maxY=Math.max(this.maxY,o[1],i[1])}},{key:"updateScalingPathMinMax",value:function(t,n){s.Util.scaleMinMax(t,n),this.minX=Math.min(this.minX,n[0]),this.maxX=Math.max(this.maxX,n[1]),this.minY=Math.min(this.minY,n[2]),this.maxY=Math.max(this.maxY,n[3])}},{key:"updateCurvePathMinMax",value:function(t,n,o,i,a,r,c,l,d,u){var h=s.Util.bezierBoundingBox(n,o,i,a,r,c,l,d);if(u){u[0]=Math.min(u[0],h[0],h[2]),u[1]=Math.max(u[1],h[0],h[2]),u[2]=Math.min(u[2],h[1],h[3]),u[3]=Math.max(u[3],h[1],h[3]);return}this.updateRectMinMax(t,h)}},{key:"getPathBoundingBox",value:function(){var n,o,a,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i.PathType.FILL,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=[this.minX,this.minY,this.maxX,this.maxY];return c===i.PathType.STROKE&&(r||(0,s.unreachable)("Stroke bounding box must include transform."),n=s.Util.singularValueDecompose2dScale(r),o=n[0]*this.lineWidth/2,a=n[1]*this.lineWidth/2,t[0]-=o,t[1]-=a,t[2]+=o,t[3]+=a),t}},{key:"updateClipFromPath",value:function(){var t=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"isEmptyClip",value:function(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i.PathType.FILL,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s.Util.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}]),e}();function k(e,t){if(u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,typeof ImageData!="undefined"&&t instanceof ImageData){e.putImageData(t,0,0);return}var i,a,r,c,l,d,u,m,f,p,g,v,b,j,y,O,E,A,S,M,F,z,D,N,L,R,H,I,P=t.height,w=t.width,C=P%o,k=(P-C)/o,T=C===0?k:k+1,x=e.createImageData(w,o),h=0,_=t.data,n=x.data;if(u)switch(u.length){case 1:g=u[0],m=u[0],f=u[0],S=u[0];break;case 4:g=u[0],m=u[1],f=u[2],S=u[3];break}if(t.kind===s.ImageKind.GRAYSCALE_1BPP){R=_.byteLength,r=new Uint32Array(n.buffer,0,n.byteLength>>2),L=r.length,I=w+7>>3,d=4294967295,l=s.FeatureTest.isLittleEndian?4278190080:255,S&&S[0]===255&&S[255]===0&&(M=[l,d],d=M[0],l=M[1]);for(a=0;a<T;a++){O=a<k?o:C,i=0;for(v=0;v<O;v++){for(F=R-h,A=0,z=F>I?w:F*8-7,N=z&~7,E=0,c=0;A<N;A+=8)c=_[h++],r[i++]=c&128?d:l,r[i++]=c&64?d:l,r[i++]=c&32?d:l,r[i++]=c&16?d:l,r[i++]=c&8?d:l,r[i++]=c&4?d:l,r[i++]=c&2?d:l,r[i++]=c&1?d:l;for(;A<z;A++)E===0&&(c=_[h++],E=128),r[i++]=c&E?d:l,E>>=1}for(;i<L;)r[i++]=0;e.putImageData(x,0,a*o)}}else if(t.kind===s.ImageKind.RGBA_32BPP){{D=!!(g||m||f),v=0,p=w*o*4;for(a=0;a<k;a++){if(n.set(_.subarray(h,h+p)),h+=p,D)for(b=0;b<p;b+=4)g&&(n[b+0]=g[n[b+0]]),m&&(n[b+1]=m[n[b+1]]),f&&(n[b+2]=f[n[b+2]]);e.putImageData(x,0,v),v+=o}if(a<T){if(p=w*C*4,n.set(_.subarray(h,h+p)),D)for(j=0;j<p;j+=4)g&&(n[j+0]=g[n[j+0]]),m&&(n[j+1]=m[n[j+1]]),f&&(n[j+2]=f[n[j+2]]);e.putImageData(x,0,v)}}}else if(t.kind===s.ImageKind.RGB_24BPP){H=!!(g||m||f),O=o,p=w*O;for(a=0;a<T;a++){a>=k&&(O=C,p=w*O),i=0;for(v=p;v--;)n[i++]=_[h++],n[i++]=_[h++],n[i++]=_[h++],n[i++]=255;if(H)for(y=0;y<i;y+=4)g&&(n[y+0]=g[n[y+0]]),m&&(n[y+1]=m[n[y+1]]),f&&(n[y+2]=f[n[y+2]]);e.putImageData(x,0,a*o)}}else throw new Error("bad image kind: ".concat(t.kind))}function I(e,t){if(t.bitmap){e.drawImage(t.bitmap,0,0);return}for(var c,u,a=t.height,r=t.width,s=a%o,i=(a-s)/o,f=s===0?i:i+1,l=e.createImageData(r,o),d=0,h=t.data,m=l.data,n=0;n<f;n++)c=n<i?o:s,u=(0,te.applyMaskImageData)({src:h,srcPos:d,dest:m,width:r,height:c}),d=u.srcPos,e.putImageData(l,0,n*o)}function l(e,t){s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(var n,s,o=0,i=s.length;o<i;o++)n=s[o],e[n]!==void 0&&(t[n]=e[n]);e.setLineDash!==void 0&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function u(e,t){e.strokeStyle=e.fillStyle=t||"#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",e.setLineDash!==void 0&&(e.setLineDash([]),e.lineDashOffset=0)}function U(e,t,n,s){for(var i,a,r=e.length,o=3;o<r;o+=4)i=e[o],i===0?(e[o-3]=t,e[o-2]=n,e[o-1]=s):i<255&&(a=255-i,e[o-3]=e[o-3]*i+t*a>>8,e[o-2]=e[o-2]*i+n*a>>8,e[o-1]=e[o-1]*i+s*a>>8)}function K(e,t,n){for(var o,i=e.length,a=1/255,s=3;s<i;s+=4)o=n?n[e[s]]:e[s],t[s]=t[s]*o*a|0}function q(e,t,n){for(var o,i=e.length,s=3;s<i;s+=4)o=e[s-3]*77+e[s-2]*152+e[s-1]*28,t[s]=n?t[s]*n[o>>8]>>8:t[s]*o>>16}function Y(e,t,n,s,o,i,a,r,c,l,d){var u,m,f,p,g,v,b,h=!!i,j=h?i[0]:0,y=h?i[1]:0,_=h?i[2]:0;o==="Luminosity"?p=q:p=K,b=1048576,g=Math.min(s,Math.ceil(b/n));for(u=0;u<s;u+=g)m=Math.min(g,s-u),f=e.getImageData(r-l,u+(c-d),n,m),v=t.getImageData(r,u+c,n,m),h&&U(f.data,j,y,_),p(f.data,v.data,a),t.putImageData(v,r,u+c)}function G(e,t,n,s){var o=s[0],i=s[1],a=s[2]-o,r=s[3]-i;if(a===0||r===0)return;Y(t.context,n,a,r,t.subtype,t.backdrop,t.transferMap,o,i,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore()}function L(e,t){var o,n=s.Util.singularValueDecompose2dScale(e);return n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]),o=Math.fround((globalThis.devicePixelRatio||1)*F.PixelsPerInch.PDF_TO_CSS_UNITS),t!==void 0?t:n[0]<=o||n[1]<=o}P=["butt","round","square"],N=["miter","round","bevel"],z={},x={},h=new WeakSet,d=function(){function e(t,n,s,o,i,a,r,c){v(this,e),X(this,h),this.ctx=t,this.current=new _(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=o,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=a,this.cachedCanvases=new R(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=r,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=c?.background||null,this.foregroundColor=c?.foreground||null,t&&g(t),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}return j(e,[{key:"getObject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):n}},{key:"beginDrawing",value:function(t){var s,o,i,l,h,r=t.transform,p=t.viewport,g=t.transparency,w=g!==void 0&&g,f=t.background,x=f===void 0?null:f,m=this.ctx.canvas.width,v=this.ctx.canvas.height,d=x||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor)if(this.ctx.fillStyle=this.foregroundColor,o=this.foregroundColor=this.ctx.fillStyle,this.ctx.fillStyle=this.backgroundColor,i=this.backgroundColor=this.ctx.fillStyle,h=!0,s=d,this.ctx.fillStyle=d,s=this.ctx.fillStyle,h=typeof s=="string"&&/^#[0-9A-Fa-f]{6}$/.test(s),o==="#000000"&&i==="#ffffff"||o===i||!h)this.foregroundColor=this.backgroundColor=null;else{var b=(0,F.getRGB)(s),c=a(b,3),j=c[0],y=c[1],_=c[2],n=function(t){return t/=255,t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)},O=Math.round(.2126*n(j)+.7152*n(y)+.0722*n(_));this.selectColor=function(e,t,s){var a=.2126*n(e)+.7152*n(t)+.0722*n(s);return Math.round(a)===O?i:o}}this.ctx.fillStyle=this.backgroundColor||d,this.ctx.fillRect(0,0,m,v),this.ctx.restore(),w&&(l=this.cachedCanvases.getCanvas("transparent",m,v,!0),this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)),this.ctx.save(),u(this.ctx,this.foregroundColor),r&&(this.ctx.transform.apply(this.ctx,r),this.outputScaleX=r[0],this.outputScaleY=r[0]),this.ctx.transform.apply(this.ctx,p.transform),this.viewportScale=p.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function(t,n,o,i){var c,l,d,h,m,p,g,v,j,y,f=t.argsArray,_=t.fnArray,a=n||0,u=f.length;if(u===a)return a;for(h=u-a>b&&typeof o=="function",v=h?Date.now()+S:0,m=0,y=this.commonObjs,g=this.objs;!0;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,o),a;if(d=_[a],d!==s.OPS.dependency)this[d].apply(this,f[a]);else{c=r(f[a]);try{for(c.s();!(j=c.n()).done;)if(l=j.value,p=l.startsWith("g_")?y:g,!p.has(l))return p.get(l,o),a}catch(e){c.e(e)}finally{c.f()}}if(a++,a===u)return a;if(h&&++m>b){if(Date.now()>v)return o(),a;m=0}}}},{key:"endDrawing",value:function(){T(this,h,A).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();var t,s,o,i,a,n=r(this._cachedBitmapsMap.values());try{for(n.s();!(i=n.n()).done;){o=i.value,t=r(o.values());try{for(t.s();!(a=t.n()).done;)s=a.value,typeof HTMLCanvasElement!="undefined"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0)}catch(e){t.e(e)}finally{t.f()}o.clear()}}catch(e){n.e(e)}finally{n.f()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function(t,n){for(var i,a,c,d,h=t.width,m=t.height,l=Math.max(Math.hypot(n[0],n[1]),1),u=Math.max(Math.hypot(n[2],n[3]),1),s=h,o=m,r="prescale1";l>2&&s>1||u>2&&o>1;)i=s,a=o,l>2&&s>1&&(i=Math.ceil(s/2),l/=s/i),u>2&&o>1&&(a=Math.ceil(o/2),u/=o/a),c=this.cachedCanvases.getCanvas(r,i,a,!1),d=c.context,d.clearRect(0,0,i,a),d.drawImage(t,0,0,s,o,0,0,i,a),t=c.canvas,s=i,o=a,r=r==="prescale1"?"prescale2":"prescale1";return{img:t,paintWidth:s,paintHeight:o}}},{key:"_createMaskCanvas",value:function(t){var n,o,a,c,d,u,f,g,v,b,j,y,_,w,x,E,k,A,S,M,C=this.ctx,h=t.width,l=t.height,O=this.current.fillColor,p=this.current.patternFill,r=C.mozCurrentTransform;if((t.bitmap||t.data)&&t.count>1){if(x=t.bitmap||t.data.buffer,_=r.slice(0,4),y=JSON.stringify(p?_:[_,O]),a=this._cachedBitmapsMap.get(x),a||(a=new Map,this._cachedBitmapsMap.set(x,a)),v=a.get(y),v&&!p)return S=Math.round(Math.min(r[0],r[2])+r[4]),A=Math.round(Math.min(r[1],r[3])+r[5]),{canvas:v,offsetX:S,offsetY:A};o=v}return o||(w=this.cachedCanvases.getCanvas("maskCanvas",h,l,!1),I(w.context,t)),c=s.Util.transform(r,[1/h,0,0,-1/l,0,0]),c=s.Util.transform(c,[1,0,0,1,0,-l]),u=s.Util.applyTransform([0,0],c),f=s.Util.applyTransform([h,l],c),d=s.Util.normalizeRect([u[0],u[1],f[0],f[1]]),k=Math.round(d[2]-d[0])||1,E=Math.round(d[3]-d[1])||1,g=this.cachedCanvases.getCanvas("fillCanvas",k,E,!0),n=g.context,j=Math.min(u[0],f[0]),b=Math.min(u[1],f[1]),n.translate(-j,-b),n.transform.apply(n,c),o||(o=this._scaleImage(w.canvas,n.mozCurrentTransformInverse),o=o.img,a&&p&&a.set(y,o)),n.imageSmoothingEnabled=L(n.mozCurrentTransform,t.interpolate),m(n,o,0,0,o.width,o.height,0,0,h,l),n.globalCompositeOperation="source-in",M=s.Util.transform(n.mozCurrentTransformInverse,[1,0,0,1,-j,-b]),n.fillStyle=p?O.getPattern(C,this,M,i.PathType.FILL):O,n.fillRect(0,0,h,l),a&&!p&&(this.cachedCanvases.delete("fillCanvas"),a.set(y,g.canvas)),{canvas:g.canvas,offsetX:Math.round(j),offsetY:Math.round(b)}}},{key:"setLineWidth",value:function(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=t,this.ctx.lineWidth=t}},{key:"setLineCap",value:function(t){this.ctx.lineCap=P[t]}},{key:"setLineJoin",value:function(t){this.ctx.lineJoin=N[t]}},{key:"setMiterLimit",value:function(t){this.ctx.miterLimit=t}},{key:"setDash",value:function(t,n){var s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}},{key:"setRenderingIntent",value:function(){}},{key:"setFlatness",value:function(){}},{key:"setGState",value:function(t){for(var n,s,i,o=0,a=t.length;o<a;o++)switch(s=t[o],i=s[0],n=s[1],i){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=s[1];break;case"ca":this.current.fillAlpha=s[1],this.ctx.globalAlpha=s[1];break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=n}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t,n=this.ctx.canvas.width,s=this.ctx.canvas.height,o="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(o,n,s,!0);this.suspendedCtx=this.ctx,this.ctx=i.context,t=this.ctx,t.setTransform.apply(t,this.suspendedCtx.mozCurrentTransform),l(this.suspendedCtx,t),Z(t,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var n=this.current.activeSMask,s=this.suspendedCtx;G(s,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}},{key:"save",value:function(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone()}},{key:"restore",value:function(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(t,n,s,o,i,a){this.ctx.transform(t,n,s,o,i,a),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(t,n,o){c=this.ctx,d=this.current,a=d.x,r=d.y,l=c.mozCurrentTransform,m=l[0]===0&&l[3]===0||l[1]===0&&l[2]===0,p=m?o.slice(0):null;for(var a,r,c,l,d,u,h,m,f,p,g,v,b,j=0,i=0,y=t.length;j<y;j++)switch(t[j]|0){case s.OPS.rectangle:a=n[i++],r=n[i++],v=n[i++],b=n[i++],f=a+v,g=r+b,c.moveTo(a,r),v===0||b===0?c.lineTo(f,g):(c.lineTo(f,r),c.lineTo(f,g),c.lineTo(a,g)),m||d.updateRectMinMax(l,[a,r,f,g]),c.closePath();break;case s.OPS.moveTo:a=n[i++],r=n[i++],c.moveTo(a,r),m||d.updatePathMinMax(l,a,r);break;case s.OPS.lineTo:a=n[i++],r=n[i++],c.lineTo(a,r),m||d.updatePathMinMax(l,a,r);break;case s.OPS.curveTo:u=a,h=r,a=n[i+4],r=n[i+5],c.bezierCurveTo(n[i],n[i+1],n[i+2],n[i+3],a,r),d.updateCurvePathMinMax(l,u,h,n[i],n[i+1],n[i+2],n[i+3],a,r,p),i+=6;break;case s.OPS.curveTo2:u=a,h=r,c.bezierCurveTo(a,r,n[i],n[i+1],n[i+2],n[i+3]),d.updateCurvePathMinMax(l,u,h,a,r,n[i],n[i+1],n[i+2],n[i+3],p),a=n[i+2],r=n[i+3],i+=4;break;case s.OPS.curveTo3:u=a,h=r,a=n[i+2],r=n[i+3],c.bezierCurveTo(n[i],n[i+1],a,r,a,r),d.updateCurvePathMinMax(l,u,h,n[i],n[i+1],a,r,a,r,p),i+=4;break;case s.OPS.closePath:c.closePath();break}m&&d.updateScalingPathMinMax(l,p),d.setCurrentPoint(a,r)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(t){t=typeof t=="undefined"||t;var n=this.ctx,s=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(y(s)==="object"&&s!==null&&s!==void 0&&s.getPattern?(n.save(),n.strokeStyle=s.getPattern(n,this,n.mozCurrentTransformInverse,i.PathType.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(t){t=typeof t=="undefined"||t;var s,n=this.ctx,a=this.current.fillColor,r=this.current.patternFill,o=!1;r&&(n.save(),n.fillStyle=a.getPattern(n,this,n.mozCurrentTransformInverse,i.PathType.FILL),o=!0),s=this.current.getClippedPathBoundingBox(),this.contentVisible&&s!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),o&&n.restore(),t&&this.consumePath(s)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=z}},{key:"eoClip",value:function(){this.pendingClip=x}},{key:"beginText",value:function(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var n,s,i,o=this.pendingTextPaths,t=this.ctx;if(o===void 0){t.beginPath();return}t.save(),t.beginPath(),s=r(o);try{for(s.s();!(i=s.n()).done;)n=i.value,t.setTransform.apply(t,n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize)}catch(e){s.e(e)}finally{s.f()}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}},{key:"setCharSpacing",value:function(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function(t){this.current.wordSpacing=t}},{key:"setHScale",value:function(t){this.current.textHScale=t/100}},{key:"setLeading",value:function(t){this.current.leading=-t}},{key:"setFont",value:function(t,n){var a,r,c,l,d,o=this.commonObjs.get(t),i=this.current;if(!o)throw new Error("Can't find font for ".concat(t));if(i.fontMatrix=o.fontMatrix||s.FONT_IDENTITY_MATRIX,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+t),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=o,this.current.fontSize=n,o.isType3Font)return;c=o.loadedName||"sans-serif",r="normal",o.black?r="900":o.bold&&(r="bold"),l=o.italic?"italic":"normal",d='"'.concat(c,'", ').concat(o.fallbackName),a=n,n<f?a=f:n>C&&(a=C),this.current.fontSizeScale=n/a,this.ctx.font="".concat(l," ").concat(r," ").concat(a,"px ").concat(d)}},{key:"setTextRenderingMode",value:function(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function(t){this.current.textRise=t}},{key:"moveText",value:function(t,n){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}},{key:"setLeadingMoveText",value:function(t,n){this.setLeading(-n),this.moveText(t,n)}},{key:"setTextMatrix",value:function(t,n,s,o,i,a){this.current.textMatrix=[t,n,s,o,i,a],this.current.textMatrixScale=Math.hypot(t,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(t,n,o,i){var d,p,a=this.ctx,c=this.current,l=c.font,u=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,r=u&s.TextRenderingMode.FILL_STROKE_MASK,m=!!(u&s.TextRenderingMode.ADD_TO_PATH_FLAG),f=c.patternFill&&!l.missingFile;(l.disableFontFace||m||f)&&(d=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||f?(a.save(),a.translate(n,o),a.beginPath(),d(a,h),i&&a.setTransform.apply(a,i),(r===s.TextRenderingMode.FILL||r===s.TextRenderingMode.FILL_STROKE)&&a.fill(),(r===s.TextRenderingMode.STROKE||r===s.TextRenderingMode.FILL_STROKE)&&a.stroke(),a.restore()):((r===s.TextRenderingMode.FILL||r===s.TextRenderingMode.FILL_STROKE)&&a.fillText(t,n,o),(r===s.TextRenderingMode.STROKE||r===s.TextRenderingMode.FILL_STROKE)&&a.strokeText(t,n,o)),m&&(p=this.pendingTextPaths||(this.pendingTextPaths=[]),p.push({transform:a.mozCurrentTransform,x:n,y:o,fontSize:h,addToPath:d}))}},{key:"isFontSubpixelAAEnabled",get:function(){var t,n,i,a=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1),o=a.context;o.scale(1.5,1),o.fillText("I",0,10),n=o.getImageData(0,0,10,10).data,i=!1;for(t=3;t<n.length;t+=4)if(n[t]>0&&n[t]<255){i=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",i)}},{key:"showText",value:function(t){if(n=this.current,u=n.font,u.isType3Font)return this.showType3Text(t);if(l=n.fontSize,l===0)return void 0;o=this.ctx,a=n.fontSizeScale,R=n.charSpacing,D=n.wordSpacing,p=n.fontDirection,_=n.textHScale*p,B=t.length,y=u.vertical,T=y?1:-1,F=u.defaultVMetrics,v=l*n.fontMatrix[0],z=n.textRenderingMode===s.TextRenderingMode.FILL&&!u.disableFontFace&&!n.patternFill,o.save(),o.transform.apply(o,n.textMatrix),o.translate(n.x,n.y+n.textRise),p>0?o.scale(_,-1):o.scale(_,1),n.patternFill&&(o.save(),P=n.fillColor.getPattern(o,this,o.mozCurrentTransformInverse,i.PathType.FILL),S=o.mozCurrentTransform,o.restore(),o.fillStyle=P),m=n.lineWidth,C=n.textMatrixScale,C===0||m===0?(M=n.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK,(M===s.TextRenderingMode.STROKE||M===s.TextRenderingMode.FILL_STROKE)&&(m=this.getSinglePixelWidth())):m/=C,a!==1&&(o.scale(a,a),m/=a),o.lineWidth=m,h=0;for(O=0;O<B;++O){if(c=t[O],typeof c=="number"){h+=T*c*l/1e3;continue}var n,o,a,c,l,u,h,m,p,g,v,b,y,_,O,x,C,E,S,M,F,T,z,D,N,L,R,P,H,I,B,k=!1,A=(c.isSpace?D:0)+R,w=c.fontChar,f=c.accent,d=void 0,j=void 0,r=c.width;y?(g=c.vmetric||F,N=-(c.vmetric?g[1]:r*.5)*v,L=g[2]*v,r=g?-g[0]:r,d=N/a,j=(h+L)/a):(d=h/a,j=0),u.remeasure&&r>0&&(b=o.measureText(w).width*1e3/l*a,r<b&&this.isFontSubpixelAAEnabled?(E=r/b,k=!0,o.save(),o.scale(E,1),d/=E):r!==b&&(d+=(r-b)/2e3*l/a)),this.contentVisible&&(c.isInFont||u.missingFile)&&(z&&!f?o.fillText(w,d,j):(this.paintChar(w,d,j,S),f&&(H=d+l*f.offset.x/a,I=j-l*f.offset.y/a,this.paintChar(f.fontChar,H,I,S)))),x=void 0,y?x=r*v-A*p:x=r*v+A*p,h+=x,k&&o.restore()}return y?n.y-=h:n.x+=h*_,o.restore(),this.compose()}},{key:"showType3Text",value:function(t){var i,r,l,d,u,h,g,o=this.ctx,n=this.current,m=n.font,a=n.fontSize,f=n.fontDirection,_=m.vertical?1:-1,y=n.charSpacing,j=n.wordSpacing,c=n.textHScale*f,p=n.fontMatrix||s.FONT_IDENTITY_MATRIX,b=t.length,v=n.textRenderingMode===s.TextRenderingMode.INVISIBLE;if(v||a===0)return;this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,o.save(),o.transform.apply(o,n.textMatrix),o.translate(n.x,n.y),o.scale(c,f);for(r=0;r<b;++r){if(i=t[r],typeof i=="number"){d=_*i*a/1e3,this.ctx.translate(d,0),n.x+=d*c;continue}if(h=(i.isSpace?j:0)+y,u=m.charProcOperatorList[i.operatorListId],!u){(0,s.warn)('Type3 character "'.concat(i.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=i,this.save(),o.scale(a,a),o.transform.apply(o,p),this.executeOperatorList(u),this.restore()),g=s.Util.applyTransform([i.width,0],p),l=g[0]*a+h,o.translate(l,0),n.x+=l*c}o.restore(),this.processingType3=null}},{key:"setCharWidth",value:function(){}},{key:"setCharWidthAndBounds",value:function(t,n,s,o,i,a){this.ctx.rect(s,o,i-s,a-o),this.ctx.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(n){var o,a,r,c,s=this;return n[0]==="TilingPattern"?(a=n[1],r=this.baseTransform||this.ctx.mozCurrentTransform.slice(),c={createCanvasGraphics:function(n){return new e(n,s.commonObjs,s.objs,s.canvasFactory)}},o=new i.TilingPattern(n,a,this.ctx,c,r)):o=this._getPattern(n[1],n[2]),o}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(t,n,o){var i,a=((i=this.selectColor)===null||i===void 0?void 0:i.call(this,t,n,o))||s.Util.makeHexColor(t,n,o);this.ctx.strokeStyle=a,this.current.strokeColor=a}},{key:"setFillRGBColor",value:function(t,n,o){var i,a=((i=this.selectColor)===null||i===void 0?void 0:i.call(this,t,n,o))||s.Util.makeHexColor(t,n,o);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1}},{key:"_getPattern",value:function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=(0,i.getShadingPattern)(this.objs.get(t)),this.cachedPatterns.set(t,n)),s&&(n.matrix=s),n}},{key:"shadingFill",value:function(t){if(!this.contentVisible)return;var n,o,a,r,c,d,u,h,m,f,p,g,v,l=this.ctx;this.save(),p=this._getPattern(t),l.fillStyle=p.getPattern(l,this,l.mozCurrentTransformInverse,i.PathType.SHADING),n=l.mozCurrentTransformInverse,n?(h=l.canvas,u=h.width,d=h.height,o=s.Util.applyTransform([0,0],n),c=s.Util.applyTransform([0,d],n),r=s.Util.applyTransform([u,0],n),a=s.Util.applyTransform([u,d],n),m=Math.min(o[0],c[0],r[0],a[0]),f=Math.min(o[1],c[1],r[1],a[1]),g=Math.max(o[0],c[0],r[0],a[0]),v=Math.max(o[1],c[1],r[1],a[1]),this.ctx.fillRect(m,f,g-m,v-f)):this.ctx.fillRect(-1e10,-1e10,2e10,2e10),this.compose(this.current.getClippedPathBoundingBox()),this.restore()}},{key:"beginInlineImage",value:function(){(0,s.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,s.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(t,n){if(!this.contentVisible)return;if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&t.length===6&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,n){var s=n[2]-n[0],o=n[3]-n[1];this.ctx.rect(n[0],n[1],s,o),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,n),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){if(!this.contentVisible)return;this.restore(),this.baseTransform=this.baseTransformStack.pop()}},{key:"beginGroup",value:function(t){if(!this.contentVisible)return;if(this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null),n=this.ctx,t.isolated||(0,s.info)("TODO: Support non-isolated groups."),t.knockout&&(0,s.warn)("Knockout groups not supported."),g=n.mozCurrentTransform,t.matrix&&n.transform.apply(n,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var n,o,f,p,g,i=s.Util.getAxialAlignedBoundingBox(t.bbox,n.mozCurrentTransform),v=[0,0,n.canvas.width,n.canvas.height],i=s.Util.intersect(i,v)||[0,0,0,0],u=Math.floor(i[0]),h=Math.floor(i[1]),a=Math.max(Math.ceil(i[2])-u,1),r=Math.max(Math.ceil(i[3])-h,1),m=1,d=1;a>c&&(m=a/c,a=c),r>c&&(d=r/c,r=c),this.current.startNewPathAndClipBox([0,0,a,r]),f="groupAt"+this.groupLevel,t.smask&&(f+="_smask_"+this.smaskCounter++%2),p=this.cachedCanvases.getCanvas(f,a,r,!0),o=p.context,o.scale(1/m,1/d),o.translate(-u,-h),o.transform.apply(o,g),t.smask?this.smaskStack.push({canvas:p.canvas,context:o,offsetX:u,offsetY:h,scaleX:m,scaleY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.scale(m,d),n.save()),l(n,o),this.ctx=o,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}},{key:"endGroup",value:function(t){if(!this.contentVisible)return;this.groupLevel--;var o,i,n=this.ctx,a=this.groupStack.pop();this.ctx=a,this.ctx.imageSmoothingEnabled=!1,t.smask?(this.tempSMask=this.smaskStack.pop(),this.restore()):(this.ctx.restore(),o=this.ctx.mozCurrentTransform,this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,o),i=s.Util.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(i))}},{key:"beginAnnotation",value:function(t,n,o,i,r){if(T(this,h,A).call(this),u(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform),Array.isArray(n)&&n.length===4)if(l=n[2]-n[0],c=n[3]-n[1],r&&this.annotationCanvasMap){o=o.slice(),o[4]-=n[0],o[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=c;var c,l,v=s.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),d=a(v,2),b=d[0],m=d[1],f=this.viewportScale,j=Math.ceil(l*this.outputScaleX*f),y=Math.ceil(c*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(j,y);var p=this.annotationCanvas,w=p.canvas,O=p.context;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=O,g(this.ctx),this.ctx.setTransform(b,0,0,-m,0,c*m),u(this.ctx,this.foregroundColor)}else u(this.ctx,this.foregroundColor),this.ctx.rect(n[0],n[1],l,c),this.ctx.clip(),this.endPath();this.current=new _(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,o),this.transform.apply(this,i)}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}},{key:"paintImageMaskXObject",value:function(t){if(!this.contentVisible)return;var n,s,o,i,a=t.count;if(t=this.getObject(t.data,t),t.count=a,n=this.ctx,s=this.processingType3,s&&(s.compiled===void 0&&(s.compiled=$(t)),s.compiled)){s.compiled(n);return}o=this._createMaskCanvas(t),i=o.canvas,n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(i,o.offsetX,o.offsetY),n.restore(),this.compose()}},{key:"paintImageMaskXObjectRepeat",value:function(t,n){if(d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,!this.contentVisible)return;t=this.getObject(t.data,t),o=this.ctx,o.save(),h=o.mozCurrentTransform,o.transform(n,d,c,l,0,0),u=this._createMaskCanvas(t),o.setTransform(1,0,0,1,0,0);for(i=0,m=r.length;i<m;i+=2){var o,i,r,c,l,d,u,h,m,f=s.Util.transform(h,[n,d,c,l,r[i],r[i+1]]),g=s.Util.applyTransform([0,0],f),p=a(g,2),v=p[0],b=p[1];o.drawImage(u.canvas,v,b)}o.restore(),this.compose()}},{key:"paintImageMaskXObjectGroup",value:function(t){if(!this.contentVisible)return;n=this.ctx,c=this.current.fillColor,p=this.current.patternFill,a=r(t);try{for(a.s();!(f=a.n()).done;){var n,a,c,h,f,p,o=f.value,v=o.data,u=o.width,d=o.height,g=o.transform,l=this.cachedCanvases.getCanvas("maskCanvas",u,d,!1),s=l.context;s.save(),h=this.getObject(v,o),I(s,h),s.globalCompositeOperation="source-in",s.fillStyle=p?c.getPattern(s,this,n.mozCurrentTransformInverse,i.PathType.FILL):c,s.fillRect(0,0,u,d),s.restore(),n.save(),n.transform.apply(n,g),n.scale(1,-1),m(n,l.canvas,0,0,u,d,0,-1,1,1),n.restore()}}catch(e){a.e(e)}finally{a.f()}this.compose()}},{key:"paintImageXObject",value:function(t){if(!this.contentVisible)return;var n=this.getObject(t);if(!n){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}},{key:"paintImageXObjectRepeat",value:function(t,n,o,i){if(!this.contentVisible)return;if(a=this.getObject(t),!a){(0,s.warn)("Dependent image isn't ready yet");return}l=a.width,d=a.height,c=[];for(var a,c,l,d,r=0,u=i.length;r<u;r+=2)c.push({transform:[n,0,0,o,i[r],i[r+1]],x:0,y:0,w:l,h:d});this.paintInlineImageXObjectGroup(a,c)}},{key:"paintInlineImageXObject",value:function(t){if(!this.contentVisible)return;o=t.width,n=t.height,s=this.ctx,this.save(),s.scale(1/o,-1/n),typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data?r=t:(c=this.cachedCanvases.getCanvas("inlineImage",o,n,!1),u=c.context,k(u,t,this.current.transferMaps),r=c.canvas),i=this._scaleImage(r,s.mozCurrentTransformInverse),s.imageSmoothingEnabled=L(s.mozCurrentTransform,t.interpolate);var n,s,o,i,r,c,l,u,h=m(s,i.img,0,0,i.paintWidth,i.paintHeight,0,-n,o,n),d=a(h,2),f=d[0],p=d[1];this.imageLayer&&(l=this.getCanvasPosition(0,-n),this.imageLayer.appendImage({imgData:t,left:l[0],top:l[1],width:f,height:p})),this.compose(),this.restore()}},{key:"paintInlineImageXObjectGroup",value:function(t,n){if(!this.contentVisible)return;o=this.ctx,c=t.width,i=t.height,a=this.cachedCanvases.getCanvas("inlineImage",c,i,!1),d=a.context,k(d,t,this.current.transferMaps);for(var s,o,i,a,c,l,d,r=0,u=n.length;r<u;r++)s=n[r],o.save(),o.transform.apply(o,s.transform),o.scale(1,-1),m(o,a.canvas,s.x,s.y,s.w,s.h,0,-1,1,1),this.imageLayer&&(l=this.getCanvasPosition(s.x,s.y),this.imageLayer.appendImage({imgData:t,left:l[0],top:l[1],width:c,height:i})),o.restore();this.compose()}},{key:"paintSolidColorImageMask",value:function(){if(!this.contentVisible)return;this.ctx.fillRect(0,0,1,1),this.compose()}},{key:"markPoint",value:function(){}},{key:"markPointProps",value:function(){}},{key:"beginMarkedContent",value:function(){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(t,n){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(t){var n,s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t),n=this.ctx,this.pendingClip&&(s||(this.pendingClip===x?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(!this._cachedGetSinglePixelWidth){var n,s,o,t=this.ctx.mozCurrentTransform;t[1]===0&&t[2]===0?this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3])):(n=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),o=Math.hypot(t[1],t[3]),this._cachedGetSinglePixelWidth=Math.max(s,o)/n)}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function(){if(!this._cachedScaleForStroking){var s,o,i,a,r,c,l,d,u,h,n=this.current.lineWidth,t=this.ctx.mozCurrentTransform;t[1]===0&&t[2]===0?(u=Math.abs(t[0]),h=Math.abs(t[3]),n===0?(s=1/u,o=1/h):(l=u*n,d=h*n,s=l<1?1/l:1,o=d<1?1/d:1)):(r=Math.abs(t[0]*t[3]-t[2]*t[1]),c=Math.hypot(t[0],t[1]),a=Math.hypot(t[2],t[3]),n===0?(s=a/r,o=c/r):(i=n*r,s=a>i?a/i:1,o=c>i?c/i:1)),this._cachedScaleForStroking=[s,o]}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function(t){var s,r,c,l,n=this.ctx,u=this.current.lineWidth,h=this.getScaleForStroking(),d=a(h,2),o=d[0],i=d[1];if(n.lineWidth=u||1,o===1&&i===1){n.stroke();return}t&&(l=n.mozCurrentTransform.slice(),r=n.getLineDash().slice(),c=n.lineDashOffset),n.scale(o,i),s=Math.max(o,i),n.setLineDash(n.getLineDash().map(function(e){return e/s})),n.lineDashOffset/=s,n.stroke(),t&&(n.setTransform.apply(n,Q(l)),n.setLineDash(r),n.lineDashOffset=c)}},{key:"getCanvasPosition",value:function(t,n){var s=this.ctx.mozCurrentTransform;return[s[0]*t+s[2]*n+s[4],s[1]*t+s[3]*n+s[5]]}},{key:"isContentVisible",value:function(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}]),e}(),t.CanvasGraphics=d;function A(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(E in s.OPS)d.prototype[E]!==void 0&&(d.prototype[s.OPS[E]]=d.prototype[E])},(e,t,n)=>{"use strict";function p(e){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=k;var o,c,l,g,b,j,w,s=n(1),A=n(3);function _(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=O(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function O(e,t){if(!e)return;if(typeof e=="string")return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}function y(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function d(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},u(e,t)}function h(e){var t=S();return function(){var s,i,o=r(e);return t?(i=r(this).constructor,s=Reflect.construct(o,arguments,i)):s=o.apply(this,arguments),C(this,s)}}function C(e,t){if(t&&(p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function i(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"},t.PathType=o;function f(e,t){if(!t||A.isNodeJS)return;var s=t[2]-t[0],o=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],s,o),e.clip(n)}c=function(){function e(){a(this,e),this.constructor===e&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}return i(e,[{key:"getPattern",value:function(){(0,s.unreachable)("Abstract method `getPattern` called.")}}]),e}(),g=function(e){d(t,e);var n=h(t);function t(e){var s;return a(this,t),s=n.call(this),s._type=e[1],s._bbox=e[2],s._colorStops=e[3],s._p0=e[4],s._p1=e[5],s._r0=e[6],s._r1=e[7],s.matrix=null,s}return i(t,[{key:"_createGradient",value:function(t){this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var n,o,i,s=_(this._colorStops);try{for(s.s();!(i=s.n()).done;)o=i.value,n.addColorStop(o[0],o[1])}catch(e){s.e(e)}finally{s.f()}return n}},{key:"getPattern",value:function(t,n,i,a){if(a===o.STROKE||a===o.FILL){var l,u,c=n.current.getClippedPathBoundingBox(a,t.mozCurrentTransform)||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,m=Math.ceil(c[3]-c[1])||1,d=n.cachedCanvases.getCanvas("pattern",h,m,!0),r=d.context;r.clearRect(0,0,r.canvas.width,r.canvas.height),r.beginPath(),r.rect(0,0,r.canvas.width,r.canvas.height),r.translate(-c[0],-c[1]),i=s.Util.transform(i,[1,0,0,1,c[0],c[1]]),r.transform.apply(r,n.baseTransform),this.matrix&&r.transform.apply(r,this.matrix),f(r,this._bbox),r.fillStyle=this._createGradient(r),r.fill(),l=t.createPattern(d.canvas,"no-repeat"),u=new DOMMatrix(i);try{l.setTransform(u)}catch(e){(0,s.warn)('RadialAxialShadingPattern.getPattern: "'.concat(e?.message,'".'))}}else f(t,this._bbox),l=this._createGradient(t);return l}}]),t}(c);function m(e,t,n,s,o,i,a,r){if(l=t.coords,h=t.colors,_=e.data,V=e.width*4,l[n+1]>l[s+1]&&(d=n,n=s,s=d,d=i,i=a,a=d),l[s+1]>l[o+1]&&(d=s,s=o,o=d,d=a,a=r,r=d),l[n+1]>l[s+1]&&(d=n,n=s,s=d,d=i,i=a,a=d),j=(l[n]+t.offsetX)*t.scaleX,m=(l[n+1]+t.offsetY)*t.scaleY,k=(l[s]+t.offsetX)*t.scaleX,v=(l[s+1]+t.offsetY)*t.scaleY,z=(l[o]+t.offsetX)*t.scaleX,f=(l[o+1]+t.offsetY)*t.scaleY,m>=f)return;for(var c,l,d,h,m,f,p,g,v,b,j,y,_,C,E,k,A,S,M,T,z,R,P,H,V,$,w=h[i],x=h[i+1],O=h[i+2],D=h[a],N=h[a+1],F=h[a+2],I=h[r],B=h[r+1],L=h[r+2],W=Math.round(m),U=Math.round(f),u=W;u<=U;u++){u<v?(g=void 0,u<m?g=0:g=(m-u)/(m-v),b=j-(j-k)*g,S=w-(w-D)*g,A=x-(x-N)*g,E=O-(O-F)*g):(p=void 0,u>f?p=1:v===f?p=0:p=(v-u)/(v-f),b=k-(k-z)*p,S=D-(D-I)*p,A=N-(N-B)*p,E=F-(F-L)*p),c=void 0,u<m?c=0:u>f?c=1:c=(m-u)/(m-f),C=j-(j-z)*c,H=w-(w-I)*c,P=x-(x-B)*c,R=O-(O-L)*c,T=Math.round(Math.min(b,C)),$=Math.round(Math.max(b,C)),y=V*u+T*4;for(M=T;M<=$;M++)c=(b-M)/(b-C),c<0?c=0:c>1&&(c=1),_[y++]=S-(S-H)*c|0,_[y++]=A-(A-P)*c|0,_[y++]=E-(E-R)*c|0,_[y++]=255}}function x(e,t,n){var s,o,a,c,l,d,u,i=t.coords,r=t.colors;switch(t.type){case"lattice":a=t.verticesPerRow,d=Math.floor(i.length/a)-1,u=a-1;for(o=0;o<d;o++){s=o*a;for(c=0;c<u;c++,s++)m(e,n,i[s],i[s+1],i[s+a],r[s],r[s+1],r[s+a]),m(e,n,i[s+a+1],i[s+1],i[s+a],r[s+a+1],r[s+1],r[s+a])}break;case"triangles":for(o=0,l=i.length;o<l;o+=3)m(e,n,i[o],i[o+1],i[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}j=function(e){d(t,e);var n=h(t);function t(e){var s;return a(this,t),s=n.call(this),s._coords=e[2],s._colors=e[3],s._figures=e[4],s._bounds=e[5],s._bbox=e[7],s._background=e[8],s.matrix=null,s}return i(t,[{key:"_createMeshCanvas",value:function(t,n,s){if(g=1.1,v=3e3,o=2,l=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-l,y=Math.ceil(this._bounds[3])-d,h=Math.min(Math.ceil(Math.abs(p*t[0]*g)),v),m=Math.min(Math.ceil(Math.abs(y*t[1]*g)),v),c=p/h,u=y/m,E={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-d,scaleX:1/c,scaleY:1/u},w=h+o*2,O=m+o*2,b=s.getCanvas("mesh",w,O,!1),j=b.context,f=j.createImageData(h,m),n){a=f.data;for(var o,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,w,O,C,E,k,A,i=0,S=a.length;i<S;i+=4)a[i]=n[0],a[i+1]=n[1],a[i+2]=n[2],a[i+3]=255}r=_(this._figures);try{for(r.s();!(k=r.n()).done;)C=k.value,x(f,C,E)}catch(e){r.e(e)}finally{r.f()}return j.putImageData(f,o,o),A=b.canvas,{canvas:A,offsetX:l-o*c,offsetY:d-o*u,scaleX:c,scaleY:u}}},{key:"getPattern",value:function(t,n,i,a){if(f(t,this._bbox),a===o.SHADING)r=s.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(r=s.Util.singularValueDecompose2dScale(n.baseTransform),this.matrix){var r,c,l=s.Util.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}return c=this._createMeshCanvas(r,a===o.SHADING?null:this._background,n.cachedCanvases),a!==o.SHADING&&(t.setTransform.apply(t,n.baseTransform),this.matrix&&t.transform.apply(t,this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}]),t}(c),b=function(e){d(t,e);var n=h(t);function t(){return a(this,t),n.apply(this,arguments)}return i(t,[{key:"getPattern",value:function(){return"hotpink"}}]),t}(c);function k(e){switch(e[0]){case"RadialAxial":return new g(e);case"Mesh":return new j(e);case"Dummy":return new b}throw new Error("Unknown IR type: ".concat(e[0]))}l={COLORED:1,UNCOLORED:2},w=function(){function e(t,n,s,o,i){a(this,e),this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=n,this.ctx=s,this.canvasGraphicsFactory=o,this.baseTransform=i}return i(e,[{key:"createPatternCanvas",value:function(t){x=this.operatorList,i=this.bbox,O=this.xstep,w=this.ystep,_=this.paintType,j=this.tilingType,b=this.color,p=this.canvasGraphicsFactory,(0,s.info)("TilingType: "+j);var o,i,a,d,m,p,b,j,_,w,O,x,u=i[0],h=i[1],E=i[2],C=i[3],f=s.Util.singularValueDecompose2dScale(this.matrix),g=s.Util.singularValueDecompose2dScale(this.baseTransform),v=[f[0]*g[0],f[1]*g[1]],c=this.getSizeAndScale(O,this.ctx.canvas.width,v[0]),r=this.getSizeAndScale(w,this.ctx.canvas.height,v[1]),y=t.cachedCanvases.getCanvas("pattern",c.size,r.size,!0),l=y.context,n=p.createCanvasGraphics(l);return n.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(n,_,b),a=u,o=h,m=E,d=C,u<0&&(a=0,m+=Math.abs(u)),h<0&&(o=0,d+=Math.abs(h)),l.translate(-(c.scale*a),-(r.scale*o)),n.transform(c.scale,0,0,r.scale,0,0),l.save(),this.clipBbox(n,a,o,m,d),n.baseTransform=n.ctx.mozCurrentTransform.slice(),n.executeOperatorList(x),n.endDrawing(),{canvas:y.canvas,scaleX:c.scale,scaleY:r.scale,offsetX:a,offsetY:o}}},{key:"getSizeAndScale",value:function(n,s,o){n=Math.abs(n);var a=Math.max(e.MAX_PATTERN_SIZE,s),i=Math.ceil(n*o);return i>=a?i=a:o=i/n,{scale:o,size:i}}},{key:"clipBbox",value:function(t,n,s,o,i){var a=o-n,r=i-s;t.ctx.rect(n,s,a,r),t.current.updateRectMinMax(t.ctx.mozCurrentTransform,[n,s,o,i]),t.clip(),t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(t,n,o){var i,a,r=t.ctx,c=t.current;switch(n){case l.COLORED:i=this.ctx,r.fillStyle=i.fillStyle,r.strokeStyle=i.strokeStyle,c.fillColor=i.fillStyle,c.strokeColor=i.strokeStyle;break;case l.UNCOLORED:a=s.Util.makeHexColor(o[0],o[1],o[2]),r.fillStyle=a,r.strokeStyle=a,c.fillColor=a,c.strokeColor=a;break;default:throw new s.FormatError("Unsupported paint type: ".concat(n))}}},{key:"getPattern",value:function(t,n,i,a){var r,c,d,l=i;a!==o.SHADING&&(l=s.Util.transform(l,n.baseTransform),this.matrix&&(l=s.Util.transform(l,this.matrix))),r=this.createPatternCanvas(n),c=new DOMMatrix(l),c=c.translate(r.offsetX,r.offsetY),c=c.scale(1/r.scaleX,1/r.scaleY),d=t.createPattern(r.canvas,"repeat");try{d.setTransform(c)}catch(e){(0,s.warn)('TilingPattern.getPattern: "'.concat(e?.message,'".'))}return d}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,s.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),e}(),t.TilingPattern=w},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMaskImageData=d;var o=n(1);function i(e,t){return l(e)||c(e,t)||r(e,t)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(e,t){if(!e)return;if(typeof e=="string")return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}function s(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function c(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function l(e){if(Array.isArray(e))return e}function d(e){for(var a,l,u,h,d=e.src,f=e.srcPos,c=f===void 0?0:f,t=e.dest,v=e.destPos,n=v===void 0?0:v,g=e.width,O=e.height,b=e.inverseDecode,x=b!==void 0&&b,m=o.FeatureTest.isLittleEndian?4278190080:255,C=x?[0,m]:[m,0],p=i(C,2),s=p[0],r=p[1],w=g>>3,j=g&7,y=d.length,t=new Uint32Array(t.buffer),_=0;_<O;_++){for(u=c+w;c<u;c++)a=c<y?d[c]:255,t[n++]=a&128?r:s,t[n++]=a&64?r:s,t[n++]=a&32?r:s,t[n++]=a&16?r:s,t[n++]=a&8?r:s,t[n++]=a&4?r:s,t[n++]=a&2?r:s,t[n++]=a&1?r:s;if(j===0)continue;h=c<y?d[c++]:255;for(l=0;l<j;l++)t[n++]=h&1<<7-l?r:s}return{srcPos:c,destPos:n}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;var n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=n.workerPort===void 0?null:n.workerPort,n.workerSrc=n.workerSrc===void 0?"":n.workerSrc},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var s,a,u,o=n(1);function c(){"use strict";c=function(){return n};var t,s,a,d,u,n={},O=Object.prototype,o=O.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},m=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{e({},"")}catch{e=function(t,n,s){return t[n]=s}}function x(e,n,s,o){var a=n&&n.prototype instanceof p?n:p,i=Object.create(a.prototype),r=new v(o||[]);return i._invoke=function(e,n,s){var o="suspendedStart";return function(i,a){if(o==="executing")throw new Error("Generator is already running");if(o==="completed"){if(i==="throw")throw a;return C()}for(s.method=i,s.arg=a;;){var r,c,l=s.delegate;if(l&&(c=w(l,s),c)){if(c===t)continue;return c}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(o==="suspendedStart")throw o="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);if(o="executing",r=b(e,n,s),r.type==="normal"){if(o=s.done?"completed":"suspendedYield",r.arg===t)continue;return{value:r.arg,done:s.done}}r.type==="throw"&&(o="completed",s.method="throw",s.arg=r.arg)}}}(e,s,r),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=x,t={};function p(){}function h(){}function i(){}d={},e(d,m,function(){return this}),u=Object.getPrototypeOf,a=u&&u(u(f([]))),a&&a!==O&&o.call(a,m)&&(d=a),s=i.prototype=p.prototype=Object.create(d);function _(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function l(e,t){function n(s,i,a,c){if(d=b(e[s],e,i),d.type!=="throw"){var d,u=d.arg,l=u.value;return l&&r(l)=="object"&&o.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,c)},function(e){n("throw",e,a,c)}):t.resolve(l).then(function(e){u.value=e,a(u)},function(e){return n("throw",e,a,c)})}c(d.arg)}var s;this._invoke=function(e,o){function i(){return new t(function(t,s){n(e,o,t,s)})}return s=s?s.then(i,i):i()}}function w(e,n){var s,o,i=e.iterator[n.method];if(i===void 0){if(n.delegate=null,n.method==="throw"){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),n.method==="throw"))return t;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return o=b(i,e.iterator,n.arg),o.type==="throw"?(n.method="throw",n.arg=o.arg,n.delegate=null,t):(s=o.arg,s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,t):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,t))}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function f(e){if(e){if(t=e[m],t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t,n=-1,s=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=i,e(s,"constructor",i),e(i,"constructor",h),h.displayName=e(i,y,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===h||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,e(t,y,"GeneratorFunction")),t.prototype=Object.create(s),t},n.awrap=function(e){return{__await:e}},_(l.prototype),e(l.prototype,k,function(){return this}),n.AsyncIterator=l,n.async=function(e,t,s,o,i){i===void 0&&(i=Promise);var a=new l(x(e,t,s,o),i);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(s),e(s,y,"Generator"),e(s,m,function(){return this}),e(s,"toString",function(){return"[object Generator]"}),n.keys=function(e){var n,t=[];for(n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},n.values=f,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var n in this)n.charAt(0)==="t"&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;i=this;function s(e,n){return l.type="throw",l.arg=t,i.next=e,n&&(i.method="next",i.arg=void 0),!!n}for(a=this.tryEntries.length-1;a>=0;--a){var i,a,r,c,n=this.tryEntries[a],l=n.completion;if(n.tryLoc==="root")return s("end");if(n.tryLoc<=this.prev)if(r=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc"),r&&c){{if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}else if(r){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}},abrupt:function(n,s){for(var i,a,r,c=this.tryEntries.length-1;c>=0;--c)if(a=this.tryEntries[c],a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){i=a;break}return i&&(n==="break"||n==="continue")&&i.tryLoc<=s&&s<=i.finallyLoc&&(i=null),r=i?i.completion:{},r.type=n,r.arg=s,i?(this.method="next",this.next=i.finallyLoc,t):this.complete(r)},complete:function(n,s){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&s&&(this.next=s),t},finish:function(n){for(var s,o=this.tryEntries.length-1;o>=0;--o)if(s=this.tryEntries[o],s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),j(s),t},catch:function(t){for(var n,o,i,s=this.tryEntries.length-1;s>=0;--s)if(n=this.tryEntries[s],n.tryLoc===t)return o=n.completion,o.type==="throw"&&(i=o.arg,j(n)),i;throw new Error("illegal catch attempt")},delegateYield:function(n,s,o){return this.delegate={iterator:f(n),resultName:s,nextLoc:o},this.method==="next"&&(this.arg=void 0),t}},n}function d(e,t,n,s,o,i,a){try{var c=e[i](a),r=c.value}catch(e){n(e);return}c.done?t(r):Promise.resolve(r).then(s,o)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(s,o){var a=e.apply(t,n);function i(e){d(a,s,o,i,r,"next",e)}function r(e){d(a,s,o,i,r,"throw",e)}i(void 0)})}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function h(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}a={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function i(e){switch(e instanceof Error||r(e)==="object"&&e!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new o.AbortException(e.message);case"MissingPDFException":return new o.MissingPDFException(e.message);case"PasswordException":return new o.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new o.UnknownErrorException(e.message,e.details);default:return new o.UnknownErrorException(e.message,e.toString())}}u=function(){function e(t,n,s){var o=this;f(this,e),this.sourceName=t,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(e){var n,r,c,l,d,t=e.data;if(t.targetName!==o.sourceName)return;if(t.stream){o._processStreamMessage(t);return}if(t.callback){if(n=t.callbackId,r=o.callbackCapabilities[n],!r)throw new Error("Cannot resolve callback ".concat(n));if(delete o.callbackCapabilities[n],t.callback===a.DATA)r.resolve(t.data);else if(t.callback===a.ERROR)r.reject(i(t.reason));else throw new Error("Unexpected callback case");return}if(c=o.actionHandler[t.action],!c)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){l=o.sourceName,d=t.sourceName,new Promise(function(e){e(c(t.data))}).then(function(e){s.postMessage({sourceName:l,targetName:d,callback:a.DATA,callbackId:t.callbackId,data:e})},function(e){s.postMessage({sourceName:l,targetName:d,callback:a.ERROR,callbackId:t.callbackId,reason:i(e)})});return}if(t.streamId){o._createStreamSink(t);return}c(t.data)},s.addEventListener("message",this._onComObjOnMessage)}return h(e,[{key:"on",value:function(t,n){var s=this.actionHandler;if(s[t])throw new Error('There is already an actionName called "'.concat(t,'"'));s[t]=n}},{key:"send",value:function(t,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},s)}},{key:"sendWithPromise",value:function(t,n,s){var a=this.callbackId++,i=(0,o.createPromiseCapability)();this.callbackCapabilities[a]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:n},s)}catch(e){i.reject(e)}return i.promise}},{key:"sendWithStream",value:function(t,n,a,r){var l=this,c=this.streamId++,d=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:function(s){var i=(0,o.createPromiseCapability)();return l.streamControllers[c]={controller:s,startCall:i,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:d,targetName:u,action:t,streamId:c,data:n,desiredSize:s.desiredSize},r),i.promise},pull:function(t){var n=(0,o.createPromiseCapability)();return l.streamControllers[c].pullCall=n,h.postMessage({sourceName:d,targetName:u,stream:s.PULL,streamId:c,desiredSize:t.desiredSize}),n.promise},cancel:function(t){(0,o.assert)(t instanceof Error,"cancel must have a valid reason");var n=(0,o.createPromiseCapability)();return l.streamControllers[c].cancelCall=n,l.streamControllers[c].isClosed=!0,h.postMessage({sourceName:d,targetName:u,stream:s.CANCEL,streamId:c,reason:i(t)}),n.promise}},a)}},{key:"_createStreamSink",value:function(t){var n=t.streamId,a=this.sourceName,r=t.sourceName,c=this.comObj,d=this,u=this.actionHandler[t.action],l={enqueue:function(t){var i,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,d=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;i=this.desiredSize,this.desiredSize-=l,i>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),c.postMessage({sourceName:a,targetName:r,stream:s.ENQUEUE,streamId:n,chunk:t},d)},close:function(){if(this.isCancelled)return;this.isCancelled=!0,c.postMessage({sourceName:a,targetName:r,stream:s.CLOSE,streamId:n}),delete d.streamSinks[n]},error:function(t){if((0,o.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled)return;this.isCancelled=!0,c.postMessage({sourceName:a,targetName:r,stream:s.ERROR,streamId:n,reason:i(t)})},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[n]=l,new Promise(function(e){e(u(t.data,l))}).then(function(){c.postMessage({sourceName:a,targetName:r,stream:s.START_COMPLETE,streamId:n,success:!0})},function(e){c.postMessage({sourceName:a,targetName:r,stream:s.START_COMPLETE,streamId:n,reason:i(e)})})}},{key:"_processStreamMessage",value:function(t){var a=t.streamId,c=this.sourceName,l=t.sourceName,d=this.comObj,n=this.streamControllers[a],r=this.streamSinks[a];switch(t.stream){case s.START_COMPLETE:t.success?n.startCall.resolve():n.startCall.reject(i(t.reason));break;case s.PULL_COMPLETE:t.success?n.pullCall.resolve():n.pullCall.reject(i(t.reason));break;case s.PULL:if(!r){d.postMessage({sourceName:c,targetName:l,stream:s.PULL_COMPLETE,streamId:a,success:!0});break}r.desiredSize<=0&&t.desiredSize>0&&r.sinkCapability.resolve(),r.desiredSize=t.desiredSize,new Promise(function(e){e(r.onPull&&r.onPull())}).then(function(){d.postMessage({sourceName:c,targetName:l,stream:s.PULL_COMPLETE,streamId:a,success:!0})},function(e){d.postMessage({sourceName:c,targetName:l,stream:s.PULL_COMPLETE,streamId:a,reason:i(e)})});break;case s.ENQUEUE:if((0,o.assert)(n,"enqueue should have stream controller"),n.isClosed)break;n.controller.enqueue(t.chunk);break;case s.CLOSE:if((0,o.assert)(n,"close should have stream controller"),n.isClosed)break;n.isClosed=!0,n.controller.close(),this._deleteStreamController(n,a);break;case s.ERROR:(0,o.assert)(n,"error should have stream controller"),n.controller.error(i(t.reason)),this._deleteStreamController(n,a);break;case s.CANCEL_COMPLETE:t.success?n.cancelCall.resolve():n.cancelCall.reject(i(t.reason)),this._deleteStreamController(n,a);break;case s.CANCEL:if(!r)break;new Promise(function(e){e(r.onCancel&&r.onCancel(i(t.reason)))}).then(function(){d.postMessage({sourceName:c,targetName:l,stream:s.CANCEL_COMPLETE,streamId:a,success:!0})},function(e){d.postMessage({sourceName:c,targetName:l,stream:s.CANCEL_COMPLETE,streamId:a,reason:i(e)})}),r.sinkCapability.reject(i(t.reason)),r.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:function(){var e=m(c().mark(function e(t,n){return c().wrap(function(s){for(;1;)switch(s.prev=s.next){case 0:return s.next=2,Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]);case 2:delete this.streamControllers[n];case 3:case"end":return s.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),e}(),t.MessageHandler=u},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var s,i,d,g=n(1);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function f(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,n){h(e,t),t.set(e,n)}function h(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t){var n=c(e,t,"get");return u(e,n)}function u(e,t){return t.get?t.get.call(e):t.value}function l(e,t,n){var s=c(e,t,"set");return m(e,s,n),n}function c(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function m(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}s=new WeakMap,i=new WeakMap,d=function(){function e(t){var n=t.parsedData,o=t.rawData;p(this,e),r(this,s,{writable:!0,value:void 0}),r(this,i,{writable:!0,value:void 0}),l(this,s,n),l(this,i,o)}return f(e,[{key:"getRaw",value:function(){return o(this,i)}},{key:"get",value:function(t){var n;return(n=o(this,s).get(t))!==null&&n!==void 0?n:null}},{key:"getAll",value:function(){return(0,g.objectFromMap)(o(this,s))}},{key:"has",value:function(t){return o(this,s).has(t)}}]),e}(),t.Metadata=d},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var o,r,l,d,u,m,f,v,w,i=n(1);function z(e){return L(e)||F(e)||p(e)||T()}function T(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function L(e){if(Array.isArray(e))return g(e)}function x(e,t){return D(e)||M(e,t)||p(e,t)||A()}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function D(e){if(Array.isArray(e))return e}function a(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=p(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function p(e,t){if(!e)return;if(typeof e=="string")return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}function g(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function N(e,t){_(e,t),t.add(e)}function b(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function y(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){_(e,t),t.set(e,n)}function _(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,n){var s=C(e,t,"set");return S(e,s,n),n}function S(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function s(e,t){var n=C(e,t,"get");return k(e,n)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function k(e,t){return t.get?t.get.call(e):t.value}l=Symbol("INTERNAL"),f=new WeakMap,w=function(){function e(t,n){O(this,e),h(this,f,{writable:!0,value:!0}),this.name=t,this.intent=n}return y(e,[{key:"visible",get:function(){return s(this,f)}},{key:"_setVisible",value:function(t,n){t!==l&&(0,i.unreachable)("Internal method `_setVisible` called."),c(this,f,n)}}]),e}(),r=new WeakMap,o=new WeakMap,u=new WeakMap,d=new WeakMap,m=new WeakSet,v=function(){function e(t){if(O(this,e),N(this,m),h(this,r,{writable:!0,value:!0}),h(this,o,{writable:!0,value:new Map}),h(this,u,{writable:!0,value:null}),h(this,d,{writable:!0,value:null}),this.name=null,this.creator=null,t===null)return;this.name=t.name,this.creator=t.creator,c(this,d,t.order),g=a(t.groups);try{for(g.s();!(k=g.n()).done;)v=k.value,s(this,o).set(v.id,new w(v.name,v.intent))}catch(e){g.e(e)}finally{g.f()}if(t.baseState==="OFF"){f=a(s(this,o).values());try{for(f.s();!(_=f.n()).done;)y=_.value,y._setVisible(l,!1)}catch(e){f.e(e)}finally{f.f()}}n=a(t.on);try{for(n.s();!(j=n.n()).done;)b=j.value,s(this,o).get(b)._setVisible(l,!0)}catch(e){n.e(e)}finally{n.f()}p=a(t.off);try{for(p.s();!(C=p.n()).done;)E=C.value,s(this,o).get(E)._setVisible(l,!1)}catch(e){p.e(e)}finally{p.f()}c(this,u,new Map),i=a(s(this,o));try{for(i.s();!(A=i.n()).done;){var n,i,f,p,g,v,b,j,y,_,C,E,k,A,S=x(A.value,2),M=S[0],F=S[1];s(this,u).set(M,F.visible)}}catch(e){i.e(e)}finally{i.f()}}return y(e,[{key:"isVisible",value:function(t){if(s(this,o).size===0)return!0;if(!t)return(0,i.warn)("Optional content group not defined."),!0;if(t.type==="OCG")return s(this,o).has(t.id)?s(this,o).get(t.id).visible:((0,i.warn)("Optional content group not found: ".concat(t.id)),!0);if(t.type==="OCMD"){if(t.expression)return b(this,m,E).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){var n,r,c,l,d,h,f,p,g,v,j,u=a(t.ids);try{for(u.s();!(p=u.n()).done;){if(l=p.value,!s(this,o).has(l))return(0,i.warn)("Optional content group not found: ".concat(l)),!0;if(s(this,o).get(l).visible)return!0}}catch(e){u.e(e)}finally{u.f()}return!1}if(t.policy==="AllOn"){r=a(t.ids);try{for(r.s();!(g=r.n()).done;){if(d=g.value,!s(this,o).has(d))return(0,i.warn)("Optional content group not found: ".concat(d)),!0;if(!s(this,o).get(d).visible)return!1}}catch(e){r.e(e)}finally{r.f()}return!0}if(t.policy==="AnyOff"){n=a(t.ids);try{for(n.s();!(v=n.n()).done;){if(h=v.value,!s(this,o).has(h))return(0,i.warn)("Optional content group not found: ".concat(h)),!0;if(!s(this,o).get(h).visible)return!0}}catch(e){n.e(e)}finally{n.f()}return!1}if(t.policy==="AllOff"){c=a(t.ids);try{for(c.s();!(j=c.n()).done;){if(f=j.value,!s(this,o).has(f))return(0,i.warn)("Optional content group not found: ".concat(f)),!0;if(s(this,o).get(f).visible)return!1}}catch(e){c.e(e)}finally{c.f()}return!0}return(0,i.warn)("Unknown optional content policy ".concat(t.policy,".")),!0}return(0,i.warn)("Unknown group type ".concat(t.type,".")),!0}},{key:"setVisibility",value:function(t){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!s(this,o).has(t)){(0,i.warn)("Optional content group not found: ".concat(t));return}s(this,o).get(t)._setVisible(l,!!n),c(this,r,null)}},{key:"hasInitialVisibility",get:function(){if(s(this,r)!==null)return s(this,r);t=a(s(this,o));try{for(t.s();!(n=t.n()).done;){var t,n,i=x(n.value,2),d=i[0],h=i[1],l=s(this,u).get(d);if(h.visible!==l)return c(this,r,!1)}}catch(e){t.e(e)}finally{t.f()}return c(this,r,!0)}},{key:"getOrder",value:function(){return s(this,o).size?s(this,d)?s(this,d).slice():z(s(this,o).keys()):null}},{key:"getGroups",value:function(){return s(this,o).size>0?(0,i.objectFromMap)(s(this,o)):null}},{key:"getGroup",value:function(t){return s(this,o).get(t)||null}}]),e}(),t.OptionalContentConfig=v;function E(e){var t,n,a,r,c=e.length;if(c<2)return!0;r=e[0];for(a=1;a<c;a++){if(t=e[a],n=void 0,Array.isArray(t))n=b(this,m,E).call(this,t);else if(s(this,o).has(t))n=s(this,o).get(t).visible;else return(0,i.warn)("Optional content group not found: ".concat(t)),!0;switch(r){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return r==="And"}},(e,t,n)=>{"use strict";function c(e){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var l,f,p,o=n(1),g=n(129);function i(){"use strict";i=function(){return n};var t,s,r,d,u,n={},O=Object.prototype,o=O.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},m=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{e({},"")}catch{e=function(t,n,s){return t[n]=s}}function x(e,n,s,o){var a=n&&n.prototype instanceof p?n:p,i=Object.create(a.prototype),r=new v(o||[]);return i._invoke=function(e,n,s){var o="suspendedStart";return function(i,a){if(o==="executing")throw new Error("Generator is already running");if(o==="completed"){if(i==="throw")throw a;return C()}for(s.method=i,s.arg=a;;){var r,c,l=s.delegate;if(l&&(c=w(l,s),c)){if(c===t)continue;return c}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(o==="suspendedStart")throw o="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);if(o="executing",r=b(e,n,s),r.type==="normal"){if(o=s.done?"completed":"suspendedYield",r.arg===t)continue;return{value:r.arg,done:s.done}}r.type==="throw"&&(o="completed",s.method="throw",s.arg=r.arg)}}}(e,s,r),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=x,t={};function p(){}function h(){}function a(){}d={},e(d,m,function(){return this}),u=Object.getPrototypeOf,r=u&&u(u(f([]))),r&&r!==O&&o.call(r,m)&&(d=r),s=a.prototype=p.prototype=Object.create(d);function _(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function l(e,t){function n(s,i,a,r){if(d=b(e[s],e,i),d.type!=="throw"){var d,u=d.arg,l=u.value;return l&&c(l)=="object"&&o.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,r)},function(e){n("throw",e,a,r)}):t.resolve(l).then(function(e){u.value=e,a(u)},function(e){return n("throw",e,a,r)})}r(d.arg)}var s;this._invoke=function(e,o){function i(){return new t(function(t,s){n(e,o,t,s)})}return s=s?s.then(i,i):i()}}function w(e,n){var s,o,i=e.iterator[n.method];if(i===void 0){if(n.delegate=null,n.method==="throw"){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),n.method==="throw"))return t;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return o=b(i,e.iterator,n.arg),o.type==="throw"?(n.method="throw",n.arg=o.arg,n.delegate=null,t):(s=o.arg,s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,t):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,t))}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function f(e){if(e){if(t=e[m],t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t,n=-1,s=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=a,e(s,"constructor",a),e(a,"constructor",h),h.displayName=e(a,y,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===h||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,e(t,y,"GeneratorFunction")),t.prototype=Object.create(s),t},n.awrap=function(e){return{__await:e}},_(l.prototype),e(l.prototype,k,function(){return this}),n.AsyncIterator=l,n.async=function(e,t,s,o,i){i===void 0&&(i=Promise);var a=new l(x(e,t,s,o),i);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(s),e(s,y,"Generator"),e(s,m,function(){return this}),e(s,"toString",function(){return"[object Generator]"}),n.keys=function(e){var n,t=[];for(n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},n.values=f,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var n in this)n.charAt(0)==="t"&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;i=this;function s(e,n){return l.type="throw",l.arg=t,i.next=e,n&&(i.method="next",i.arg=void 0),!!n}for(a=this.tryEntries.length-1;a>=0;--a){var i,a,r,c,n=this.tryEntries[a],l=n.completion;if(n.tryLoc==="root")return s("end");if(n.tryLoc<=this.prev)if(r=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc"),r&&c){{if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}else if(r){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}},abrupt:function(n,s){for(var i,a,r,c=this.tryEntries.length-1;c>=0;--c)if(a=this.tryEntries[c],a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){i=a;break}return i&&(n==="break"||n==="continue")&&i.tryLoc<=s&&s<=i.finallyLoc&&(i=null),r=i?i.completion:{},r.type=n,r.arg=s,i?(this.method="next",this.next=i.finallyLoc,t):this.complete(r)},complete:function(n,s){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&s&&(this.next=s),t},finish:function(n){for(var s,o=this.tryEntries.length-1;o>=0;--o)if(s=this.tryEntries[o],s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),j(s),t},catch:function(t){for(var n,o,i,s=this.tryEntries.length-1;s>=0;--s)if(n=this.tryEntries[s],n.tryLoc===t)return o=n.completion,o.type==="throw"&&(i=o.arg,j(n)),i;throw new Error("illegal catch attempt")},delegateYield:function(n,s,o){return this.delegate={iterator:f(n),resultName:s,nextLoc:o},this.method==="next"&&(this.arg=void 0),t}},n}function h(e,t,n,s,o,i,a){try{var c=e[i](a),r=c.value}catch(e){n(e);return}c.done?t(r):Promise.resolve(r).then(s,o)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(s,o){var a=e.apply(t,n);function i(e){h(a,s,o,i,r,"next",e)}function r(e){h(a,s,o,i,r,"throw",e)}i(void 0)})}}function s(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=v(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function v(e,t){if(!e)return;if(typeof e=="string")return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}function u(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}p=function(){function e(t,n){var s,a,i=this;r(this,e),(0,o.assert)(n,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null,s=t.initialData,s?.length>0&&(a=new Uint8Array(s).buffer,this._queuedChunks.push(a)),this._pdfDataRangeTransport=n,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(e,t){i._onReceiveData({begin:e,chunk:t})}),this._pdfDataRangeTransport.addProgressListener(function(e,t){i._onProgress({loaded:e,total:t})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(e){i._onReceiveData({chunk:e})}),this._pdfDataRangeTransport.addProgressiveDoneListener(function(){i._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}return a(e,[{key:"_onReceiveData",value:function(t){var s,n=new Uint8Array(t.chunk).buffer;t.begin===void 0?this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n):(s=this._rangeReaders.some(function(e){return e._begin===t.begin&&(e._enqueue(n),!0)}),(0,o.assert)(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."))}},{key:"_progressiveDataLength",get:function(){var t,n;return(t=(n=this._fullRequestReader)===null||n===void 0?void 0:n._loaded)!==null&&t!==void 0?t:0}},{key:"_onProgress",value:function(t){if(t.total===void 0){var n,s=this._rangeReaders[0];s!=null&&s.onProgress&&s.onProgress({loaded:t.loaded})}else n=this._fullRequestReader,n!=null&&n.onProgress&&n.onProgress({loaded:t.loaded,total:t.total})}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(t){var n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}},{key:"getFullReader",value:function(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new f(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(t,n){if(n<=this._progressiveDataLength)return null;var s=new l(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(s),s}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var o,i,n=s(this._rangeReaders.slice(0));try{for(n.s();!(o=n.n()).done;)i=o.value,i.cancel(t)}catch(e){n.e(e)}finally{n.f()}this._pdfDataRangeTransport.abort()}}]),e}(),t.PDFDataTransportStream=p,f=function(){function e(t,n){var o,a,c,l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;r(this,e),this._stream=t,this._done=l||!1,this._filename=(0,g.isPdfFile)(i)?i:null,this._queuedChunks=n||[],this._loaded=0,o=s(this._queuedChunks);try{for(o.s();!(a=o.n()).done;)c=a.value,this._loaded+=c.byteLength}catch(e){o.e(e)}finally{o.f()}this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}return a(e,[{key:"_enqueue",value:function(t){if(this._done)return;if(this._requests.length>0){var n=this._requests.shift();n.resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:function(){var e=d(i().mark(function e(){var t,n;return i().wrap(function(s){for(;1;)switch(s.prev=s.next){case 0:if(!(this._queuedChunks.length>0)){s.next=3;break}return n=this._queuedChunks.shift(),s.abrupt("return",{value:n,done:!1});case 3:if(!this._done){s.next=5;break}return s.abrupt("return",{value:void 0,done:!0});case 5:return t=(0,o.createPromiseCapability)(),this._requests.push(t),s.abrupt("return",t.promise);case 8:case"end":return s.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(){this._done=!0;var o,i,n=s(this._requests);try{for(n.s();!(o=n.n()).done;)i=o.value,i.resolve({value:void 0,done:!0})}catch(e){n.e(e)}finally{n.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){if(this._done)return;this._done=!0}}]),e}(),l=function(){function e(t,n,s){r(this,e),this._stream=t,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return a(e,[{key:"_enqueue",value:function(t){if(this._done)return;if(this._requests.length===0)this._queuedChunk=t;else{var n,o,i,a=this._requests.shift();a.resolve({value:t,done:!1}),n=s(this._requests);try{for(n.s();!(o=n.n()).done;)i=o.value,i.resolve({value:void 0,done:!0})}catch(e){n.e(e)}finally{n.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var e=d(i().mark(function e(){var t,n;return i().wrap(function(s){for(;1;)switch(s.prev=s.next){case 0:if(!this._queuedChunk){s.next=4;break}return n=this._queuedChunk,this._queuedChunk=null,s.abrupt("return",{value:n,done:!1});case 4:if(!this._done){s.next=6;break}return s.abrupt("return",{value:void 0,done:!0});case 6:return t=(0,o.createPromiseCapability)(),this._requests.push(t),s.abrupt("return",t.promise);case 9:case"end":return s.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(){this._done=!0;var o,i,n=s(this._requests);try{for(n.s();!(o=n.n()).done;)i=o.value,i.resolve({value:void 0,done:!0})}catch(e){n.e(e)}finally{n.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),e}()},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;function o(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=i(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,c,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return a=t.done,t},e:function(t){r=!0,c=t},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(r)throw c}}}}function i(e,t){if(!e)return;if(typeof e=="string")return n(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return n(e,t)}function n(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var c=function(){function e(){a(this,e)}return r(e,null,[{key:"textContent",value:function(n){var s=[],a={items:s,styles:Object.create(null)};function i(t){if(!t)return;var a,r,l,d,n=null,c=t.name;if(c==="#text")n=t.value;else if(!e.shouldBuildText(c))return;if(t!=null&&(r=t.attributes)!==null&&r!==void 0&&r.textContent?n=t.attributes.textContent:t.value&&(n=t.value),n!==null&&s.push({str:n}),!t.children)return;a=o(t.children);try{for(a.s();!(l=a.n()).done;)d=l.value,i(d)}catch(e){a.e(e)}finally{a.f()}}return i(n),a}},{key:"shouldBuildText",value:function(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}]),e}();t.XfaText=c},(e,t,n)=>{"use strict";function h(e){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var r,f,p,g,i=n(130);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},d(e,t)}function u(e){var t=b();return function(){var o,a,i=s(e);return t?(a=s(this).constructor,o=Reflect.construct(i,arguments,a)):o=i.apply(this,arguments),y(this,o)}}function y(e,t){if(t&&(h(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(e)}r=function(t){return new Promise(function(e,n){var s=o();s.readFile(t,function(t,s){if(t||!s){n(new Error(t));return}e(new Uint8Array(s))})})},p=function(e){l(t,e);var n=u(t);function t(){return a(this,t),n.apply(this,arguments)}return c(t,[{key:"_createCanvas",value:function(t,n){var s=m();return s.createCanvas(t,n)}}]),t}(i.BaseCanvasFactory),t.NodeCanvasFactory=p,g=function(e){l(t,e);var n=u(t);function t(){return a(this,t),n.apply(this,arguments)}return c(t,[{key:"_fetchData",value:function(t,n){return r(t).then(function(e){return{cMapData:e,compressionType:n}})}}]),t}(i.BaseCMapReaderFactory),t.NodeCMapReaderFactory=g,f=function(e){l(t,e);var n=u(t);function t(){return a(this,t),n.apply(this,arguments)}return c(t,[{key:"_fetchData",value:function(t){return r(t)}}]),t}(i.BaseStandardFontDataFactory),t.NodeStandardFontDataFactory=f},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var o,i,l,d,m,f,g,v,j,y,w,O,C,k,S,r=n(1),A=n(134),D=n(129),_=n(148),p=n(149);function W(e,t){return V(e)||$(e,t)||L(e,t)||X()}function X(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function V(e){if(Array.isArray(e))return e}function c(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=L(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function L(e,t){if(!e)return;if(typeof e=="string")return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}function M(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function B(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t){z(e,t),t.add(e)}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n){z(e,t),t.set(e,n)}function z(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function x(e,t,n){return q(e,t),n}function q(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function s(e,t){var n=F(e,t,"get");return G(e,n)}function G(e,t){return t.get?t.get.call(e):t.value}function h(e,t,n){var s=F(e,t,"set");return P(e,s,n),n}function F(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function P(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}f=new WeakMap,O=new WeakMap,v=new WeakMap,i=new WeakMap,m=new WeakMap,j=new WeakMap,l=new WeakMap,o=new WeakMap,d=new WeakMap,w=new WeakMap,g=new WeakSet,k=new WeakSet,y=new WeakSet,C=new WeakSet,S=function(){function e(t){H(this,e),b(this,C),b(this,y),b(this,k),b(this,g),a(this,w,{get:U,set:void 0}),a(this,f,{writable:!0,value:!1}),a(this,O,{writable:!0,value:this.pointerup.bind(this)}),a(this,v,{writable:!0,value:this.pointerdown.bind(this)}),a(this,i,{writable:!0,value:new Map}),a(this,m,{writable:!0,value:!1}),a(this,j,{writable:!0,value:new WeakMap}),a(this,l,{writable:!0,value:new Map}),a(this,o,{writable:!0,value:void 0}),a(this,d,{writable:!0,value:new Set}),e._initialized||(e._initialized=!0,_.FreeTextEditor.initialize(t.l10n),p.InkEditor.initialize(t.l10n),t.uiManager.registerEditorTypes([_.FreeTextEditor,p.InkEditor])),h(this,o,t.uiManager),this.annotationStorage=t.annotationStorage,this.pageIndex=t.pageIndex,this.div=t.div,s(this,o).addLayer(this)}return B(e,[{key:"textLayerElements",get:function(){var n,o=this.div.parentNode.getElementsByClassName("textLayer").item(0);return o?(n=s(this,j).get(o),n||(n=o.querySelectorAll('span[role="presentation"]'),n.length===0?(0,r.shadow)(this,"textLayerElements",null):(n=Array.from(n),n.sort(x(e,e,E)),s(this,j).set(o,n),n))):(0,r.shadow)(this,"textLayerElements",null)}},{key:"updateToolbar",value:function(t){s(this,o).updateToolbar(t)}},{key:"updateMode",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s(this,o).getMode();u(this,C,I).call(this),t===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),s(this,o).unselectAll()}},{key:"addInkEditorIfNeeded",value:function(t){if(!t&&s(this,o).getMode()!==r.AnnotationEditorType.INK)return;if(!t){var a,l,d,n=c(s(this,i).values());try{for(n.s();!(l=n.n()).done;)if(a=l.value,a.isEmpty()){a.setInBackground();return}}catch(e){n.e(e)}finally{n.f()}}d=u(this,y,T).call(this,{offsetX:0,offsetY:0}),d.setInBackground()}},{key:"setEditingState",value:function(t){s(this,o).setEditingState(t)}},{key:"addCommands",value:function(t){s(this,o).addCommands(t)}},{key:"enable",value:function(){this.div.style.pointerEvents="auto";var n,o,t=c(s(this,i).values());try{for(t.s();!(n=t.n()).done;)o=n.value,o.enableEditing()}catch(e){t.e(e)}finally{t.f()}}},{key:"disable",value:function(){this.div.style.pointerEvents="none";var n,o,t=c(s(this,i).values());try{for(t.s();!(n=t.n()).done;)o=n.value,o.disableEditing()}catch(e){t.e(e)}finally{t.f()}}},{key:"setActiveEditor",value:function(t){var n=s(this,o).getActive();if(n===t)return;s(this,o).setActiveEditor(t)}},{key:"enableClick",value:function(){this.div.addEventListener("pointerdown",s(this,v)),this.div.addEventListener("pointerup",s(this,O))}},{key:"disableClick",value:function(){this.div.removeEventListener("pointerdown",s(this,v)),this.div.removeEventListener("pointerup",s(this,O))}},{key:"attach",value:function(t){s(this,i).set(t.id,t)}},{key:"detach",value:function(t){s(this,i).delete(t.id),this.removePointerInTextLayer(t)}},{key:"remove",value:function(t){var n=this;s(this,o).removeEditor(t),this.detach(t),this.annotationStorage.removeKey(t.id),t.div.style.display="none",setTimeout(function(){t.div.style.display="",t.div.remove(),t.isAttachedToDOM=!1,document.activeElement===document.body&&s(n,o).focusMainContainer()},0),s(this,m)||this.addInkEditorIfNeeded(!1)}},{key:"onTextLayerRendered",value:function(){s(this,l).clear();var n,o,t=c(s(this,d));try{for(t.s();!(o=t.n()).done;)n=o.value,n.isAttachedToDOM&&this.addPointerInTextLayer(n)}catch(e){t.e(e)}finally{t.f()}s(this,d).clear()}},{key:"removePointerInTextLayer",value:function(t){if(!s(this,w)){s(this,d).delete(t);return}var n,a,i=t.id,o=s(this,l).get(i);if(!o)return;s(this,l).delete(i),n=o.getAttribute("aria-owns"),(a=n)!==null&&a!==void 0&&a.includes(i)&&(n=n.split(" ").filter(function(e){return e!==i}).join(" "),n?o.setAttribute("aria-owns",n):(o.removeAttribute("aria-owns"),o.setAttribute("role","presentation")))}},{key:"addPointerInTextLayer",value:function(n){if(!s(this,w)){s(this,d).add(n);return}this.removePointerInTextLayer(n);var o,i,a,c,u,r=this.textLayerElements;if(!r)return;c=n.contentDiv,i=n.getIdForTextLayer(),u=(0,D.binarySearchFirstItem)(r,function(t){return x(e,e,E).call(e,c,t)<0}),a=r[Math.max(0,u-1)],o=a.getAttribute("aria-owns"),o!=null&&o.includes(i)||a.setAttribute("aria-owns",o?"".concat(o," ").concat(i):i),a.removeAttribute("role"),s(this,l).set(i,a)}},{key:"moveDivInDOM",value:function(n){this.addPointerInTextLayer(n);var s,i,o=n.div,a=n.contentDiv;if(!this.div.hasChildNodes()){this.div.append(o);return}if(s=Array.from(this.div.childNodes).filter(function(e){return e!==o}),s.length===0)return;i=(0,D.binarySearchFirstItem)(s,function(t){return x(e,e,E).call(e,a,t)<0}),i===0?s[0].before(o):s[i-1].after(o)}},{key:"add",value:function(t){if(u(this,g,N).call(this,t),this.addToAnnotationStorage(t),s(this,o).addEditor(t),this.attach(t),!t.isAttachedToDOM){var n=t.render();this.div.append(n),t.isAttachedToDOM=!0}this.moveDivInDOM(t),t.onceAdded()}},{key:"addToAnnotationStorage",value:function(t){!t.isEmpty()&&!this.annotationStorage.has(t.id)&&this.annotationStorage.setValue(t.id,t)}},{key:"addOrRebuild",value:function(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}},{key:"addANewEditor",value:function(t){var n=this,s=function(){n.addOrRebuild(t)},o=function(){t.remove()};this.addCommands({cmd:s,undo:o,mustExec:!0})}},{key:"addUndoableEditor",value:function(t){var n=this,s=function(){n.addOrRebuild(t)},o=function(){t.remove()};this.addCommands({cmd:s,undo:o,mustExec:!1})}},{key:"getNextId",value:function(){return s(this,o).getId()}},{key:"deserialize",value:function(t){switch(t.annotationType){case r.AnnotationEditorType.FREETEXT:return _.FreeTextEditor.deserialize(t,this);case r.AnnotationEditorType.INK:return p.InkEditor.deserialize(t,this)}return null}},{key:"setSelected",value:function(t){s(this,o).setSelected(t)}},{key:"toggleSelected",value:function(t){s(this,o).toggleSelected(t)}},{key:"isSelected",value:function(t){return s(this,o).isSelected(t)}},{key:"unselect",value:function(t){s(this,o).unselect(t)}},{key:"pointerup",value:function(t){var n=A.KeyboardManager.platform.isMac;if(t.button!==0||t.ctrlKey&&n)return;if(t.target!==this.div)return;if(!s(this,f)){h(this,f,!0);return}u(this,y,T).call(this,t)}},{key:"pointerdown",value:function(t){var n,i=A.KeyboardManager.platform.isMac;if(t.button!==0||t.ctrlKey&&i)return;if(t.target!==this.div)return;n=s(this,o).getActive(),h(this,f,!n||n.isEmpty())}},{key:"drop",value:function(t){var i,a,r,c=t.dataTransfer.getData("text/plain"),n=s(this,o).getEditor(c);if(!n)return;t.preventDefault(),t.dataTransfer.dropEffect="move",u(this,g,N).call(this,n),i=this.div.getBoundingClientRect(),a=t.clientX-i.x,r=t.clientY-i.y,n.translate(a-n.startX,r-n.startY),this.moveDivInDOM(n),n.div.focus()}},{key:"dragover",value:function(t){t.preventDefault()}},{key:"destroy",value:function(){((a=s(this,o).getActive())===null||a===void 0?void 0:a.parent)===this&&s(this,o).setActiveEditor(null);var t,a,r,n=c(s(this,i).values());try{for(n.s();!(r=n.n()).done;)t=r.value,this.removePointerInTextLayer(t),t.isAttachedToDOM=!1,t.div.remove(),t.parent=null}catch(e){n.e(e)}finally{n.f()}s(this,l).clear(),this.div=null,s(this,i).clear(),s(this,d).clear(),s(this,o).removeLayer(this)}},{key:"render",value:function(t){this.viewport=t.viewport,(0,A.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();var i,a,n=c(s(this,o).getEditors(this.pageIndex));try{for(n.s();!(i=n.n()).done;)a=i.value,this.add(a)}catch(e){n.e(e)}finally{n.f()}this.updateMode()}},{key:"update",value:function(t){this.viewport=t.viewport,this.setDimensions(),this.updateMode()}},{key:"scaleFactor",get:function(){return this.viewport.scale}},{key:"pageDimensions",get:function(){var t=W(this.viewport.viewBox,4),n=t[0],s=t[1],o=t[2],i=t[3],a=o-n,r=i-s;return[a,r]}},{key:"viewportBaseDimensions",get:function(){var t=this.viewport,n=t.width,s=t.height,o=t.rotation;return o%180===0?[n,s]:[s,n]}},{key:"setDimensions",value:function(){var t=this.viewport,a=t.width,r=t.height,n=t.rotation,s=n%180!==0,o=Math.floor(a)+"px",i=Math.floor(r)+"px";this.div.style.width=s?i:o,this.div.style.height=s?o:i,this.div.setAttribute("data-main-rotation",n)}}]),e}(),t.AnnotationEditorLayer=S;function U(){return!!this.div.parentNode.querySelector(".textLayer .endOfContent")}function N(e){var t;if(e.parent===this)return;this.attach(e),e.pageIndex=this.pageIndex,(t=e.parent)===null||t===void 0?void 0:t.detach(e),e.parent=this,e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div))}function E(e,t){var o,i,n=e.getBoundingClientRect(),s=t.getBoundingClientRect();return n.y+n.height<=s.y?-1:s.y+s.height<=n.y?1:(o=n.x+n.width/2,i=s.x+s.width/2,o-i)}function Y(e){switch(s(this,o).getMode()){case r.AnnotationEditorType.FREETEXT:return new _.FreeTextEditor(e);case r.AnnotationEditorType.INK:return new p.InkEditor(e)}return null}function T(e){var n=this.getNextId(),t=u(this,k,Y).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY});return t&&this.add(t),t}function I(){h(this,m,!0);var t,n,e=c(s(this,i).values());try{for(e.s();!(n=e.n()).done;)t=n.value,t.isEmpty()&&t.remove()}catch(t){e.e(t)}finally{e.f()}h(this,m,!1)}K(S,"_initialized",!1)},(e,t,n)=>{"use strict";function x(e){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var l,d,u,f,g,v,b,j,w,O,E,A,S,i=n(1),R=n(134),y=n(133);function J(e){return Q(e)||se(e)||T(e)||Z()}function Z(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Q(e){if(Array.isArray(e))return k(e)}function F(e,t){return Y(e)||G(e,t)||T(e,t)||X()}function X(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(e,t){if(!e)return;if(typeof e=="string")return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}function k(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function G(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function Y(e){if(Array.isArray(e))return e}function M(e,t){var n,s=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)),s}function L(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]!=null?arguments[n]:{},n%2?M(Object(t),!0).forEach(function(n){m(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function K(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(){return typeof Reflect!="undefined"&&Reflect.get?c=Reflect.get.bind():c=function(t,n,s){var o,i=U(t,n);if(!i)return;return o=Object.getOwnPropertyDescriptor(i,n),o.get?o.get.call(arguments.length<3?t:s):o.value},c.apply(this,arguments)}function U(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t);)if(e=a(e),e===null)break;return e}function H(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},C(e,t)}function W(e){var t=V();return function(){var s,i,o=a(e);return t?(i=a(this).constructor,s=Reflect.construct(o,arguments,i)):s=o.apply(this,arguments),$(this,s)}}function $(e,t){if(t&&(x(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}function o(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(e)}function _(e,t){D(e,t),t.add(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n){D(e,t),t.set(e,n)}function D(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(e,t){var n=P(e,t,"get");return B(e,n)}function B(e,t){return t.get?t.get.call(e):t.value}function p(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function r(e,t,n){var s=P(e,t,"set");return I(e,s,n),n}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function I(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}b=new WeakMap,O=new WeakMap,w=new WeakMap,d=new WeakMap,f=new WeakMap,g=new WeakMap,j=new WeakMap,l=new WeakMap,A=new WeakSet,E=new WeakSet,S=new WeakSet,v=new WeakSet,u=function(e){H(t,e);var n=W(t);function t(e){var s;return q(this,t),s=n.call(this,L(L({},e),{},{name:"freeTextEditor"})),_(o(s),v),_(o(s),S),_(o(s),E),_(o(s),A),h(o(s),b,{writable:!0,value:s.editorDivBlur.bind(o(s))}),h(o(s),O,{writable:!0,value:s.editorDivFocus.bind(o(s))}),h(o(s),w,{writable:!0,value:s.editorDivKeydown.bind(o(s))}),h(o(s),d,{writable:!0,value:void 0}),h(o(s),f,{writable:!0,value:""}),h(o(s),g,{writable:!0,value:""}),h(o(s),j,{writable:!0,value:!1}),h(o(s),l,{writable:!0,value:void 0}),r(o(s),d,e.color||t._defaultColor||y.AnnotationEditor._defaultLineColor),r(o(s),l,e.fontSize||t._defaultFontSize),s}return K(t,[{key:"updateParams",value:function(t,n){switch(t){case i.AnnotationEditorParamsType.FREETEXT_SIZE:p(this,A,ee).call(this,n);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:p(this,E,te).call(this,n);break}}},{key:"propertiesToUpdate",get:function(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,s(this,l)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,s(this,d)]]}},{key:"getInitialTranslation",value:function(){return[-t._internalPadding*this.parent.scaleFactor,-(t._internalPadding+s(this,l))*this.parent.scaleFactor]}},{key:"rebuild",value:function(){if(c(a(t.prototype),"rebuild",this).call(this),this.div===null)return;this.isAttachedToDOM||this.parent.add(this)}},{key:"enableEditMode",value:function(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),c(a(t.prototype),"enableEditMode",this).call(this),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",s(this,w)),this.editorDiv.addEventListener("focus",s(this,O)),this.editorDiv.addEventListener("blur",s(this,b))}},{key:"disableEditMode",value:function(){if(!this.isInEditMode())return;this.parent.setEditingState(!0),c(a(t.prototype),"disableEditMode",this).call(this),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",s(this,w)),this.editorDiv.removeEventListener("focus",s(this,O)),this.editorDiv.removeEventListener("blur",s(this,b)),this.div.focus(),this.isEditing=!1}},{key:"focusin",value:function(n){c(a(t.prototype),"focusin",this).call(this,n),n.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function(){if(this.width)return;this.enableEditMode(),this.editorDiv.focus()}},{key:"isEmpty",value:function(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}},{key:"remove",value:function(){this.isEditing=!1,this.parent.setEditingState(!0),c(a(t.prototype),"remove",this).call(this)}},{key:"commit",value:function(){c(a(t.prototype),"commit",this).call(this),s(this,j)||(r(this,j,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),r(this,g,this.editorDiv.innerHTML),r(this,f,p(this,S,ne).call(this).trimEnd()),p(this,v,z).call(this)}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"dblclick",value:function(){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(t){t.target===this.div&&t.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}},{key:"editorDivKeydown",value:function(n){t._keyboardManager.exec(this,n)}},{key:"editorDivFocus",value:function(){this.isEditing=!0}},{key:"editorDivBlur",value:function(){this.isEditing=!1}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"getIdForTextLayer",value:function(){return this.editorDiv.id}},{key:"render",value:function(){if(n=this,this.div)return this.div;if(this.width&&(i=this.x,r=this.y),c(a(t.prototype),"render",this).call(this),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id","".concat(this.id,"-editor")),this.enableEditing(),t._l10nPromise.get("editor_free_text_aria_label").then(function(e){var t;return(t=n.editorDiv)===null||t===void 0?void 0:t.setAttribute("aria-label",e)}),t._l10nPromise.get("free_text_default_content").then(function(e){var t;return(t=n.editorDiv)===null||t===void 0?void 0:t.setAttribute("default-content",e)}),this.editorDiv.contentEditable=!0,o=this.editorDiv.style,o.fontSize="calc(".concat(s(this,l),"px * var(--scale-factor))"),o.color=s(this,d),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,R.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){var n,o,i,r,u=F(this.parent.viewportBaseDimensions,2),h=u[0],m=u[1];this.setAt(i*h,r*m,this.width*h,this.height*m),this.editorDiv.innerHTML=s(this,g),this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){if(this.isEmpty())return null;var n=t._internalPadding*this.parent.scaleFactor,o=this.getRect(n,n),a=y.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:i.AnnotationEditorType.FREETEXT,color:a,fontSize:s(this,l),value:s(this,f),pageIndex:this.parent.pageIndex,rect:o,rotation:this.rotation}}}],[{key:"initialize",value:function(t){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(function(e){return[e,t.get(e)]}));var n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function(n,s){switch(n){case i.AnnotationEditorParamsType.FREETEXT_SIZE:t._defaultFontSize=s;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:t._defaultColor=s;break}}},{key:"defaultPropertiesToUpdate",get:function(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,t._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,t._defaultColor||y.AnnotationEditor._defaultLineColor]]}},{key:"deserialize",value:function(n,s){var o=c(a(t),"deserialize",this).call(this,n,s);return r(o,l,n.fontSize),r(o,d,i.Util.makeHexColor.apply(i.Util,J(n.color))),r(o,f,n.value),r(o,g,n.value.split(`
`).map(function(e){return"<div>".concat(e,"</div>")}).join("")),o}}]),t}(y.AnnotationEditor),t.FreeTextEditor=u;function ee(e){var t=this,n=function(n){t.editorDiv.style.fontSize="calc(".concat(n,"px * var(--scale-factor))"),t.translate(0,-(n-s(t,l))*t.parent.scaleFactor),r(t,l,n),p(t,v,z).call(t)},o=s(this,l);this.parent.addCommands({cmd:function(){n(e)},undo:function(){n(o)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function te(e){var t=this,n=s(this,d);this.parent.addCommands({cmd:function(){r(t,d,e),t.editorDiv.style.color=e},undo:function(){r(t,d,n),t.editorDiv.style.color=n},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function ne(){if(t=this.editorDiv.getElementsByTagName("div"),t.length===0)return this.editorDiv.innerText;n=[];for(var e,t,n,o,s=0,i=t.length;s<i;s++)o=t[s],e=o.firstChild,e?.nodeName==="#text"?n.push(e.data):n.push("");return n.join(`
`)}function z(){var e=F(this.parent.viewportBaseDimensions,2),n=e[0],s=e[1],t=this.div.getBoundingClientRect();this.width=t.width/n,this.height=t.height/s}m(u,"_freeTextDefaultContent",""),m(u,"_l10nPromise",void 0),m(u,"_internalPadding",0),m(u,"_defaultColor",null),m(u,"_defaultFontSize",10),m(u,"_keyboardManager",new R.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],u.prototype.commitOrRemove]]))},(e,t,n)=>{"use strict";function de(e){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return me.fitCurve}});var u,m,p,g,b,j,_,w,O,x,C,E,k,A,S,F,z,D,L,H,I,B,V,$,W,U,K,q,G,Q,Z,J,c=n(1),ae,re,ce,le,ee,te,N=n(133),me=n(150),Ge=n(134);function R(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=se(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function y(e){return Ie(e)||Be(e)||se(e)||$e()}function $e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Be(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ie(e){if(Array.isArray(e))return ne(e)}function f(e,t){return Ae(e)||Re(e,t)||se(e,t)||He()}function He(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(e,t){if(!e)return;if(typeof e=="string")return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}function ne(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Re(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function Ae(e){if(Array.isArray(e))return e}function xe(e,t){var n,s=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)),s}function he(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]!=null?arguments[n]:{},n%2?xe(Object(t),!0).forEach(function(n){P(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function ke(e,t,n){return t&&Oe(e.prototype,t),n&&Oe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(){return typeof Reflect!="undefined"&&Reflect.get?h=Reflect.get.bind():h=function(t,n,s){var o,i=ze(t,n);if(!i)return;return o=Object.getOwnPropertyDescriptor(i,n),o.get?o.get.call(arguments.length<3?t:s):o.value},h.apply(this,arguments)}function ze(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t);)if(e=d(e),e===null)break;return e}function Pe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},X(e,t)}function Ve(e){var t=Ke();return function(){var s,i,o=d(e);return t?(i=d(this).constructor,s=Reflect.construct(o,arguments,i)):s=o.apply(this,arguments),We(this,s)}}function We(e,t){if(t&&(de(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}function o(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(e)}function r(e,t){ge(e,t),t.add(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n){ge(e,t),t.set(e,n)}function ge(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pe(e,t,n){return Ye(e,t),n}function Ye(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function a(e,t,n){var s=ve(e,t,"set");return Xe(e,s,n),n}function Xe(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function i(e,t){var n=ve(e,t,"get");return Ce(e,n)}function ve(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Ce(e,t){return t.get?t.get.call(e):t.value}function s(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}O=16,g=new WeakMap,E=new WeakMap,C=new WeakMap,q=new WeakMap,V=new WeakMap,$=new WeakMap,U=new WeakMap,p=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,A=new WeakMap,S=new WeakMap,_=new WeakMap,ae=new WeakSet,re=new WeakSet,ce=new WeakSet,G=new WeakSet,K=new WeakSet,le=new WeakSet,ee=new WeakSet,te=new WeakSet,m=new WeakSet,H=new WeakSet,L=new WeakSet,F=new WeakSet,b=new WeakSet,B=new WeakSet,z=new WeakSet,Q=new WeakSet,Z=new WeakSet,J=new WeakSet,W=new WeakSet,D=new WeakSet,w=new WeakSet,I=new WeakSet,u=function(e){Pe(t,e);var n=Ve(t);function t(e){var s;return Ee(this,t),s=n.call(this,he(he({},e),{},{name:"inkEditor"})),r(o(s),I),r(o(s),w),r(o(s),D),r(o(s),W),r(o(s),J),r(o(s),Z),r(o(s),Q),r(o(s),z),r(o(s),B),r(o(s),b),r(o(s),F),r(o(s),L),r(o(s),H),r(o(s),m),r(o(s),te),r(o(s),ee),r(o(s),le),r(o(s),K),r(o(s),G),r(o(s),ce),r(o(s),re),r(o(s),ae),l(o(s),g,{writable:!0,value:0}),l(o(s),E,{writable:!0,value:0}),l(o(s),C,{writable:!0,value:0}),l(o(s),q,{writable:!0,value:s.canvasPointermove.bind(o(s))}),l(o(s),V,{writable:!0,value:s.canvasPointerleave.bind(o(s))}),l(o(s),$,{writable:!0,value:s.canvasPointerup.bind(o(s))}),l(o(s),U,{writable:!0,value:s.canvasPointerdown.bind(o(s))}),l(o(s),p,{writable:!0,value:!1}),l(o(s),k,{writable:!0,value:!1}),l(o(s),j,{writable:!0,value:null}),l(o(s),x,{writable:!0,value:null}),l(o(s),A,{writable:!0,value:0}),l(o(s),S,{writable:!0,value:0}),l(o(s),_,{writable:!0,value:null}),s.color=e.color||null,s.thickness=e.thickness||null,s.opacity=e.opacity||null,s.paths=[],s.bezierPath2D=[],s.currentPath=[],s.scaleFactor=1,s.translationX=s.translationY=0,s.x=0,s.y=0,s}return ke(t,[{key:"updateParams",value:function(t,n){switch(t){case c.AnnotationEditorParamsType.INK_THICKNESS:s(this,ae,Se).call(this,n);break;case c.AnnotationEditorParamsType.INK_COLOR:s(this,re,Me).call(this,n);break;case c.AnnotationEditorParamsType.INK_OPACITY:s(this,ce,Fe).call(this,n);break}}},{key:"propertiesToUpdate",get:function(){var n;return[[c.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||t._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,this.color||t._defaultColor||N.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((n=this.opacity)!==null&&n!==void 0?n:t._defaultOpacity))]]}},{key:"rebuild",value:function(){if(h(d(t.prototype),"rebuild",this).call(this),this.div===null)return;this.canvas||(s(this,L,ue).call(this),s(this,F,oe).call(this)),this.isAttachedToDOM||(this.parent.add(this),s(this,b,T).call(this)),s(this,w,M).call(this)}},{key:"remove",value:function(){if(this.canvas===null)return;this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,i(this,x).disconnect(),a(this,x,null),h(d(t.prototype),"remove",this).call(this)}},{key:"enableEditMode",value:function(){if(i(this,p)||this.canvas===null)return;h(d(t.prototype),"enableEditMode",this).call(this),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",i(this,U)),this.canvas.addEventListener("pointerup",i(this,$))}},{key:"disableEditMode",value:function(){if(!this.isInEditMode()||this.canvas===null)return;h(d(t.prototype),"disableEditMode",this).call(this),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",i(this,U)),this.canvas.removeEventListener("pointerup",i(this,$))}},{key:"onceAdded",value:function(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}},{key:"commit",value:function(){if(i(this,p))return;h(d(t.prototype),"commit",this).call(this),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),a(this,p,!0),this.div.classList.add("disabled"),s(this,w,M).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveDivInDOM(this),this.div.focus()}},{key:"focusin",value:function(n){h(d(t.prototype),"focusin",this).call(this,n),this.enableEditMode()}},{key:"canvasPointerdown",value:function(t){if(t.button!==0||!this.isInEditMode()||i(this,p))return;this.setInForeground(),t.type!=="mouse"&&this.div.focus(),t.stopPropagation(),this.canvas.addEventListener("pointerleave",i(this,V)),this.canvas.addEventListener("pointermove",i(this,q)),s(this,le,De).call(this,t.offsetX,t.offsetY)}},{key:"canvasPointermove",value:function(t){t.stopPropagation(),s(this,ee,Ne).call(this,t.offsetX,t.offsetY)}},{key:"canvasPointerup",value:function(t){if(t.button!==0)return;this.isInEditMode()&&this.currentPath.length!==0&&(t.stopPropagation(),s(this,H,ye).call(this,t),this.setInBackground())}},{key:"canvasPointerleave",value:function(t){s(this,H,ye).call(this,t),this.setInBackground()}},{key:"render",value:function(){if(r=this,this.div)return this.div;this.width&&(c=this.x,l=this.y),h(d(t.prototype),"render",this).call(this),t._l10nPromise.get("editor_ink_aria_label").then(function(e){var t;return(t=r.div)===null||t===void 0?void 0:t.setAttribute("aria-label",e)});var r,c,l,y=s(this,G,Te).call(this),n=f(y,4),_=n[0],p=n[1],g=n[2],j=n[3];if(this.setAt(_,p,0,0),this.setDims(g,j),s(this,L,ue).call(this),this.width){var u=f(this.parent.viewportBaseDimensions,2),i=u[0],o=u[1];this.setAt(c*i,l*o,this.width*i,this.height*o),a(this,k,!0),s(this,b,T).call(this),this.setDims(this.width*i,this.height*o),s(this,m,v).call(this),s(this,I,we).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return s(this,F,oe).call(this),this.div}},{key:"setDimensions",value:function(t,n){if(o=Math.round(t),r=Math.round(n),i(this,A)===o&&i(this,S)===r)return;a(this,A,o),a(this,S,r),this.canvas.style.visibility="hidden",i(this,g)&&Math.abs(i(this,g)-t/n)>.01&&(n=Math.ceil(t/i(this,g)),this.setDims(t,n));var o,r,c=f(this.parent.viewportBaseDimensions,2),l=c[0],d=c[1];this.width=t/l,this.height=n/d,i(this,p)&&s(this,B,je).call(this,t,n),s(this,b,T).call(this),s(this,m,v).call(this),this.canvas.style.visibility="visible"}},{key:"serialize",value:function(){if(this.isEmpty())return null;var t=this.getRect(0,0),n=this.rotation%180===0?t[3]-t[1]:t[2]-t[0],o=N.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:c.AnnotationEditorType.INK,color:o,thickness:this.thickness,opacity:this.opacity,paths:s(this,Q,Ue).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,n),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}],[{key:"initialize",value:function(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(function(e){return[e,t.get(e)]}))}},{key:"updateDefaultParams",value:function(n,s){switch(n){case c.AnnotationEditorParamsType.INK_THICKNESS:t._defaultThickness=s;break;case c.AnnotationEditorParamsType.INK_COLOR:t._defaultColor=s;break;case c.AnnotationEditorParamsType.INK_OPACITY:t._defaultOpacity=s/100;break}}},{key:"defaultPropertiesToUpdate",get:function(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,t._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,t._defaultColor||N.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(t._defaultOpacity*100)]]}},{key:"deserialize",value:function(n,o){i=h(d(t),"deserialize",this).call(this,n,o),i.thickness=n.thickness,i.color=c.Util.makeHexColor.apply(c.Util,y(n.color)),i.opacity=n.opacity;var i,r,l,b,j,_,w,O,x,M,T,z,D,N,L,P,H,F=f(o.pageDimensions,2),V=F[0],I=F[1],k=i.width*V,v=i.height*I,m=o.scaleFactor,u=n.thickness/2;a(i,g,k/v),a(i,p,!0),a(i,A,Math.round(k)),a(i,S,Math.round(v)),b=R(n.paths);try{for(b.s();!(P=b.n()).done;){r=P.value.bezier,_=[],i.paths.push(_),M=m*(r[0]-u),w=m*(v-r[1]-u);for(l=2,T=r.length;l<T;l+=6)H=m*(r[l]-u),D=m*(v-r[l+1]-u),N=m*(r[l+2]-u),L=m*(v-r[l+3]-u),x=m*(r[l+4]-u),O=m*(v-r[l+5]-u),_.push([[M,w],[H,D],[N,L],[x,O]]),M=x,w=O;z=pe(this,t,be).call(this,_),i.bezierPath2D.push(z)}}catch(e){b.e(e)}finally{b.f()}return j=s(i,W,fe).call(i),a(i,C,j[2]-j[0]),a(i,E,j[3]-j[1]),s(i,B,je).call(i,k,v),i}}]),t}(N.AnnotationEditor),t.InkEditor=u;function Se(e){var t=this,n=this.thickness;this.parent.addCommands({cmd:function(){t.thickness=e,s(t,w,M).call(t)},undo:function(){t.thickness=n,s(t,w,M).call(t)},mustExec:!0,type:c.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function Me(e){var t=this,n=this.color;this.parent.addCommands({cmd:function(){t.color=e,s(t,m,v).call(t)},undo:function(){t.color=n,s(t,m,v).call(t)},mustExec:!0,type:c.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Fe(e){var n,t=this;e/=100,n=this.opacity,this.parent.addCommands({cmd:function(){t.opacity=e,s(t,m,v).call(t)},undo:function(){t.opacity=n,s(t,m,v).call(t)},mustExec:!0,type:c.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function Te(){var n=this.parent.viewport,e=n.width,t=n.height,s=n.rotation;switch(s){case 90:return[0,e,e,t];case 180:return[e,t,e,t];case 270:return[t,0,e,t];default:return[0,0,e,t]}}function _e(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle="".concat(this.color).concat((0,Ge.opacityToHex)(this.opacity))}function De(e,t){var o,n=this;this.isEditing=!0,i(this,k)||(a(this,k,!0),s(this,b,T).call(this),this.thickness||(this.thickness=u._defaultThickness),this.color||(this.color=u._defaultColor||N.AnnotationEditor._defaultLineColor),(o=this.opacity)!==null&&o!==void 0?o:this.opacity=u._defaultOpacity),this.currentPath.push([e,t]),a(this,j,null),s(this,K,_e).call(this),this.ctx.beginPath(),this.ctx.moveTo(e,t),a(this,_,function(){if(!i(n,_))return;if(i(n,j)){var e;n.isEmpty()?(n.ctx.setTransform(1,0,0,1,0,0),n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height)):s(n,m,v).call(n),(e=n.ctx).lineTo.apply(e,y(i(n,j))),a(n,j,null),n.ctx.stroke()}window.requestAnimationFrame(i(n,_))}),window.requestAnimationFrame(i(this,_))}function Ne(e,t){var s=this.currentPath.at(-1),n=f(s,2),o=n[0],i=n[1];if(e===o&&t===i)return;this.currentPath.push([e,t]),a(this,j,[e,t])}function Le(e,t){n=this,this.ctx.closePath(),a(this,_,null),e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height);var n,o,i,r,l,d,m=this.currentPath.at(-1),c=f(m,2),p=c[0],h=c[1];(e!==p||t!==h)&&this.currentPath.push([e,t]),this.currentPath.length!==1?i=(0,me.fitCurve)(this.currentPath,30,null):(o=[e,t],i=[[o,o.slice(),o.slice(),o]]),r=pe(u,u,be).call(u,i),this.currentPath.length=0,d=function(){n.paths.push(i),n.bezierPath2D.push(r),n.rebuild()},l=function(){n.paths.pop(),n.bezierPath2D.pop(),n.paths.length===0?n.remove():(n.canvas||(s(n,L,ue).call(n),s(n,F,oe).call(n)),s(n,w,M).call(n))},this.parent.addCommands({cmd:d,undo:l,mustExec:!0})}function v(){if(this.isEmpty()){s(this,z,Y).call(this);return}s(this,K,_e).call(this);var e,o,i,n=this.canvas,t=this.ctx;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n.width,n.height),s(this,z,Y).call(this),e=R(this.bezierPath2D);try{for(e.s();!(o=e.n()).done;)i=o.value,t.stroke(i)}catch(t){e.e(t)}finally{e.f()}}function ye(e){s(this,te,Le).call(this,e.offsetX,e.offsetY),this.canvas.removeEventListener("pointerleave",i(this,V)),this.canvas.removeEventListener("pointermove",i(this,q)),this.parent.addToAnnotationStorage(this)}function ue(){var e=this;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",u._l10nPromise.get("editor_ink_canvas_aria_label").then(function(t){var n;return(n=e.canvas)===null||n===void 0?void 0:n.setAttribute("aria-label",t)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function oe(){var e=this;a(this,x,new ResizeObserver(function(t){var n=t[0].contentRect;n.width&&n.height&&e.setDimensions(n.width,n.height)})),i(this,x).observe(this.div)}function T(){if(!i(this,k))return;var e=f(this.parent.viewportBaseDimensions,2),t=e[0],n=e[1];this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),s(this,z,Y).call(this)}function je(e,t){var n=s(this,D,ie).call(this),o=(e-n)/i(this,C),a=(t-n)/i(this,E);this.scaleFactor=Math.min(o,a)}function Y(){var e=s(this,D,ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function be(e){t=new Path2D;for(n=0,o=e.length;n<o;n++){var t,n,o,s=f(e[n],4),c=s[0],i=s[1],a=s[2],r=s[3];n===0&&t.moveTo.apply(t,y(c)),t.bezierCurveTo(i[0],i[1],a[0],a[1],r[0],r[1])}return t}function Ue(e,t,n,o){A=4,g=[],i=this.thickness/2,r=R(this.paths);try{for(r.s();!(k=r.n()).done;){m=k.value,l=[],d=[];for(a=0,E=m.length;a<E;a++){var i,a,r,l,d,m,g,E,k,A,c=f(m[a],4),w=c[0],C=c[1],x=c[2],O=c[3],h=e*(w[0]+t)+i,u=o-e*(w[1]+n)-i,y=e*(C[0]+t)+i,j=o-e*(C[1]+n)-i,b=e*(x[0]+t)+i,_=o-e*(x[1]+n)-i,p=e*(O[0]+t)+i,v=o-e*(O[1]+n)-i;a===0&&(l.push(h,u),d.push(h,u)),l.push(y,j,b,_,p,v),s(this,Z,Qe).call(this,h,u,y,j,b,_,p,v,A,d)}g.push({bezier:l,points:d})}}catch(e){r.e(e)}finally{r.f()}return g}function Qe(e,t,n,o,i,a,r,c,l,d){if(s(this,J,qe).call(this,e,t,n,o,i,a,r,c)){d.push(r,c);return}for(var u,h,m,f,p,g,b,j,v=1;v<l-1;v++)u=v/l,h=1-u,m=u*e+h*n,f=u*t+h*o,g=u*n+h*i,p=u*o+h*a,b=u*i+h*r,j=u*a+h*c,m=u*m+h*g,f=u*f+h*p,g=u*g+h*b,p=u*p+h*j,m=u*m+h*g,f=u*f+h*p,d.push(m,f);d.push(r,c)}function qe(e,t,n,s,o,i,a,r){var c=10,l=Math.pow(3*n-2*e-a,2),d=Math.pow(3*s-2*t-r,2),u=Math.pow(3*o-e-2*a,2),h=Math.pow(3*i-t-2*r,2);return Math.max(l,u)+Math.max(d,h)<=c}function fe(){a=1/0,i=-(1/0),o=1/0,s=-(1/0),e=R(this.paths);try{for(e.s();!(l=e.n()).done;){d=l.value,t=R(d);try{for(t.s();!(u=t.n()).done;){var e,t,s,o,i,a,l,d,u,r=f(u.value,4),h=r[0],m=r[1],p=r[2],g=r[3],n=c.Util.bezierBoundingBox.apply(c.Util,y(h).concat(y(m),y(p),y(g)));a=Math.min(a,n[0]),o=Math.min(o,n[1]),i=Math.max(i,n[2]),s=Math.max(s,n[3])}}catch(e){t.e(e)}finally{t.f()}}}catch(t){e.e(t)}finally{e.f()}return[a,o,i,s]}function ie(){return i(this,p)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function M(){if(c=arguments.length>0&&arguments[0]!==void 0&&arguments[0],this.isEmpty())return;if(!i(this,p)){s(this,m,v).call(this);return}e=s(this,W,fe).call(this),t=s(this,D,ie).call(this),a(this,C,Math.max(O,e[2]-e[0])),a(this,E,Math.max(O,e[3]-e[1]));var e,t,r,c,d,u,n=Math.ceil(t+i(this,C)*this.scaleFactor),o=Math.ceil(t+i(this,E)*this.scaleFactor),l=f(this.parent.viewportBaseDimensions,2),h=l[0],j=l[1];this.width=n/h,this.height=o/j,a(this,g,n/o),s(this,I,we).call(this),d=this.translationX,u=this.translationY,this.translationX=-e[0],this.translationY=-e[1],s(this,b,T).call(this),s(this,m,v).call(this),a(this,A,n),a(this,S,o),this.setDims(n,o),r=c?t/this.scaleFactor/2:0,this.translate(d-this.translationX-r,u-this.translationY-r)}function we(){var e=this.div.style;i(this,g)>=1?(e.minHeight="".concat(O,"px"),e.minWidth="".concat(Math.round(i(this,g)*O),"px")):(e.minWidth="".concat(O,"px"),e.minHeight="".concat(Math.round(O/i(this,g)),"px"))}P(u,"_defaultColor",null),P(u,"_defaultOpacity",1),P(u,"_defaultThickness",1),P(u,"_l10nPromise",void 0)},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;var s=n(151);t.fitCurve=s},e=>{"use strict";function E(e){return g(e)||x(e)||d(e)||C()}function C(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function g(e){if(Array.isArray(e))return o(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){return m(e)||f(e,t)||d(e,t)||p()}function p(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(e,t){if(!e)return;if(typeof e=="string")return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}function o(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function f(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function m(e){if(Array.isArray(e))return e}function h(e,t,n){if(!Array.isArray(e))throw new TypeError("First argument should be an array");if(e.forEach(function(t){if(!Array.isArray(t)||t.some(function(e){return typeof e!="number"})||t.length!==e[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),e=e.filter(function(t,n){return n===0||!t.every(function(t,s){return t===e[n-1][s]})}),e.length<2)return[];var o=e.length,i=a(e[1],e[0]),r=a(e[o-2],e[o-1]);return s(e,i,r,t,n)}function s(e,n,o,a,c){var l,d,u,h,m,f,p,g,v,j,_,w,O,x,C,E,k,A,S,M=20;if(e.length===2)return O=t.vectorLen(t.subtract(e[0],e[1]))/3,h=[e[0],t.addArrays(e[0],t.mulItems(n,O)),t.addArrays(e[1],t.mulItems(o,O)),e[1]],[h];if(f=y(e),S=r(e,f,f,n,o,c),v=i(S,3),h=v[0],d=v[1],l=v[2],d===0||d<a)return[h];if(d<a*a){p=f,w=d,j=l;for(x=0;x<M;x++){if(p=b(h,e,p),A=r(e,f,p,n,o,c),g=i(A,3),h=g[0],d=g[1],l=g[2],d<a)return[h];if(l===j&&(C=d/w,C>.9999&&C<1.0001))break;w=d,j=l}}return m=[],u=t.subtract(e[l-1],e[l+1]),u.every(function(e){return e===0})&&(u=t.subtract(e[l-1],e[l]),_=[-u[1],u[0]],u[0]=_[0],u[1]=_[1]),E=t.normalize(u),k=t.mulItems(E,-1),m=m.concat(s(e.slice(0,l+1),n,E,a,c)),m=m.concat(s(e.slice(l),k,o,a,c)),m}function r(e,t,n,s,o,a){var r=v(e,n,s,o,a),u=_(e,r,t),d=i(u,2),c=d[0],l=d[1];return a&&a({bez:r,points:e,params:t,maxErr:c,maxPoint:l}),[r,c,l]}function v(e,s,o,i){var a,r,c,l,d,m,p,g,v,b,j,y,_,w,x,h=e[0],u=e[e.length-1],f=[h,null,null,u],O=t.zeros_Xx2x2(s.length);for(c=0,v=s.length;c<v;c++)l=s[c],p=1-l,a=O[c],a[0]=t.mulItems(o,3*l*(p*p)),a[1]=t.mulItems(i,3*p*(l*l));r=[[0,0],[0,0]],d=[0,0];for(c=0,v=e.length;c<v;c++)l=s[c],a=O[c],r[0][0]+=t.dot(a[0],a[0]),r[0][1]+=t.dot(a[0],a[1]),r[1][0]+=t.dot(a[0],a[1]),r[1][1]+=t.dot(a[1],a[1]),y=t.subtract(e[c],n.q([h,h,u,u],l)),d[0]+=t.dot(a[0],y),d[1]+=t.dot(a[1],y);return m=r[0][0]*r[1][1]-r[1][0]*r[0][1],w=r[0][0]*d[1]-r[1][0]*d[0],x=d[0]*r[1][1]-d[1]*r[0][1],b=m===0?0:x/m,j=m===0?0:w/m,g=t.vectorLen(t.subtract(h,u)),_=1e-6*g,b<_||j<_?(f[1]=t.addArrays(h,t.mulItems(o,g/3)),f[2]=t.addArrays(u,t.mulItems(i,g/3))):(f[1]=t.addArrays(h,t.mulItems(o,b)),f[2]=t.addArrays(u,t.mulItems(i,j))),f}function b(e,t,n){return n.map(function(n,s){return j(e,t[s],n)})}function j(e,s,o){var i=t.subtract(n.q(e,o),s),a=n.qprime(e,o),c=t.mulMatrix(i,a),r=t.sum(t.squareItems(a))+2*t.mulMatrix(i,n.qprimeprime(e,o));return r===0?o:o-c/r}function y(e){var s,o,i,n=[];return e.forEach(function(e,a){s=a?o+t.vectorLen(t.subtract(e,i)):0,n.push(s),o=s,i=e}),n=n.map(function(e){return e/o}),n}function _(e,s,o){var i,a,r,d,u,h,c=0,l=Math.floor(e.length/2),m=w(s,10);for(i=0,d=e.length;i<d;i++)u=e[i],h=O(s,o[i],m,10),a=t.subtract(n.q(s,h),u),r=a[0]*a[0]+a[1]*a[1],r>c&&(c=r,l=i);return[c,l]}var t,n,w=function(s,o){for(var a,i=[0],l=s[0],r=0,c=1;c<=o;c++)a=n.q(s,c/o),r+=t.vectorLen(t.subtract(a,l)),i.push(r),l=a;return i=i.map(function(e){return e/r}),i};function O(e,t,n,s){if(t<0)return 0;if(t>1)return 1;for(var i,a,r,c,l,o=1;o<=s;o++)if(t<=n[o]){a=(o-1)/s,c=o/s,i=n[o-1],r=n[o],l=(t-i)/(r-i)*(c-a)+a;break}return l}function a(e,n){return t.normalize(t.subtract(e,n))}t=function(){function e(){u(this,e)}return l(e,null,[{key:"zeros_Xx2x2",value:function(t){for(var n=[];t--;)n.push([0,0]);return n}},{key:"mulItems",value:function(t,n){return t.map(function(e){return e*n})}},{key:"mulMatrix",value:function(t,n){return t.reduce(function(e,t,s){return e+t*n[s]},0)}},{key:"subtract",value:function(t,n){return t.map(function(e,t){return e-n[t]})}},{key:"addArrays",value:function(t,n){return t.map(function(e,t){return e+n[t]})}},{key:"addItems",value:function(t,n){return t.map(function(e){return e+n})}},{key:"sum",value:function(t){return t.reduce(function(e,t){return e+t})}},{key:"dot",value:function(n,s){return e.mulMatrix(n,s)}},{key:"vectorLen",value:function(t){return Math.hypot.apply(Math,E(t))}},{key:"divItems",value:function(t,n){return t.map(function(e){return e/n})}},{key:"squareItems",value:function(t){return t.map(function(e){return e*e})}},{key:"normalize",value:function(t){return this.divItems(t,this.vectorLen(t))}}]),e}(),n=function(){function e(){u(this,e)}return l(e,null,[{key:"q",value:function(n,s){var o=1-s,i=t.mulItems(n[0],o*o*o),a=t.mulItems(n[1],3*o*o*s),r=t.mulItems(n[2],3*o*s*s),c=t.mulItems(n[3],s*s*s);return t.addArrays(t.addArrays(i,a),t.addArrays(r,c))}},{key:"qprime",value:function(n,s){var o=1-s,i=t.mulItems(t.subtract(n[1],n[0]),3*o*o),a=t.mulItems(t.subtract(n[2],n[1]),6*o*s),r=t.mulItems(t.subtract(n[3],n[2]),3*s*s);return t.addArrays(t.addArrays(i,a),r)}},{key:"qprimeprime",value:function(n,s){return t.addArrays(t.mulItems(t.addArrays(t.subtract(n[2],t.mulItems(n[1],2)),n[0]),6*(1-s)),t.mulItems(t.addArrays(t.subtract(n[3],t.mulItems(n[2],2)),n[1]),6*s))}}]),e}(),e.exports=h,e.exports.fitCubic=s,e.exports.createTangent=a},(e,t,n)=>{"use strict";function E(e){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var l,u,f,p,b,j,O,x,k,M,F,D,N,L,R,P,H,I,B,V,$,W,U,K,q,Y,G,X,Q,Z,s=n(1),y=n(129),te=n(132),ee=n(153),ne=n(154);function g(e,t,n){return oe(e,t),n}function oe(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function v(){return typeof Reflect!="undefined"&&Reflect.get?v=Reflect.get.bind():v=function(t,n,s){var o,i=ie(t,n);if(!i)return;return o=Object.getOwnPropertyDescriptor(i,n),o.get?o.get.call(arguments.length<3?t:s):o.value},v.apply(this,arguments)}function ie(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t);)if(e=m(e),e===null)break;return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return me(e)||le(e)||w(e)||ce()}function ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function me(e){if(Array.isArray(e))return _(e)}function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},C(e,t)}function r(e){var t=re();return function(){var s,i,o=m(e);return t?(i=m(this).constructor,s=Reflect.construct(o,arguments,i)):s=o.apply(this,arguments),he(this,s)}}function he(e,t){if(t&&(E(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(e)}function a(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=w(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function h(e,t){return de(e)||ue(e,t)||w(e,t)||se()}function se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(e,t){if(!e)return;if(typeof e=="string")return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}function _(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function ue(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function de(e){if(Array.isArray(e))return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function i(e,t,n){return t&&z(e.prototype,t),n&&z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}p=1e3,L=9,u=new WeakSet;function d(e){return{width:e[2]-e[0],height:e[3]-e[1]}}H=function(){function e(){o(this,e)}return i(e,null,[{key:"create",value:function(t){var n,o=t.data.annotationType;switch(o){case s.AnnotationType.LINK:return new x(t);case s.AnnotationType.TEXT:return new V(t);case s.AnnotationType.WIDGET:switch(n=t.data.fieldType,n){case"Tx":return new W(t);case"Btn":return t.data.radioButton?new K(t):t.data.checkBox?new U(t):new q(t);case"Ch":return new Y(t)}return new f(t);case s.AnnotationType.POPUP:return new O(t);case s.AnnotationType.FREETEXT:return new Q(t);case s.AnnotationType.LINE:return new Z(t);case s.AnnotationType.SQUARE:return new k(t);case s.AnnotationType.CIRCLE:return new X(t);case s.AnnotationType.POLYLINE:return new b(t);case s.AnnotationType.CARET:return new $(t);case s.AnnotationType.INK:return new B(t);case s.AnnotationType.POLYGON:return new G(t);case s.AnnotationType.HIGHLIGHT:return new I(t);case s.AnnotationType.UNDERLINE:return new P(t);case s.AnnotationType.SQUIGGLY:return new R(t);case s.AnnotationType.STRIKEOUT:return new N(t);case s.AnnotationType.STAMP:return new D(t);case s.AnnotationType.FILEATTACHMENT:return new F(t);default:return new l(t)}}}]),e}(),l=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.isRenderable,i=s!==void 0&&s,a=n.ignoreBorder,r=a!==void 0&&a,c=n.createQuadrilaterals,l=c!==void 0&&c;o(this,e),this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,i&&(this.container=this._createContainer(r)),l&&(this.quadrilaterals=this._createQuadrilaterals(r))}return i(e,[{key:"_createContainer",value:function(){var o,r,c,l,u,p,x=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.data,i=this.page,O=this.viewport,n=document.createElement("section"),g=d(t.rect),w=g.width,_=g.height,a=h(O.viewBox,4),f=a[0],b=a[1],y=a[2],j=a[3],v=y-f,m=j-b;if(n.setAttribute("data-annotation-id",t.id),c=s.Util.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),!x&&t.borderStyle.width>0){switch(n.style.borderWidth="".concat(t.borderStyle.width,"px"),l=t.borderStyle.horizontalCornerRadius,u=t.borderStyle.verticalCornerRadius,(l>0||u>0)&&(p="calc(".concat(l,"px * var(--scale-factor)) / calc(").concat(u,"px * var(--scale-factor))"),n.style.borderRadius=p),t.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:n.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:n.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:n.style.borderBottomStyle="solid";break;default:break}o=t.borderColor||null,o?n.style.borderColor=s.Util.makeHexColor(o[0]|0,o[1]|0,o[2]|0):n.style.borderWidth=0}return n.style.left="".concat(100*(c[0]-f)/v,"%"),n.style.top="".concat(100*(c[1]-b)/m,"%"),r=t.rotation,t.hasOwnCanvas||r===0?(n.style.width="".concat(100*w/v,"%"),n.style.height="".concat(100*_/m,"%")):this.setRotation(r,n),n}},{key:"setRotation",value:function(t){var o,i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,n=h(this.viewport.viewBox,4),p=n[0],g=n[1],f=n[2],m=n[3],r=f-p,c=m-g,l=d(this.data.rect),u=l.width,a=l.height;t%180===0?(o=100*u/r,i=100*a/c):(o=100*a/r,i=100*u/c),s.style.width="".concat(o,"%"),s.style.height="".concat(i,"%"),s.setAttribute("data-main-rotation",(360-t)%360)}},{key:"_commonActions",get:function(){var t=this,n=function(t,n,s){var o=s.detail[t];s.target.style[n]=ee.ColorConverters["".concat(o[0],"_HTML")](o.slice(1))};return(0,s.shadow)(this,"_commonActions",{display:function(n){var s=n.detail.display%2===1;t.container.style.visibility=s?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{hidden:s,print:n.detail.display===0||n.detail.display===3})},print:function(n){t.annotationStorage.setValue(t.data.id,{print:n.detail.print})},hidden:function(n){t.container.style.visibility=n.detail.hidden?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{hidden:n.detail.hidden})},focus:function(t){setTimeout(function(){return t.target.focus({preventScroll:!1})},0)},userName:function(t){t.target.title=t.detail.userName},readonly:function(t){t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:function(n){t._setRequired(n.target,n.detail.required)},bgColor:function(t){n("bgColor","backgroundColor",t)},fillColor:function(t){n("fillColor","backgroundColor",t)},fgColor:function(t){n("fgColor","color",t)},textColor:function(t){n("textColor","color",t)},borderColor:function(t){n("borderColor","borderColor",t)},strokeColor:function(t){n("strokeColor","borderColor",t)},rotation:function(n){var s=n.detail.rotation;t.setRotation(s),t.annotationStorage.setValue(t.data.id,{rotation:s})}})}},{key:"_dispatchEventFromSandbox",value:function(t,n){a=this._commonActions;for(var o,i,a,s=0,r=Object.keys(n.detail);s<r.length;s++)o=r[s],i=t[o]||a[o],i&&i(n)}},{key:"_setDefaultPropertiesFromJS",value:function(t){if(!this.enableScripting)return;if(n=this.annotationStorage.getRawValue(this.data.id),!n)return;c=this._commonActions;for(s=0,i=Object.entries(n);s<i.length;s++){var n,s,i,c,a=h(i[s],2),r=a[0],l=a[1],o=c[r];o&&(o({detail:l,target:t}),delete n[r])}}},{key:"_createQuadrilaterals",value:function(){var t,n,s,o,i,r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.data.quadPoints)return null;s=[],o=this.data.rect,t=a(this.data.quadPoints);try{for(t.s();!(i=t.n()).done;)n=i.value,this.data.rect=[n[2].x,n[2].y,n[1].x,n[1].y],s.push(this._createContainer(r))}catch(e){t.e(e)}finally{t.f()}return this.data.rect=o,s}},{key:"_createPopup",value:function(t,n){var o,i,s=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,s=this.quadrilaterals[0]),t||(t=document.createElement("div"),t.className="popupTriggerArea",s.append(t)),i=new j({container:s,trigger:t,color:n.color,titleObj:n.titleObj,modificationDate:n.modificationDate,contentsObj:n.contentsObj,richText:n.richText,hideWrapper:!0}),o=i.render(),o.style.left="100%",s.append(o)}},{key:"_renderQuadrilaterals",value:function(t){var s,o,n=a(this.quadrilaterals);try{for(n.s();!(s=n.n()).done;)o=s.value,o.className=t}catch(e){n.e(e)}finally{n.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(t){if(f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=[],this._fieldObjects){if(d=this._fieldObjects[t],d){o=a(d);try{for(o.s();!(b=o.n()).done;){var n,o,i,r,c,d,m,f,g,v,b,j,h=b.value,y=h.page,l=h.id,p=h.exportValues;if(y===-1)continue;if(l===f)continue;if(g=typeof p=="string"?p:null,c=document.querySelector('[data-element-id="'.concat(l,'"]')),c&&!u.has(c)){(0,s.warn)("_getElementsByName - element not allowed: ".concat(l));continue}n.push({id:l,exportValue:g,domElement:c})}}catch(e){o.e(e)}finally{o.f()}}return n}r=a(document.getElementsByName(t));try{for(r.s();!(v=r.n()).done;){if(i=v.value,m=i.id,j=i.exportValue,m===f)continue;if(!u.has(i))continue;n.push({id:m,exportValue:j,domElement:i})}}catch(e){r.e(e)}finally{r.f()}return n}}],[{key:"platform",get:function(){var t=typeof navigator!="undefined"?navigator.platform:"";return(0,s.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]),e}(),x=function(e){c(t,e);var n=r(t);function t(e){var s,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return o(this,t),s=n.call(this,e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0}),s.isTooltipOnly=e.data.isTooltipOnly,s}return i(t,[{key:"render",value:function(){var s,t=this.data,o=this.linkService,n=document.createElement("a");return n.setAttribute("data-element-id",t.id),s=!1,t.url?(o.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action),s=!0):t.dest?(this._bindLink(n,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(function(e,t){var s=t===0?n:n.cloneNode();return e.append(s),e}):(this.container.className="linkAnnotation",s&&this.container.append(n),this.container)}},{key:"_bindLink",value:function(t,n){var s=this;t.href=this.linkService.getDestinationHash(n),t.onclick=function(){return n&&s.linkService.goToDestination(n),!1},(n||n==="")&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function(t,n){var s=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return s.linkService.executeNamedAction(n),!1},t.className="internalLink"}},{key:"_bindJSAction",value:function(t,n){s=this,t.href=this.linkService.getAnchorUrl(""),i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),a=function(){var a=r[o],c=i.get(a);if(!c)return"continue";t[c]=function(){var e;return(e=s.linkService.eventBus)===null||e===void 0?void 0:e.dispatch("dispatcheventinsandbox",{source:s,detail:{id:n.id,name:a}}),!1}};for(var s,i,a,c,o=0,r=Object.keys(n.actions);o<r.length;o++)if(c=a(),c==="continue")continue;t.onclick||(t.onclick=function(){return!1}),t.className="internalLink"}},{key:"_bindResetFormAction",value:function(t,n){var o=this,i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=function(){return!1});return}t.onclick=function(){i&&i();var e,t,r,c,l,d,h,m,f,g,v,b,j,y,_,w,O,x,C,E,k,A,S,M,F,D,N,L,R=n.fields,z=n.refs,P=n.include,p=[];if(R.length!==0||z.length!==0){_=new Set(z),l=a(R);try{for(l.s();!(F=l.n()).done;){M=F.value,S=o._fieldObjects[M]||[],r=a(S);try{for(r.s();!(A=r.n()).done;)k=A.value.id,_.add(k)}catch(e){r.e(e)}finally{r.f()}}}catch(e){l.e(e)}finally{l.f()}for(m=0,j=Object.values(o._fieldObjects);m<j.length;m++){C=j[m],c=a(C);try{for(c.s();!(x=c.n()).done;)O=x.value,_.has(O.id)===P&&p.push(O)}catch(e){c.e(e)}finally{c.f()}}}else for(g=0,y=Object.values(o._fieldObjects);g<y.length;g++)E=y[g],p.push.apply(p,T(E));h=o.annotationStorage,v=[];for(f=0,b=p;f<b.length;f++){switch(e=b[f],t=e.id,v.push(t),e.type){case"text":{D=e.defaultValue||"",h.setValue(t,{value:D});break}case"checkbox":case"radiobutton":{N=e.defaultValue===e.exportValues,h.setValue(t,{value:N});break}case"combobox":case"listbox":{L=e.defaultValue||"",h.setValue(t,{value:L});break}default:continue}if(d=document.querySelector('[data-element-id="'.concat(t,'"]')),!d)continue;if(!u.has(d)){(0,s.warn)("_bindResetFormAction - element not allowed: ".concat(t));continue}d.dispatchEvent(new Event("resetform"))}return o.enableScripting&&((w=o.linkService.eventBus)===null||w===void 0?void 0:w.dispatch("dispatcheventinsandbox",{source:o,detail:{id:"app",ids:v,name:"ResetForm"}})),!1}}}]),t}(l),V=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r})}return i(t,[{key:"render",value:function(){this.container.className="textAnnotation";var t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}]),t}(l),f=function(e){c(t,e);var n=r(t);function t(){return o(this,t),n.apply(this,arguments)}return i(t,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(t){var n=l.platform,s=n.isWin,o=n.isMac;return s&&t.ctrlKey||o&&t.metaKey}},{key:"_setEventListener",value:function(t,n,s,o){var i=this;n.includes("mouse")?t.addEventListener(n,function(e){var t;(t=i.linkService.eventBus)===null||t===void 0?void 0:t.dispatch("dispatcheventinsandbox",{source:i,detail:{id:i.data.id,name:s,value:o(e),shift:e.shiftKey,modifier:i._getKeyModifier(e)}})}):t.addEventListener(n,function(e){var t;(t=i.linkService.eventBus)===null||t===void 0?void 0:t.dispatch("dispatcheventinsandbox",{source:i,detail:{id:i.data.id,name:s,value:o(e)}})})}},{key:"_setEventListeners",value:function(t,n,s){o=a(n);try{for(o.s();!(c=o.n()).done;){var o,i,c,l=h(c.value,2),d=l[0],r=l[1];(r==="Action"||(i=this.data.actions)!==null&&i!==void 0&&i[r])&&this._setEventListener(t,d,r,s)}}catch(e){o.e(e)}finally{o.f()}}},{key:"_setBackgroundColor",value:function(t){var n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":s.Util.makeHexColor(n[0],n[1],n[2])}},{key:"_setTextStyle",value:function(t){var a,r,c,l,d,u=["left","center","right"],n=this.data.defaultAppearanceData.fontColor,o=this.data.defaultAppearanceData.fontSize||L,i=t.style;this.data.multiLine?(r=Math.abs(this.data.rect[3]-this.data.rect[1]),c=Math.round(r/(s.LINE_FACTOR*o))||1,l=r/c,a=Math.min(o,Math.round(l/s.LINE_FACTOR))):(d=Math.abs(this.data.rect[3]-this.data.rect[1]),a=Math.min(o,Math.round(d/s.LINE_FACTOR))),i.fontSize="calc(".concat(a,"px * var(--scale-factor))"),i.color=s.Util.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=u[this.data.textAlignment])}},{key:"_setRequired",value:function(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}]),t}(l),W=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s=e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue;return n.call(this,e,{isRenderable:s})}return i(t,[{key:"setPropertyOnSiblings",value:function(t,n,s,o){var r,l,c=this.annotationStorage,i=a(this._getElementsByName(t.name,t.id));try{for(i.s();!(l=i.n()).done;)r=l.value,r.domElement&&(r.domElement[n]=s),c.setValue(r.id,ae({},o,s))}catch(e){i.e(e)}finally{i.f()}}},{key:"render",value:function(){var t,n,i,a,c,l,d,h,m,s=this,r=this.annotationStorage,o=this.data.id;return this.container.className="textWidgetAnnotation",t=null,this.renderForms?(c=r.getValue(o,{value:this.data.fieldValue}),a=c.formattedValue||c.value||"",n={userValue:a,formattedValue:null,valueOnFocus:""},this.data.multiLine?(t=document.createElement("textarea"),t.textContent=a,this.data.doNotScroll&&(t.style.overflowY="hidden")):(t=document.createElement("input"),t.type="text",t.setAttribute("value",a),this.data.doNotScroll&&(t.style.overflowX="hidden")),u.add(t),t.setAttribute("data-element-id",o),t.disabled=this.data.readOnly,t.name=this.data.fieldName,t.tabIndex=p,this._setRequired(t,this.data.required),t.addEventListener("input",function(e){r.setValue(o,{value:e.target.value}),s.setPropertyOnSiblings(t,"value",e.target.value,"value")}),t.addEventListener("resetform",function(){var o,i=(o=s.data.defaultFieldValue)!==null&&o!==void 0?o:"";t.value=n.userValue=i,n.formattedValue=null}),i=function(t){var s=n.formattedValue;s!=null&&(t.target.value=s),t.target.scrollLeft=0},this.enableScripting&&this.hasJSActions&&(t.addEventListener("focus",function(e){n.userValue&&(e.target.value=n.userValue),n.valueOnFocus=e.target.value}),t.addEventListener("updatefromsandbox",function(e){var t={value:function(t){var s;n.userValue=(s=t.detail.value)!==null&&s!==void 0?s:"",r.setValue(o,{value:n.userValue.toString()}),t.target.value=n.userValue},formattedValue:function(t){var s=t.detail.formattedValue;n.formattedValue=s,s!=null&&t.target!==document.activeElement&&(t.target.value=s),r.setValue(o,{formattedValue:s})},selRange:function(t){var n;(n=t.target).setSelectionRange.apply(n,T(t.detail.selRange))}};s._dispatchEventFromSandbox(t,e)}),t.addEventListener("keydown",function(e){var i,a,t=-1;if(e.key==="Escape"?t=0:e.key==="Enter"?t=2:e.key==="Tab"&&(t=3),t===-1)return;if(i=e.target.value,n.valueOnFocus===i)return;n.userValue=i,(a=s.linkService.eventBus)===null||a===void 0?void 0:a.dispatch("dispatcheventinsandbox",{source:s,detail:{id:o,name:"Keystroke",value:i,willCommit:!0,commitKey:t,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})}),d=i,i=null,t.addEventListener("blur",function(e){var i,t=e.target.value;n.userValue=t,s._mouseState.isDown&&n.valueOnFocus!==t&&((i=s.linkService.eventBus)===null||i===void 0?void 0:i.dispatch("dispatcheventinsandbox",{source:s,detail:{id:o,name:"Keystroke",value:t,willCommit:!0,commitKey:1,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),d(e)}),(l=this.data.actions)!==null&&l!==void 0&&l.Keystroke&&t.addEventListener("beforeinput",function(e){var n,d,u,a=e.target,h=e.data,r=a.value,t=a.selectionStart,c=a.selectionEnd,l=t,i=c;switch(e.inputType){case"deleteWordBackward":{d=r.substring(0,t).match(/\w*[^\w]*$/),d&&(l-=d[0].length);break}case"deleteWordForward":{u=r.substring(t).match(/^[^\w]*\w*/),u&&(i+=u[0].length);break}case"deleteContentBackward":t===c&&(l-=1);break;case"deleteContentForward":t===c&&(i+=1);break}e.preventDefault(),(n=s.linkService.eventBus)===null||n===void 0?void 0:n.dispatch("dispatcheventinsandbox",{source:s,detail:{id:o,name:"Keystroke",value:r,change:h||"",willCommit:!1,selStart:l,selEnd:i}})}),this._setEventListeners(t,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(e){return e.target.value})),i&&t.addEventListener("blur",i),this.data.maxLen!==null&&(t.maxLength=this.data.maxLen),this.data.comb&&(h=this.data.rect[2]-this.data.rect[0],m=h/this.data.maxLen,t.classList.add("comb"),t.style.letterSpacing="calc(".concat(m,"px * var(--scale-factor) - 1ch)"))):(t=document.createElement("div"),t.textContent=this.data.fieldValue,t.style.verticalAlign="middle",t.style.display="table-cell"),this._setTextStyle(t),this._setBackgroundColor(t),this._setDefaultPropertiesFromJS(t),this.container.append(t),this.container}}]),t}(f),U=function(e){c(t,e);var n=r(t);function t(e){return o(this,t),n.call(this,e,{isRenderable:e.renderForms})}return i(t,[{key:"render",value:function(){var t,r=this,o=this.annotationStorage,n=this.data,s=n.id,i=o.getValue(s,{value:n.exportValue===n.fieldValue}).value;return typeof i=="string"&&(i=i!=="Off",o.setValue(s,{value:i})),this.container.className="buttonWidgetAnnotation checkBox",t=document.createElement("input"),u.add(t),t.setAttribute("data-element-id",s),t.disabled=n.readOnly,this._setRequired(t,this.data.required),t.type="checkbox",t.name=n.fieldName,i&&t.setAttribute("checked",!0),t.setAttribute("exportValue",n.exportValue),t.tabIndex=p,t.addEventListener("change",function(e){var t,c,h,d=e.target,u=d.name,l=d.checked,i=a(r._getElementsByName(u,s));try{for(i.s();!(h=i.n()).done;)t=h.value,c=l&&t.exportValue===n.exportValue,t.domElement&&(t.domElement.checked=c),o.setValue(t.id,{value:c})}catch(e){i.e(e)}finally{i.f()}o.setValue(s,{value:l})}),t.addEventListener("resetform",function(e){var t=n.defaultFieldValue||"Off";e.target.checked=t===n.exportValue}),this.enableScripting&&this.hasJSActions&&(t.addEventListener("updatefromsandbox",function(e){var t={value:function(t){t.target.checked=t.detail.value!=="Off",o.setValue(s,{value:t.target.checked})}};r._dispatchEventFromSandbox(t,e)}),this._setEventListeners(t,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(e){return e.target.checked})),this._setBackgroundColor(t),this._setDefaultPropertiesFromJS(t),this.container.append(t),this.container}}]),t}(f),K=function(e){c(t,e);var n=r(t);function t(e){return o(this,t),n.call(this,e,{isRenderable:e.renderForms})}return i(t,[{key:"render",value:function(){var t,n,s,o,i,c,r=this;return this.container.className="buttonWidgetAnnotation radioButton",o=this.annotationStorage,n=this.data,s=n.id,i=o.getValue(s,{value:n.fieldValue===n.buttonValue}).value,typeof i=="string"&&(i=i!==n.buttonValue,o.setValue(s,{value:i})),t=document.createElement("input"),u.add(t),t.setAttribute("data-element-id",s),t.disabled=n.readOnly,this._setRequired(t,this.data.required),t.type="radio",t.name=n.fieldName,i&&t.setAttribute("checked",!0),t.tabIndex=p,t.addEventListener("change",function(e){var i,d,n=e.target,c=n.name,l=n.checked,t=a(r._getElementsByName(c,s));try{for(t.s();!(d=t.n()).done;)i=d.value,o.setValue(i.id,{value:!1})}catch(e){t.e(e)}finally{t.f()}o.setValue(s,{value:l})}),t.addEventListener("resetform",function(e){var t=n.defaultFieldValue;e.target.checked=t!=null&&t===n.buttonValue}),this.enableScripting&&this.hasJSActions&&(c=n.buttonValue,t.addEventListener("updatefromsandbox",function(e){var t={value:function(t){var n,l,u,d=c===t.detail.value,i=a(r._getElementsByName(t.target.name));try{for(i.s();!(u=i.n()).done;)n=u.value,l=d&&n.id===s,n.domElement&&(n.domElement.checked=l),o.setValue(n.id,{value:l})}catch(e){i.e(e)}finally{i.f()}}};r._dispatchEventFromSandbox(t,e)}),this._setEventListeners(t,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(e){return e.target.checked})),this._setBackgroundColor(t),this._setDefaultPropertiesFromJS(t),this.container.append(t),this.container}}]),t}(f),q=function(e){c(t,e);var n=r(t);function t(e){return o(this,t),n.call(this,e,{ignoreBorder:e.data.hasAppearance})}return i(t,[{key:"render",value:function(){var s,o=this,n=v(m(t.prototype),"render",this).call(this);return n.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(n.title=this.data.alternativeText),s=n.lastChild,this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",function(e){o._dispatchEventFromSandbox({},e)})),n}}]),t}(x),Y=function(e){c(t,e);var n=r(t);function t(e){return o(this,t),n.call(this,e,{isRenderable:e.renderForms})}return i(t,[{key:"render",value:function(){var t,n,s,o,i,r,c,l,d,h,f,g,v,m=this;this.container.className="choiceWidgetAnnotation",s=this.annotationStorage,n=this.data.id,g=s.getValue(n,{value:this.data.fieldValue}),t=document.createElement("select"),u.add(t),t.setAttribute("data-element-id",n),t.disabled=this.data.readOnly,this._setRequired(t,this.data.required),t.name=this.data.fieldName,t.tabIndex=p,f=this.data.combo&&this.data.options.length>0,this.data.combo||(t.size=this.data.options.length,this.data.multiSelect&&(t.multiple=!0)),t.addEventListener("resetform",function(){var s,i,o=m.data.defaultFieldValue,n=a(t.options);try{for(n.s();!(i=n.n()).done;)s=i.value,s.selected=s.value===o}catch(e){n.e(e)}finally{n.f()}}),l=a(this.data.options);try{for(l.s();!(v=l.n()).done;)h=v.value,c=document.createElement("option"),c.textContent=h.displayValue,c.value=h.exportValue,g.value.includes(h.exportValue)&&(c.setAttribute("selected",!0),f=!1),t.append(c)}catch(e){l.e(e)}finally{l.f()}return r=null,f&&(i=document.createElement("option"),i.value=" ",i.setAttribute("hidden",!0),i.setAttribute("selected",!0),t.prepend(i),r=function(){i.remove(),t.removeEventListener("input",r),r=null},t.addEventListener("input",r)),o=function(t,n){var o=n?"value":"textContent",s=t.target.options;return t.target.multiple?Array.prototype.filter.call(s,function(e){return e.selected}).map(function(e){return e[o]}):s.selectedIndex===-1?null:s[s.selectedIndex][o]},d=function(t){var n=t.target.options;return Array.prototype.map.call(n,function(e){return{displayValue:e.textContent,exportValue:e.value}})},this.enableScripting&&this.hasJSActions?(t.addEventListener("updatefromsandbox",function(e){var i={value:function(i){(l=r)===null||l===void 0?void 0:l();var l,u,m,d=i.detail.value,h=new Set(Array.isArray(d)?d:[d]),c=a(t.options);try{for(c.s();!(m=c.n()).done;)u=m.value,u.selected=h.has(u.value)}catch(e){c.e(e)}finally{c.f()}s.setValue(n,{value:o(i,!0)})},multipleSelection:function(){t.multiple=!0},remove:function(i){var c,a=t.options,r=i.detail.remove;a[r].selected=!1,t.remove(r),a.length>0&&(c=Array.prototype.findIndex.call(a,function(e){return e.selected}),c===-1&&(a[0].selected=!0)),s.setValue(n,{value:o(i,!0),items:d(i)})},clear:function(){for(;t.length!==0;)t.remove(0);s.setValue(n,{value:null,items:[]})},insert:function(i){var r=i.detail.insert,l=r.index,u=r.displayValue,h=r.exportValue,c=t.children[l],a=document.createElement("option");a.textContent=u,a.value=h,c?c.before(a):t.append(a),s.setValue(n,{value:o(i,!0),items:d(i)})},items:function(i){for(h=i.detail.items;t.length!==0;)t.remove(0);r=a(h);try{for(r.s();!(u=r.n()).done;){var r,u,h,l=u.value,m=l.displayValue,f=l.exportValue,c=document.createElement("option");c.textContent=m,c.value=f,t.append(c)}}catch(e){r.e(e)}finally{r.f()}t.options.length>0&&(t.options[0].selected=!0),s.setValue(n,{value:o(i,!0),items:d(i)})},indices:function(t){var r,l,c=new Set(t.detail.indices),i=a(t.target.options);try{for(i.s();!(l=i.n()).done;)r=l.value,r.selected=c.has(r.index)}catch(e){i.e(e)}finally{i.f()}s.setValue(n,{value:o(t,!0)})},editable:function(t){t.target.disabled=!t.detail.editable}};m._dispatchEventFromSandbox(i,e)}),t.addEventListener("input",function(e){var t,i=o(e,!0),a=o(e,!1);s.setValue(n,{value:i}),(t=m.linkService.eventBus)===null||t===void 0?void 0:t.dispatch("dispatcheventinsandbox",{source:m,detail:{id:n,name:"Keystroke",value:a,changeEx:i,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(t,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],function(e){return e.target.checked})):t.addEventListener("input",function(e){s.setValue(n,{value:o(e,!0)})}),this.data.combo&&this._setTextStyle(t),this._setBackgroundColor(t),this._setDefaultPropertiesFromJS(t),this.container.append(t),this.container}}]),t}(f),O=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!((s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r})}return i(t,[{key:"render",value:function(){if(l=["Line","Square","Circle","PolyLine","Polygon","Ink"],this.container.className="popupAnnotation",l.includes(this.data.parentType))return this.container;if(i='[data-annotation-id="'.concat(this.data.parentId,'"]'),o=this.layer.querySelectorAll(i),o.length===0)return this.container;var o,i,l,m=new j({container:this.container,trigger:Array.from(o),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),n=this.page,r=s.Util.normalizeRect([this.data.parentRect[0],n.view[3]-this.data.parentRect[1]+n.view[1],this.data.parentRect[2],n.view[3]-this.data.parentRect[3]+n.view[1]]),u=r[0]+this.data.parentRect[2]-this.data.parentRect[0],d=r[1],t=h(this.viewport.viewBox,4),c=t[0],a=t[1],f=t[2],p=t[3],g=f-c,v=p-a;return this.container.style.left="".concat(100*(u-c)/g,"%"),this.container.style.top="".concat(100*(d-a)/v,"%"),this.container.append(m.render()),this.container}}]),t}(l),j=function(){function e(t){o(this,e),this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}return i(e,[{key:"render",value:function(){var t,n,o,i,r,l,d,u,m,f,p,g,v,b,h=.7,c=document.createElement("div");c.className="popupWrapper",this.hideElement=this.hideWrapper?c:this.container,this.hideElement.hidden=!0,t=document.createElement("div"),t.className="popup",n=this.color,n&&(g=h*(255-n[0])+n[0],f=h*(255-n[1])+n[1],b=h*(255-n[2])+n[2],t.style.backgroundColor=s.Util.makeHexColor(g|0,f|0,b|0)),d=document.createElement("h1"),d.dir=this.titleObj.dir,d.textContent=this.titleObj.str,t.append(d),l=y.PDFDateString.toDateObject(this.modificationDate),l&&(o=document.createElement("span"),o.className="popupDate",o.textContent="{{date}}, {{time}}",o.dataset.l10nId="annotation_date_string",o.dataset.l10nArgs=JSON.stringify({date:l.toLocaleDateString(),time:l.toLocaleTimeString()}),t.append(o)),(m=this.richText)!==null&&m!==void 0&&m.str&&(!((u=this.contentsObj)!==null&&u!==void 0&&u.str)||this.contentsObj.str===this.richText.str)?(ne.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:t}),t.lastChild.className="richText popupContent"):(p=this._formatContents(this.contentsObj),t.append(p)),Array.isArray(this.trigger)||(this.trigger=[this.trigger]),i=a(this.trigger);try{for(i.s();!(v=i.n()).done;)r=v.value,r.addEventListener("click",this._toggle.bind(this)),r.addEventListener("mouseover",this._show.bind(this,!1)),r.addEventListener("mouseout",this._hide.bind(this,!1))}catch(e){i.e(e)}finally{i.f()}return t.addEventListener("click",this._hide.bind(this,!0)),c.append(t),c}},{key:"_formatContents",value:function(t){var s,o,i,a,c=t.str,r=t.dir,n=document.createElement("p");n.className="popupContent",n.dir=r,o=c.split(/(?:\r\n?|\n)/);for(s=0,i=o.length;s<i;++s)a=o[s],n.append(document.createTextNode(a)),s<i-1&&n.append(document.createElement("br"));return n}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}]),e}(),Q=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0})}return i(t,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),t}(l),Z=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0})}return i(t,[{key:"render",value:function(){this.container.className="lineAnnotation";var t=this.data,s=d(t.rect),i=s.width,a=s.height,o=this.svgFactory.create(i,a,!0),n=this.svgFactory.createElement("svg:line");return n.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),n.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),n.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),n.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),o.append(n),this.container.append(o),this._createPopup(n,t),this.container}}]),t}(l),k=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0})}return i(t,[{key:"render",value:function(){this.container.className="squareAnnotation";var s=this.data,o=d(s.rect),i=o.width,a=o.height,r=this.svgFactory.create(i,a,!0),n=s.borderStyle.width,t=this.svgFactory.createElement("svg:rect");return t.setAttribute("x",n/2),t.setAttribute("y",n/2),t.setAttribute("width",i-n),t.setAttribute("height",a-n),t.setAttribute("stroke-width",n||1),t.setAttribute("stroke","transparent"),t.setAttribute("fill","transparent"),r.append(t),this.container.append(r),this._createPopup(t,s),this.container}}]),t}(l),X=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0})}return i(t,[{key:"render",value:function(){this.container.className="circleAnnotation";var i=this.data,a=d(i.rect),n=a.width,s=a.height,r=this.svgFactory.create(n,s,!0),o=i.borderStyle.width,t=this.svgFactory.createElement("svg:ellipse");return t.setAttribute("cx",n/2),t.setAttribute("cy",s/2),t.setAttribute("rx",n/2-o/2),t.setAttribute("ry",s/2-o/2),t.setAttribute("stroke-width",o||1),t.setAttribute("stroke","transparent"),t.setAttribute("fill","transparent"),r.append(t),this.container.append(r),this._createPopup(t,i),this.container}}]),t}(l),b=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,c=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str),r=n.call(this,e,{isRenderable:c,ignoreBorder:!0});return r.containerClassName="polylineAnnotation",r.svgElementName="svg:polyline",r}return i(t,[{key:"render",value:function(){this.container.className=this.containerClassName;var t,i,c,u,h,n=this.data,r=d(n.rect),m=r.width,f=r.height,l=this.svgFactory.create(m,f,!0),o=[],s=a(n.vertices);try{for(s.s();!(h=s.n()).done;)i=h.value,c=i.x-n.rect[0],u=n.rect[3]-i.y,o.push(c+","+u)}catch(e){s.e(e)}finally{s.f()}return o=o.join(" "),t=this.svgFactory.createElement(this.svgElementName),t.setAttribute("points",o),t.setAttribute("stroke-width",n.borderStyle.width||1),t.setAttribute("stroke","transparent"),t.setAttribute("fill","transparent"),l.append(t),this.container.append(l),this._createPopup(t,n),this.container}}]),t}(l),G=function(e){c(t,e);var n=r(t);function t(e){var s;return o(this,t),s=n.call(this,e),s.containerClassName="polygonAnnotation",s.svgElementName="svg:polygon",s}return i(t)}(b),$=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0})}return i(t,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),t}(l),B=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,c=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str),r=n.call(this,e,{isRenderable:c,ignoreBorder:!0});return r.containerClassName="inkAnnotation",r.svgElementName="svg:polyline",r}return i(t,[{key:"render",value:function(){this.container.className=this.containerClassName;var t,s,o,r,c,u,m,f,p,n=this.data,l=d(n.rect),v=l.width,g=l.height,h=this.svgFactory.create(v,g,!0),i=a(n.inkLists);try{for(i.s();!(p=i.n()).done;){c=p.value,s=[],o=a(c);try{for(o.s();!(m=o.n()).done;)r=m.value,u=r.x-n.rect[0],f=n.rect[3]-r.y,s.push("".concat(u,",").concat(f))}catch(e){o.e(e)}finally{o.f()}s=s.join(" "),t=this.svgFactory.createElement(this.svgElementName),t.setAttribute("points",s),t.setAttribute("stroke-width",n.borderStyle.width||1),t.setAttribute("stroke","transparent"),t.setAttribute("fill","transparent"),this._createPopup(t,n),h.append(t)}}catch(e){i.e(e)}finally{i.f()}return this.container.append(h),this.container}}]),t}(l),I=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0,createQuadrilaterals:!0})}return i(t,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),t}(l),P=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0,createQuadrilaterals:!0})}return i(t,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),t}(l),R=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0,createQuadrilaterals:!0})}return i(t,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),t}(l),N=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0,createQuadrilaterals:!0})}return i(t,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),t}(l),D=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var s,i,a,r=!!(e.data.hasPopup||(s=e.data.titleObj)!==null&&s!==void 0&&s.str||(i=e.data.contentsObj)!==null&&i!==void 0&&i.str||(a=e.data.richText)!==null&&a!==void 0&&a.str);return n.call(this,e,{isRenderable:r,ignoreBorder:!0})}return i(t,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),t}(l),F=function(e){c(t,e);var n=r(t);function t(e){o(this,t);var i,s=n.call(this,e,{isRenderable:!0}),a=s.data.file,r=a.filename,c=a.content;return s.filename=(0,y.getFilenameFromUrl)(r),s.content=c,(i=s.linkService.eventBus)===null||i===void 0?void 0:i.dispatch("fileattachmentannotation",{source:A(s),filename:r,content:c}),s}return i(t,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var n,s,t=document.createElement("div");return t.className="popupTriggerArea",t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((n=this.data.titleObj)!==null&&n!==void 0&&n.str||(s=this.data.contentsObj)!==null&&s!==void 0&&s.str||this.data.richText)&&this._createPopup(t,this.data),this.container.append(t),this.container}},{key:"_download",value:function(){var t;(t=this.downloadManager)===null||t===void 0?void 0:t.openOrDownloadData(this.container,this.content,this.filename)}}]),t}(l),M=function(){function e(){o(this,e)}return i(e,null,[{key:"render",value:function(n){var i,r,c,l,u,h,m,f,p,v,b,j,_,k=n.annotations,o=n.div,w=n.viewport;g(this,e,S).call(this,o,w),l=[],h=[],c=a(k);try{for(c.s();!(_=c.n()).done;){if(r=_.value,!r)continue;if(r.annotationType===s.AnnotationType.POPUP){h.push(r);continue}var x=d(r.rect),C=x.width,E=x.height;if(C<=0||E<=0)continue;l.push(r)}}catch(e){c.e(e)}finally{c.f()}h.length&&l.push.apply(l,h);for(f=0,p=l;f<p.length;f++)if(v=p[f],m=H.create({data:v,layer:o,page:n.page,viewport:w,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderForms:n.renderForms!==!1,svgFactory:new y.DOMSVGFactory,annotationStorage:n.annotationStorage||new te.AnnotationStorage,enableScripting:n.enableScripting,hasJSActions:n.hasJSActions,fieldObjects:n.fieldObjects,mouseState:n.mouseState||{isDown:!1}}),m.isRenderable)if(i=m.render(),v.hidden&&(i.style.visibility="hidden"),Array.isArray(i)){u=a(i);try{for(u.s();!(j=u.n()).done;)b=j.value,o.append(b)}catch(e){u.e(e)}finally{u.f()}}else m instanceof O?o.prepend(i):o.append(i);g(this,e,J).call(this,o,n.annotationCanvasMap)}},{key:"update",value:function(n){var o=n.annotationCanvasMap,s=n.div,i=n.viewport;g(this,e,S).call(this,s,i),g(this,e,J).call(this,s,o),s.hidden=!1}}]),e}(),t.AnnotationLayer=M;function S(e,t){var c=t.width,r=t.height,s=t.rotation,o=e.style,i=s%180!==0,a=Math.floor(c)+"px",n=Math.floor(r)+"px";o.width=i?n:a,o.height=i?a:n,e.setAttribute("data-main-rotation",s)}function J(e,t){if(!t)return;n=a(t);try{for(n.s();!(r=n.n()).done;){var n,s,r,c=h(r.value,2),l=c[0],i=c[1],o=e.querySelector('[data-annotation-id="'.concat(l,'"]'));if(!o)continue;s=o.firstChild,s?s.nodeName==="CANVAS"?s.replaceWith(i):s.before(i):o.append(i)}}catch(e){n.e(e)}finally{n.f()}t.clear()}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(e,t){return c(e)||r(e,t)||a(e,t)||d()}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(e,t){if(!e)return;if(typeof e=="string")return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}function i(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function r(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function c(e){if(Array.isArray(e))return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){return Math.floor(Math.max(0,Math.min(1,e))*255).toString(16).padStart(2,"0")}var h=function(){function e(){l(this,e)}return u(e,null,[{key:"CMYK_G",value:function(t){var s=n(t,4),o=s[0],i=s[1],a=s[2],r=s[3];return["G",1-Math.min(1,.3*o+.59*a+.11*i+r)]}},{key:"G_CMYK",value:function(t){var s=n(t,1),o=s[0];return["CMYK",0,0,0,1-o]}},{key:"G_RGB",value:function(t){var o=n(t,1),s=o[0];return["RGB",s,s,s]}},{key:"G_HTML",value:function(t){var i=n(t,1),a=i[0],o=s(a);return"#".concat(o).concat(o).concat(o)}},{key:"RGB_G",value:function(t){var s=n(t,3),o=s[0],i=s[1],a=s[2];return["G",.3*o+.59*i+.11*a]}},{key:"RGB_HTML",value:function(t){var o=n(t,3),i=o[0],a=o[1],r=o[2],c=s(i),l=s(a),d=s(r);return"#".concat(c).concat(l).concat(d)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(t){var s=n(t,4),i=s[0],a=s[1],r=s[2],o=s[3];return["RGB",1-Math.min(1,i+o),1-Math.min(1,r+o),1-Math.min(1,a+o)]}},{key:"CMYK_HTML",value:function(t){var n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}},{key:"RGB_CMYK",value:function(t){var s=n(t,3),r=s[0],c=s[1],l=s[2],o=1-r,i=1-c,a=1-l,d=Math.min(o,i,a);return["CMYK",o,i,a,d]}}]),e}();t.ColorConverters=h},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var c,u=n(145);function o(e,t){return d(e)||m(e,t)||s(e,t)||l()}function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function d(e){if(Array.isArray(e))return e}function a(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=s(e))||t&&e&&typeof e.length=="number")return n&&(e=n),o=0,i=function(){},{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(t){throw t},f:i};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,o,i,c,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return a=t.done,t},e:function(t){r=!0,c=t},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(r)throw c}}}}function s(e,t){if(!e)return;if(typeof e=="string")return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}function r(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function f(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}c=function(){function e(){h(this,e)}return f(e,null,[{key:"setupStorage",value:function(t,n,s,o,i){var c,l,d,r=o.getValue(n,{value:null});switch(s.name){case"textarea":if(r.value!==null&&(t.textContent=r.value),i==="print")break;t.addEventListener("input",function(e){o.setValue(n,{value:e.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(r.value===s.attributes.xfaOn?t.setAttribute("checked",!0):r.value===s.attributes.xfaOff&&t.removeAttribute("checked"),i==="print")break;t.addEventListener("change",function(e){o.setValue(n,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&t.setAttribute("value",r.value),i==="print")break;t.addEventListener("input",function(e){o.setValue(n,{value:e.target.value})})}break;case"select":if(r.value!==null){c=a(s.children);try{for(c.s();!(d=c.n()).done;)l=d.value,l.attributes.value===r.value&&(l.attributes.selected=!0)}catch(e){c.e(e)}finally{c.f()}}t.addEventListener("input",function(e){var t=e.target.options,s=t.selectedIndex===-1?"":t[t.selectedIndex].value;o.setValue(n,{value:s})});break}}},{key:"setAttributes",value:function(t){var r,c,s=t.html,m=t.element,u=t.storage,h=u===void 0?null:u,f=t.intent,p=t.linkService,n=m.attributes,d=s instanceof HTMLAnchorElement;n.type==="radio"&&(n.name="".concat(n.name,"-").concat(f));for(r=0,c=Object.entries(n);r<c.length;r++){var l=o(c[r],2),a=l[0],i=l[1];if(i==null)continue;switch(a){case"class":i.length&&s.setAttribute(a,i.join(" "));break;case"dataId":break;case"id":s.setAttribute("data-element-id",i);break;case"style":Object.assign(s.style,i);break;case"textContent":s.textContent=i;break;default:(!d||a!=="href"&&a!=="newWindow")&&s.setAttribute(a,i)}}d&&p.addLinkAttributes(s,n.href,n.newWindow),h&&n.dataId&&this.setupStorage(s,n.dataId,m,h)}},{key:"render",value:function(t){for(y=t.annotationStorage,b=t.linkService,l=t.xfaHtml,f=t.intent||"display",h=document.createElement(l.name),l.attributes&&this.setAttributes({html:h,element:l,intent:f,linkService:b}),i=[[l,-1,h]],r=t.div,r.append(h),t.viewport&&(x="matrix(".concat(t.viewport.transform.join(","),")"),r.style.transform=x),f!=="richText"&&r.setAttribute("class","xfaLayer xfaFont"),m=[];i.length>0;){var n,s,i,r,c,l,d,h,m,f,p,v,b,j,y,O,x,C,k=i.at(-1),g=o(k,3),w=g[0],E=g[1],_=g[2];if(E+1===w.children.length){i.pop();continue}if(n=w.children[++i.at(-1)[1]],n===null)continue;if(d=n.name,d==="#text"){v=document.createTextNode(n.value),m.push(v),_.append(v);continue}s=void 0,n!=null&&(p=n.attributes)!==null&&p!==void 0&&p.xmlns?s=document.createElementNS(n.attributes.xmlns,d):s=document.createElement(d),_.append(s),n.attributes&&this.setAttributes({html:s,element:n,storage:y,intent:f,linkService:b}),n.children&&n.children.length>0?i.push([n,-1,s]):n.value&&(j=document.createTextNode(n.value),u.XfaText.shouldBuildText(d)&&m.push(j),s.append(j))}c=a(r.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(c.s();!(O=c.n()).done;)C=O.value,C.setAttribute("readOnly",!0)}catch(e){c.e(e)}finally{c.f()}return{textDivs:m}}},{key:"update",value:function(t){var n="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=n,t.div.hidden=!1}}]),e}(),t.XfaLayer=c},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=x;var s,i,r,l,h,m,o=n(1),b=n(129);function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function O(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=w(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function w(e,t){if(!e)return;if(typeof e=="string")return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}function u(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}h=1e5,s=30,l=.8,i=new Map,m=/^\s+$/g;function g(e,t){if(u=i.get(e),u)return u;if(t.save(),t.font="".concat(s,"px ").concat(e),h=t.measureText(""),n=h.fontBoundingBoxAscent,r=Math.abs(h.fontBoundingBoxDescent),n)return t.restore(),d=n/(n+r),i.set(e,d),d;t.strokeStyle="red",t.clearRect(0,0,s,s),t.strokeText("g",0,0),o=t.getImageData(0,0,s,s).data,r=0;for(a=o.length-1-3;a>=0;a-=4)if(o[a]>0){r=Math.ceil(a/4/s);break}t.clearRect(0,0,s,s),t.strokeText("A",0,s),o=t.getImageData(0,0,s,s).data,n=0;for(var n,o,a,r,d,u,h,m,c=0,f=o.length;c<f;c+=4)if(o[c]>0){n=s-Math.floor(c/4/s);break}return t.restore(),n?(m=n/(n+r),i.set(e,m),m):(i.set(e,l),l)}function v(e,t,n,s){if(i=document.createElement("span"),c=e._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0},e._textDivs.push(i),r=o.Util.transform(e._viewport.transform,t.transform),a=Math.atan2(r[1],r[0]),d=n[t.fontName],d.vertical&&(a+=Math.PI/2),f=Math.hypot(r[2],r[3]),p=f*g(d.fontFamily,s),a===0?(l=r[4],u=r[5]-p):(l=r[4]+p*Math.sin(a),u=r[5]-p*Math.cos(a)),i.style.left="".concat(l,"px"),i.style.top="".concat(u,"px"),i.style.fontSize="".concat(f,"px"),i.style.fontFamily=d.fontFamily,c.fontSize=f,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,e._fontInspectorEnabled&&(i.dataset.fontName=t.fontName),a!==0&&(c.angle=a*(180/Math.PI)),v=!1,t.str.length>1||e._enhanceTextSelection&&m.test(t.str))v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){var i,a,r,c,l,d,u,h,f,p,v,b,j,y,_,O,w=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);w!==x&&Math.max(w,x)/Math.min(w,x)>1.5&&(v=!0)}v&&(d.vertical?c.canvasWidth=t.height*e._viewport.scale:c.canvasWidth=t.width*e._viewport.scale),e._textDivProperties.set(i,c),e._textContentStream&&e._layoutText(i),e._enhanceTextSelection&&c.hasText&&(b=1,j=0,a!==0&&(b=Math.cos(a),j=Math.sin(a)),y=(d.vertical?t.height:t.width)*e._viewport.scale,_=f,a!==0?(O=[b,j,-j,b,l,u],h=o.Util.getAxialAlignedBoundingBox([0,0,y,_],O)):h=[l,u,l+y,u+_],e._bounds.push({left:h[0],top:h[1],right:h[2],bottom:h[3],div:i,size:[y,_],m:O}))}function f(e){if(e._canceled)return;var t,n=e._textDivs,s=e._capability,o=n.length;if(o>h){e._renderingDone=!0,s.resolve();return}if(!e._textContentStream)for(t=0;t<o;t++)e._layoutText(n[t]);e._renderingDone=!0,s.resolve()}function a(e,t,n){for(var o,s=0,i=0;i<n;i++)o=e[t++],o>0&&(s=s?Math.min(o,s):o);return s}function y(e){u=e._bounds,v=e._viewport,h=_(v.width,v.height,u);for(l=0;l<h.length;l++){if(p=u[l].div,d=e._textDivProperties.get(p),d.angle===0){d.paddingLeft=u[l].left-h[l].left,d.paddingTop=u[l].top-h[l].top,d.paddingRight=h[l].right-u[l].right,d.paddingBottom=h[l].bottom-u[l].bottom,e._textDivProperties.set(p,d);continue}for(var s,l,d,u,h,f,p,v,m=u[l],r=h[l],b=m.m,i=b[0],c=b[1],g=[[0,0],[0,m.size[1]],[m.size[0],0],m.size],t=new Float64Array(64),n=0,j=g.length;n<j;n++)s=o.Util.applyTransform(g[n],b),t[n+0]=i&&(r.left-s[0])/i,t[n+4]=c&&(r.top-s[1])/c,t[n+8]=i&&(r.right-s[0])/i,t[n+12]=c&&(r.bottom-s[1])/c,t[n+16]=c&&(r.left-s[0])/-c,t[n+20]=i&&(r.top-s[1])/i,t[n+24]=c&&(r.right-s[0])/-c,t[n+28]=i&&(r.bottom-s[1])/i,t[n+32]=i&&(r.left-s[0])/-i,t[n+36]=c&&(r.top-s[1])/-c,t[n+40]=i&&(r.right-s[0])/-i,t[n+44]=c&&(r.bottom-s[1])/-c,t[n+48]=c&&(r.left-s[0])/c,t[n+52]=i&&(r.top-s[1])/-i,t[n+56]=c&&(r.right-s[0])/c,t[n+60]=i&&(r.bottom-s[1])/-i;f=1+Math.min(Math.abs(i),Math.abs(c)),d.paddingLeft=a(t,32,16)/f,d.paddingTop=a(t,48,16)/f,d.paddingRight=a(t,0,16)/f,d.paddingBottom=a(t,16,16)/f,e._textDivProperties.set(p,d)}}function _(e,t,n){var s,i,a,r,l,u,h,m,f,o=n.map(function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}});d(e,o),s=new Array(n.length),i=c(o);try{for(i.s();!(f=i.n()).done;)r=f.value,h=r.index,s[h]={left:r.x1New,top:0,right:r.x2New,bottom:0}}catch(e){i.e(e)}finally{i.f()}n.map(function(t,n){var a=s[n],i=o[n];i.x1=t.top,i.y1=e-a.right,i.x2=t.bottom,i.y2=e-a.left,i.index=n,i.x1New=void 0,i.x2New=void 0}),d(t,o),a=c(o);try{for(a.s();!(m=a.n()).done;)l=m.value,u=l.index,s[u].top=l.x1New,s[u].bottom=l.x2New}catch(e){a.e(e)}finally{a.f()}return s}function d(e,t){t.sort(function(e,t){return e.x1-t.x1||e.index-t.index}),O={x1:-(1/0),y1:-(1/0),x2:0,y2:1/0,index:-1,x1New:0,x2New:0},s=[{start:-(1/0),end:1/0,boundary:O}],p=c(t);try{for(p.s();!(_=p.n()).done;){for(o=_.value,r=0;r<s.length&&s[r].end<=o.y1;)r++;for(l=s.length-1;l>=0&&s[l].start>=o.y2;)l--;var s,o,r,l,u,h,f,p,g,v,b,j,y,_,w,O,n=void 0,d=void 0,i=void 0,a=void 0,m=-(1/0);for(i=r;i<=l;i++)d=s[i],n=d.boundary,f=void 0,n.x2>o.x1?f=n.index>o.index?n.x1New:o.x1:n.x2New===void 0?f=(n.x2+o.x1)/2:f=n.x2New,f>m&&(m=f);o.x1New=m;for(i=r;i<=l;i++)d=s[i],n=d.boundary,n.x2New===void 0?n.x2>o.x1?n.index>o.index&&(n.x2New=n.x2):n.x2New=m:n.x2New>m&&(n.x2New=Math.max(m,n.x2));u=[],j=null;for(i=r;i<=l;i++)d=s[i],n=d.boundary,v=n.x2>o.x2?n:o,j===v?u.at(-1).end=d.end:(u.push({start:d.start,end:d.end,boundary:v}),j=v);s[r].start<o.y1&&(u[0].start=o.y1,u.unshift({start:s[r].start,end:o.y1,boundary:s[r].boundary})),o.y2<s[l].end&&(u.at(-1).end=o.y2,u.push({start:o.y2,end:s[l].end,boundary:s[l].boundary}));for(i=r;i<=l;i++){if(d=s[i],n=d.boundary,n.x2New!==void 0)continue;h=!1;for(a=r-1;!h&&a>=0&&s[a].start>=n.y1;a--)h=s[a].boundary===n;for(a=l+1;!h&&a<s.length&&s[a].end<=n.y2;a++)h=s[a].boundary===n;for(a=0;!h&&a<u.length;a++)h=u[a].boundary===n;h||(n.x2New=m)}Array.prototype.splice.apply(s,[r,l-r+1].concat(u))}}catch(e){p.e(e)}finally{p.f()}for(g=0,y=s;g<y.length;g++)w=y[g],b=w.boundary,b.x2New===void 0&&(b.x2New=Math.max(e,b.x2))}r=function(){function e(t){var s,n=this,u=t.textContent,r=t.textContentStream,a=t.container,c=t.viewport,l=t.textDivs,d=t.textContentItemsStr,i=t.enhanceTextSelection;j(this,e),i&&(0,b.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=u,this._textContentStream=r,this._container=a,this._document=a.ownerDocument,this._viewport=c,this._textDivs=l||[],this._textContentItemsStr=d||[],this._enhanceTextSelection=!!i,this._fontInspectorEnabled=!!((s=globalThis.FontInspector)!==null&&s!==void 0&&s.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(function(){n._enhanceTextSelection||(n._textDivProperties=null),n._layoutTextCtx&&(n._layoutTextCtx.canvas.width=0,n._layoutTextCtx.canvas.height=0,n._layoutTextCtx=null)}).catch(function(){})}return O(e,[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(function(){}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function(t,n){for(var o,s=0,i=t.length;s<i;s++){if(t[s].str===void 0){t[s].type==="beginMarkedContentProps"||t[s].type==="beginMarkedContent"?(o=this._container,this._container=document.createElement("span"),this._container.classList.add("markedContent"),t[s].id!==null&&this._container.setAttribute("id","".concat(t[s].id)),o.append(this._container)):t[s].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(t[s].str),v(this,t[s],n,this._layoutTextCtx)}}},{key:"_layoutText",value:function(t){if(n=this._textDivProperties.get(t),s="",n.canvasWidth!==0&&n.hasText){o=t.style.fontFamily,i=n.fontSize,(i!==this._layoutTextLastFontSize||o!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font="".concat(i*this._devicePixelRatio,"px ").concat(o),this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=o);var n,s,o,i,a,r,l=this._layoutTextCtx.measureText(t.textContent),c=l.width;c>0&&(a=this._devicePixelRatio*n.canvasWidth/c,this._enhanceTextSelection&&(n.scale=a),s="scaleX(".concat(a,")"))}n.angle!==0&&(s="rotate(".concat(n.angle,"deg) ").concat(s)),s.length>0&&(this._enhanceTextSelection&&(n.originalTransform=s),t.style.transform=s),n.hasText&&this._container.append(t),n.hasEOL&&(r=document.createElement("br"),r.setAttribute("role","presentation"),this._container.append(r))}},{key:"_render",value:function(){var c,l,d,t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=(0,o.createPromiseCapability)(),i=Object.create(null),a=this._document.createElement("canvas");if(a.height=a.width=s,this._layoutTextCtx=a.getContext("2d",{alpha:!1}),this._textContent)c=this._textContent.items,l=this._textContent.styles,this._processItems(c,l),n.resolve();else if(this._textContentStream)d=function e(){t._reader.read().then(function(s){var o=s.value,a=s.done;if(a){n.resolve();return}Object.assign(i,o.styles),t._processItems(o.items,i),e()},n.reject)},this._reader=this._textContentStream.getReader(),d();else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');n.promise.then(function(){i=null,r?t._renderTimer=setTimeout(function(){f(t),t._renderTimer=null},r):f(t)},this._capability.reject)}},{key:"expandTextDivs",value:function(){if(a=arguments.length>0&&arguments[0]!==void 0&&arguments[0],!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(y(this),this._bounds=null);for(var t,o,a,s=[],n=[],i=0,r=this._textDivs.length;i<r;i++){if(o=this._textDivs[i],t=this._textDivProperties.get(o),!t.hasText)continue;a?(s.length=0,n.length=0,t.originalTransform&&s.push(t.originalTransform),t.paddingTop>0?(n.push("".concat(t.paddingTop,"px")),s.push("translateY(".concat(-t.paddingTop,"px)"))):n.push(0),t.paddingRight>0?n.push("".concat(t.paddingRight/t.scale,"px")):n.push(0),t.paddingBottom>0?n.push("".concat(t.paddingBottom,"px")):n.push(0),t.paddingLeft>0?(n.push("".concat(t.paddingLeft/t.scale,"px")),s.push("translateX(".concat(-t.paddingLeft/t.scale,"px)"))):n.push(0),o.style.padding=n.join(" "),s.length&&(o.style.transform=s.join(" "))):(o.style.padding=null,o.style.transform=t.originalTransform)}}}]),e}(),t.TextLayerRenderTask=r;function x(e){var t=new r({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});return t._render(e.timeout),t}},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var o,a,r,u,p,v,b,j,y,_,w,O,x,C,E,A=n(129),s=n(1),M=n(3);function d(e){return F(e)||N(e)||g(e)||S()}function S(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function F(e){if(Array.isArray(e))return l(e)}function c(e,t){return D(e)||z(e,t)||g(e,t)||T()}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function D(e){if(Array.isArray(e))return e}function i(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=g(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function g(e,t){if(!e)return;if(typeof e=="string")return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}function l(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function k(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function m(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}u=m(function e(){h(this,e),(0,s.unreachable)("Not implemented: SVGGraphics")}),t.SVGGraphics=u,w=function(t){var o,r,n=[],a=[],s=i(t);try{for(s.s();!(r=s.n()).done;){if(o=r.value,o.fn==="save"){n.push({fnId:92,fn:"group",items:[]}),a.push(n),n=n.at(-1).items;continue}o.fn==="restore"?n=a.pop():n.push(o)}}catch(e){s.e(e)}finally{s.f()}return n},o=function(t){if(Number.isInteger(t))return t.toString();var n=t.toFixed(10),s=n.length-1;if(n[s]!=="0")return n;do s--;while(n[s]==="0")return n.substring(0,n[s]==="."?s:s+1)},r=function(t){if(t[4]===0&&t[5]===0){{if(t[1]===0&&t[2]===0)return t[0]===1&&t[3]===1?"":"scale(".concat(o(t[0])," ").concat(o(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){var n=Math.acos(t[0])*180/Math.PI;return"rotate(".concat(o(n),")")}}}else if(t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1)return"translate(".concat(o(t[4])," ").concat(o(t[5]),")");return"matrix(".concat(o(t[0])," ").concat(o(t[1])," ").concat(o(t[2])," ").concat(o(t[3])," ").concat(o(t[4])," ")+"".concat(o(t[5]),")")},a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},E="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/1999/xlink",C=["butt","round","square"],x=["miter","round","bevel"],p=function(t){if(l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],URL.createObjectURL&&typeof Blob!="undefined"&&!d)return URL.createObjectURL(new Blob([t],{type:l}));s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="data:".concat(l,";base64,");for(var s,o,i,a,c,l,d,u,h,m,f,n=0,r=t.length;n<r;n+=3)c=t[n]&255,o=t[n+1]&255,i=t[n+2]&255,u=c>>2,h=(c&3)<<4|o>>4,m=n+1<r?(o&15)<<2|i>>6:64,f=n+2<r?i&63:64,a+=s[u]+s[h]+s[m]+s[f];return a},O=function(){for(var e,i,n=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,r=new Int32Array(256),t=0;t<256;t++){e=t;for(i=0;i<8;i++)e&1?e=3988292384^e>>1&2147483647:e=e>>1&2147483647;r[t]=e}function l(e,t,n){for(var i,a,s=-1,o=t;o<n;o++)i=(s^e[o])&255,a=r[i],s=s>>>8^a;return s^-1}function a(e,t,n,s){var i,o=s,a=t.length;n[o]=a>>24&255,n[o+1]=a>>16&255,n[o+2]=a>>8&255,n[o+3]=a&255,o+=4,n[o]=e.charCodeAt(0)&255,n[o+1]=e.charCodeAt(1)&255,n[o+2]=e.charCodeAt(2)&255,n[o+3]=e.charCodeAt(3)&255,o+=4,n.set(t,o),o+=t.length,i=l(n,s+4,o),n[o]=i>>24&255,n[o+1]=i>>16&255,n[o+2]=i>>8&255,n[o+3]=i&255}function d(e,t,n){for(var s=1,o=0,i=t;i<n;++i)s=(s+(e[i]&255))%65521,o=(o+s)%65521;return o<<16|s}function u(e){if(!M.isNodeJS)return c(e);try{parseInt(process.versions.node)>=8?t=e:t=Buffer.from(e);var t,n=f().deflateSync(t,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(e){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return c(e)}function c(e){var i,a,s=e.length,o=65535,r=Math.ceil(s/o),n=new Uint8Array(2+s+r*5+4),t=0;for(n[t++]=120,n[t++]=156,i=0;s>o;)n[t++]=0,n[t++]=255,n[t++]=255,n[t++]=0,n[t++]=0,n.set(e.subarray(i,i+o),t),t+=o,i+=o,s-=o;return n[t++]=1,n[t++]=s&255,n[t++]=s>>8&255,n[t++]=~s&65535&255,n[t++]=(~s&65535)>>8&255,n.set(e.subarray(i),t),t+=e.length-i,a=d(e,0,e.length),n[t++]=a>>24&255,n[t++]=a>>16&255,n[t++]=a>>8&255,n[t++]=a&255,n}function h(e,t,i,r){switch(d=e.width,l=e.height,E=e.data,t){case s.ImageKind.GRAYSCALE_1BPP:y=0,b=1,c=d+7>>3;break;case s.ImageKind.RGB_24BPP:y=2,b=8,c=d*3;break;case s.ImageKind.RGBA_32BPP:y=6,b=8,c=d*4;break;default:throw new Error("invalid format")}for(var c,l,d,h,m,g,b,j,y,_,w,C,E,v=new Uint8Array((1+c)*l),f=0,O=0,x=0;x<l;++x)v[f++]=0,v.set(E.subarray(O,O+c),f),O+=c,f+=c;if(t===s.ImageKind.GRAYSCALE_1BPP&&r){f=0;for(_=0;_<l;_++){f++;for(w=0;w<c;w++)v[f++]^=255}}return g=new Uint8Array([d>>24&255,d>>16&255,d>>8&255,d&255,l>>24&255,l>>16&255,l>>8&255,l&255,b,y,0,0,0]),j=u(v),C=n.length+o*3+g.length+j.length,m=new Uint8Array(C),h=0,m.set(n,h),h+=n.length,a("IHDR",g,m,h),h+=o+g.length,a("IDATA",j,m,h),h+=o+j.length,a("IEND",new Uint8Array(0),m,h),p(m,"image/png",i)}return function(t,n,o){var i=t.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:t.kind;return h(t,i,n,o)}}(),_=function(){function e(){h(this,e),this.fontSizeScale=1,this.fontWeight=a.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return m(e,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(t,n){this.x=t,this.y=n}}]),e}(),y=0,j=0,v=0,t.SVGGraphics=u=function(){function e(t,n){var o,i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];h(this,e),(0,A.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new A.DOMSVGFactory,this.current=new _,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=n,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[];for(o in s.OPS)this._operatorIdMapping[s.OPS[o]]=o}return m(e,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t),this.current=t.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(t){this.save(),this.executeOpTree(t),this.restore()}},{key:"loadDependencies",value:function(t){o=this,r=t.fnArray,c=t.argsArray;for(var n,o,r,c,l,d,a=0,u=r.length;a<u;a++){if(r[a]!==s.OPS.dependency)continue;n=i(c[a]);try{d=function(){var t=l.value,n=t.startsWith("g_")?o.commonObjs:o.objs,s=new Promise(function(e){n.get(t,e)});o.current.dependencies.push(s)};for(n.s();!(l=n.n()).done;)d()}catch(e){n.e(e)}finally{n.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(t,n,o,i,a,r){var c=[t,n,o,i,a,r];this.transformMatrix=s.Util.transform(this.transformMatrix,c),this.tgrp=null}},{key:"getSVG",value:function(t,n){var i,o=this;return this.viewport=n,i=this._initialize(n),this.loadDependencies(t).then(function(){return o.transformMatrix=s.IDENTITY_MATRIX,o.executeOpTree(o.convertOpList(t)),i})}},{key:"convertOpList",value:function(t){r=this._operatorIdMapping,a=t.argsArray,o=t.fnArray,i=[];for(var s,o,i,a,r,n=0,c=o.length;n<c;n++)s=o[n],i.push({fnId:s,fn:r[s],args:a[n]});return w(i)}},{key:"executeOpTree",value:function(t){var n,o,r,c,l,a=i(t);try{for(a.s();!(r=a.n()).done;)switch(o=r.value,c=o.fn,l=o.fnId,n=o.args,l|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(n);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(n[0],n[1]);break;case s.OPS.setFont:this.setFont(n);break;case s.OPS.showText:this.showText(n[0]);break;case s.OPS.showSpacedText:this.showText(n[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(n[0],n[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(n[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(n[0]);break;case s.OPS.setHScale:this.setHScale(n[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(n[0],n[1],n[2],n[3],n[4],n[5]);break;case s.OPS.setTextRise:this.setTextRise(n[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(n[0]);break;case s.OPS.setLineWidth:this.setLineWidth(n[0]);break;case s.OPS.setLineJoin:this.setLineJoin(n[0]);break;case s.OPS.setLineCap:this.setLineCap(n[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(n[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(n[0],n[1],n[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(n[0],n[1],n[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(n);break;case s.OPS.setFillColorN:this.setFillColorN(n);break;case s.OPS.shadingFill:this.shadingFill(n[0]);break;case s.OPS.setDash:this.setDash(n[0],n[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(n[0]);break;case s.OPS.setFlatness:this.setFlatness(n[0]);break;case s.OPS.setGState:this.setGState(n[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(n[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(n[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(n[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(n[0],n[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(n[0],n[1],n[2],n[3],n[4],n[5]);break;case s.OPS.constructPath:this.constructPath(n[0],n[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,s.warn)("Unimplemented operator ".concat(c));break}}catch(e){a.e(e)}finally{a.f()}}},{key:"setWordSpacing",value:function(t){this.current.wordSpacing=t}},{key:"setCharSpacing",value:function(t){this.current.charSpacing=t}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(t,n,s,i,a,r){var c=this.current;c.textMatrix=c.lineMatrix=[t,n,s,i,a,r],c.textMatrixScale=Math.hypot(t,n),c.x=c.lineX=0,c.y=c.lineY=0,c.xcoords=[],c.ycoords=[],c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size","".concat(o(c.fontSize),"px")),c.tspan.setAttributeNS(null,"y",o(-c.y)),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtElement.append(c.tspan)}},{key:"beginText",value:function(){var t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=s.IDENTITY_MATRIX,t.lineMatrix=s.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}},{key:"moveText",value:function(t,n){var s=this.current;s.x=s.lineX+=t,s.y=s.lineY+=n,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size","".concat(o(s.fontSize),"px")),s.tspan.setAttributeNS(null,"y",o(-s.y))}},{key:"showText",value:function(t){if(n=this.current,y=n.font,_=n.fontSize,_===0)return;j=n.fontSizeScale,M=n.charSpacing,O=n.wordSpacing,f=n.fontDirection,A=n.textHScale*f,d=y.vertical,z=d?1:-1,S=y.defaultVMetrics,h=_*n.fontMatrix[0],l=0,v=i(t);try{for(v.s();!(N=v.n()).done;){if(c=N.value,c===null){l+=f*O;continue}if(typeof c=="number"){l+=z*c*_/1e3;continue}var n,c,l,d,h,m,f,p,g,v,b,j,y,_,w,O,A,S,M,F,z,D,N,x=(c.isSpace?O:0)+M,T=c.fontChar,C=void 0,k=void 0,u=c.width;d?(m=void 0,g=c.vmetric||S,m=c.vmetric?g[1]:u*.5,m=-m*h,F=g[2]*h,u=g?-g[0]:u,C=m/j,k=(l+F)/j):(C=l/j,k=0),(c.isInFont||y.missingFile)&&(n.xcoords.push(n.x+C),d&&n.ycoords.push(-n.y+k),n.tspan.textContent+=T),w=void 0,d?w=u*h-x*f:w=u*h+x*f,l+=w}}catch(e){v.e(e)}finally{v.f()}n.tspan.setAttributeNS(null,"x",n.xcoords.map(o).join(" ")),d?n.tspan.setAttributeNS(null,"y",n.ycoords.map(o).join(" ")):n.tspan.setAttributeNS(null,"y",o(-n.y)),d?n.y-=l:n.x+=l*A,n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size","".concat(o(n.fontSize),"px")),n.fontStyle!==a.fontStyle&&n.tspan.setAttributeNS(null,"font-style",n.fontStyle),n.fontWeight!==a.fontWeight&&n.tspan.setAttributeNS(null,"font-weight",n.fontWeight),p=n.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK,p===s.TextRenderingMode.FILL||p===s.TextRenderingMode.FILL_STROKE?(n.fillColor!==a.fillColor&&n.tspan.setAttributeNS(null,"fill",n.fillColor),n.fillAlpha<1&&n.tspan.setAttributeNS(null,"fill-opacity",n.fillAlpha)):n.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?n.tspan.setAttributeNS(null,"fill","transparent"):n.tspan.setAttributeNS(null,"fill","none"),(p===s.TextRenderingMode.STROKE||p===s.TextRenderingMode.FILL_STROKE)&&(D=1/(n.textMatrixScale||1),this._setStrokeAttributes(n.tspan,D)),b=n.textMatrix,n.textRise!==0&&(b=b.slice(),b[5]+=n.textRise),n.txtElement.setAttributeNS(null,"transform","".concat(r(b)," scale(").concat(o(A),", -1)")),n.txtElement.setAttributeNS(E,"xml:space","preserve"),n.txtElement.append(n.tspan),n.txtgrp.append(n.txtElement),this._ensureTransformGroup().append(n.txtElement)}},{key:"setLeadingMoveText",value:function(t,n){this.setLeading(-n),this.moveText(t,n)}},{key:"addFontStyle",value:function(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));var n=p(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(t.loadedName,'";')+" src: url(".concat(n,`); }
`)}},{key:"setFont",value:function(t){var r,c,n=this.current,i=this.commonObjs.get(t[0]),a=t[1];n.font=i,this.embedFonts&&!i.missingFile&&!this.embeddedFonts[i.loadedName]&&(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),n.fontMatrix=i.fontMatrix||s.FONT_IDENTITY_MATRIX,r="normal",i.black?r="900":i.bold&&(r="bold"),c=i.italic?"italic":"normal",a<0?(a=-a,n.fontDirection=-1):n.fontDirection=1,n.fontSize=a,n.fontFamily=i.loadedName,n.fontWeight=r,n.fontStyle=c,n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"y",o(-n.y)),n.xcoords=[],n.ycoords=[]}},{key:"endText",value:function(){var n,t=this.current;t.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&(n=t.txtElement)!==null&&n!==void 0&&n.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(t){t>0&&(this.current.lineWidth=t)}},{key:"setLineCap",value:function(t){this.current.lineCap=C[t]}},{key:"setLineJoin",value:function(t){this.current.lineJoin=x[t]}},{key:"setMiterLimit",value:function(t){this.current.miterLimit=t}},{key:"setStrokeAlpha",value:function(t){this.current.strokeAlpha=t}},{key:"setStrokeRGBColor",value:function(t,n,o){this.current.strokeColor=s.Util.makeHexColor(t,n,o)}},{key:"setFillAlpha",value:function(t){this.current.fillAlpha=t}},{key:"setFillRGBColor",value:function(t,n,o){this.current.fillColor=s.Util.makeHexColor(t,n,o),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(t){this.current.strokeColor=this._makeColorN_Pattern(t)}},{key:"setFillColorN",value:function(t){this.current.fillColor=this._makeColorN_Pattern(t)}},{key:"shadingFill",value:function(t){var d=this.viewport.width,l=this.viewport.height,i=s.Util.inverseTransform(this.transformMatrix),a=s.Util.applyTransform([0,0],i),r=s.Util.applyTransform([0,l],i),c=s.Util.applyTransform([d,0],i),o=s.Util.applyTransform([d,l],i),u=Math.min(a[0],r[0],c[0],o[0]),h=Math.min(a[1],r[1],c[1],o[1]),m=Math.max(a[0],r[0],c[0],o[0]),f=Math.max(a[1],r[1],c[1],o[1]),n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",u),n.setAttributeNS(null,"y",h),n.setAttributeNS(null,"width",m-u),n.setAttributeNS(null,"height",f-h),n.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&n.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(n)}},{key:"_makeColorN_Pattern",value:function(t){return t[0]==="TilingPattern"?this._makeTilingPattern(t):this._makeShadingPattern(t)}},{key:"_makeTilingPattern",value:function(t){var r,l,u,h,m,p,L=t[1],N=t[2],i=t[3]||s.IDENTITY_MATRIX,a=c(t[4],4),D=a[0],z=a[1],T=a[2],F=a[3],M=t[5],C=t[6],_=t[7],g="shading".concat(v++),y=s.Util.normalizeRect([].concat(d(s.Util.applyTransform([D,z],i)),d(s.Util.applyTransform([T,F],i)))),o=c(y,4),b=o[0],j=o[1],w=o[2],O=o[3],x=s.Util.singularValueDecompose2dScale(i),f=c(x,2),E=f[0],k=f[1],A=M*E,S=C*k,n=this.svgFactory.createElement("svg:pattern");return n.setAttributeNS(null,"id",g),n.setAttributeNS(null,"patternUnits","userSpaceOnUse"),n.setAttributeNS(null,"width",A),n.setAttributeNS(null,"height",S),n.setAttributeNS(null,"x","".concat(b)),n.setAttributeNS(null,"y","".concat(j)),h=this.svg,u=this.transformMatrix,m=this.current.fillColor,p=this.current.strokeColor,r=this.svgFactory.create(w-b,O-j),this.svg=r,this.transformMatrix=i,_===2&&(l=s.Util.makeHexColor.apply(s.Util,d(L)),this.current.fillColor=l,this.current.strokeColor=l),this.executeOpTree(this.convertOpList(N)),this.svg=h,this.transformMatrix=u,this.current.fillColor=m,this.current.strokeColor=p,n.append(r.childNodes[0]),this.defs.append(n),"url(#".concat(g,")")}},{key:"_makeShadingPattern",value:function(t){switch(typeof t=="string"&&(t=this.objs.get(t)),t[0]){case"RadialAxial":var n,o,a,r,c,l,d,u,m,f,p,h="shading".concat(v++),g=t[3];switch(t[1]){case"axial":c=t[4],l=t[5],n=this.svgFactory.createElement("svg:linearGradient"),n.setAttributeNS(null,"id",h),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"x1",c[0]),n.setAttributeNS(null,"y1",c[1]),n.setAttributeNS(null,"x2",l[0]),n.setAttributeNS(null,"y2",l[1]);break;case"radial":d=t[4],u=t[5],f=t[6],m=t[7],n=this.svgFactory.createElement("svg:radialGradient"),n.setAttributeNS(null,"id",h),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"cx",u[0]),n.setAttributeNS(null,"cy",u[1]),n.setAttributeNS(null,"r",m),n.setAttributeNS(null,"fx",d[0]),n.setAttributeNS(null,"fy",d[1]),n.setAttributeNS(null,"fr",f);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}o=i(g);try{for(o.s();!(p=o.n()).done;)r=p.value,a=this.svgFactory.createElement("svg:stop"),a.setAttributeNS(null,"offset",r[0]),a.setAttributeNS(null,"stop-color",r[1]),n.append(a)}catch(e){o.e(e)}finally{o.f()}return this.defs.append(n),"url(#".concat(h,")");case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}},{key:"setDash",value:function(t,n){this.current.dashArray=t,this.current.dashPhase=n}},{key:"constructPath",value:function(t,n){var h,m,f,p,g,v,d=this.current,r=d.x,c=d.y,l=[],a=0,u=i(t);try{for(u.s();!(v=u.n()).done;)switch(f=v.value,f|0){case s.OPS.rectangle:r=n[a++],c=n[a++],p=n[a++],g=n[a++],h=r+p,m=c+g,l.push("M",o(r),o(c),"L",o(h),o(c),"L",o(h),o(m),"L",o(r),o(m),"Z");break;case s.OPS.moveTo:r=n[a++],c=n[a++],l.push("M",o(r),o(c));break;case s.OPS.lineTo:r=n[a++],c=n[a++],l.push("L",o(r),o(c));break;case s.OPS.curveTo:r=n[a+4],c=n[a+5],l.push("C",o(n[a]),o(n[a+1]),o(n[a+2]),o(n[a+3]),o(r),o(c)),a+=6;break;case s.OPS.curveTo2:l.push("C",o(r),o(c),o(n[a]),o(n[a+1]),o(n[a+2]),o(n[a+3])),r=n[a+2],c=n[a+3],a+=4;break;case s.OPS.curveTo3:r=n[a+2],c=n[a+3],l.push("C",o(n[a]),o(n[a+1]),o(r),o(c),o(r),o(c)),a+=4;break;case s.OPS.closePath:l.push("Z");break}}catch(e){u.e(e)}finally{u.f()}l=l.join(" "),d.path&&t.length>0&&t[0]!==s.OPS.rectangle&&t[0]!==s.OPS.moveTo?l=d.path.getAttributeNS(null,"d")+l:(d.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(d.path)),d.path.setAttributeNS(null,"d",l),d.path.setAttributeNS(null,"fill","none"),d.element=d.path,d.setCurrentPoint(r,c)}},{key:"endPath",value:function(){var n,s,o,a,c,l,t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}if(a="clippath".concat(y++),n=this.svgFactory.createElement("svg:clipPath"),n.setAttributeNS(null,"id",a),n.setAttributeNS(null,"transform",r(this.transformMatrix)),o=t.element.cloneNode(!0),this.pendingClip==="evenodd"?o.setAttributeNS(null,"clip-rule","evenodd"):o.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.append(o),this.defs.append(n),t.activeClipUrl){t.clipGroup=null,s=i(this.extraStack);try{for(s.s();!(c=s.n()).done;)l=c.value,l.clipGroup=null}catch(e){s.e(e)}finally{s.f()}n.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl="url(#".concat(a,")"),this.tgrp=null}},{key:"clip",value:function(t){this.pendingClip=t}},{key:"closePath",value:function(){var n,t=this.current;t.path&&(n="".concat(t.path.getAttributeNS(null,"d"),"Z"),t.path.setAttributeNS(null,"d",n))}},{key:"setLeading",value:function(t){this.current.leading=-t}},{key:"setTextRise",value:function(t){this.current.textRise=t}},{key:"setTextRenderingMode",value:function(t){this.current.textRenderingMode=t}},{key:"setHScale",value:function(t){this.current.textHScale=t/100}},{key:"setRenderingIntent",value:function(){}},{key:"setFlatness",value:function(){}},{key:"setGState",value:function(t){o=i(t);try{for(o.s();!(a=o.n()).done;){var o,a,r=c(a.value,2),l=r[0],n=r[1];switch(l){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,s.warn)("Unimplemented graphic state operator ".concat(l));break}}}catch(e){o.e(e)}finally{o.f()}}},{key:"fill",value:function(){var t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=this.current,i=n.dashArray;s!==1&&i.length>0&&(i=i.map(function(e){return s*e})),t.setAttributeNS(null,"stroke",n.strokeColor),t.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",o(n.miterLimit)),t.setAttributeNS(null,"stroke-linecap",n.lineCap),t.setAttributeNS(null,"stroke-linejoin",n.lineJoin),t.setAttributeNS(null,"stroke-width",o(s*n.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",i.map(o).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",o(s*n.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}},{key:"paintImageXObject",value:function(t){var n=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);if(!n){(0,s.warn)("Dependent image with object ID ".concat(t," is not ready yet"));return}this.paintInlineImageXObject(n)}},{key:"paintInlineImageXObject",value:function(t,n){var s,r=t.width,a=t.height,c=O(t,this.forceDataSchema,!!n),i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width",o(r)),i.setAttributeNS(null,"height",o(a)),this.current.element=i,this.clip("nonzero"),s=this.svgFactory.createElement("svg:image"),s.setAttributeNS(b,"xlink:href",c),s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y",o(-a)),s.setAttributeNS(null,"width",o(r)+"px"),s.setAttributeNS(null,"height",o(a)+"px"),s.setAttributeNS(null,"transform","scale(".concat(o(1/r)," ").concat(o(-1/a),")")),n?n.append(s):this._ensureTransformGroup().append(s)}},{key:"paintImageMaskXObject",value:function(t){var n,i,s=this.current,a=t.width,r=t.height,c=s.fillColor;s.maskId="mask".concat(j++),i=this.svgFactory.createElement("svg:mask"),i.setAttributeNS(null,"id",s.maskId),n=this.svgFactory.createElement("svg:rect"),n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width",o(a)),n.setAttributeNS(null,"height",o(r)),n.setAttributeNS(null,"fill",c),n.setAttributeNS(null,"mask","url(#".concat(s.maskId,")")),this.defs.append(i),this._ensureTransformGroup().append(n),this.paintInlineImageXObject(t,i)}},{key:"paintFormXObjectBegin",value:function(t,n){if(Array.isArray(t)&&t.length===6&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),n){var i=n[2]-n[0],a=n[3]-n[1],s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x",n[0]),s.setAttributeNS(null,"y",n[1]),s.setAttributeNS(null,"width",o(i)),s.setAttributeNS(null,"height",o(a)),this.current.element=s,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(t){var n,s=this.svgFactory.create(t.width,t.height),o=this.svgFactory.createElement("svg:defs");return s.append(o),this.defs=o,n=this.svgFactory.createElement("svg:g"),n.setAttributeNS(null,"transform",r(t.transform)),s.append(n),this.svg=n,s}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",r(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}]),e}()},(e,t,n)=>{"use strict";function m(e){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var l,f,b,j,y,_,w,E,A,S,T,z,s=n(1),x=n(158);function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},O(e,t)}function d(e){var t=H();return function(){var s,i,o=u(e);return t?(i=u(this).constructor,s=Reflect.construct(o,arguments,i)):s=o.apply(this,arguments),N(this,s)}}function N(e,t){if(t&&(m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(e)}function r(){"use strict";r=function(){return n};var t,s,a,l,d,n={},O=Object.prototype,o=O.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},h=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{e({},"")}catch{e=function(t,n,s){return t[n]=s}}function x(e,n,s,o){var a=n&&n.prototype instanceof p?n:p,i=Object.create(a.prototype),r=new v(o||[]);return i._invoke=function(e,n,s){var o="suspendedStart";return function(i,a){if(o==="executing")throw new Error("Generator is already running");if(o==="completed"){if(i==="throw")throw a;return C()}for(s.method=i,s.arg=a;;){var r,c,l=s.delegate;if(l&&(c=w(l,s),c)){if(c===t)continue;return c}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(o==="suspendedStart")throw o="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);if(o="executing",r=b(e,n,s),r.type==="normal"){if(o=s.done?"completed":"suspendedYield",r.arg===t)continue;return{value:r.arg,done:s.done}}r.type==="throw"&&(o="completed",s.method="throw",s.arg=r.arg)}}}(e,s,r),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=x,t={};function p(){}function u(){}function i(){}l={},e(l,h,function(){return this}),d=Object.getPrototypeOf,a=d&&d(d(f([]))),a&&a!==O&&o.call(a,h)&&(l=a),s=i.prototype=p.prototype=Object.create(l);function _(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function c(e,t){function n(s,i,a,r){if(l=b(e[s],e,i),l.type!=="throw"){var l,d=l.arg,c=d.value;return c&&m(c)=="object"&&o.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,a,r)},function(e){n("throw",e,a,r)}):t.resolve(c).then(function(e){d.value=e,a(d)},function(e){return n("throw",e,a,r)})}r(l.arg)}var s;this._invoke=function(e,o){function i(){return new t(function(t,s){n(e,o,t,s)})}return s=s?s.then(i,i):i()}}function w(e,n){var s,o,i=e.iterator[n.method];if(i===void 0){if(n.delegate=null,n.method==="throw"){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),n.method==="throw"))return t;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return o=b(i,e.iterator,n.arg),o.type==="throw"?(n.method="throw",n.arg=o.arg,n.delegate=null,t):(s=o.arg,s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,t):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,t))}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function f(e){if(e){if(t=e[h],t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t,n=-1,s=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=i,e(s,"constructor",i),e(i,"constructor",u),u.displayName=e(i,y,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===u||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,e(t,y,"GeneratorFunction")),t.prototype=Object.create(s),t},n.awrap=function(e){return{__await:e}},_(c.prototype),e(c.prototype,k,function(){return this}),n.AsyncIterator=c,n.async=function(e,t,s,o,i){i===void 0&&(i=Promise);var a=new c(x(e,t,s,o),i);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(s),e(s,y,"Generator"),e(s,h,function(){return this}),e(s,"toString",function(){return"[object Generator]"}),n.keys=function(e){var n,t=[];for(n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},n.values=f,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var n in this)n.charAt(0)==="t"&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;i=this;function s(e,n){return l.type="throw",l.arg=t,i.next=e,n&&(i.method="next",i.arg=void 0),!!n}for(a=this.tryEntries.length-1;a>=0;--a){var i,a,r,c,n=this.tryEntries[a],l=n.completion;if(n.tryLoc==="root")return s("end");if(n.tryLoc<=this.prev)if(r=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc"),r&&c){{if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}else if(r){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}},abrupt:function(n,s){for(var i,a,r,c=this.tryEntries.length-1;c>=0;--c)if(a=this.tryEntries[c],a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){i=a;break}return i&&(n==="break"||n==="continue")&&i.tryLoc<=s&&s<=i.finallyLoc&&(i=null),r=i?i.completion:{},r.type=n,r.arg=s,i?(this.method="next",this.next=i.finallyLoc,t):this.complete(r)},complete:function(n,s){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&s&&(this.next=s),t},finish:function(n){for(var s,o=this.tryEntries.length-1;o>=0;--o)if(s=this.tryEntries[o],s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),j(s),t},catch:function(t){for(var n,o,i,s=this.tryEntries.length-1;s>=0;--s)if(n=this.tryEntries[s],n.tryLoc===t)return o=n.completion,o.type==="throw"&&(i=o.arg,j(n)),i;throw new Error("illegal catch attempt")},delegateYield:function(n,s,o){return this.delegate={iterator:f(n),resultName:s,nextLoc:o},this.method==="next"&&(this.arg=void 0),t}},n}function F(e,t,n,s,o,i,a){try{var c=e[i](a),r=c.value}catch(e){n(e);return}c.done?t(r):Promise.resolve(r).then(s,o)}function M(e){return function(){var t=this,n=arguments;return new Promise(function(s,o){var a=e.apply(t,n);function i(e){F(a,s,o,i,r,"next",e)}function r(e){F(a,s,o,i,r,"throw",e)}i(void 0)})}}function P(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=R(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function R(e,t){if(!e)return;if(typeof e=="string")return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}function k(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function i(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}l=o(),w=p(),_=g(),y=v(),j=/^file:\/\/\/[a-zA-Z]:\//;function D(e){var t=y.parse(e);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(e)?y.parse("file:///".concat(e)):(t.host||(t.protocol="file:"),t)}T=function(){function e(t){a(this,e),this.source=t,this.url=D(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return i(e,[{key:"_progressiveDataLength",get:function(){var t,n;return(t=(n=this._fullRequestReader)===null||n===void 0?void 0:n._loaded)!==null&&t!==void 0?t:0}},{key:"getFullReader",value:function(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new S(this):new E(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,n){if(n<=this._progressiveDataLength)return null;var s=this.isFsUrl?new z(this,t,n):new A(this,t,n);return this._rangeRequestReaders.push(s),s}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var s,o,n=P(this._rangeRequestReaders.slice(0));try{for(n.s();!(s=n.n()).done;)o=s.value,o.cancel(t)}catch(e){n.e(e)}finally{n.f()}}}]),e}(),t.PDFNodeStream=T,f=function(){function e(t){a(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;var n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)(),this._headersCapability=(0,s.createPromiseCapability)()}return i(e,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var e=M(r().mark(function e(){var t,n;return r().wrap(function(o){for(;1;)switch(o.prev=o.next){case 0:return o.next=2,this._readCapability.promise;case 2:if(!this._done){o.next=4;break}return o.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){o.next=6;break}throw this._storedError;case 6:if(t=this._readableStream.read(),t!==null){o.next=10;break}return this._readCapability=(0,s.createPromiseCapability)(),o.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),n=new Uint8Array(t).buffer,o.abrupt("return",{value:n,done:!1});case 14:case"end":return o.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var n=this;this._readableStream=t,t.on("readable",function(){n._readCapability.resolve()}),t.on("end",function(){t.destroy(),n._done=!0,n._readCapability.resolve()}),t.on("error",function(e){n._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),e}(),b=function(){function e(t){a(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)();var n=t.source;this._isStreamingSupported=!n.disableStream}return i(e,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var e=M(r().mark(function e(){var t,n;return r().wrap(function(o){for(;1;)switch(o.prev=o.next){case 0:return o.next=2,this._readCapability.promise;case 2:if(!this._done){o.next=4;break}return o.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){o.next=6;break}throw this._storedError;case 6:if(t=this._readableStream.read(),t!==null){o.next=10;break}return this._readCapability=(0,s.createPromiseCapability)(),o.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),n=new Uint8Array(t).buffer,o.abrupt("return",{value:n,done:!1});case 14:case"end":return o.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var n=this;this._readableStream=t,t.on("readable",function(){n._readCapability.resolve()}),t.on("end",function(){t.destroy(),n._done=!0,n._readCapability.resolve()}),t.on("error",function(e){n._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}]),e}();function h(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}E=function(e){c(t,e);var n=d(t);function t(e){a(this,t);var o=n.call(this,e),i=function(n){if(n.statusCode===404){i=new s.MissingPDFException('Missing PDF "'.concat(o._url,'".')),o._storedError=i,o._headersCapability.reject(i);return}o._headersCapability.resolve(),o._setReadableStream(n);var i,a=function(t){return o._readableStream.headers[t.toLowerCase()]},r=(0,x.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:e.isHttp,rangeChunkSize:o._rangeChunkSize,disableRange:o._disableRange}),c=r.allowRangeRequests,l=r.suggestedLength;o._isRangeSupported=c,o._contentLength=l||o._contentLength,o._filename=(0,x.extractFilenameFromHeader)(a)};return o._request=null,o._url.protocol==="http:"?o._request=w.request(h(o._url,e.httpHeaders),i):o._request=_.request(h(o._url,e.httpHeaders),i),o._request.on("error",function(e){o._storedError=e,o._headersCapability.reject(e)}),o._request.end(),o}return i(t)}(f),A=function(e){c(t,e);var n=d(t);function t(e,o,i){a(this,t),r=n.call(this,e),r._httpHeaders={};for(l in e.httpHeaders){var r,c,l,d=e.httpHeaders[l];if(typeof d=="undefined")continue;r._httpHeaders[l]=d}return r._httpHeaders.Range="bytes=".concat(o,"-").concat(i-1),c=function(t){if(t.statusCode===404){var n=new s.MissingPDFException('Missing PDF "'.concat(r._url,'".'));r._storedError=n;return}r._setReadableStream(t)},r._request=null,r._url.protocol==="http:"?r._request=w.request(h(r._url,r._httpHeaders),c):r._request=_.request(h(r._url,r._httpHeaders),c),r._request.on("error",function(e){r._storedError=e}),r._request.end(),r}return i(t)}(b),S=function(e){c(t,e);var n=d(t);function t(e){a(this,t);var o=n.call(this,e),i=decodeURIComponent(o._url.path);return j.test(o._url.href)&&(i=i.replace(/^\//,"")),l.lstat(i,function(e,t){if(e){e.code==="ENOENT"&&(e=new s.MissingPDFException('Missing PDF "'.concat(i,'".'))),o._storedError=e,o._headersCapability.reject(e);return}o._contentLength=t.size,o._setReadableStream(l.createReadStream(i)),o._headersCapability.resolve()}),o}return i(t)}(f),z=function(e){c(t,e);var n=d(t);function t(e,s,o){a(this,t);var i=n.call(this,e),r=decodeURIComponent(i._url.path);return j.test(i._url.href)&&(r=r.replace(/^\//,"")),i._setReadableStream(l.createReadStream(r,{start:s,end:o-1})),i}return i(t)}(b)},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=c,t.extractFilenameFromHeader=r,t.validateRangeRequestCapabilities=a,t.validateResponseStatus=l;var s=n(1),o=n(159),i=n(129);function a(e){var o,n=e.getResponseHeader,i=e.isHttp,a=e.rangeChunkSize,r=e.disableRange,t={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n("Content-Length"),10);return Number.isInteger(s)?(t.suggestedLength=s,s<=2*a?t:r||!i?t:n("Accept-Ranges")!=="bytes"?t:(o=n("Content-Encoding")||"identity",o!=="identity"?t:(t.allowRangeRequests=!0,t))):t}function r(e){var t,n=e("Content-Disposition");if(n){if(t=(0,o.getFilenameFromContentDispositionHeader)(n),t.includes("%"))try{t=decodeURIComponent(t)}catch{}if((0,i.isPdfFile)(t))return t}return null}function c(e,t){return e===404||e===0&&t.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+t+'".'):new s.UnexpectedResponseException("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)}function l(e){return e===200||e===206}},(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=d;var i=n(1);function s(e,t){return l(e)||c(e,t)||r(e,t)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(e,t){if(!e)return;if(typeof e=="string")return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}function o(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function c(e,t){var s,o,i,a,r,n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(a=n.next()).done);o=!0)if(s.push(a.value),t&&s.length===t)break}catch(e){i=!0,r=e}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw r}}return s}function l(e){if(Array.isArray(e))return e}function d(e){var n,a,h,l=!0,t=c("filename\\*","i").exec(e);if(t)return t=t[1],n=r(t),n=unescape(n),n=m(n),n=u(n),d(n);if(t=f(e),t)return h=u(t),d(h);if(t=c("filename","i").exec(e),t)return t=t[1],a=r(t),a=u(a),d(a);function c(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function o(e,t){if(e){if(!/^[\x00-\xFF]+$/.test(t))return t;try{var s=new TextDecoder(e,{fatal:!0}),n=(0,i.stringToBytes)(t);t=s.decode(n),l=!1}catch{}}return t}function d(e){return l&&/[\x80-\xff]/.test(e)&&(e=o("utf-8",e),l&&(e=o("iso-8859-1",e))),e}function f(e){for(o=[],u=c("filename\\*((?!0\\d)\\d+)(\\*?)","ig");(d=u.exec(e))!==null;){var n,o,l,d,u,p=d,a=s(p,4),i=a[1],v=a[2],f=a[3],i=parseInt(i,10);if(i in o){if(i===0)break;continue}o[i]=[v,f]}l=[];for(n=0;n<o.length;++n){if(!(n in o))break;var h=s(o[n],2),g=h[0],t=h[1],t=r(t);g&&(t=unescape(t),n===0&&(t=m(t))),l.push(t)}return l.join("")}function r(e){if(e.startsWith('"')){for(var s,t=e.slice(1).split('\\"'),n=0;n<t.length;++n)s=t[n].indexOf('"'),s!==-1&&(t[n]=t[n].slice(0,s),t.length=n+1),t[n]=t[n].replace(/\\(.)/g,"$1");e=t.join('"')}return e}function m(e){var n,s,i,t=e.indexOf("'");return t===-1?e:(n=e.slice(0,t),s=e.slice(t+1),i=s.replace(/^[^']*'/,""),o(n,i))}function u(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,s){if(n==="q"||n==="Q")return s=s.replace(/_/g," "),s=s.replace(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}),o(t,s);try{s=atob(s)}catch{}return o(t,s)})}return""}},(e,t,n)=>{"use strict";function u(e){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r,c,f,v,b,j,o=n(1),a=n(158);function i(){"use strict";i=function(){return n};var t,s,r,l,d,n={},O=Object.prototype,o=O.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},m=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{e({},"")}catch{e=function(t,n,s){return t[n]=s}}function x(e,n,s,o){var a=n&&n.prototype instanceof p?n:p,i=Object.create(a.prototype),r=new v(o||[]);return i._invoke=function(e,n,s){var o="suspendedStart";return function(i,a){if(o==="executing")throw new Error("Generator is already running");if(o==="completed"){if(i==="throw")throw a;return C()}for(s.method=i,s.arg=a;;){var r,c,l=s.delegate;if(l&&(c=w(l,s),c)){if(c===t)continue;return c}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(o==="suspendedStart")throw o="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);if(o="executing",r=b(e,n,s),r.type==="normal"){if(o=s.done?"completed":"suspendedYield",r.arg===t)continue;return{value:r.arg,done:s.done}}r.type==="throw"&&(o="completed",s.method="throw",s.arg=r.arg)}}}(e,s,r),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=x,t={};function p(){}function h(){}function a(){}l={},e(l,m,function(){return this}),d=Object.getPrototypeOf,r=d&&d(d(f([]))),r&&r!==O&&o.call(r,m)&&(l=r),s=a.prototype=p.prototype=Object.create(l);function _(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function c(e,t){function n(s,i,a,r){if(l=b(e[s],e,i),l.type!=="throw"){var l,d=l.arg,c=d.value;return c&&u(c)=="object"&&o.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,a,r)},function(e){n("throw",e,a,r)}):t.resolve(c).then(function(e){d.value=e,a(d)},function(e){return n("throw",e,a,r)})}r(l.arg)}var s;this._invoke=function(e,o){function i(){return new t(function(t,s){n(e,o,t,s)})}return s=s?s.then(i,i):i()}}function w(e,n){var s,o,i=e.iterator[n.method];if(i===void 0){if(n.delegate=null,n.method==="throw"){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),n.method==="throw"))return t;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return o=b(i,e.iterator,n.arg),o.type==="throw"?(n.method="throw",n.arg=o.arg,n.delegate=null,t):(s=o.arg,s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,t):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,t))}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function f(e){if(e){if(t=e[m],t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t,n=-1,s=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=a,e(s,"constructor",a),e(a,"constructor",h),h.displayName=e(a,y,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===h||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,e(t,y,"GeneratorFunction")),t.prototype=Object.create(s),t},n.awrap=function(e){return{__await:e}},_(c.prototype),e(c.prototype,k,function(){return this}),n.AsyncIterator=c,n.async=function(e,t,s,o,i){i===void 0&&(i=Promise);var a=new c(x(e,t,s,o),i);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(s),e(s,y,"Generator"),e(s,m,function(){return this}),e(s,"toString",function(){return"[object Generator]"}),n.keys=function(e){var n,t=[];for(n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},n.values=f,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var n in this)n.charAt(0)==="t"&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;i=this;function s(e,n){return l.type="throw",l.arg=t,i.next=e,n&&(i.method="next",i.arg=void 0),!!n}for(a=this.tryEntries.length-1;a>=0;--a){var i,a,r,c,n=this.tryEntries[a],l=n.completion;if(n.tryLoc==="root")return s("end");if(n.tryLoc<=this.prev)if(r=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc"),r&&c){{if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}else if(r){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}},abrupt:function(n,s){for(var i,a,r,c=this.tryEntries.length-1;c>=0;--c)if(a=this.tryEntries[c],a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){i=a;break}return i&&(n==="break"||n==="continue")&&i.tryLoc<=s&&s<=i.finallyLoc&&(i=null),r=i?i.completion:{},r.type=n,r.arg=s,i?(this.method="next",this.next=i.finallyLoc,t):this.complete(r)},complete:function(n,s){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&s&&(this.next=s),t},finish:function(n){for(var s,o=this.tryEntries.length-1;o>=0;--o)if(s=this.tryEntries[o],s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),j(s),t},catch:function(t){for(var n,o,i,s=this.tryEntries.length-1;s>=0;--s)if(n=this.tryEntries[s],n.tryLoc===t)return o=n.completion,o.type==="throw"&&(i=o.arg,j(n)),i;throw new Error("illegal catch attempt")},delegateYield:function(n,s,o){return this.delegate={iterator:f(n),resultName:s,nextLoc:o},this.method==="next"&&(this.arg=void 0),t}},n}function g(e,t,n,s,o,i,a){try{var c=e[i](a),r=c.value}catch(e){n(e);return}c.done?t(r):Promise.resolve(r).then(s,o)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(s,o){var a=e.apply(t,n);function i(e){g(a,s,o,i,r,"next",e)}function r(e){g(a,s,o,i,r,"throw",e)}i(void 0)})}}function s(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=_(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function _(e,t){if(!e)return;if(typeof e=="string")return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}function h(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function d(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}c=200,r=206;function y(e){var n,t=e.response;return typeof t!="string"?t:(n=(0,o.stringToBytes)(t),n.buffer)}v=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l(this,e),this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&n.httpHeaders||Object.create(null),this.withCredentials=n.withCredentials||!1,this.getXhr=n.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return d(e,[{key:"requestRange",value:function(t,n,s){var i,o={begin:t,end:n};for(i in s)o[i]=s[i];return this.request(o)}},{key:"requestFull",value:function(t){return this.request(t)}},{key:"request",value:function(t){var i,a,n=this.getXhr(),o=this.currXhrId++,s=this.pendingRequests[o]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(a in this.httpHeaders){if(i=this.httpHeaders[a],typeof i=="undefined")continue;n.setRequestHeader(a,i)}return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),s.expectedStatus=r):s.expectedStatus=c,n.responseType="arraybuffer",t.onError&&(n.onerror=function(){t.onError(n.status)}),n.onreadystatechange=this.onStateChange.bind(this,o),n.onprogress=this.onProgress.bind(this,o),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,n.send(null),o}},{key:"onProgress",value:function(t,n){var s,o=this.pendingRequests[t];if(!o)return;(s=o.onProgress)===null||s===void 0?void 0:s.call(o,n)}},{key:"onStateChange",value:function(t){var o,i,a,l,d,u,h,m,f,s=this.pendingRequests[t];if(!s)return;if(o=s.xhr,o.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),o.readyState!==4)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],o.status===0&&this.isHttp){(l=s.onError)===null||l===void 0?void 0:l.call(s,o.status);return}if(i=o.status||c,h=i===c&&s.expectedStatus===r,!h&&i!==s.expectedStatus){(d=s.onError)===null||d===void 0?void 0:d.call(s,o.status);return}a=y(o),i===r?(m=o.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(m),s.onDone({begin:parseInt(f[1],10),chunk:a})):a?s.onDone({begin:0,chunk:a}):(u=s.onError)===null||u===void 0?void 0:u.call(s,o.status)}},{key:"getRequestXhr",value:function(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function(t){return t in this.pendingRequests}},{key:"abortRequest",value:function(t){var n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}]),e}(),b=function(){function e(t){l(this,e),this._source=t,this._manager=new v(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return d(e,[{key:"_onRangeRequestReaderClosed",value:function(t){var n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(t,n){var s=new j(this._manager,t,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}},{key:"cancelAllRequests",value:function(t){(o=this._fullRequestReader)===null||o===void 0?void 0:o.cancel(t);var o,i,a,n=s(this._rangeRequestReaders.slice(0));try{for(n.s();!(i=n.n()).done;)a=i.value,a.cancel(t)}catch(e){n.e(e)}finally{n.f()}}}]),e}(),t.PDFNetworkStream=b,f=function(){function e(t,n){l(this,e),this._manager=t;var s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=t.requestFull(s),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}return d(e,[{key:"_onHeadersReceived",value:function(){var t=this._fullRequestId,o=this._manager.getRequestXhr(t),n=function(t){return o.getResponseHeader(t)},s=(0,a.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),i=s.allowRangeRequests,r=s.suggestedLength;i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(t){if(t)if(this._requests.length>0){var n,o,i,a=this._requests.shift();a.resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);if(this._done=!0,this._cachedChunks.length>0)return;n=s(this._requests);try{for(n.s();!(o=n.n()).done;)i=o.value,i.resolve({value:void 0,done:!0})}catch(e){n.e(e)}finally{n.f()}this._requests.length=0}},{key:"_onError",value:function(t){this._storedError=(0,a.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);var o,i,n=s(this._requests);try{for(n.s();!(o=n.n()).done;)i=o.value,i.reject(this._storedError)}catch(e){n.e(e)}finally{n.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(t){var n;(n=this.onProgress)===null||n===void 0?void 0:n.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:function(){var e=p(i().mark(function e(){var t,n;return i().wrap(function(s){for(;1;)switch(s.prev=s.next){case 0:if(!this._storedError){s.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){s.next=5;break}return n=this._cachedChunks.shift(),s.abrupt("return",{value:n,done:!1});case 5:if(!this._done){s.next=7;break}return s.abrupt("return",{value:void 0,done:!0});case 7:return t=(0,o.createPromiseCapability)(),this._requests.push(t),s.abrupt("return",t.promise);case 10:case"end":return s.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(t){this._done=!0,this._headersReceivedCapability.reject(t);var o,i,n=s(this._requests);try{for(n.s();!(o=n.n()).done;)i=o.value,i.resolve({value:void 0,done:!0})}catch(e){n.e(e)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),e}(),j=function(){function e(t,n,s){l(this,e),this._manager=t;var o={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(n,s,o),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}return d(e,[{key:"_close",value:function(){var t;(t=this.onClosed)===null||t===void 0?void 0:t.call(this,this)}},{key:"_onDone",value:function(t){var n,i,a,r,o=t.chunk;this._requests.length>0?(i=this._requests.shift(),i.resolve({value:o,done:!1})):this._queuedChunk=o,this._done=!0,n=s(this._requests);try{for(n.s();!(a=n.n()).done;)r=a.value,r.resolve({value:void 0,done:!0})}catch(e){n.e(e)}finally{n.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(t){this._storedError=(0,a.createResponseStatusError)(t,this._url);var o,i,n=s(this._requests);try{for(n.s();!(o=n.n()).done;)i=o.value,i.reject(this._storedError)}catch(e){n.e(e)}finally{n.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(t){if(!this.isStreamingSupported){var n;(n=this.onProgress)===null||n===void 0?void 0:n.call(this,{loaded:t.loaded})}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var e=p(i().mark(function e(){var t,n;return i().wrap(function(s){for(;1;)switch(s.prev=s.next){case 0:if(!this._storedError){s.next=2;break}throw this._storedError;case 2:if(this._queuedChunk===null){s.next=6;break}return n=this._queuedChunk,this._queuedChunk=null,s.abrupt("return",{value:n,done:!1});case 6:if(!this._done){s.next=8;break}return s.abrupt("return",{value:void 0,done:!0});case 8:return t=(0,o.createPromiseCapability)(),this._requests.push(t),s.abrupt("return",t.promise);case 11:case"end":return s.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(){this._done=!0;var o,i,n=s(this._requests);try{for(n.s();!(o=n.n()).done;)i=o.value,i.resolve({value:void 0,done:!0})}catch(e){n.e(e)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),e}()},(e,t,n)=>{"use strict";function a(e){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var d,u,v,i=n(1),s=n(158);function o(){"use strict";o=function(){return n};var t,s,c,d,u,n={},O=Object.prototype,i=O.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},m=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{e({},"")}catch{e=function(t,n,s){return t[n]=s}}function x(e,n,s,o){var a=n&&n.prototype instanceof p?n:p,i=Object.create(a.prototype),r=new v(o||[]);return i._invoke=function(e,n,s){var o="suspendedStart";return function(i,a){if(o==="executing")throw new Error("Generator is already running");if(o==="completed"){if(i==="throw")throw a;return C()}for(s.method=i,s.arg=a;;){var r,c,l=s.delegate;if(l&&(c=w(l,s),c)){if(c===t)continue;return c}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(o==="suspendedStart")throw o="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);if(o="executing",r=b(e,n,s),r.type==="normal"){if(o=s.done?"completed":"suspendedYield",r.arg===t)continue;return{value:r.arg,done:s.done}}r.type==="throw"&&(o="completed",s.method="throw",s.arg=r.arg)}}}(e,s,r),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=x,t={};function p(){}function h(){}function r(){}d={},e(d,m,function(){return this}),u=Object.getPrototypeOf,c=u&&u(u(f([]))),c&&c!==O&&i.call(c,m)&&(d=c),s=r.prototype=p.prototype=Object.create(d);function _(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function l(e,t){function n(s,o,r,c){if(d=b(e[s],e,o),d.type!=="throw"){var d,u=d.arg,l=u.value;return l&&a(l)=="object"&&i.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,r,c)},function(e){n("throw",e,r,c)}):t.resolve(l).then(function(e){u.value=e,r(u)},function(e){return n("throw",e,r,c)})}c(d.arg)}var s;this._invoke=function(e,o){function i(){return new t(function(t,s){n(e,o,t,s)})}return s=s?s.then(i,i):i()}}function w(e,n){var s,o,i=e.iterator[n.method];if(i===void 0){if(n.delegate=null,n.method==="throw"){if(e.iterator.return&&(n.method="return",n.arg=void 0,w(e,n),n.method==="throw"))return t;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return t}return o=b(i,e.iterator,n.arg),o.type==="throw"?(n.method="throw",n.arg=o.arg,n.delegate=null,t):(s=o.arg,s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,t):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,t))}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function f(e){if(e){if(t=e[m],t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t,n=-1,s=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=r,e(s,"constructor",r),e(r,"constructor",h),h.displayName=e(r,y,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t=typeof e=="function"&&e.constructor;return!!t&&(t===h||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,r):(t.__proto__=r,e(t,y,"GeneratorFunction")),t.prototype=Object.create(s),t},n.awrap=function(e){return{__await:e}},_(l.prototype),e(l.prototype,k,function(){return this}),n.AsyncIterator=l,n.async=function(e,t,s,o,i){i===void 0&&(i=Promise);var a=new l(x(e,t,s,o),i);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(s),e(s,y,"Generator"),e(s,m,function(){return this}),e(s,"toString",function(){return"[object Generator]"}),n.keys=function(e){var n,t=[];for(n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},n.values=f,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var n in this)n.charAt(0)==="t"&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;o=this;function s(e,n){return l.type="throw",l.arg=t,o.next=e,n&&(o.method="next",o.arg=void 0),!!n}for(a=this.tryEntries.length-1;a>=0;--a){var o,a,r,c,n=this.tryEntries[a],l=n.completion;if(n.tryLoc==="root")return s("end");if(n.tryLoc<=this.prev)if(r=i.call(n,"catchLoc"),c=i.call(n,"finallyLoc"),r&&c){{if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}else if(r){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}},abrupt:function(n,s){for(var o,a,r,c=this.tryEntries.length-1;c>=0;--c)if(a=this.tryEntries[c],a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){o=a;break}return o&&(n==="break"||n==="continue")&&o.tryLoc<=s&&s<=o.finallyLoc&&(o=null),r=o?o.completion:{},r.type=n,r.arg=s,o?(this.method="next",this.next=o.finallyLoc,t):this.complete(r)},complete:function(n,s){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&s&&(this.next=s),t},finish:function(n){for(var s,o=this.tryEntries.length-1;o>=0;--o)if(s=this.tryEntries[o],s.finallyLoc===n)return this.complete(s.completion,s.afterLoc),j(s),t},catch:function(t){for(var n,o,i,s=this.tryEntries.length-1;s>=0;--s)if(n=this.tryEntries[s],n.tryLoc===t)return o=n.completion,o.type==="throw"&&(i=o.arg,j(n)),i;throw new Error("illegal catch attempt")},delegateYield:function(n,s,o){return this.delegate={iterator:f(n),resultName:s,nextLoc:o},this.method==="next"&&(this.arg=void 0),t}},n}function f(e,t,n,s,o,i,a){try{var c=e[i](a),r=c.value}catch(e){n(e);return}c.done?t(r):Promise.resolve(r).then(s,o)}function h(e){return function(){var t=this,n=arguments;return new Promise(function(s,o){var a=e.apply(t,n);function i(e){f(a,s,o,i,r,"next",e)}function r(e){f(a,s,o,i,r,"throw",e)}i(void 0)})}}function j(e,t){if(n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"],!n){if(Array.isArray(e)||(n=b(e))||t&&e&&typeof e.length=="number")return n&&(e=n),s=0,o=function(){},{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(t){throw t},f:o};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,s,o,r,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(a)throw r}}}}function b(e,t){if(!e)return;if(typeof e=="string")return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}function l(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function r(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return{method:"GET",headers:e,signal:n?.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function g(e){var t,s,n=new Headers;for(s in e){if(t=e[s],typeof t=="undefined")continue;n.append(s,t)}return n}d=function(){function e(t){c(this,e),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return r(e,[{key:"_progressiveDataLength",get:function(){var t,n;return(t=(n=this._fullRequestReader)===null||n===void 0?void 0:n._loaded)!==null&&t!==void 0?t:0}},{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,n){if(n<=this._progressiveDataLength)return null;var s=new v(this,t,n);return this._rangeRequestReaders.push(s),s}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var s,o,n=j(this._rangeRequestReaders.slice(0));try{for(n.s();!(s=n.n()).done;)o=s.value,o.cancel(t)}catch(e){n.e(e)}finally{n.f()}}}]),e}(),t.PDFFetchStream=d,u=function(){function e(t){var o,a,n=this;c(this,e),this._stream=t,this._reader=null,this._loaded=0,this._filename=null,o=t.source,this._withCredentials=o.withCredentials||!1,this._contentLength=o.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._headers=g(this._stream.httpHeaders),a=o.url,fetch(a,p(this._headers,this._withCredentials,this._abortController)).then(function(e){if(!(0,s.validateResponseStatus)(e.status))throw(0,s.createResponseStatusError)(e.status,a);n._reader=e.body.getReader(),n._headersCapability.resolve();var t=function(n){return e.headers.get(n)},o=(0,s.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:n._stream.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),r=o.allowRangeRequests,c=o.suggestedLength;n._isRangeSupported=r,n._contentLength=c||n._contentLength,n._filename=(0,s.extractFilenameFromHeader)(t),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}return r(e,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var e=h(o().mark(function e(){var t,n,s,i;return o().wrap(function(o){for(;1;)switch(o.prev=o.next){case 0:return o.next=2,this._headersCapability.promise;case 2:return o.next=4,this._reader.read();case 4:if(n=o.sent,t=n.value,s=n.done,!s){o.next=9;break}return o.abrupt("return",{value:t,done:s});case 9:return this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),i=new Uint8Array(t).buffer,o.abrupt("return",{value:i,done:!1});case 13:case"end":return o.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}]),e}(),v=function(){function e(t,n,o){var a,r,l=this;c(this,e),this._stream=t,this._reader=null,this._loaded=0,a=t.source,this._withCredentials=a.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!a.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=g(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(n,"-").concat(o-1)),r=a.url,fetch(r,p(this._headers,this._withCredentials,this._abortController)).then(function(e){if(!(0,s.validateResponseStatus)(e.status))throw(0,s.createResponseStatusError)(e.status,r);l._readCapability.resolve(),l._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}return r(e,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var e=h(o().mark(function e(){var t,n,s,i;return o().wrap(function(o){for(;1;)switch(o.prev=o.next){case 0:return o.next=2,this._readCapability.promise;case 2:return o.next=4,this._reader.read();case 4:if(n=o.sent,t=n.value,s=n.done,!s){o.next=9;break}return o.abrupt("return",{value:t,done:s});case 9:return this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),i=new Uint8Array(t).buffer,o.abrupt("return",{value:i,done:!1});case 13:case"end":return o.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}]),e}()}],n={};function e(t){var o,i=n[t];return i!==void 0?i.exports:(o=n[t]={exports:{}},s[t](o,o.exports,e),o.exports)}return t={},(()=>{"use strict";if(n=t,Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AnnotationEditorLayer",{enumerable:!0,get:function(){return h.AnnotationEditorLayer}}),Object.defineProperty(n,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(n,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(n,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return r.AnnotationEditorUIManager}}),Object.defineProperty(n,"AnnotationLayer",{enumerable:!0,get:function(){return c.AnnotationLayer}}),Object.defineProperty(n,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(n,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(n,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(n,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(n,"LoopbackPort",{enumerable:!0,get:function(){return i.LoopbackPort}}),Object.defineProperty(n,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(n,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(n,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(n,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(n,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(n,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(n,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(n,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(n,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(n,"SVGGraphics",{enumerable:!0,get:function(){return g.SVGGraphics}}),Object.defineProperty(n,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return s.UNSUPPORTED_FEATURES}}),Object.defineProperty(n,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(n,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(n,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(n,"XfaLayer",{enumerable:!0,get:function(){return m.XfaLayer}}),Object.defineProperty(n,"binarySearchFirstItem",{enumerable:!0,get:function(){return o.binarySearchFirstItem}}),Object.defineProperty(n,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(n,"createPromiseCapability",{enumerable:!0,get:function(){return s.createPromiseCapability}}),Object.defineProperty(n,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(n,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(n,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(n,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(n,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(n,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(n,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(n,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(n,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return i.version}}),s=e(1),o=e(129),i=e(131),h=e(147),r=e(134),c=e(152),l=e(140),d=e(3),u=e(155),g=e(156),m=e(154),_="2.15.349",y="b8aa9c622",d.isNodeJS){var n,s,o,i,a,r,c,l,d,u,h,m,f,p,g,v,y,_,j=e(157),b=j.PDFNodeStream;(0,i.setPDFNetworkStreamFactory)(function(e){return new b(e)})}else a=e(160),p=a.PDFNetworkStream,f=e(161),v=f.PDFFetchStream,(0,i.setPDFNetworkStreamFactory)(function(e){return(0,o.isValidFetchUrl)(e.url)?new v(e):new p(e)})})(),t})())}}),c=h(b()),y="https://phelipetls.github.io/js/vendor/pdf.worker.min.js";c.GlobalWorkerOptions.workerSrc=y,n=document.querySelector("[data-resume-container]"),s=n?.dataset.resumeUrl,t=document.querySelector("[data-resume-canvas]"),l=document.querySelector("[data-resume-loading]"),(()=>{if(!s||!t)return;c.getDocument(s).promise.then(function(e){e.getPage(1).then(function(e){const a=n.clientWidth/e.getViewport({scale:1}).width,s=e.getViewport({scale:a}),o=window.devicePixelRatio||1,i=t.getContext("2d");if(!i)return;t.width=Math.floor(s.width*o),t.height=Math.floor(s.height*o),t.style.width=Math.floor(s.width)+"px",t.style.height=Math.floor(s.height)+"px";const r=[o,0,0,o,0,0],c=e.render({canvasContext:i,transform:r,viewport:s});return c.promise})}).catch(function(){n.classList.add("hidden")}).then(function(){t.classList.remove("hidden"),l?.classList.add("hidden")})})()})()