<!DOCTYPE html><html class="h-full min-h-0 text-base sm:text-lg selection:bg-primary selection:text-on-primary scroll-smooth scroll-pt-nav-height sm:scroll-pt-0" lang="pt-BR" data-notransition> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="deploy-date" content="2025-10-15"><meta name="author" content="Phelipe Teles"><meta name="color-scheme" content="dark light"><title>Homicídios em Baltimore: visualizações com ggplot2 e gganimate - Phelipe Teles | Phelipe Teles</title><link rel="canonical" href="https://phelipetls.github.io/pt/posts/visualizacao-dados-homicidios-baltimore/"><meta name="description" content="Neste post pretendo continuar o que foi iniciado no último, onde transformamos
dados contidos em texto em um data.frame, um formato muito mais amigável para a
exploração e visualização de dados no R."><meta name="robots" content="index, follow"><meta property="og:title" content="Homicídios em Baltimore: visualizações com ggplot2 e gganimate"><meta property="og:type" content="article"><meta property="og:image" content="https://phelipetls.github.io/pt/posts/visualizacao-dados-homicidios-baltimore/image.png"><meta property="og:url" content="https://phelipetls.github.io/pt/posts/visualizacao-dados-homicidios-baltimore/"><meta property="og:image:url" content="https://phelipetls.github.io/pt/posts/visualizacao-dados-homicidios-baltimore/image.png"><meta property="og:image:height"><meta property="og:image:alt" content="Blog Post Homicídios em Baltimore: visualizações com ggplot2 e gganimate Preview Image"><meta property="article:published_time" content="2019-04-07T00:00:00Z"><meta property="article:author" content="Phelipe Teles"><meta property="article:tag" content="r"><meta name="twitter:card" content="summary_large_image"><meta content="https://phelipetls.github.io/pt/posts/visualizacao-dados-homicidios-baltimore/image.png" name="twitter:image"> <meta name="publish-date" content="2019-04-07"> <meta name="keywords" content="r"><meta name="description" content="Neste post pretendo continuar o que foi iniciado no último, onde transformamos
dados contidos em texto em um data.frame, um formato muito mais amigável para a
exploração e visualização de dados no R."> <style id="sandpack">--sxs{--sxs:0 light sp-482805736}@media{.light{--sp-space-1:4px;--sp-space-2:8px;--sp-space-3:12px;--sp-space-4:16px;--sp-space-5:20px;--sp-space-6:24px;--sp-space-7:28px;--sp-space-8:32px;--sp-space-9:36px;--sp-space-10:40px;--sp-space-11:44px;--sp-border-radius:4px;--sp-layout-height:300px;--sp-layout-headerHeight:40px;--sp-transitions-default:150ms ease;--sp-zIndices-base:1;--sp-zIndices-overlay:2;--sp-zIndices-top:3;--sp-colors-surface1:#ffffff;--sp-colors-surface2:#EFEFEF;--sp-colors-surface3:#F3F3F3;--sp-colors-disabled:#C5C5C5;--sp-colors-base:#323232;--sp-colors-clickable:#808080;--sp-colors-hover:#4D4D4D;--sp-colors-accent:#3973E0;--sp-colors-error:#EA3323;--sp-colors-errorSurface:#FCF1F0;--sp-colors-warning:#6A4516;--sp-colors-warningSurface:#FEF2C0;--sp-font-body:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--sp-font-mono:"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace;--sp-font-size:13px;--sp-font-lineHeight:20px;--sp-syntax-color-plain:#151515;--sp-syntax-color-comment:#999;--sp-syntax-fontStyle-comment:italic;--sp-syntax-color-keyword:#7C5AE3;--sp-syntax-color-tag:#0971F1;--sp-syntax-color-punctuation:#3B3B3B;--sp-syntax-color-definition:#85A600;--sp-syntax-color-property:#3B3B3B;--sp-syntax-color-static:#3B3B3B;--sp-syntax-color-string:#2E6BD0}.sp-482805736{--sp-space-1:4px;--sp-space-2:8px;--sp-space-3:12px;--sp-space-4:16px;--sp-space-5:20px;--sp-space-6:24px;--sp-space-7:28px;--sp-space-8:32px;--sp-space-9:36px;--sp-space-10:40px;--sp-space-11:44px;--sp-border-radius:4px;--sp-layout-height:300px;--sp-layout-headerHeight:40px;--sp-transitions-default:150ms ease;--sp-zIndices-base:1;--sp-zIndices-overlay:2;--sp-zIndices-top:3;--sp-colors-surface1:#282c34;--sp-colors-surface2:#21252b;--sp-colors-surface3:#2c313c;--sp-colors-disabled:#4d4d4d;--sp-colors-base:#a8b1c2;--sp-colors-clickable:#a8b1c2;--sp-colors-hover:#e8effc;--sp-colors-accent:#c678dd;--sp-colors-error:#e06c75;--sp-colors-errorSurface:#ffeceb;--sp-colors-warning:#E7C400;--sp-colors-warningSurface:#3A3000;--sp-font-body:"Fira Sans", sans-serif;--sp-font-mono:Consolas, Menlo, Monaco, "Fira Code", monospace;--sp-font-size:1rem;--sp-font-lineHeight:1.5;--sp-syntax-color-plain:#a8b1c2;--sp-syntax-color-comment:#757575;--sp-syntax-fontStyle-comment:italic;--sp-syntax-color-keyword:#c678dd;--sp-syntax-color-tag:#e06c75;--sp-syntax-color-punctuation:#a8b1c2;--sp-syntax-color-definition:#62aeef;--sp-syntax-color-property:#d19a66;--sp-syntax-color-static:#a8b1c2;--sp-syntax-color-string:#98c379}}--sxs{--sxs:1 sp-k-eyOShd sp-k-iOHdLQ}@media{@keyframes sp-k-eyOShd{0%{opacity:0}100%{opacity:1}}@keyframes sp-k-iOHdLQ{0%{transform:rotateX(-25.5deg) rotateY(45deg)}100%{transform:rotateX(-25.5deg) rotateY(405deg)}}}--sxs{--sxs:2 sp-c-gMfcns sp-c-bxeRRt sp-c-hfoyCM sp-c-fWymNx sp-c-euXojQ sp-c-bpmgvy sp-c-PJLV sp-c-fVPbOs sp-c-gtcpyq sp-c-jOWzsE sp-c-jkvvao sp-c-juMdfR sp-c-fgviib sp-c-kwibBT sp-c-ivYAPe sp-c-lgESqD sp-c-cUFVvP sp-c-jzEuAZ}@media{.sp-c-gMfcns svg{margin:auto}.sp-c-bxeRRt{-webkit-appearance:none;appearance:none;outline:none;display:flex;align-items:center;font-size:inherit;font-family:inherit;background-color:transparent;transition:color var(--sp-transitions-default), background var(--sp-transitions-default);cursor:pointer;color:var(--sp-colors-clickable);border:0;text-decoration:none}.sp-c-bxeRRt:disabled{color:var(--sp-colors-disabled)}.sp-c-bxeRRt:hover:not(:disabled,[data-active='true']){color:var(--sp-colors-hover)}.sp-c-bxeRRt[data-active="true"]{color:var(--sp-colors-accent)}.sp-c-bxeRRt svg{min-width:var(--sp-space-4);width:var(--sp-space-4);height:var(--sp-space-4)}.sp-c-bxeRRt.sp-c-gMfcns{padding:var(--sp-space-1);height:var(--sp-space-7);display:flex}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:not(:has(span)){width:var(--sp-space-7)}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:has(svg + span){padding-right:var(--sp-space-3);padding-left:var(--sp-space-2);gap:var(--sp-space-1)}.sp-c-hfoyCM{padding:0 var(--sp-space-1) 0 var(--sp-space-1);border-radius:var(--sp-border-radius);margin-left:var(--sp-space-1);width:var(--sp-space-5);visibility:hidden}.sp-c-hfoyCM svg{width:var(--sp-space-3);height:var(--sp-space-3);display:block;position:relative;top:1px}.sp-c-fWymNx{margin:0;display:block;font-family:var(--sp-font-mono);font-size:var(--sp-font-size);color:var(--sp-syntax-color-plain);line-height:var(--sp-font-lineHeight)}.sp-c-euXojQ{display:flex;flex-direction:column;width:100%;position:relative;background-color:var(--sp-colors-surface1);gap:1px}.sp-c-euXojQ:has(.sp-stack){background-color:var(--sp-colors-surface2)}.sp-c-bpmgvy{transform:translate(-4px, 9px) scale(0.13, 0.13)}.sp-c-bpmgvy *{position:absolute;width:96px;height:96px}.sp-c-fVPbOs{all:initial;font-size:var(--sp-font-size);font-family:var(--sp-font-body);display:block;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-tap-highlight-color:transparent;-webkit-font-smoothing:subpixel-antialiased}@media screen and (min-resolution: 2dppx){.sp-c-fVPbOs{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}.sp-c-fVPbOs *{box-sizing:border-box}.sp-c-fVPbOs .sp-wrapper:focus{outline:0}.sp-c-gtcpyq{flex:1;position:relative;overflow:auto;background:var(--sp-colors-surface1)}.sp-c-gtcpyq .cm-scroller{padding:var(--sp-space-4) 0}.sp-c-gtcpyq .sp-c-fWymNx{padding:var(--sp-space-4) 0}@media screen and (max-width: 768px){@supports (-webkit-overflow-scrolling: touch){.sp-c-gtcpyq .cm-content{font-size:16px}}}.sp-c-jOWzsE{margin:0;outline:none;height:100%}.sp-c-jkvvao .sp-syntax-string{color:var(--sp-syntax-color-string);font-style:var(--sp-syntax-fontStyle-string)}.sp-c-jkvvao .sp-syntax-plain{color:var(--sp-syntax-color-plain);font-style:var(--sp-syntax-fontStyle-plain)}.sp-c-jkvvao .sp-syntax-comment{color:var(--sp-syntax-color-comment);font-style:var(--sp-syntax-fontStyle-comment)}.sp-c-jkvvao .sp-syntax-keyword{color:var(--sp-syntax-color-keyword);font-style:var(--sp-syntax-fontStyle-keyword)}.sp-c-jkvvao .sp-syntax-definition{color:var(--sp-syntax-color-definition);font-style:var(--sp-syntax-fontStyle-definition)}.sp-c-jkvvao .sp-syntax-punctuation{color:var(--sp-syntax-color-punctuation);font-style:var(--sp-syntax-fontStyle-punctuation)}.sp-c-jkvvao .sp-syntax-property{color:var(--sp-syntax-color-property);font-style:var(--sp-syntax-fontStyle-property)}.sp-c-jkvvao .sp-syntax-tag{color:var(--sp-syntax-color-tag);font-style:var(--sp-syntax-fontStyle-tag)}.sp-c-jkvvao .sp-syntax-static{color:var(--sp-syntax-color-static);font-style:var(--sp-syntax-fontStyle-static)}.sp-c-juMdfR{flex:1;display:flex;flex-direction:column;background:white;overflow:auto;position:relative}.sp-c-juMdfR .sp-bridge-frame{border:0;position:absolute;left:var(--sp-space-2);bottom:var(--sp-space-2);z-index:var(--sp-zIndices-top);height:12px;width:30%;mix-blend-mode:multiply;pointer-events:none}.sp-c-fgviib{border:0;outline:0;width:100%;height:100%;min-height:160px;max-height:2000px;flex:1}.sp-c-kwibBT{display:flex;position:absolute;bottom:var(--sp-space-2);right:var(--sp-space-2);z-index:var(--sp-zIndices-overlay);gap:var(--sp-space-2)}.sp-c-ivYAPe{padding:0}.sp-c-lgESqD{min-width:var(--sp-space-6);justify-content:center}.sp-c-cUFVvP{display:flex;align-items:center;height:var(--sp-layout-headerHeight);border-bottom:1px solid var(--sp-colors-surface2);padding:var(--sp-space-3) var(--sp-space-2);background:var(--sp-colors-surface1)}.sp-c-jzEuAZ{background-color:var(--sp-colors-surface2);color:var(--sp-colors-clickable);padding:var(--sp-space-1) var(--sp-space-3);border-radius:99999px;border:1px solid var(--sp-colors-surface2);height:24px;line-height:24px;font-size:inherit;outline:none;flex:1;margin-left:var(--sp-space-4);width:0;transition:background var(--sp-transitions-default)}.sp-c-jzEuAZ:hover{background-color:var(--sp-colors-surface3)}.sp-c-jzEuAZ:focus{background-color:var(--sp-colors-surface1);border:1px solid var(--sp-colors-accent);color:var(--sp-colors-base)}}--sxs{--sxs:3 sp-c-PJLV-kCOVwI-status-pass sp-c-PJLV-kEzYsr-status-fail sp-c-PJLV-gHAhSA-status-skip sp-c-PJLV-jgnHyR-status-title sp-c-PJLV-iCgxLS-status-run sp-c-PJLV-bnDZSy-status-pass sp-c-PJLV-eYuGwt-status-fail sp-c-fVPbOs-gMQIch-variant-light sp-c-fVPbOs-LrWkf-variant-dark}@media{.sp-c-PJLV-kCOVwI-status-pass{color:var(--test-pass)}.sp-c-PJLV-kEzYsr-status-fail{color:var(--test-fail)}.sp-c-PJLV-gHAhSA-status-skip{color:var(--test-skip)}.sp-c-PJLV-jgnHyR-status-title{color:var(--test-title)}.sp-c-PJLV-iCgxLS-status-run{background:var(--test-run);color:var(--sp-colors-surface1)}.sp-c-PJLV-bnDZSy-status-pass{background:var(--test-pass);color:var(--sp-colors-surface1)}.sp-c-PJLV-eYuGwt-status-fail{background:var(--test-fail);color:var(--sp-colors-surface1)}.sp-c-fVPbOs-gMQIch-variant-light{color-scheme:light}.sp-c-fVPbOs-LrWkf-variant-dark{color-scheme:dark}}</style> <link rel="stylesheet" href="/_astro/_id_.ubW0JEXm.css">
<link rel="stylesheet" href="/_astro/_id_.Ck7a8zcL.css"></head> <body class="relative flex h-full flex-col bg-background font-sans text-on-background [&_main]:my-6"> <script>
  // @ts-check
  const storedThemeChoice = window.localStorage.getItem('__theme') ?? 'system'

  window.__setTheme = setTheme
  // prettier-ignore
  window.__setTheme(/** @type {ThemeChoice} */ (storedThemeChoice))

  /**
   * @type {(themeChoice: ThemeChoice) => Promise<void>}
   */
  async function setTheme(themeChoice) {
    let theme = themeChoice

    if (themeChoice === 'system') {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    const changeTheme = () => {
      document.body.classList.toggle('dark', theme === 'dark')
    }

    let viewTransition = null

    if (
      document.startViewTransition &&
      !document.documentElement.hasAttribute('data-notransition')
    ) {
      document.documentElement.setAttribute('data-notransition', '')

      const width = document.documentElement.clientWidth
      const height = document.documentElement.clientHeight
      const diagonal = Math.sqrt(width ** 2 + height ** 2)
      const circleRadius = height > width ? height : diagonal
      document.documentElement.style.setProperty(
        '--circle-radius',
        `${circleRadius}px`,
      )

      viewTransition = document.startViewTransition(() => {
        changeTheme()
      })
    } else {
      changeTheme()
    }

    window.localStorage.setItem('__theme', themeChoice)

    document.body.dispatchEvent(
      new CustomEvent('newTheme', {
        detail: {
          themeChoice,
          theme,
        },
      }),
    )

    if (viewTransition) {
      await viewTransition.finished
      document.documentElement.removeAttribute('data-notransition')
    }
  }

  window.addEventListener('storage', function (e) {
    const newTheme = e.newValue
    if (newTheme && newTheme && e.key === '__theme') {
      // prettier-ignore
      window.__setTheme(/** @type {ThemeChoice} */ (newTheme))
    }
  })

  window.addEventListener('load', function () {
    document.documentElement.removeAttribute('data-notransition')
  })
</script> <div class="w-full"> <div class="pt-nav-height sm:hidden"> <div class="h-nav-height fixed top-0 left-0 z-30 flex w-screen items-center justify-between rounded-none bg-background/90 backdrop-blur-xs px-horizontal-padding"> <div class="flex flex-row items-center gap-2 min-w-0"> <a href="/pt/posts/" data-testid="parent-page-link" aria-label="Voltar à pagina anterior"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left "><path d="m15 18-6-6 6-6"></path></svg> </a> <h2 class="m-0 truncate font-sans font-normal">Homicídios em Baltimore: visualizações com ggplot2 e gganimate - Phelipe Teles</h2> </div> <button type="button" class="hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 bg-transparent" data-a11y-dialog-show="sidenav" data-testid="open-sidenav" aria-label="Abrir barra de navegação lateral"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu "><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg> </button> </div> </div> <div class="hidden h-full w-full sm:block"> <div class="grid grid-cols-layout"> <div class="flex w-full items-center justify-between"> <div class="mx-auto flex w-full max-w-content justify-between"> <nav class="flex justify-between" aria-label="Navegação principal"> <ul class="m-0 flex flex-row list-none gap-4"> <li class=""> <a id="about" href="/pt/" class="py-2 inline-block h-full w-full group"> <span class="underline underline-offset-8 decoration-2 decoration-transparent group-hover:decoration-hover"> Sobre </span> </a> </li><li class=""> <a id="posts" href="/pt/posts/" class="py-2 inline-block h-full w-full group" aria-current="page"> <span class="underline underline-offset-8 decoration-2 decoration-primary group-hover:decoration-primary-hover"> Posts </span> </a> </li> </ul> </nav> <div class="flex flex-row items-center gap-2">  <div style="--gap:2px;--icon-size:24px;--select-padding:calc(var(--icon-size) + var(--gap) * 2)" class="h-[32px] rounded-sm items-center grid justify-between bg-surface shadow-xs shadow-shadow"> <select class="h-full sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-theme-select="true" aria-label="Escolha um tema">  <option value="light">Claro</option> <option value="dark">Escuro</option> <option value="system">Sistema</option>   </select> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="col-span-1 col-start-1 row-start-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg class="feather" viewBox="0 0 24 24" width="24" height="24"> <title>Ícone do tema</title> <defs> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon " id="moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun " id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor " id="monitor"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg> </defs> <use data-theme-select-icon href="#monitor"></use> </svg>  </span> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="justify-self-end row-start-1 col-start-3 col-span-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div> <script type="module">const i=document.querySelectorAll("[data-theme-select]");i?.forEach(e=>{const t=window.localStorage.getItem("__theme")??"system";s(t);const o=Array.from(e.options).find(n=>n.value===t);o&&o.setAttribute("selected",""),e.addEventListener("change",function(n){if(!n.target)return;const c=n.target.selectedOptions[0];c&&window.__setTheme(c.value)})});document.body.addEventListener("newTheme",function(e){const t=e.detail.themeChoice;s(t)});function s(e){const t={dark:"#moon",light:"#sun",system:"#monitor"}[e];i.forEach(o=>{o.parentElement?.querySelector("[data-theme-select-icon]")?.setAttribute("href",t)})}</script> </div> </div> </div> </div> </div> </div> <aside data-a11y-dialog="sidenav" aria-hidden="true" class="fixed z-50 h-full w-full" style="visibility: hidden;"> <div data-a11y-dialog-hide class="fixed inset-0 -z-1 w-full bg-neutral-700/75 backdrop-blur-xs"></div> <div role="document" class="ml-auto h-full flex flex-col w-3/4 rounded-none bg-background py-0 will-change-transform"> <div class="mb-2 flex h-nav-height items-center justify-end px-horizontal-padding"> <button type="button" data-a11y-dialog-hide="true" aria-label="Close" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x "><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> </button> </div> <nav class="flex flex-col" aria-label="Navegação principal"> <ul class="m-0 flex list-none flex-col items-center justify-center gap-2 px-horizontal-padding"> <li class="w-full"> <a id="about" href="/pt/" class="flex items-center justify-center flex-row transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded-sm whitespace-nowrap py-1 px-2 bg-surface text-on-background"><div class="pr-2"></div>Sobre<div class="pl-2"></div></a> </li><li class="w-full"> <a id="posts" href="/pt/posts/" aria-current="page" class="flex items-center justify-center flex-row transition-colors duration-300 disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded-sm whitespace-nowrap py-1 px-2 bg-primary text-on-primary hover:bg-primary-hover shadow-xs shadow-shadow"><div class="pr-2"></div>Posts<div class="pl-2"></div></a> </li> </ul> </nav> <div class="flex flex-col gap-2 pb-4 mt-auto px-horizontal-padding"> <div style="--gap:2px;--icon-size:24px;--select-padding:calc(var(--icon-size) + var(--gap) * 2)" class="h-[32px] rounded-sm items-center grid justify-between bg-background"> <select class="h-full sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-language-select="true" aria-label="Escolha a linguagem">  <option value="en">English</option> <option selected value="pt">Português</option>   </select> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="col-span-1 col-start-1 row-start-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages " slot="start-icon"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg>  </span> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="justify-self-end row-start-1 col-start-3 col-span-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div> <script type="module">const a=document.querySelectorAll("[data-language-select]");a?.forEach(e=>{e.addEventListener("change",function(){window.location.href=n()})});function n(){const e=window.location.pathname;let t=e;switch(e){case"/pt":t="/";break;case"/":t="/pt/";break;default:e.startsWith("/pt/")?t=e.replace("/pt/","/"):t="/pt"+e;break}return t}</script> <div style="--gap:2px;--icon-size:24px;--select-padding:calc(var(--icon-size) + var(--gap) * 2)" class="h-[32px] rounded-sm items-center grid justify-between bg-surface shadow-xs shadow-shadow"> <select class="h-full sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-theme-select="true" aria-label="Escolha um tema">  <option value="light">Claro</option> <option value="dark">Escuro</option> <option value="system">Sistema</option>   </select> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="col-span-1 col-start-1 row-start-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg class="feather" viewBox="0 0 24 24" width="24" height="24"> <title>Ícone do tema</title> <defs> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon " id="moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun " id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor " id="monitor"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg> </defs> <use data-theme-select-icon href="#monitor"></use> </svg>  </span> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="justify-self-end row-start-1 col-start-3 col-span-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div>  </div> </div> </aside> <script type="module" src="/_astro/SideNav.astro_astro_type_script_index_0_lang.DwDLKeHA.js"></script>   <main class="grid grid-cols-layout"> <div class="sm:col-content px-0"> <article> <header class="flex flex-col"> <h1 class="mb-4 text-4xl max-w-prose"> Homicídios em Baltimore: visualizações com ggplot2 e gganimate </h1> <div class="mb-4 flex gap-2 flex-row flex-wrap"> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="1.25em" height="1.25em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar shrink-0"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg> <time datetime="2019-04-07"> 7  de  abril, 2019 </time> </div> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="1.25em" height="1.25em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-timer shrink-0"><line x1="10" x2="14" y1="2" y2="2"></line><line x1="12" x2="15" y1="14" y2="11"></line><circle cx="12" cy="14" r="8"></circle></svg> <div>6 min.</div> </div> <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover flex flex-row gap-2 items-center shrink-0" target="_blank" href="https://github.com/phelipetls/blog/blob/master/src/content/posts/visualizacao-dados-homicidios-baltimore/index.pt.mdx"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-code2 "><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m9 18 3-3-3-3"></path><path d="m5 12-3 3 3 3"></path></svg> Código fonte</a> </div> <div class="mb-4 flex max-w-xl flex-wrap gap-2"> <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-1" href="/pt/tags/r/"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> r  </a> <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-2" href="/pt/tags/">  ...  </a> </div> </header> <hr class="my-8"> <div data-blog-post-container data-toc="open" class="group flex flex-col lg:gap-8 lg:flex-row-reverse"> <aside style="--offset-from-top:1rem" class="relative shrink-0 mb-8 lg:ml-auto lg:mb-0 lg:basis-1/3 lg:sticky lg:top-(--offset-from-top) lg:h-[calc(100vh-var(--offset-from-top)*2)] overflow-hidden"> <button type="button" data-toggle-toc="true" data-open-toc-label="Abrir tabela de conteúdo" data-closed-toc-label="Fechar tabela de conteúdo" aria-label="Fechar tabela de conteúdo" style="--duration:150ms" data-preload="true" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary duration-300 min-w-[40px] h-[40px] justify-center items-center rounded-full px-2 z-1 absolute top-4 right-4 hidden lg:grid lg:min-w-0 lg:group-data-toc-open:grid-cols-[0fr_max-content] lg:group-data-toc-closed:grid-cols-[1fr_max-content] transition-all duration-(--duration) ease-in-out lg:justify-center"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-(--duration) ease-out group-data-toc-open:scale-100 group-data-toc-open:delay-(--duration)"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-(--duration) ease-in group-data-toc-closed:scale-100 group-data-toc-closed:delay-[var(--duration)"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg> <div class="col-start-1 col-end-1 group-data-toc-closed:mx-2 truncate"> Abrir tabela de conteúdo </div> </button> <div data-blog-post-toc-container data-preload class="card lg:h-full lg:p-4 lg:ml-auto lg:opacity-100 lg:group-data-toc-closed:opacity-0 lg:group-data-toc-closed:pointer-events-none transition-opacity duration-300 ease-in-out"> <div class="hidden lg:flex lg:h-full lg:flex-col"> <div class="flex items-center gap-2 h-10 flex-none"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list "><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg> <h2 class="m-0">Tabela de conteúdo</h2> <div class="ml-auto flex items-center transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg> </div> </div> <nav data-toc-wrapper class="pt-4 h-full min-h-0 lg:overflow-y-auto [&#38;_a_*]:indent-0 [&#38;_ol]:m-0 [&#38;_ol]:list-none [&#38;_ol]:indent-4 [&#38;_ol_li[data-active]>a]:text-primary [&#38;_ol_li[data-active]]:before:bg-primary [&#38;_ol_li]:relative [&#38;_ol_li]:before:absolute [&#38;_ol_li]:before:left-0 [&#38;_ol_li]:before:top-0 [&#38;_ol_li]:before:h-full [&#38;_ol_li]:before:w-px [&#38;_ol_li]:before:bg-divider [&#38;_ol_li]:before:content-[''] [&#38;_ol_li_a:hover]:bg-hover [&#38;_ol_li_a]:block [&#38;_ol_li_a]:truncate [&#38;_ol_li_a]:border-b-0 [&#38;_ol_li_a]:transition-colors [&#38;_ol_li_a]:duration-300 [&#38;_ol_ol]:indent-8 [&#38;_ol_ol_ol]:indent-12 [&#38;_ol_ol_ol_ol]:indent-16"> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#evolução-do-número-de-vítimas-no-tempo">Evolução do número de vítimas no tempo</a>  </li><li data-astro-toc="1"> <a href="#aspectos-sociais-das-vítimas">Aspectos sociais das vítimas</a>  </li><li data-astro-toc="1"> <a href="#que-causa-de-morte-é-a-mais-comum">Que causa de morte é a mais comum?</a>  </li><li data-astro-toc="1"> <a href="#mapas-e-animações">Mapas e animações</a>  </li><li data-astro-toc="1"> <a href="#conclusões">Conclusões</a>  </li></ol> </nav> </div> <details class="group px-horizontal-padding py-4 lg:hidden" aria-label="Tabela de conteúdo"> <summary class="list-none"> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list "><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg> <h2 class="m-0">Tabela de conteúdo</h2> <div class="flex items-center ml-auto transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg> </div> </div> </summary> <nav data-toc-wrapper class="mt-4 [&#38;_ol]:m-0 [&#38;_ol]:list-outside [&#38;_ol]:px-horizontal-padding [&#38;_ol_li:not(:first-child)]:mt-1"> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#evolução-do-número-de-vítimas-no-tempo">Evolução do número de vítimas no tempo</a>  </li><li data-astro-toc="1"> <a href="#aspectos-sociais-das-vítimas">Aspectos sociais das vítimas</a>  </li><li data-astro-toc="1"> <a href="#que-causa-de-morte-é-a-mais-comum">Que causa de morte é a mais comum?</a>  </li><li data-astro-toc="1"> <a href="#mapas-e-animações">Mapas e animações</a>  </li><li data-astro-toc="1"> <a href="#conclusões">Conclusões</a>  </li></ol> </nav> </details> <script type="module">const s=document.querySelector("nav[data-toc-wrapper] ol"),o=s?.closest("[data-toc-wrapper]"),l=document.querySelector("[data-blog-post]"),a=s?.querySelector("li");function u(t){t.setAttribute("data-active","")}function d(t){t.removeAttribute("data-active")}function f(){s?.querySelectorAll("li").forEach(d)}function g(t){const e=t.getAttribute("id"),c=s?.querySelector(`li a[href="#${e}"]`);return c?c.closest("li"):null}const h=new IntersectionObserver(t=>{t.forEach(e=>{if(!o)return;const c=e.target;if(e.isIntersecting){const n=g(c);if(!n)return;f(),u(n);const r=o.getBoundingClientRect(),i=n.getBoundingClientRect();if(n===a){o.scrollTop=0;return}if(r.top>i.top){o.scrollTop-=r.top-i.top;return}i.bottom>r.bottom&&(o.scrollTop+=i.bottom-r.bottom)}})},{threshold:1}),m=l.querySelectorAll("h2, h3, h4, h4, h6");for(const t of m)h.observe(t);</script> </div> </aside> <div data-blog-post class="min-w-0 [&#38;>pre]:my-8 max-sm:[&#38;>pre]:full-bleed *:data-codeblock:my-8 max-sm:*:data-codeblock:full-bleed max-sm:[&#38;>[data-codeblock]_pre]:rounded-none max-sm:[&#38;>[data-codeblock]_[data-codeblock-header]]:rounded-none [&#38;>hr]:border-0 [&#38;>hr]:text-center [&#38;>hr]:after:content-['⁂'] max-sm:[&#38;>figure]:full-bleed [&#38;>astro-island>div]:my-8 [&#38;>lite-youtube]:my-8 [&#38;>blockquote]:my-8 [&#38;>figure_video]:min-h-[15em] [&#38;_.katex-display]:max-w-prose [&#38;_.katex-display]:overflow-x-auto [&#38;_.katex-display]:overflow-y-hidden"> <p class="max-w-prose">Neste post pretendo continuar o que foi iniciado no último, onde transformamos
dados contidos em texto em um data.frame, um formato muito mais amigável para a
exploração e visualização de dados no R.</p>
<p class="max-w-prose">O procedimento geral agora, com os dados já limpos, é transformá-los e fazer a
visualização que queremos. Daí o uso extensivo do tidyverse antes de chamar o
ggplot2.</p>
<p class="max-w-prose">Ok, vamos primeiro olhar para a nossa <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://raw.githubusercontent.com/phelipetls/phelipetls.github.io/master/assets/homicides_df.csv" title="Link do arquivo raw">base de
dados</a> e ver que perguntas gostaríamos de responder:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="1QqwIT" prefix="r40" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;library(tidyverse)\n\ndf &lt;- read_csv(\&quot;https://raw.githubusercontent.com/phelipetls/phelipetls.github.io/master/assets/homicides_df.csv\&quot;) %&gt;%\n  na.omit()\n\ndf %&gt;% head()&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(tidyverse)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">df </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> read_csv(</span><span style="color:#98C379">"https://raw.githubusercontent.com/phelipetls/phelipetls.github.io/master/assets/homicides_df.csv"</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#56B6C2">  na.omit</span><span style="color:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">df %>% </span><span style="color:#56B6C2">head</span><span style="color:#ABB2BF">()</span></span></code></pre> </div> <script type="module" src="/_astro/CodeBlock.astro_astro_type_script_index_0_lang.CZ7V3yCn.js"></script>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1CFVVI" prefix="r41" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 6 x 8\n##   causas         lon   lat raca  genero idade data       endereco\n##   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;\n## 1 Shooting     -76.7  39.3 Black Male      17 2007-01-01 3400 Clifton Ave.\n## 2 Shooting     -76.7  39.3 Black Male      26 2007-01-02 4900 Challedon Ro~\n## 3 Blunt Force  -76.6  39.3 Black Female    44 2007-01-02 2000 West North A~\n## 4 Asphyxiation -76.6  39.4 Black Male      21 2007-01-03 5900 Northwood Dr~\n## 5 Blunt Force  -76.6  39.2 White Male      61 2007-01-05 500 Maude Ave.\n## 6 Shooting     -76.6  39.4 Black Male      46 2007-01-05 5200 Ready Ave.&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 6 x 8</span></span>
<span class="line"><span>##   causas         lon   lat raca  genero idade data       endereco</span></span>
<span class="line"><span>##   &#x3C;chr>        &#x3C;dbl> &#x3C;dbl> &#x3C;chr> &#x3C;chr>  &#x3C;dbl> &#x3C;date>     &#x3C;chr></span></span>
<span class="line"><span>## 1 Shooting     -76.7  39.3 Black Male      17 2007-01-01 3400 Clifton Ave.</span></span>
<span class="line"><span>## 2 Shooting     -76.7  39.3 Black Male      26 2007-01-02 4900 Challedon Ro~</span></span>
<span class="line"><span>## 3 Blunt Force  -76.6  39.3 Black Female    44 2007-01-02 2000 West North A~</span></span>
<span class="line"><span>## 4 Asphyxiation -76.6  39.4 Black Male      21 2007-01-03 5900 Northwood Dr~</span></span>
<span class="line"><span>## 5 Blunt Force  -76.6  39.2 White Male      61 2007-01-05 500 Maude Ave.</span></span>
<span class="line"><span>## 6 Shooting     -76.6  39.4 Black Male      46 2007-01-05 5200 Ready Ave.</span></span></code></pre> </div> 
<p class="max-w-prose">Há diversas questões a serem exploradas aqui, a primeira e mais sensível que vem
a mente é a racial: quais raças costumam ser vítimas de homicídio? Vamos,
naturalmente, estar interessados também na mesma pergunta para diferentes
características das pessoas, como gênero, idade etc. e como elas se relacionam
umas com as outras. Por exemplo, será que mulheres negras acabam vítimas de
homicídios muito mais que as brancas?</p>
<p class="max-w-prose">Os dados nos possibilitam também enxergar a distribuição geográfica, que áreas
da cidade são as mais violentas etc.</p>
<p class="max-w-prose">E, por fim, é interessante visualizar como o número de vítimas evolui no tempo.
Será que vem declinando com o passar dos anos?</p>
<h2 id="evolução-do-número-de-vítimas-no-tempo" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Evolução do número de vítimas no tempo<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#evolução-do-número-de-vítimas-no-tempo"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Esse é um bom ponto para se começar a entender os dados. Vamos fazer essa
visualização com um gráfico de linhas:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1mnbuf" prefix="r42" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;library(lubridate)\n\n# configurando o tema\ntheme_set(theme_minimal())\ntheme_update(legend.position = \&quot;bottom\&quot;)\n\n# criando a variável pro ano\ndf &lt;- df %&gt;%\n  mutate(ano = year(data))\n\ndf %&gt;%\n  count(ano) %&gt;%\n  ggplot(aes(\n    x = ano,\n    y = n\n  )) +\n  geom_line() +\n  labs(\n    x = \&quot;\\nAno\&quot;, y = NULL,\n    title = \&quot;Número de homicídios na cidade de Baltimore por ano\&quot;\n  )&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(lubridate)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># configurando o tema</span></span>
<span class="line"><span style="color:#ABB2BF">theme_set(theme_minimal())</span></span>
<span class="line"><span style="color:#ABB2BF">theme_update(</span><span style="color:#E06C75;font-style:italic">legend.position</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "bottom"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># criando a variável pro ano</span></span>
<span class="line"><span style="color:#ABB2BF">df </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> df %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span><span style="color:#E06C75;font-style:italic">ano</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> year(data))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">df %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(ano) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> ano,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    y</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> n</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_line() </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">Ano"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Número de homicídios na cidade de Baltimore por ano"</span></span>
<span class="line"><span style="color:#ABB2BF">  )</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_unnamed-chunk-2-1.67EV0qpP_1O0Yhf.webp" alt="Gráfico mostrando um declínio no número de homicídios na cidade de Baltimore do ano de 2007 a 2012" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Declínio nos homicídios nos anos de 2007-2012 em Baltimore</figcaption> </figure>
<p class="max-w-prose">Ok, uma boa notícia, parece que o número de homicídios vem reduzindo com os
anos…</p>
<p class="max-w-prose">Exceto por essa queda brusca em 2012, que deveria gerar suspeitas. De fato, essa
queda será esclarecida por outra visualização mais adiante. Se desconsiderarmos
2012, o quadro da violência não parece apresentar melhoras tão significativas.</p>
<p class="max-w-prose">É interessante visualizar também como isso se deu para as diferentes raças:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="28GIDA" prefix="r43" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;df %&gt;%\n  # contagem dos casos por raça e ano\n  count(raca, ano) %&gt;%\n  ggplot(aes(\n    x = ano,\n    y = n,\n    fill = raca\n  )) +\n  geom_col() +\n  labs(\n    x = NULL, y = NULL,\n    title = \&quot;Raça das vítimas de homicídios em Baltimore\&quot;\n  ) +\n  scale_fill_brewer(palette = \&quot;Set1\&quot;, name = \&quot;Raça\&quot;) +\n  scale_x_continuous(breaks = 2007:2012)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">df %>%</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  # contagem dos casos por raça e ano</span></span>
<span class="line"><span style="color:#ABB2BF">  count(raca, ano) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> ano,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    y</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> n,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    fill</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> raca</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_col() </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Raça das vítimas de homicídios em Baltimore"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_fill_brewer(</span><span style="color:#E06C75;font-style:italic">palette</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Set1"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">name</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Raça"</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_x_continuous(</span><span style="color:#E06C75;font-style:italic">breaks</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 2007</span><span style="color:#C678DD">:</span><span style="color:#D19A66">2012</span><span style="color:#ABB2BF">)</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_unnamed-chunk-3-1.CuLLMrm-_2bpQJR.webp" alt="Gráfico mostrando que a maioria das vítimas de homicídio é negra" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">A maioria das vítimas de homicídio é negra</figcaption> </figure>
<p class="max-w-prose">Essa é a primeira visualização do que já era esperado: na cidade de Baltimore, a
violência afeta muito mais os negros do que a qualquer outra raça. Impressiona a
magnitude da desigualdade.</p>
<p class="max-w-prose">Um gráfico interessante que vi <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://homicides.news.baltimoresun.com/">aqui</a>,
foi o do crescimento acumulado do número de vítimas por mês para cada ano, que
tentei replicar abaixo:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z26orqI" prefix="r44" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;acumulado &lt;- df %&gt;%\n  mutate(mes = month(data)) %&gt;%\n  count(ano, mes) %&gt;%\n  group_by(ano) %&gt;%\n  mutate(soma_cumulativa = cumsum(n)) %&gt;%\n  na.omit() %&gt;%\n  ggplot(aes(\n    x = mes,\n    y = soma_cumulativa,\n    color = factor(ano),\n    group = ano\n  )) +\n  scale_color_brewer(palette = \&quot;Dark2\&quot;) +\n  labs(\n    x = NULL,\n    y = \&quot;# acumulado de homicídios\\n\&quot;,\n    title = \&quot;Evolução temporal dos homicídios em Baltimore\&quot;,\n    color = \&quot;Ano\&quot;\n  ) +\n  geom_line(size = 1.2) +\n  scale_x_continuous(\n    breaks = 1:12,\n    labels = month(df$data, label = T) %&gt;% levels()\n  )\n\n\nacumulado&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">acumulado </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> df %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span><span style="color:#E06C75;font-style:italic">mes</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> month(data)) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(ano, mes) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  group_by(ano) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span><span style="color:#E06C75;font-style:italic">soma_cumulativa</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> cumsum</span><span style="color:#ABB2BF">(n)) %>%</span></span>
<span class="line"><span style="color:#56B6C2">  na.omit</span><span style="color:#ABB2BF">() %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> mes,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    y</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> soma_cumulativa,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    color</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> factor</span><span style="color:#ABB2BF">(ano),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    group</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> ano</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_color_brewer(</span><span style="color:#E06C75;font-style:italic">palette</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Dark2"</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    y</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "# acumulado de homicídios</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Evolução temporal dos homicídios em Baltimore"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    color</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Ano"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_line(</span><span style="color:#E06C75;font-style:italic">size</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 1.2</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_x_continuous(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    breaks</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 1</span><span style="color:#C678DD">:</span><span style="color:#D19A66">12</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    labels</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> month(df</span><span style="color:#C678DD">$</span><span style="color:#ABB2BF">data, </span><span style="color:#E06C75;font-style:italic">label</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T) %>% </span><span style="color:#56B6C2">levels</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">  )</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">acumulado</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_unnamed-chunk-4-1.C3MNvAkU_ZWYVq1.webp" alt="Gráfico mostrando como cresceu o número de homicídios em Baltimore por mês, a cada ano, de 2007 a 2012" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Os homicídios tendem a aumentar ao longo dos meses</figcaption> </figure>
<p class="max-w-prose">E aqui fica claro o porquê da queda em 2012: não temos os dados de todos os
meses. Também salta aos olhos que a violência diminuiu em relação a 2007, mas se
manteve mais ou menos estável no resto do período.</p>
<h2 id="aspectos-sociais-das-vítimas" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Aspectos sociais das vítimas<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#aspectos-sociais-das-vítimas"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Vamos tentar visualizar agora como a violência afeta as pessoas de diferentes
grupos:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1jejgN" prefix="r45" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;df %&gt;%\n  ggplot(aes(idade)) +\n  geom_histogram(aes(fill = raca),\n    binwidth = 5\n  ) +\n  facet_grid(. ~ genero) +\n  scale_fill_brewer(palette = \&quot;Set1\&quot;) +\n  labs(\n    x = \&quot;Idade\&quot;, y = NULL,\n    fill = \&quot;Raça\&quot;,\n    title = \&quot;Número de homicídios na cidade de Baltimore\&quot;,\n    subtitle = \&quot;Por gênero, raça e idade (de 2007 até maio de 2012)\&quot;\n  ) +\n  scale_x_continuous(breaks = seq(0, 100, 10))&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">df %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(idade)) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_histogram(aes(</span><span style="color:#E06C75;font-style:italic">fill</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> raca),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    binwidth</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 5</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  facet_grid(. </span><span style="color:#C678DD">~</span><span style="color:#ABB2BF"> genero) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_fill_brewer(</span><span style="color:#E06C75;font-style:italic">palette</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Set1"</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Idade"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    fill</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Raça"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Número de homicídios na cidade de Baltimore"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    subtitle</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Por gênero, raça e idade (de 2007 até maio de 2012)"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_x_continuous(</span><span style="color:#E06C75;font-style:italic">breaks</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> seq</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">100</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">10</span><span style="color:#ABB2BF">))</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_unnamed-chunk-5-1.Wc9v6ChD_Z1LkL4W.webp" alt="Gráfico mostrando as vítimas de homicídio por recortes sociais, do que se conclui que a maioria das vítimas é negra e do sexo masculino" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Conclui-se, de cara, que a maioria das vítimas é negra e do sexo masculino</figcaption> </figure>
<p class="max-w-prose">E assim podemos ver que o mais afetado pela violência é o homem negro da faixa
dos 20-30 anos. Se olharmos bem, pode-se também observar que a mulher negra está
em posição mais vulnerável à violência que a branca, provavelmente porque vive
nas regiões onde a violência é maior.</p>
<p class="max-w-prose">Também impressiona o contraste entre os números para cada gênero. Os homens são
muito mais propensos a serem mortos violentamente.</p>
<h2 id="que-causa-de-morte-é-a-mais-comum" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Que causa de morte é a mais comum?<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#que-causa-de-morte-é-a-mais-comum"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Para ver quais são as causas mais comuns, vamos fazer um simples gráfico de
barras:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1cgKLL" prefix="r46" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;df %&gt;%\n  ggplot(aes(\n    x = causas,\n    fill = causas\n  )) +\n  geom_bar() +\n  labs(\n    x = NULL, y = NULL,\n    fill = \&quot;Causas\&quot;,\n    title = \&quot;Causas de morte mais comuns\&quot;\n  ) +\n  scale_fill_brewer(palette = \&quot;Set1\&quot;)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">df %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> causas,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    fill</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> causas</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_bar() </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    fill</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Causas"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Causas de morte mais comuns"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_fill_brewer(</span><span style="color:#E06C75;font-style:italic">palette</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Set1"</span><span style="color:#ABB2BF">)</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_unnamed-chunk-6-1.CdrxxCDI_ZNpNoq.webp" alt="Gráfico mostrando os homicídios por causa de morte, sendo por arma de fogo a mais comum, seguida de esfaqueamento" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Os homicídios por armas de fogo são os mais comuns</figcaption> </figure>
<p class="max-w-prose">Os homicídios por armas de fogo são de longe os mais comuns, seguido por
esfaqueamento e contusão.</p>
<h2 id="mapas-e-animações" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Mapas e animações<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#mapas-e-animações"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Para visualizar a distribuição geográfica da ocorrência de homicídios, temos que
primeiro plotar o mapa da cidade. O código abaixo mostra como fazer isso, com a
ajuda do dataset <code>county</code> do pacote <code>maps</code>, de onde extraímos as coordenadas
geográficas, para depois plotar com <code>geom_polyon()</code>.</p>
<p class="max-w-prose">Uma vez com o mapa, minha ideia foi criar uma animação para visualizar o aspecto
temporal, espacial e qualitativo (nesse caso, pela raça das vítimas) com um
único gráfico. Para isso, vamos usar a função <code>gganimate::transition_manual</code>, de
forma a mostrar por mês o crescimento no número de vítimas:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1doRbo" prefix="r47" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;library(gganimate)\n\n# mapa de baltimore city\nbaltimore_map &lt;- map_data(\&quot;county\&quot;) %&gt;%\n  filter(subregion == \&quot;baltimore city\&quot;) %&gt;%\n  ggplot(aes(long, lat, group = group)) +\n  geom_polygon(fill = \&quot;lightgray\&quot;, color = \&quot;black\&quot;) +\n  coord_map() +\n  theme_void() +\n  theme(legend.position = \&quot;bottom\&quot;)\n\n# criando variável para cada mês de cada ano\ndf &lt;- df %&gt;%\n  arrange(data) %&gt;%\n  mutate(ano_mes = format(data, \&quot;%B de %Y\&quot;))\n\n# criando a animação\nanim &lt;- baltimore_map +\n  geom_point(\n    data = df,\n    aes(lon,\n      lat,\n      group = ano_mes,\n      color = raca\n    ),\n    size = 3.5, alpha = .7\n  ) +\n  labs(\n    title = \&quot;Que raças e regiões são mais vulneráveis ao homicídio?\&quot;,\n    subtitle = \&quot;{ current_frame }\&quot;,\n    color = \&quot;Raça\&quot;\n  ) +\n  scale_color_brewer(palette = \&quot;Set1\&quot;) +\n  transition_manual(factor(ano_mes, # ordernando os meses\n    levels = unique(ano_mes)\n  ),\n  cumulative = T\n  )\n\n# desacelerando a animação (padrão é 10fps)\nanimate(anim, fps = 5)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(gganimate)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># mapa de baltimore city</span></span>
<span class="line"><span style="color:#ABB2BF">baltimore_map </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> map_data(</span><span style="color:#98C379">"county"</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#56B6C2">  filter</span><span style="color:#ABB2BF">(subregion </span><span style="color:#56B6C2">==</span><span style="color:#98C379"> "baltimore city"</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(long, lat, </span><span style="color:#E06C75;font-style:italic">group</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> group)) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_polygon(</span><span style="color:#E06C75;font-style:italic">fill</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "lightgray"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">color</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "black"</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  coord_map() </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  theme_void() </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  theme(</span><span style="color:#E06C75;font-style:italic">legend.position</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "bottom"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># criando variável para cada mês de cada ano</span></span>
<span class="line"><span style="color:#ABB2BF">df </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> df %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  arrange(data) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span><span style="color:#E06C75;font-style:italic">ano_mes</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> format</span><span style="color:#ABB2BF">(data, </span><span style="color:#98C379">"%B de %Y"</span><span style="color:#ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># criando a animação</span></span>
<span class="line"><span style="color:#ABB2BF">anim </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> baltimore_map </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_point(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    data</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> df,</span></span>
<span class="line"><span style="color:#ABB2BF">    aes(lon,</span></span>
<span class="line"><span style="color:#ABB2BF">      lat,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">      group</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> ano_mes,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">      color</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> raca</span></span>
<span class="line"><span style="color:#ABB2BF">    ),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    size</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 3.5</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">alpha</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> .7</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Que raças e regiões são mais vulneráveis ao homicídio?"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    subtitle</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "{ current_frame }"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    color</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Raça"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_color_brewer(</span><span style="color:#E06C75;font-style:italic">palette</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Set1"</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  transition_manual(</span><span style="color:#56B6C2">factor</span><span style="color:#ABB2BF">(ano_mes, </span><span style="color:#7F848E;font-style:italic"># ordernando os meses</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    levels</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> unique</span><span style="color:#ABB2BF">(ano_mes)</span></span>
<span class="line"><span style="color:#ABB2BF">  ),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">  cumulative</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T</span></span>
<span class="line"><span style="color:#ABB2BF">  )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># desacelerando a animação (padrão é 10fps)</span></span>
<span class="line"><span style="color:#ABB2BF">animate(anim, </span><span style="color:#E06C75;font-style:italic">fps</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 5</span><span style="color:#ABB2BF">)</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_unnamed-chunk-7-1.Cerw_bIu_Z27TO5g.webp" alt="Animação mostrando a evolução dos homicídios por localização" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Nota-se que a violência é concentrada em certos bairros, mas em toda a região</figcaption> </figure>
<p class="max-w-prose">Fica evidente daí como a violência é concentrada em certos bairros.</p>
<p class="max-w-prose">Outra ideia é visualizar a evolução dos homicídios no tempo, por causa de morte.
Para isso, vamos usar o <code>gganimate::transition_states</code>, para visualizarmos as
mudanças ocorridas no decorrer dos anos.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1CFpCX" prefix="r48" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;df %&gt;%\n  count(ano, causas) %&gt;%\n  ggplot(aes(\n    x = causas,\n    y = n,\n    fill = causas\n  )) +\n  geom_col(show.legend = F) +\n  geom_text(aes(\n    label = paste0(\&quot;\&quot;, round(n)),\n    hjust = -0.2\n  )) +\n  coord_flip() +\n  labs(\n    x = NULL, y = NULL, fill = NULL,\n    title = \&quot;Causas de morte mais comuns\&quot;,\n    subtitle = \&quot;Ano: { closest_state }\&quot;\n  ) +\n  transition_states(ano)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">df %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(ano, causas) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> causas,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    y</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> n,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    fill</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> causas</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_col(</span><span style="color:#E06C75;font-style:italic">show.legend</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> F) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_text(aes(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    label</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> paste0</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">""</span><span style="color:#ABB2BF">, </span><span style="color:#56B6C2">round</span><span style="color:#ABB2BF">(n)),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    hjust</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> -</span><span style="color:#D19A66">0.2</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  coord_flip() </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">fill</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Causas de morte mais comuns"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    subtitle</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Ano: { closest_state }"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  transition_states(ano)</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_unnamed-chunk-8-1.DzZYzCEA_Z1iptfS.webp" alt="Animação mostrando a evolução no tempo dos homicídios, por causa de morte" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Não é uma visualização interessante, porque o homicídio por arma de fogo é o mais comum em todos os anos</figcaption> </figure>
<p class="max-w-prose">E que tal animarmos aquele gráfico do número acumulado? Vamos usar o
<code>gganimate::transition_reveal()</code> para revelar ao longo do eixo do tempo como os
números crescem.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1Rlqlq" prefix="r49" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;acumulado +\n  geom_segment(aes(\n    xend = 12.5,\n    yend = soma_cumulativa\n  ),\n  linetype = 2, color = \&quot;grey\&quot;\n  ) +\n  geom_text(aes(x = 13, label = paste0(\&quot;\&quot;, soma_cumulativa))) +\n  transition_reveal(mes)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">acumulado </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_segment(aes(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    xend</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 12.5</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    yend</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> soma_cumulativa</span></span>
<span class="line"><span style="color:#ABB2BF">  ),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">  linetype</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 2</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">color</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "grey"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_text(aes(</span><span style="color:#E06C75;font-style:italic">x</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 13</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">label</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> paste0</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">""</span><span style="color:#ABB2BF">, soma_cumulativa))) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  transition_reveal(mes)</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_unnamed-chunk-9-1.D2aY-Q6Z_Z1xUiH6.webp" alt="Animação mostrando a evolução no tempo dos homicídios, por mês" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">O comportamento do crescimento é consistente durante os anos</figcaption> </figure>
<h2 id="conclusões" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Conclusões<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#conclusões"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Este post é certamente só uma amostra do pontecial do combo ggplot2 +
gganimate, talvez uma das maiores vantagens de se usar o R, e espero que te
ajude a criar as suas próprias visualizações, apesar de não ter sido exatamente
o intuito ser didático.</p>
<p class="max-w-prose">O gganimate é bem novo ainda e tem relativamente pouca informação sobre na
internet. Eu demorei bastante para fazer alguns desses gráficos, mas acho que o
resultado valeu a pena.</p>
<p class="max-w-prose">Para aprender mais sobre ggplot2, tente este
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="http://www.cookbook-r.com/Graphs/">cookbook</a> é ótimo. Para maiores referências
sobre animações, tente o respositório
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/ropenscilabs/learngganimate">learngganimate</a>, esse
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://cran.r-project.org/web/packages/gganimate/vignettes/gganimate.html">vignette</a>
ou o próprio <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://gganimate.com/">site do pacote</a>.</p> </div> </div> </article> <hr class="max-sm:full-bleed mt-8"> <nav class="flex items-stretch sm:gap-4 max-sm:full-bleed sm:my-8" aria-label="Navegação entre posts"> <a class="sm:card flex flex-1 flex-col gap-2 border-0 px-horizontal-padding py-4 transition-colors duration-300 hover:bg-hover" href="/pt/posts/spread-bancario-brasileiro-r/"> <span class="text-primary"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left "><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg> </span> Spread bancário brasileiro: limpeza e visualização de dados </a> <div class="border-l border-divider sm:hidden"></div> <a class="sm:card flex flex-1 flex-col-reverse items-end justify-end gap-2 border-0 px-horizontal-padding py-4 text-right transition-colors duration-300 hover:bg-hover" href="/pt/posts/game-of-thrones-text-mining/"> Mineração de Texto com as legendas de Game of Thrones <span class="text-primary"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right "><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg> </span> </a> </nav> <hr class="max-sm:full-bleed mb-8"> </div> </main>  <footer class="bg-background grid grid-cols-layout mt-auto sm:mt-0"> <div class="mx-auto flex w-full max-w-content flex-col pt-4 pb-8 sm:justify-between"> <nav aria-label="Contatos" class="flex gap-2 mb-2"> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-email" href="mailto:phelipe_teles@hotmail.com" aria-label="E-mail">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail "><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>  </a> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-linkedin" href="https://linkedin.com/in/phelipeteles" aria-label="LinkedIn">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin "><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg>  </a> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-github" href="https://github.com/phelipetls" aria-label="GitHub">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>  </a> </nav> <span class="text-sm"> 
Todo conteúdo está sob a licença <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>.
 </span> </div> </footer> </body></html> <script type="module">const e=document.querySelector("[data-blog-post-container]"),t=document.querySelector("[data-toggle-toc]"),o=document.querySelector("[data-blog-post-toc-container]");let n=new AbortController;const a=localStorage.getItem("__preferred_toc_state");a!==null&&(a==="open"?s():(c(),o?.classList.add("invisible")));function s(){n.abort(),o?.classList.remove("invisible"),e instanceof HTMLElement&&t instanceof HTMLButtonElement&&(e.setAttribute("data-toc","open"),localStorage.setItem("__preferred_toc_state","open"),t.setAttribute("aria-label",t.dataset.closedTocLabel??""))}function c(){n=new AbortController,o?.addEventListener("transitionend",()=>{o?.classList.add("invisible")},{signal:n.signal}),e instanceof HTMLElement&&t instanceof HTMLButtonElement&&(e.setAttribute("data-toc","closed"),localStorage.setItem("__preferred_toc_state","closed"),t.setAttribute("aria-label",t.dataset.openTocLabel??""))}t?.addEventListener("click",()=>{if(!(e instanceof HTMLDivElement))return;e.dataset.toc==="open"?c():s()});</script>