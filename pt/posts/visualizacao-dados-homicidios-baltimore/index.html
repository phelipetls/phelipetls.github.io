<!DOCTYPE html>
<html class="h-full min-h-0 text-base sm:text-lg selection:bg-primary selection:text-on-primary scroll-smooth scroll-pt-nav-height sm:scroll-pt-0" lang="pt">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="deploy-date" content="2023-08-20">
    <meta name="author" content="Phelipe Teles">
    <meta name="color-scheme" content="dark light">

    <title>Homicídios em Baltimore: visualizações com ggplot2 e gganimate - Phelipe Teles | Phelipe Teles</title>



<link rel="canonical" href="https://phelipetls.github.io/pt/posts/visualizacao-dados-homicidios-baltimore/">

<meta name="description" content="Neste post pretendo continuar o que foi iniciado no último, onde transformamos
dados contidos em texto em um data.frame, um formato muito mais amigável para a
exploração e visualização de dados no R.">

<meta name="robots" content="index, follow">

<meta property="og:title" content="Homicídios em Baltimore: visualizações com ggplot2 e gganimate">
<meta property="og:type" content="article">
<meta property="og:image" content="/pt/posts/visualizacao-dados-homicidios-baltimore/image.png">
<meta property="og:url" content="https://phelipetls.github.io/pt/posts/visualizacao-dados-homicidios-baltimore/">


<meta property="article:published_time" content="2019-04-07T00:00:00Z">


<meta property="article:author" content="Phelipe Teles">

<meta property="article:tag" content="dataviz"><meta property="article:tag" content="tidyverse"><meta property="article:tag" content="gganimate"><meta property="article:tag" content="ggplot2">
<meta name="twitter:card" content="summary_large_image">



<meta content="/pt/posts/visualizacao-dados-homicidios-baltimore/image.png" name="twitter:image">

    
    <meta name="publish-date" content="2019-04-07">
    <meta name="keywords" content="dataviz, tidyverse, gganimate, ggplot2"><meta name="description" content="Neste post pretendo continuar o que foi iniciado no último, onde transformamos
dados contidos em texto em um data.frame, um formato muito mais amigável para a
exploração e visualização de dados no R.">

    <style id="sandpack">--sxs{--sxs:0 light sp-482805736}@media{.light{--sp-space-1:4px;--sp-space-2:8px;--sp-space-3:12px;--sp-space-4:16px;--sp-space-5:20px;--sp-space-6:24px;--sp-space-7:28px;--sp-space-8:32px;--sp-space-9:36px;--sp-space-10:40px;--sp-space-11:44px;--sp-border-radius:4px;--sp-layout-height:300px;--sp-layout-headerHeight:40px;--sp-transitions-default:150ms ease;--sp-zIndices-base:1;--sp-zIndices-overlay:2;--sp-zIndices-top:3;--sp-colors-surface1:#ffffff;--sp-colors-surface2:#EFEFEF;--sp-colors-surface3:#F3F3F3;--sp-colors-disabled:#C5C5C5;--sp-colors-base:#323232;--sp-colors-clickable:#808080;--sp-colors-hover:#4D4D4D;--sp-colors-accent:#3973E0;--sp-colors-error:#EA3323;--sp-colors-errorSurface:#FCF1F0;--sp-colors-warning:#6A4516;--sp-colors-warningSurface:#FEF2C0;--sp-font-body:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--sp-font-mono:"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace;--sp-font-size:13px;--sp-font-lineHeight:20px;--sp-syntax-color-plain:#151515;--sp-syntax-color-comment:#999;--sp-syntax-fontStyle-comment:italic;--sp-syntax-color-keyword:#7C5AE3;--sp-syntax-color-tag:#0971F1;--sp-syntax-color-punctuation:#3B3B3B;--sp-syntax-color-definition:#85A600;--sp-syntax-color-property:#3B3B3B;--sp-syntax-color-static:#3B3B3B;--sp-syntax-color-string:#2E6BD0}.sp-482805736{--sp-space-1:4px;--sp-space-2:8px;--sp-space-3:12px;--sp-space-4:16px;--sp-space-5:20px;--sp-space-6:24px;--sp-space-7:28px;--sp-space-8:32px;--sp-space-9:36px;--sp-space-10:40px;--sp-space-11:44px;--sp-border-radius:4px;--sp-layout-height:300px;--sp-layout-headerHeight:40px;--sp-transitions-default:150ms ease;--sp-zIndices-base:1;--sp-zIndices-overlay:2;--sp-zIndices-top:3;--sp-colors-surface1:#282c34;--sp-colors-surface2:#21252b;--sp-colors-surface3:#2c313c;--sp-colors-disabled:#4d4d4d;--sp-colors-base:#a8b1c2;--sp-colors-clickable:#a8b1c2;--sp-colors-hover:#e8effc;--sp-colors-accent:#c678dd;--sp-colors-error:#e06c75;--sp-colors-errorSurface:#ffeceb;--sp-colors-warning:#E7C400;--sp-colors-warningSurface:#3A3000;--sp-font-body:"Fira Sans", sans-serif;--sp-font-mono:Consolas, Menlo, Monaco, "Fira Code", monospace;--sp-font-size:1rem;--sp-font-lineHeight:1.5;--sp-syntax-color-plain:#a8b1c2;--sp-syntax-color-comment:#757575;--sp-syntax-fontStyle-comment:italic;--sp-syntax-color-keyword:#c678dd;--sp-syntax-color-tag:#e06c75;--sp-syntax-color-punctuation:#a8b1c2;--sp-syntax-color-definition:#62aeef;--sp-syntax-color-property:#d19a66;--sp-syntax-color-static:#a8b1c2;--sp-syntax-color-string:#98c379}}--sxs{--sxs:1 sp-k-eyOShd sp-k-iOHdLQ}@media{@keyframes sp-k-eyOShd{0%{opacity:0}100%{opacity:1}}@keyframes sp-k-iOHdLQ{0%{transform:rotateX(-25.5deg) rotateY(45deg)}100%{transform:rotateX(-25.5deg) rotateY(405deg)}}}--sxs{--sxs:2 sp-c-gMfcns sp-c-bxeRRt sp-c-hfoyCM sp-c-fWymNx sp-c-euXojQ sp-c-bpmgvy sp-c-PJLV sp-c-fVPbOs sp-c-gtcpyq sp-c-jOWzsE sp-c-jkvvao sp-c-juMdfR sp-c-fgviib sp-c-kwibBT sp-c-ivYAPe sp-c-lgESqD sp-c-cUFVvP sp-c-jzEuAZ}@media{.sp-c-gMfcns svg{margin:auto}.sp-c-bxeRRt{-webkit-appearance:none;appearance:none;outline:none;display:flex;align-items:center;font-size:inherit;font-family:inherit;background-color:transparent;transition:color var(--sp-transitions-default), background var(--sp-transitions-default);cursor:pointer;color:var(--sp-colors-clickable);border:0;text-decoration:none}.sp-c-bxeRRt:disabled{color:var(--sp-colors-disabled)}.sp-c-bxeRRt:hover:not(:disabled,[data-active='true']){color:var(--sp-colors-hover)}.sp-c-bxeRRt[data-active="true"]{color:var(--sp-colors-accent)}.sp-c-bxeRRt svg{min-width:var(--sp-space-4);width:var(--sp-space-4);height:var(--sp-space-4)}.sp-c-bxeRRt.sp-c-gMfcns{padding:var(--sp-space-1);height:var(--sp-space-7);display:flex}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:not(:has(span)){width:var(--sp-space-7)}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:has(svg + span){padding-right:var(--sp-space-3);padding-left:var(--sp-space-2);gap:var(--sp-space-1)}.sp-c-hfoyCM{padding:0 var(--sp-space-1) 0 var(--sp-space-1);border-radius:var(--sp-border-radius);margin-left:var(--sp-space-1);width:var(--sp-space-5);visibility:hidden}.sp-c-hfoyCM svg{width:var(--sp-space-3);height:var(--sp-space-3);display:block;position:relative;top:1px}.sp-c-fWymNx{margin:0;display:block;font-family:var(--sp-font-mono);font-size:var(--sp-font-size);color:var(--sp-syntax-color-plain);line-height:var(--sp-font-lineHeight)}.sp-c-euXojQ{display:flex;flex-direction:column;width:100%;position:relative;background-color:var(--sp-colors-surface1);gap:1px}.sp-c-euXojQ:has(.sp-stack){background-color:var(--sp-colors-surface2)}.sp-c-bpmgvy{transform:translate(-4px, 9px) scale(0.13, 0.13)}.sp-c-bpmgvy *{position:absolute;width:96px;height:96px}.sp-c-fVPbOs{all:initial;font-size:var(--sp-font-size);font-family:var(--sp-font-body);display:block;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-tap-highlight-color:transparent;-webkit-font-smoothing:subpixel-antialiased}@media screen and (min-resolution: 2dppx){.sp-c-fVPbOs{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}.sp-c-fVPbOs *{box-sizing:border-box}.sp-c-fVPbOs .sp-wrapper:focus{outline:0}.sp-c-gtcpyq{flex:1;position:relative;overflow:auto;background:var(--sp-colors-surface1)}.sp-c-gtcpyq .cm-scroller{padding:var(--sp-space-4) 0}.sp-c-gtcpyq .sp-c-fWymNx{padding:var(--sp-space-4) 0}@media screen and (max-width: 768px){@supports (-webkit-overflow-scrolling: touch){.sp-c-gtcpyq .cm-content{font-size:16px}}}.sp-c-jOWzsE{margin:0;outline:none;height:100%}.sp-c-jkvvao .sp-syntax-string{color:var(--sp-syntax-color-string);font-style:var(--sp-syntax-fontStyle-string)}.sp-c-jkvvao .sp-syntax-plain{color:var(--sp-syntax-color-plain);font-style:var(--sp-syntax-fontStyle-plain)}.sp-c-jkvvao .sp-syntax-comment{color:var(--sp-syntax-color-comment);font-style:var(--sp-syntax-fontStyle-comment)}.sp-c-jkvvao .sp-syntax-keyword{color:var(--sp-syntax-color-keyword);font-style:var(--sp-syntax-fontStyle-keyword)}.sp-c-jkvvao .sp-syntax-definition{color:var(--sp-syntax-color-definition);font-style:var(--sp-syntax-fontStyle-definition)}.sp-c-jkvvao .sp-syntax-punctuation{color:var(--sp-syntax-color-punctuation);font-style:var(--sp-syntax-fontStyle-punctuation)}.sp-c-jkvvao .sp-syntax-property{color:var(--sp-syntax-color-property);font-style:var(--sp-syntax-fontStyle-property)}.sp-c-jkvvao .sp-syntax-tag{color:var(--sp-syntax-color-tag);font-style:var(--sp-syntax-fontStyle-tag)}.sp-c-jkvvao .sp-syntax-static{color:var(--sp-syntax-color-static);font-style:var(--sp-syntax-fontStyle-static)}.sp-c-juMdfR{flex:1;display:flex;flex-direction:column;background:white;overflow:auto;position:relative}.sp-c-juMdfR .sp-bridge-frame{border:0;position:absolute;left:var(--sp-space-2);bottom:var(--sp-space-2);z-index:var(--sp-zIndices-top);height:12px;width:30%;mix-blend-mode:multiply;pointer-events:none}.sp-c-fgviib{border:0;outline:0;width:100%;height:100%;min-height:160px;max-height:2000px;flex:1}.sp-c-kwibBT{display:flex;position:absolute;bottom:var(--sp-space-2);right:var(--sp-space-2);z-index:var(--sp-zIndices-overlay);gap:var(--sp-space-2)}.sp-c-ivYAPe{padding:0}.sp-c-lgESqD{min-width:var(--sp-space-6);justify-content:center}.sp-c-cUFVvP{display:flex;align-items:center;height:var(--sp-layout-headerHeight);border-bottom:1px solid var(--sp-colors-surface2);padding:var(--sp-space-3) var(--sp-space-2);background:var(--sp-colors-surface1)}.sp-c-jzEuAZ{background-color:var(--sp-colors-surface2);color:var(--sp-colors-clickable);padding:var(--sp-space-1) var(--sp-space-3);border-radius:99999px;border:1px solid var(--sp-colors-surface2);height:24px;line-height:24px;font-size:inherit;outline:none;flex:1;margin-left:var(--sp-space-4);width:0;transition:background var(--sp-transitions-default)}.sp-c-jzEuAZ:hover{background-color:var(--sp-colors-surface3)}.sp-c-jzEuAZ:focus{background-color:var(--sp-colors-surface1);border:1px solid var(--sp-colors-accent);color:var(--sp-colors-base)}}--sxs{--sxs:3 sp-c-PJLV-kCOVwI-status-pass sp-c-PJLV-kEzYsr-status-fail sp-c-PJLV-gHAhSA-status-skip sp-c-PJLV-jgnHyR-status-title sp-c-PJLV-iCgxLS-status-run sp-c-PJLV-bnDZSy-status-pass sp-c-PJLV-eYuGwt-status-fail sp-c-fVPbOs-gMQIch-variant-light sp-c-fVPbOs-LrWkf-variant-dark}@media{.sp-c-PJLV-kCOVwI-status-pass{color:var(--test-pass)}.sp-c-PJLV-kEzYsr-status-fail{color:var(--test-fail)}.sp-c-PJLV-gHAhSA-status-skip{color:var(--test-skip)}.sp-c-PJLV-jgnHyR-status-title{color:var(--test-title)}.sp-c-PJLV-iCgxLS-status-run{background:var(--test-run);color:var(--sp-colors-surface1)}.sp-c-PJLV-bnDZSy-status-pass{background:var(--test-pass);color:var(--sp-colors-surface1)}.sp-c-PJLV-eYuGwt-status-fail{background:var(--test-fail);color:var(--sp-colors-surface1)}.sp-c-fVPbOs-gMQIch-variant-light{color-scheme:light}.sp-c-fVPbOs-LrWkf-variant-dark{color-scheme:dark}}</style>
  
  <link rel="stylesheet" href="/_astro/_id_.eefb4b9d.css" />
<link rel="stylesheet" href="/_astro/_id_.f7b41e74.css" /><script type="module" src="/_astro/hoisted.12f342b6.js"></script></head>

  <body data-preload class="relative flex h-full flex-col bg-background font-sans text-on-background">
    <script>
  // @ts-check
  const storedThemeChoice = window.localStorage.getItem('__theme') ?? 'system'

  window.__setTheme = setTheme
  // prettier-ignore
  window.__setTheme(/** @type {ThemeChoice} */ (storedThemeChoice))

  /**
   * @type {(themeChoice: ThemeChoice) => void}
   */
  function setTheme(themeChoice) {
    let theme = themeChoice

    if (themeChoice === 'system') {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    document.body.classList.toggle('dark', theme === 'dark')

    window.localStorage.setItem('__theme', themeChoice)

    document.body.dispatchEvent(
      new CustomEvent('newTheme', {
        detail: {
          themeChoice,
          theme,
        },
      })
    )
  }

  window.addEventListener('storage', function (e) {
    const newTheme = e.newValue
    if (newTheme && newTheme && e.key === '__theme') {
      // prettier-ignore
      window.__setTheme(/** @type {ThemeChoice} */ (newTheme))
    }
  })

  window.addEventListener('load', function () {
    document.querySelectorAll('[data-preload]').forEach((elem) => {
      elem.removeAttribute('data-preload')
    })
  })
</script>

    <div class="w-full">
  <div class="pt-nav-height sm:hidden">
    <div class="fixed top-0 left-0 z-30 flex w-screen justify-between rounded-none border-b border-divider bg-background/90 py-4 px-horizontal-padding backdrop-blur">
  <div class="flex flex-row items-center gap-2">
    <a href="/pt/posts/" data-testid="parent-page-link" aria-label="Voltar à pagina anterior">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
        </a>

    <h2 class="m-0 truncate font-sans font-normal">Homicídios em Baltimore: visualizações com ggplot2 e gganimate - Phelipe Teles</h2>
  </div>

  <button type="button" class="hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 bg-transparent" data-a11y-dialog-show="sidenav" data-testid="open-sidenav" aria-label="Abrir barra de navegação lateral">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg>
  </button>
</div>
  </div>

  <div class="hidden h-full w-full sm:block">
    <div class="flex w-full items-center justify-between pr-horizontal-padding">
  <div class="mx-auto flex w-full max-w-content justify-between">
    <nav class="flex justify-between pl-horizontal-padding" aria-label="Navegação principal">
      <ul class="m-0 flex flex-row list-none gap-2">
        <li>
                <a id="about" href="/pt/" class="p-2 inline-block h-full w-full group">
                  <span class="underline underline-offset-8 decoration-2 decoration-transparent group-hover:decoration-hover">
                    Sobre
                  </span>
                </a>
              </li><li>
                <a id="posts" href="/pt/posts" class="p-2 inline-block h-full w-full group" aria-current="page">
                  <span class="underline underline-offset-8 decoration-2 decoration-primary group-hover:decoration-primary-hover">
                    Posts
                  </span>
                </a>
              </li>
      </ul>
    </nav>

    <div class="flex flex-row items-center gap-2">
      

      <div style="--cols:3" class="rounded items-center grid grid-cols-[repeat(var(--cols),1fr)] bg-surface shadow-sm shadow-shadow">
  <select class="py-1 sm:py-0 rounded bg-inherit appearance-none text-center row-start-1 col-[1_/_calc(var(--cols)+1)] px-8" data-theme-select aria-label="Escolha um tema">
    
  <option value="light">Claro</option>
  <option value="dark">Escuro</option>
  <option value="system">Sistema</option>

  

  </select>

  <span class="pointer-events-none col-start-1 row-start-1 px-1 text-sm">
        <svg class="feather" viewBox="0 0 24 24" width="24" height="24">
    <title>Ícone do tema</title>

    <defs>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon" id="moon"><path d="M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun" id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor" id="monitor"><rect width="20" height="14" x="2" y="3" rx="2" ry="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg>
    </defs>

    <use data-theme-select-icon href="#monitor"></use>
  </svg>
      </span>

  <span class="flex flex-row justify-end pointer-events-none text-sm row-start-1 px-1 col-[var(--cols)_/_var(--cols)]">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down" slot="end-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
  </span>
</div>
    </div>
  </div>
</div>
  </div>
</div>
    <aside data-a11y-dialog="sidenav" aria-hidden="true" class="fixed z-50 h-full w-full" style="visibility: hidden;">
  <div data-a11y-dialog-hide class="fixed inset-0 -z-1 w-full bg-neutral-700 bg-opacity-75 backdrop-blur-sm">
  </div>

  <div role="document" class="ml-auto h-full flex flex-col w-3/4 rounded-none bg-background py-0 will-change-transform">
    <div class="mb-2 flex h-nav-height items-center justify-end px-horizontal-padding">
      <button type="button" data-a11y-dialog-hide="true" aria-label="Close" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><line x1="18" x2="6" y1="6" y2="18"></line><line x1="6" x2="18" y1="6" y2="18"></line></svg>
      </button>
    </div>

    <nav class="flex flex-col" aria-label="Navegação principal">
      <ul class="m-0 flex list-none flex-col items-center justify-center gap-2 px-horizontal-padding">
        <li class="w-full">
                <a id="about" href="/pt/" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded py-1 px-2 bg-surface text-on-background">About</a>
              </li><li class="w-full">
                <a id="posts" href="/pt/posts" aria-current="page" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded py-1 px-2 bg-primary text-on-primary hover:bg-primary-hover shadow-sm shadow-shadow">Posts</a>
              </li>
      </ul>
    </nav>

    <div class="flex flex-col gap-2 pb-4 mt-auto px-horizontal-padding [&_div]:flex-1">
      <div style="--cols:3" class="rounded items-center grid grid-cols-[repeat(var(--cols),1fr)] bg-background">
  <select class="py-1 sm:py-0 rounded bg-inherit appearance-none text-center row-start-1 col-[1_/_calc(var(--cols)+1)] px-8" data-language-select aria-label="Escolha a linguagem">
    
  <option value="en">English</option>
  <option selected="true" value="pt">Português</option>

  

  </select>

  <span class="pointer-events-none col-start-1 row-start-1 px-1 text-sm">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages" slot="start-icon"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg>
      </span>

  <span class="flex flex-row justify-end pointer-events-none text-sm row-start-1 px-1 col-[var(--cols)_/_var(--cols)]">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down" slot="end-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
  </span>
</div>
      <div style="--cols:3" class="rounded items-center grid grid-cols-[repeat(var(--cols),1fr)] bg-surface shadow-sm shadow-shadow">
  <select class="py-1 sm:py-0 rounded bg-inherit appearance-none text-center row-start-1 col-[1_/_calc(var(--cols)+1)] px-8" data-theme-select aria-label="Escolha um tema">
    
  <option value="light">Claro</option>
  <option value="dark">Escuro</option>
  <option value="system">Sistema</option>

  

  </select>

  <span class="pointer-events-none col-start-1 row-start-1 px-1 text-sm">
        <svg class="feather" viewBox="0 0 24 24" width="24" height="24">
    <title>Ícone do tema</title>

    <defs>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon" id="moon"><path d="M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun" id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor" id="monitor"><rect width="20" height="14" x="2" y="3" rx="2" ry="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg>
    </defs>

    <use data-theme-select-icon href="#monitor"></use>
  </svg>
      </span>

  <span class="flex flex-row justify-end pointer-events-none text-sm row-start-1 px-1 col-[var(--cols)_/_var(--cols)]">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down" slot="end-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
  </span>
</div>
    </div>
  </div>
</aside>

    
  

  <main class="grid grid-cols-layout">
    <div class="pt-8 sm:col-content px-0">
      <article>
        <header class="flex flex-col">
          <h1 class="mb-4 text-4xl max-w-prose">
            Homicídios em Baltimore: visualizações com ggplot2 e gganimate
          </h1>

          <div class="mb-4 flex gap-2 flex-row">
            <div class="flex items-center gap-2">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>

  <time datetime="2019-04-07">
    7  de  abril
  </time>
</div>
            <div class="flex items-center gap-2">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-timer"><line x1="10" x2="14" y1="2" y2="2"></line><line x1="12" x2="15" y1="14" y2="11"></line><circle cx="12" cy="14" r="8"></circle></svg>

  <div>6 min.</div>
</div>
          </div>

          <div class="mb-4 flex max-w-lg flex-wrap gap-2">
                <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-2" href="/pt/tags/dataviz">
  

  dataviz

  
</a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-2" href="/pt/tags/tidyverse">
  

  tidyverse

  
</a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-2" href="/pt/tags/gganimate">
  

  gganimate

  
</a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-2" href="/pt/tags/ggplot2">
  

  ggplot2

  
</a>

                <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-2" href="/pt/tags">
  

  ...

  
</a>
              </div>
        </header>

        <hr class="my-8">

        <div data-blog-post-container data-toc="open" class="group flex flex-col lg:gap-8 lg:flex-row-reverse">
          <aside style="--offset-from-top:1rem" class="relative mb-8 lg:ml-auto lg:mb-0 lg:basis-1/3 lg:sticky lg:top-[var(--offset-from-top)] lg:h-[calc(100vh-var(--offset-from-top)_*_2)]">
                <button type="button" data-toggle-toc="true" data-open-toc-label="Abrir tabela de conteúdo" data-closed-toc-label="Fechar tabela de conteúdo" aria-label="Fechar tabela de conteúdo" style="--duration:150ms" data-preload="true" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary min-w-[40px] h-[40px] justify-center items-center rounded-full px-2 z-1 absolute top-4 right-4 hidden lg:grid lg:min-w-0 lg:group-data-toc-open:grid-cols-[0fr_max-content] lg:group-data-toc-closed:grid-cols-[1fr_max-content] transition-all duration-[var(--duration)] ease-in-out overflow-hidden lg:justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-[var(--duration)] ease-out group-data-toc-open:scale-100 group-data-toc-open:delay-[var(--duration)]"><line x1="18" x2="6" y1="6" y2="18"></line><line x1="6" x2="18" y1="6" y2="18"></line></svg>

                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-[var(--duration)] ease-in group-data-toc-closed:scale-100 group-data-toc-closed:delay-[var(--duration)"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg>

                  <div class="col-start-1 col-end-1 group-data-toc-closed:mx-2 truncate">
                    Abrir tabela de conteúdo
                  </div>
                </button>

                <div data-blog-post-toc-container data-preload class="max-sm:card lg:h-full lg:p-4 lg:ml-auto lg:group-data-toc-open:translate-x-0 lg:group-data-toc-open:scale-x-1 lg:group-data-toc-open:opacity-1 lg:group-data-toc-closed:translate-x-full lg:group-data-toc-closed:opacity-0 lg:group-data-toc-closed:scale-x-0 lg:group-data-toc-closed:pointer-events-none transition-[transform,opacity] duration-300 ease-in-out">
                  <div class="hidden lg:flex lg:h-full lg:flex-col">
  <div class="flex items-center gap-2 h-10 flex-none">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg>

    <h2 class="m-0">Tabela de conteúdo</h2>

    <div class="ml-auto flex items-center transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
    </div>
  </div>

  <nav data-toc-wrapper class="pt-4 h-full min-h-0 lg:overflow-y-auto [&#38;_a_*]:indent-0 [&#38;_ol]:m-0 [&#38;_ol]:list-none [&#38;_ol]:indent-4 [&#38;_ol_li[data-active]>a]:text-primary [&#38;_ol_li[data-active]]:before:bg-primary [&#38;_ol_li]:relative [&#38;_ol_li]:before:absolute [&#38;_ol_li]:before:left-0 [&#38;_ol_li]:before:top-0 [&#38;_ol_li]:before:h-full [&#38;_ol_li]:before:w-[1px] [&#38;_ol_li]:before:bg-divider [&#38;_ol_li]:before:content-[''] [&#38;_ol_li_a:hover]:bg-hover [&#38;_ol_li_a]:block [&#38;_ol_li_a]:truncate [&#38;_ol_li_a]:border-b-0 [&#38;_ol_li_a]:transition-colors [&#38;_ol_li_a]:duration-300 [&#38;_ol_ol]:indent-8 [&#38;_ol_ol_ol]:indent-12 [&#38;_ol_ol_ol_ol]:indent-16">
    <ol data-astro-toc="1"><li data-astro-toc="1">
          <a href="#evolução-do-número-de-vítimas-no-tempo">Evolução do número de vítimas no tempo</a>
          
        </li><li data-astro-toc="1">
          <a href="#aspectos-sociais-das-vítimas">Aspectos sociais das vítimas</a>
          
        </li><li data-astro-toc="1">
          <a href="#que-causa-de-morte-é-a-mais-comum">Que causa de morte é a mais comum?</a>
          
        </li><li data-astro-toc="1">
          <a href="#mapas-e-animações">Mapas e animações</a>
          
        </li><li data-astro-toc="1">
          <a href="#conclusões">Conclusões</a>
          
        </li></ol>
  </nav>
</div>

<details class="group px-horizontal-padding py-4 lg:hidden" aria-label="Tabela de conteúdo">
  <summary class="list-none">
    <div class="flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg>

      <h2 class="m-0">Tabela de conteúdo</h2>

      <div class="flex items-center ml-auto transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
      </div>
    </div>
  </summary>

  <nav data-toc-wrapper class="mt-4 [&#38;_ol]:m-0 [&#38;_ol]:list-outside [&#38;_ol]:px-horizontal-padding [&#38;_ol_li:not(:first-child)]:mt-1">
    <ol data-astro-toc="1"><li data-astro-toc="1">
          <a href="#evolução-do-número-de-vítimas-no-tempo">Evolução do número de vítimas no tempo</a>
          
        </li><li data-astro-toc="1">
          <a href="#aspectos-sociais-das-vítimas">Aspectos sociais das vítimas</a>
          
        </li><li data-astro-toc="1">
          <a href="#que-causa-de-morte-é-a-mais-comum">Que causa de morte é a mais comum?</a>
          
        </li><li data-astro-toc="1">
          <a href="#mapas-e-animações">Mapas e animações</a>
          
        </li><li data-astro-toc="1">
          <a href="#conclusões">Conclusões</a>
          
        </li></ol>
  </nav>
</details>
                </div>
              </aside>

          <div data-blog-post class="w-full max-w-prose [&#38;>pre]:my-8 [&#38;>pre]:max-sm:full-bleed [&#38;>[data-codeblock]]:my-8 [&#38;>[data-codeblock]]:max-sm:full-bleed [&#38;>[data-codeblock]_pre]:max-sm:rounded-none [&#38;>[data-codeblock]_[data-codeblock-header]]:max-sm:rounded-none [&#38;>img]:my-8 [&#38;_img]:mx-auto [&#38;>hr]:border-0 [&#38;>hr]:text-center [&#38;>hr]:after:content-['⁂'] [&#38;>figure]:my-8 [&#38;>figure]:max-sm:full-bleed [&#38;>astro-island>div]:my-8 [&#38;>lite-youtube]:my-8 [&#38;>blockquote]:my-8 [&#38;>figure_video]:min-h-[15em] [&#38;_.katex-display]:overflow-x-auto [&#38;_.katex-display]:overflow-y-hidden">
            
  <p>Neste post pretendo continuar o que foi iniciado no último, onde transformamos
dados contidos em texto em um data.frame, um formato muito mais amigável para a
exploração e visualização de dados no R.</p>
<p>O procedimento geral agora, com os dados já limpos, é transformá-los e fazer a
visualização que queremos. Daí o uso extensivo do tidyverse antes de chamar o
ggplot2.</p>
<p>Ok, vamos primeiro olhar para a nossa <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://raw.githubusercontent.com/phelipetls/phelipetls.github.io/master/assets/homicides_df.csv" title="Link do arquivo raw">base de
dados</a> e ver que perguntas gostaríamos de responder:</p>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      <svg viewBox="0 0 128 128" width="1em" height="1em"><path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z"></path><path fill-rule="evenodd" d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z"></path></svg>

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        r
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var d;{let h={0:t=>t,1:t=>JSON.parse(t,a),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,a)),5:t=>new Set(JSON.parse(t,a)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},a=(t,e)=>{if(t===""||!Array.isArray(e))return e;let[r,n]=e;return r in h?h[r](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(d=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=async()=>{var o;if(!this.hydrator||!this.isConnected)return;let e=(o=this.parentElement)==null?void 0:o.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),n={},c=this.querySelectorAll("template[data-astro-template]");for(let s of c){let i=s.closest(this.tagName);i!=null&&i.isSameNode(this)&&(n[s.getAttribute("data-astro-template")||"default"]=s.innerHTML,s.remove())}for(let s of r){let i=s.closest(this.tagName);i!=null&&i.isSameNode(this)&&(n[s.getAttribute("name")||"default"]=s.innerHTML)}let l=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),a):{};await this.hydrator(this)(this.Component,l,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((e,r)=>{r.disconnect(),setTimeout(()=>this.childrenConnectedCallback(),0)}).observe(this,{childList:!0})}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let n=this.getAttribute("renderer-url"),[c,{default:l}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),o=this.getAttribute("component-export")||"default";if(!o.includes("."))this.Component=c[o];else{this.Component=c;for(let s of o.split("."))this.Component=this.Component[s]}return this.hydrator=l,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},d.observedAttributes=["props"],d))}})();</script><astro-island uid="Z2qBYG6" prefix="r2" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;library(tidyverse)\n\ndf &lt;- read_csv(\&quot;https://raw.githubusercontent.com/phelipetls/phelipetls.github.io/master/assets/homicides_df.csv\&quot;) %&gt;%\n  na.omit()\n\ndf %&gt;% head()\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code class="language-r"><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">tidyverse</span><span style="color:#ABB2BF">)</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">&lt;-</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">read_csv</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;https://raw.githubusercontent.com/phelipetls/phelipetls.github.io/master/assets/homicides_df.csv&quot;</span><span style="color:#ABB2BF">) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#56B6C2">na.omit</span><span style="color:#ABB2BF">()</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> %&gt;% </span><span style="color:#56B6C2">head</span><span style="color:#ABB2BF">()</span></span></code></pre>
</div>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        [Sem nome]
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <astro-island uid="Z4Tqn3" prefix="r3" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 6 x 8\n##   causas         lon   lat raca  genero idade data       endereco\n##   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;\n## 1 Shooting     -76.7  39.3 Black Male      17 2007-01-01 3400 Clifton Ave.\n## 2 Shooting     -76.7  39.3 Black Male      26 2007-01-02 4900 Challedon Ro~\n## 3 Blunt Force  -76.6  39.3 Black Female    44 2007-01-02 2000 West North A~\n## 4 Asphyxiation -76.6  39.4 Black Male      21 2007-01-03 5900 Northwood Dr~\n## 5 Blunt Force  -76.6  39.2 White Male      61 2007-01-05 500 Maude Ave.\n## 6 Shooting     -76.6  39.4 Black Male      46 2007-01-05 5200 Ready Ave.\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code><span class="line"><span>## # A tibble: 6 x 8</span></span><span class="line"><span>##   causas         lon   lat raca  genero idade data       endereco</span></span><span class="line"><span>##   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;</span></span><span class="line"><span>## 1 Shooting     -76.7  39.3 Black Male      17 2007-01-01 3400 Clifton Ave.</span></span><span class="line"><span>## 2 Shooting     -76.7  39.3 Black Male      26 2007-01-02 4900 Challedon Ro~</span></span><span class="line"><span>## 3 Blunt Force  -76.6  39.3 Black Female    44 2007-01-02 2000 West North A~</span></span><span class="line"><span>## 4 Asphyxiation -76.6  39.4 Black Male      21 2007-01-03 5900 Northwood Dr~</span></span><span class="line"><span>## 5 Blunt Force  -76.6  39.2 White Male      61 2007-01-05 500 Maude Ave.</span></span><span class="line"><span>## 6 Shooting     -76.6  39.4 Black Male      46 2007-01-05 5200 Ready Ave.</span></span></code></pre>
</div>
<p>Há diversas questões a serem exploradas aqui, a primeira e mais sensível que vem
a mente é a racial: quais raças costumam ser vítimas de homicídio? Vamos,
naturalmente, estar interessados também na mesma pergunta para diferentes
características das pessoas, como gênero, idade etc. e como elas se relacionam
umas com as outras. Por exemplo, será que mulheres negras acabam vítimas de
homicídios muito mais que as brancas?</p>
<p>Os dados nos possibilitam também enxergar a distribuição geográfica, que áreas
da cidade são as mais violentas etc.</p>
<p>E, por fim, é interessante visualizar como o número de vítimas evolui no tempo.
Será que vem declinando com o passar dos anos?</p>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="evolução-do-número-de-vítimas-no-tempo">
  
  Evolução do número de vítimas no tempo<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#evolução-do-número-de-vítimas-no-tempo"><span class="icon icon-link"></span></a>

</h2>
<p>Esse é um bom ponto para se começar a entender os dados. Vamos fazer essa
visualização com um gráfico de linhas:</p>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      <svg viewBox="0 0 128 128" width="1em" height="1em"><path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z"></path><path fill-rule="evenodd" d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z"></path></svg>

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        r
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <astro-island uid="aYk4J" prefix="r4" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;library(lubridate)\n\n# configurando o tema\ntheme_set(theme_minimal())\ntheme_update(legend.position = \&quot;bottom\&quot;)\n\n# criando a variável pro ano\ndf &lt;- df %&gt;%\n  mutate(ano = year(data))\n\ndf %&gt;%\n  count(ano) %&gt;%\n  ggplot(aes(\n    x = ano,\n    y = n\n  )) +\n  geom_line() +\n  labs(\n    x = \&quot;\\nAno\&quot;, y = NULL,\n    title = \&quot;Número de homicídios na cidade de Baltimore por ano\&quot;\n  )\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code class="language-r"><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">lubridate</span><span style="color:#ABB2BF">)</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#7F848E"># configurando o tema</span></span><span class="line"><span style="color:#61AFEF">theme_set</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">theme_minimal</span><span style="color:#ABB2BF">())</span></span><span class="line"><span style="color:#61AFEF">theme_update</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">legend.position</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;bottom&quot;</span><span style="color:#ABB2BF">)</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#7F848E"># criando a variável pro ano</span></span><span class="line"><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">&lt;-</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">mutate</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">year</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">))</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">count</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF">) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">ggplot</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">n</span></span><span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_line</span><span style="color:#ABB2BF">() </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">labs</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;</span><span style="color:#E5C07B">\n</span><span style="color:#98C379">Ano&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">title</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Número de homicídios na cidade de Baltimore por ano&quot;</span></span><span class="line"><span style="color:#ABB2BF">  )</span></span></code></pre>
</div>
<figure>
  <img src="/_astro/_unnamed-chunk-2-1.6f36694a.png" alt="Gráfico mostrando um declínio no número de homicídios na cidade de Baltimore do ano de 2007 a 2012">

  
</figure>
<p>Ok, uma boa notícia, parece que o número de homicídios vem reduzindo com os
anos…</p>
<p>Exceto por essa queda brusca em 2012, que deveria gerar suspeitas. De fato, essa
queda será esclarecida por outra visualização mais adiante. Se desconsiderarmos
2012, o quadro da violência não parece apresentar melhoras tão significativas.</p>
<p>É interessante visualizar também como isso se deu para as diferentes raças:</p>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      <svg viewBox="0 0 128 128" width="1em" height="1em"><path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z"></path><path fill-rule="evenodd" d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z"></path></svg>

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        r
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <astro-island uid="Z1O13Ij" prefix="r5" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;df %&gt;%\n  # contagem dos casos por raça e ano\n  count(raca, ano) %&gt;%\n  ggplot(aes(\n    x = ano,\n    y = n,\n    fill = raca\n  )) +\n  geom_col() +\n  labs(\n    x = NULL, y = NULL,\n    title = \&quot;Raça das vítimas de homicídios em Baltimore\&quot;\n  ) +\n  scale_fill_brewer(palette = \&quot;Set1\&quot;, name = \&quot;Raça\&quot;) +\n  scale_x_continuous(breaks = 2007:2012)\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code class="language-r"><span class="line"><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E"># contagem dos casos por raça e ano</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">count</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">raca</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF">) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">ggplot</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">n</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">fill</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">raca</span></span><span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_col</span><span style="color:#ABB2BF">() </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">labs</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">title</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Raça das vítimas de homicídios em Baltimore&quot;</span></span><span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">scale_fill_brewer</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">palette</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Set1&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Raça&quot;</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">scale_x_continuous</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">breaks</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">2007</span><span style="color:#C678DD">:</span><span style="color:#D19A66">2012</span><span style="color:#ABB2BF">)</span></span></code></pre>
</div>
<figure>
  <img src="/_astro/_unnamed-chunk-3-1.d8db6f7a.png" alt="Gráfico mostrando que a maioria das vítimas de homicídio é negra">

  
</figure>
<p>Essa é a primeira visualização do que já era esperado: na cidade de Baltimore, a
violência afeta muito mais os negros do que a qualquer outra raça. Impressiona a
magnitude da desigualdade.</p>
<p>Um gráfico interessante que vi <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://homicides.news.baltimoresun.com/">aqui</a>,
foi o do crescimento acumulado do número de vítimas por mês para cada ano, que
tentei replicar abaixo:</p>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      <svg viewBox="0 0 128 128" width="1em" height="1em"><path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z"></path><path fill-rule="evenodd" d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z"></path></svg>

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        r
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <astro-island uid="rtPRO" prefix="r6" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;acumulado &lt;- df %&gt;%\n  mutate(mes = month(data)) %&gt;%\n  count(ano, mes) %&gt;%\n  group_by(ano) %&gt;%\n  mutate(soma_cumulativa = cumsum(n)) %&gt;%\n  na.omit() %&gt;%\n  ggplot(aes(\n    x = mes,\n    y = soma_cumulativa,\n    color = factor(ano),\n    group = ano\n  )) +\n  scale_color_brewer(palette = \&quot;Dark2\&quot;) +\n  labs(\n    x = NULL,\n    y = \&quot;# acumulado de homicídios\\n\&quot;,\n    title = \&quot;Evolução temporal dos homicídios em Baltimore\&quot;,\n    color = \&quot;Ano\&quot;\n  ) +\n  geom_line(size = 1.2) +\n  scale_x_continuous(\n    breaks = 1:12,\n    labels = month(df$data, label = T) %&gt;% levels()\n  )\n\n\nacumulado\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code class="language-r"><span class="line"><span style="color:#E06C75">acumulado</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">&lt;-</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">mutate</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">mes</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">month</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">)) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">count</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">mes</span><span style="color:#ABB2BF">) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">group_by</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF">) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">mutate</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">soma_cumulativa</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">cumsum</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">n</span><span style="color:#ABB2BF">)) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#56B6C2">na.omit</span><span style="color:#ABB2BF">() %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">ggplot</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">mes</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">soma_cumulativa</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">color</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">factor</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF">),</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">group</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">ano</span></span><span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">scale_color_brewer</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">palette</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Dark2&quot;</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">labs</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;# acumulado de homicídios</span><span style="color:#E5C07B">\n</span><span style="color:#98C379">&quot;</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">title</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Evolução temporal dos homicídios em Baltimore&quot;</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">color</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Ano&quot;</span></span><span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_line</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">size</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1.2</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">scale_x_continuous</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">breaks</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span><span style="color:#C678DD">:</span><span style="color:#D19A66">12</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">labels</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">month</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">df</span><span style="color:#C678DD">$</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">label</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">T</span><span style="color:#ABB2BF">) %&gt;% </span><span style="color:#56B6C2">levels</span><span style="color:#ABB2BF">()</span></span><span class="line"><span style="color:#ABB2BF">  )</span></span><span class="line"><span> </span></span><span class="line"><span> </span></span><span class="line"><span style="color:#E06C75">acumulado</span></span></code></pre>
</div>
<figure>
  <img src="/_astro/_unnamed-chunk-4-1.6ed1b0c2.png" alt="Gráfico mostrando como cresceu o número de homicídios em Baltimore por mês, a cada ano, de 2007 a 2012">

  
</figure>
<p>E aqui fica claro o porquê da queda em 2012: não temos os dados de todos os
meses. Também salta aos olhos que a violência diminuiu em relação a 2007, mas se
manteve mais ou menos estável no resto do período.</p>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="aspectos-sociais-das-vítimas">
  
  Aspectos sociais das vítimas<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#aspectos-sociais-das-vítimas"><span class="icon icon-link"></span></a>

</h2>
<p>Vamos tentar visualizar agora como a violência afeta as pessoas de diferentes
grupos:</p>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      <svg viewBox="0 0 128 128" width="1em" height="1em"><path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z"></path><path fill-rule="evenodd" d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z"></path></svg>

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        r
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <astro-island uid="9uC7D" prefix="r7" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;df %&gt;%\n  ggplot(aes(idade)) +\n  geom_histogram(aes(fill = raca),\n    binwidth = 5\n  ) +\n  facet_grid(. ~ genero) +\n  scale_fill_brewer(palette = \&quot;Set1\&quot;) +\n  labs(\n    x = \&quot;Idade\&quot;, y = NULL,\n    fill = \&quot;Raça\&quot;,\n    title = \&quot;Número de homicídios na cidade de Baltimore\&quot;,\n    subtitle = \&quot;Por gênero, raça e idade (de 2007 até maio de 2012)\&quot;\n  ) +\n  scale_x_continuous(breaks = seq(0, 100, 10))\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code class="language-r"><span class="line"><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">ggplot</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">idade</span><span style="color:#ABB2BF">)) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_histogram</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">fill</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">raca</span><span style="color:#ABB2BF">),</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">binwidth</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">5</span></span><span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">facet_grid</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">.</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">~</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">genero</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">scale_fill_brewer</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">palette</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Set1&quot;</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">labs</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Idade&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">fill</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Raça&quot;</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">title</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Número de homicídios na cidade de Baltimore&quot;</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">subtitle</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Por gênero, raça e idade (de 2007 até maio de 2012)&quot;</span></span><span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">scale_x_continuous</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">breaks</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">seq</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">100</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">10</span><span style="color:#ABB2BF">))</span></span></code></pre>
</div>
<figure>
  <img src="/_astro/_unnamed-chunk-5-1.619aa01e.png" alt="Gráfico mostrando as vítimas de homicídio por recortes sociais, do que se conclui que a maioria das vítimas é negra e do sexo masculino">

  
</figure>
<p>E assim podemos ver que o mais afetado pela violência é o homem negro da faixa
dos 20-30 anos. Se olharmos bem, pode-se também observar que a mulher negra está
em posição mais vulnerável à violência que a branca, provavelmente porque vive
nas regiões onde a violência é maior.</p>
<p>Também impressiona o contraste entre os números para cada gênero. Os homens são
muito mais propensos a serem mortos violentamente.</p>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="que-causa-de-morte-é-a-mais-comum">
  
  Que causa de morte é a mais comum?<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#que-causa-de-morte-é-a-mais-comum"><span class="icon icon-link"></span></a>

</h2>
<p>Para ver quais são as causas mais comuns, vamos fazer um simples gráfico de
barras:</p>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      <svg viewBox="0 0 128 128" width="1em" height="1em"><path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z"></path><path fill-rule="evenodd" d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z"></path></svg>

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        r
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <astro-island uid="1zegcM" prefix="r8" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;df %&gt;%\n  ggplot(aes(\n    x = causas,\n    fill = causas\n  )) +\n  geom_bar() +\n  labs(\n    x = NULL, y = NULL,\n    fill = \&quot;Causas\&quot;,\n    title = \&quot;Causas de morte mais comuns\&quot;\n  ) +\n  scale_fill_brewer(palette = \&quot;Set1\&quot;)\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code class="language-r"><span class="line"><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">ggplot</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">causas</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">fill</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">causas</span></span><span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_bar</span><span style="color:#ABB2BF">() </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">labs</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">fill</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Causas&quot;</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">title</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Causas de morte mais comuns&quot;</span></span><span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">scale_fill_brewer</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">palette</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Set1&quot;</span><span style="color:#ABB2BF">)</span></span></code></pre>
</div>
<figure>
  <img src="/_astro/_unnamed-chunk-6-1.e5e19b28.png" alt="Gráfico mostrando os homicídios por causa de morte, sendo por arma de fogo a mais comum, seguida de esfaqueamento">

  
</figure>
<p>Os homicídios por armas de fogo são de longe os mais comuns, seguido por
esfaqueamento e contusão.</p>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="mapas-e-animações">
  
  Mapas e animações<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#mapas-e-animações"><span class="icon icon-link"></span></a>

</h2>
<p>Para visualizar a distribuição geográfica da ocorrência de homicídios, temos que
primeiro plotar o mapa da cidade. O código abaixo mostra como fazer isso, com a
ajuda do dataset <code>county</code> do pacote <code>maps</code>, de onde extraímos as coordenadas
geográficas, para depois plotar com <code>geom_polyon()</code>.</p>
<p>Uma vez com o mapa, minha ideia foi criar uma animação para visualizar o aspecto
temporal, espacial e qualitativo (nesse caso, pela raça das vítimas) com um
único gráfico. Para isso, vamos usar a função <code>gganimate::transition_manual</code>, de
forma a mostrar por mês o crescimento no número de vítimas:</p>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      <svg viewBox="0 0 128 128" width="1em" height="1em"><path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z"></path><path fill-rule="evenodd" d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z"></path></svg>

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        r
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <astro-island uid="Z19XyM4" prefix="r9" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;library(gganimate)\n\n# mapa de baltimore city\nbaltimore_map &lt;- map_data(\&quot;county\&quot;) %&gt;%\n  filter(subregion == \&quot;baltimore city\&quot;) %&gt;%\n  ggplot(aes(long, lat, group = group)) +\n  geom_polygon(fill = \&quot;lightgray\&quot;, color = \&quot;black\&quot;) +\n  coord_map() +\n  theme_void() +\n  theme(legend.position = \&quot;bottom\&quot;)\n\n# criando variável para cada mês de cada ano\ndf &lt;- df %&gt;%\n  arrange(data) %&gt;%\n  mutate(ano_mes = format(data, \&quot;%B de %Y\&quot;))\n\n# criando a animação\nanim &lt;- baltimore_map +\n  geom_point(\n    data = df,\n    aes(lon,\n      lat,\n      group = ano_mes,\n      color = raca\n    ),\n    size = 3.5, alpha = .7\n  ) +\n  labs(\n    title = \&quot;Que raças e regiões são mais vulneráveis ao homicídio?\&quot;,\n    subtitle = \&quot;{ current_frame }\&quot;,\n    color = \&quot;Raça\&quot;\n  ) +\n  scale_color_brewer(palette = \&quot;Set1\&quot;) +\n  transition_manual(factor(ano_mes, # ordernando os meses\n    levels = unique(ano_mes)\n  ),\n  cumulative = T\n  )\n\n# desacelerando a animação (padrão é 10fps)\nanimate(anim, fps = 5)\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code class="language-r"><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">gganimate</span><span style="color:#ABB2BF">)</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#7F848E"># mapa de baltimore city</span></span><span class="line"><span style="color:#E06C75">baltimore_map</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">&lt;-</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">map_data</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;county&quot;</span><span style="color:#ABB2BF">) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#56B6C2">filter</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">subregion</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">==</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;baltimore city&quot;</span><span style="color:#ABB2BF">) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">ggplot</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">long</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">lat</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">group</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">group</span><span style="color:#ABB2BF">)) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_polygon</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">fill</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;lightgray&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">color</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;black&quot;</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">coord_map</span><span style="color:#ABB2BF">() </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">theme_void</span><span style="color:#ABB2BF">() </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">theme</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">legend.position</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;bottom&quot;</span><span style="color:#ABB2BF">)</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#7F848E"># criando variável para cada mês de cada ano</span></span><span class="line"><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">&lt;-</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">arrange</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">mutate</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano_mes</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">format</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;%B de %Y&quot;</span><span style="color:#ABB2BF">))</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#7F848E"># criando a animação</span></span><span class="line"><span style="color:#E06C75">anim</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">&lt;-</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">baltimore_map</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_point</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">data</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">df</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">lon</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">lat</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">group</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">ano_mes</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">      </span><span style="color:#E06C75">color</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">raca</span></span><span class="line"><span style="color:#ABB2BF">    ),</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">size</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">3.5</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">alpha</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">.7</span></span><span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">labs</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">title</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Que raças e regiões são mais vulneráveis ao homicídio?&quot;</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">subtitle</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;{ current_frame }&quot;</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">color</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Raça&quot;</span></span><span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">scale_color_brewer</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">palette</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Set1&quot;</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">transition_manual</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">factor</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano_mes</span><span style="color:#ABB2BF">, </span><span style="color:#7F848E"># ordernando os meses</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">levels</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">unique</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano_mes</span><span style="color:#ABB2BF">)</span></span><span class="line"><span style="color:#ABB2BF">  ),</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">cumulative</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">T</span></span><span class="line"><span style="color:#ABB2BF">  )</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#7F848E"># desacelerando a animação (padrão é 10fps)</span></span><span class="line"><span style="color:#61AFEF">animate</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">anim</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">fps</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF">)</span></span></code></pre>
</div>
<figure>
  <img src="/_astro/_unnamed-chunk-7-1.01b06976.gif" alt="Animação mostrando a evolução dos homicídios por localização">

  
</figure>
<p>Fica evidente daí como a violência é concentrada em certos bairros.</p>
<p>Outra ideia é visualizar a evolução dos homicídios no tempo, por causa de morte.
Para isso, vamos usar o <code>gganimate::transition_states</code>, para visualizarmos as
mudanças ocorridas no decorrer dos anos.</p>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      <svg viewBox="0 0 128 128" width="1em" height="1em"><path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z"></path><path fill-rule="evenodd" d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z"></path></svg>

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        r
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <astro-island uid="HN78I" prefix="r10" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;df %&gt;%\n  count(ano, causas) %&gt;%\n  ggplot(aes(\n    x = causas,\n    y = n,\n    fill = causas\n  )) +\n  geom_col(show.legend = F) +\n  geom_text(aes(\n    label = paste0(\&quot;\&quot;, round(n)),\n    hjust = -0.2\n  )) +\n  coord_flip() +\n  labs(\n    x = NULL, y = NULL, fill = NULL,\n    title = \&quot;Causas de morte mais comuns\&quot;,\n    subtitle = \&quot;Ano: { closest_state }\&quot;\n  ) +\n  transition_states(ano)\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code class="language-r"><span class="line"><span style="color:#E06C75">df</span><span style="color:#ABB2BF"> %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">count</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">causas</span><span style="color:#ABB2BF">) %&gt;%</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">ggplot</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">causas</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">n</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">fill</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">causas</span></span><span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_col</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">show.legend</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">F</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_text</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">label</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">paste0</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#56B6C2">round</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">n</span><span style="color:#ABB2BF">)),</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">hjust</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">-</span><span style="color:#D19A66">0.2</span></span><span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">coord_flip</span><span style="color:#ABB2BF">() </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">labs</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">y</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">fill</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">title</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Causas de morte mais comuns&quot;</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">subtitle</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;Ano: { closest_state }&quot;</span></span><span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">transition_states</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">ano</span><span style="color:#ABB2BF">)</span></span></code></pre>
</div>
<figure>
  <img src="/_astro/_unnamed-chunk-8-1.610be385.gif" alt="Animação mostrando a evolução no tempo dos homicídios, por causa de morte">

  
</figure>
<p>E que tal animarmos aquele gráfico do número acumulado? Vamos usar o
<code>gganimate::transition_reveal()</code> para revelar ao longo do eixo do tempo como os
números crescem.</p>


<div data-codeblock class="last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-[var(--code-bg)] text-[var(--code-fg)] border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;">
    <div class="flex pl-2 items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      <svg viewBox="0 0 128 128" width="1em" height="1em"><path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z"></path><path fill-rule="evenodd" d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z"></path></svg>

      <div class="rtl truncate font-mono" style="--code-bg: #282c34;--code-fg: #abb2bf;">
        r
      </div>
    </div>

    <div class="ml-auto flex flex-row gap-2 [&_svg]:h-6 [&_svg]:w-6 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">
      

      <astro-island uid="ZlDiGr" prefix="r11" component-url="/_astro/CopyCodeBlockButton.7cde34a4.js" component-export="default" renderer-url="/_astro/client.e2ed4c61.js" props="{&quot;successText&quot;:[0,&quot;Copiado!&quot;],&quot;errorText&quot;:[0,&quot;Erro ao copiar&quot;],&quot;code&quot;:[0,&quot;acumulado +\n  geom_segment(aes(\n    xend = 12.5,\n    yend = soma_cumulativa\n  ),\n  linetype = 2, color = \&quot;grey\&quot;\n  ) +\n  geom_text(aes(x = 13, label = paste0(\&quot;\&quot;, soma_cumulativa))) +\n  transition_reveal(mes)\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
    </div>
  </div>

  <pre class="shiki shadow-sm shadow-shadow rounded-b overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700" style="--code-bg: #282c34;--code-fg: #abb2bf;"><code class="language-r"><span class="line"><span style="color:#E06C75">acumulado</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_segment</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">xend</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">12.5</span><span style="color:#ABB2BF">,</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E06C75">yend</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">soma_cumulativa</span></span><span class="line"><span style="color:#ABB2BF">  ),</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">linetype</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">color</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;grey&quot;</span></span><span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">geom_text</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">aes</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">x</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">13</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">label</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">paste0</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">soma_cumulativa</span><span style="color:#ABB2BF">))) </span><span style="color:#56B6C2">+</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">transition_reveal</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">mes</span><span style="color:#ABB2BF">)</span></span></code></pre>
</div>
<figure>
  <img src="/_astro/_unnamed-chunk-9-1.e33061b6.gif" alt="Animação mostrando a evolução no tempo dos homicídios, por mês">

  
</figure>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="conclusões">
  
  Conclusões<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#conclusões"><span class="icon icon-link"></span></a>

</h2>
<p>Este post é certamente só uma amostra do pontecial do combo ggplot2 +
gganimate, talvez uma das maiores vantagens de se usar o R, e espero que te
ajude a criar as suas próprias visualizações, apesar de não ter sido exatamente
o intuito ser didático.</p>
<p>O gganimate é bem novo ainda e tem relativamente pouca informação sobre na
internet. Eu demorei bastante para fazer alguns desses gráficos, mas acho que o
resultado valeu a pena.</p>
<p>Para aprender mais sobre ggplot2, tente este
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="http://www.cookbook-r.com/Graphs/">cookbook</a> é ótimo. Para maiores referências
sobre animações, tente o respositório
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/ropenscilabs/learngganimate">learngganimate</a>, esse
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://cran.r-project.org/web/packages/gganimate/vignettes/gganimate.html">vignette</a>
ou o próprio <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://gganimate.com/">site do pacote</a>.</p>

          </div>
        </div>
      </article>

      <hr class="max-sm:full-bleed mt-8">

      <nav class="flex items-stretch sm:gap-4 max-sm:full-bleed sm:my-8" aria-label="Navegação entre posts">
  <a class="sm:card flex flex-1 flex-col gap-2 border-0 px-horizontal-padding py-4 transition-colors duration-300 hover:bg-hover" href="/pt/posts/spread-bancario-brasileiro-r/indexpt">
        <span class="text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><line x1="19" x2="5" y1="12" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
        </span>

        Spread bancário brasileiro: limpeza e visualização de dados
      </a>

  <div class="border-l border-divider sm:hidden"></div>

  <a class="sm:card flex flex-1 flex-col-reverse items-end justify-end gap-2 border-0 px-horizontal-padding py-4 text-right transition-colors duration-300 hover:bg-hover" href="/pt/posts/game-of-thrones-text-mining/indexpt">
        Mineração de Texto com as legendas de Game of Thrones

        <span class="text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right"><line x1="5" x2="19" y1="12" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
        </span>
      </a>
</nav>

      <hr class="max-sm:full-bleed mb-8">
    </div>
  </main>


    <footer class="border-t border-divider bg-background sm:border-0">
  <div class="mx-auto flex w-full max-w-content flex-col items-center px-horizontal-padding pt-4 pb-8 sm:justify-between">
    <nav aria-label="Contatos" class="flex gap-2 mb-2">
  <a id="contact-email" href="mailto:phelipe_teles@hotmail.com" aria-label="E-mail" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
  
</a>

  <a id="contact-linkedin" href="https://linkedin.com/in/phelipeteles" aria-label="LinkedIn" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg>
  
</a>

  <a id="contact-github" href="https://github.com/phelipetls" aria-label="GitHub" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>
  
</a>
</nav>

    <span class="text-center">
      
            All content is under a <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>
            license.
          
    </span>
  </div>
</footer>
  </body></html>