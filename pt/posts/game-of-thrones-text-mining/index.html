<!DOCTYPE html><html class="h-full min-h-0 text-base sm:text-lg selection:bg-primary selection:text-on-primary scroll-smooth scroll-pt-nav-height sm:scroll-pt-0" lang="pt-BR"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="deploy-date" content="2025-10-11"><meta name="author" content="Phelipe Teles"><meta name="color-scheme" content="dark light"><title>Mineração de Texto com as legendas de Game of Thrones - Phelipe Teles | Phelipe Teles</title><link rel="canonical" href="https://phelipetls.github.io/pt/posts/game-of-thrones-text-mining/"><meta name="description" content="Neste post procuro visualizar dados textuais das legendads de Game of Thrones
com o R, utilizando o pacote tidytext, que
torna trivial esse tipo de tarefa."><meta name="robots" content="index, follow"><meta property="og:title" content="Mineração de Texto com as legendas de Game of Thrones"><meta property="og:type" content="article"><meta property="og:image" content="https://phelipetls.github.io/pt/posts/game-of-thrones-text-mining/image.png"><meta property="og:url" content="https://phelipetls.github.io/pt/posts/game-of-thrones-text-mining/"><meta property="og:image:url" content="https://phelipetls.github.io/pt/posts/game-of-thrones-text-mining/image.png"><meta property="og:image:height"><meta property="og:image:alt" content="Blog Post Mineração de Texto com as legendas de Game of Thrones Preview Image"><meta property="article:published_time" content="2019-04-20T00:00:00Z"><meta property="article:author" content="Phelipe Teles"><meta property="article:tag" content="r"><meta name="twitter:card" content="summary_large_image"><meta content="https://phelipetls.github.io/pt/posts/game-of-thrones-text-mining/image.png" name="twitter:image"> <meta name="publish-date" content="2019-04-20"> <meta name="keywords" content="r"><meta name="description" content="Neste post procuro visualizar dados textuais das legendads de Game of Thrones
com o R, utilizando o pacote tidytext, que
torna trivial esse tipo de tarefa."> <style id="sandpack">--sxs{--sxs:0 light sp-482805736}@media{.light{--sp-space-1:4px;--sp-space-2:8px;--sp-space-3:12px;--sp-space-4:16px;--sp-space-5:20px;--sp-space-6:24px;--sp-space-7:28px;--sp-space-8:32px;--sp-space-9:36px;--sp-space-10:40px;--sp-space-11:44px;--sp-border-radius:4px;--sp-layout-height:300px;--sp-layout-headerHeight:40px;--sp-transitions-default:150ms ease;--sp-zIndices-base:1;--sp-zIndices-overlay:2;--sp-zIndices-top:3;--sp-colors-surface1:#ffffff;--sp-colors-surface2:#EFEFEF;--sp-colors-surface3:#F3F3F3;--sp-colors-disabled:#C5C5C5;--sp-colors-base:#323232;--sp-colors-clickable:#808080;--sp-colors-hover:#4D4D4D;--sp-colors-accent:#3973E0;--sp-colors-error:#EA3323;--sp-colors-errorSurface:#FCF1F0;--sp-colors-warning:#6A4516;--sp-colors-warningSurface:#FEF2C0;--sp-font-body:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--sp-font-mono:"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace;--sp-font-size:13px;--sp-font-lineHeight:20px;--sp-syntax-color-plain:#151515;--sp-syntax-color-comment:#999;--sp-syntax-fontStyle-comment:italic;--sp-syntax-color-keyword:#7C5AE3;--sp-syntax-color-tag:#0971F1;--sp-syntax-color-punctuation:#3B3B3B;--sp-syntax-color-definition:#85A600;--sp-syntax-color-property:#3B3B3B;--sp-syntax-color-static:#3B3B3B;--sp-syntax-color-string:#2E6BD0}.sp-482805736{--sp-space-1:4px;--sp-space-2:8px;--sp-space-3:12px;--sp-space-4:16px;--sp-space-5:20px;--sp-space-6:24px;--sp-space-7:28px;--sp-space-8:32px;--sp-space-9:36px;--sp-space-10:40px;--sp-space-11:44px;--sp-border-radius:4px;--sp-layout-height:300px;--sp-layout-headerHeight:40px;--sp-transitions-default:150ms ease;--sp-zIndices-base:1;--sp-zIndices-overlay:2;--sp-zIndices-top:3;--sp-colors-surface1:#282c34;--sp-colors-surface2:#21252b;--sp-colors-surface3:#2c313c;--sp-colors-disabled:#4d4d4d;--sp-colors-base:#a8b1c2;--sp-colors-clickable:#a8b1c2;--sp-colors-hover:#e8effc;--sp-colors-accent:#c678dd;--sp-colors-error:#e06c75;--sp-colors-errorSurface:#ffeceb;--sp-colors-warning:#E7C400;--sp-colors-warningSurface:#3A3000;--sp-font-body:"Fira Sans", sans-serif;--sp-font-mono:Consolas, Menlo, Monaco, "Fira Code", monospace;--sp-font-size:1rem;--sp-font-lineHeight:1.5;--sp-syntax-color-plain:#a8b1c2;--sp-syntax-color-comment:#757575;--sp-syntax-fontStyle-comment:italic;--sp-syntax-color-keyword:#c678dd;--sp-syntax-color-tag:#e06c75;--sp-syntax-color-punctuation:#a8b1c2;--sp-syntax-color-definition:#62aeef;--sp-syntax-color-property:#d19a66;--sp-syntax-color-static:#a8b1c2;--sp-syntax-color-string:#98c379}}--sxs{--sxs:1 sp-k-eyOShd sp-k-iOHdLQ}@media{@keyframes sp-k-eyOShd{0%{opacity:0}100%{opacity:1}}@keyframes sp-k-iOHdLQ{0%{transform:rotateX(-25.5deg) rotateY(45deg)}100%{transform:rotateX(-25.5deg) rotateY(405deg)}}}--sxs{--sxs:2 sp-c-gMfcns sp-c-bxeRRt sp-c-hfoyCM sp-c-fWymNx sp-c-euXojQ sp-c-bpmgvy sp-c-PJLV sp-c-fVPbOs sp-c-gtcpyq sp-c-jOWzsE sp-c-jkvvao sp-c-juMdfR sp-c-fgviib sp-c-kwibBT sp-c-ivYAPe sp-c-lgESqD sp-c-cUFVvP sp-c-jzEuAZ}@media{.sp-c-gMfcns svg{margin:auto}.sp-c-bxeRRt{-webkit-appearance:none;appearance:none;outline:none;display:flex;align-items:center;font-size:inherit;font-family:inherit;background-color:transparent;transition:color var(--sp-transitions-default), background var(--sp-transitions-default);cursor:pointer;color:var(--sp-colors-clickable);border:0;text-decoration:none}.sp-c-bxeRRt:disabled{color:var(--sp-colors-disabled)}.sp-c-bxeRRt:hover:not(:disabled,[data-active='true']){color:var(--sp-colors-hover)}.sp-c-bxeRRt[data-active="true"]{color:var(--sp-colors-accent)}.sp-c-bxeRRt svg{min-width:var(--sp-space-4);width:var(--sp-space-4);height:var(--sp-space-4)}.sp-c-bxeRRt.sp-c-gMfcns{padding:var(--sp-space-1);height:var(--sp-space-7);display:flex}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:not(:has(span)){width:var(--sp-space-7)}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:has(svg + span){padding-right:var(--sp-space-3);padding-left:var(--sp-space-2);gap:var(--sp-space-1)}.sp-c-hfoyCM{padding:0 var(--sp-space-1) 0 var(--sp-space-1);border-radius:var(--sp-border-radius);margin-left:var(--sp-space-1);width:var(--sp-space-5);visibility:hidden}.sp-c-hfoyCM svg{width:var(--sp-space-3);height:var(--sp-space-3);display:block;position:relative;top:1px}.sp-c-fWymNx{margin:0;display:block;font-family:var(--sp-font-mono);font-size:var(--sp-font-size);color:var(--sp-syntax-color-plain);line-height:var(--sp-font-lineHeight)}.sp-c-euXojQ{display:flex;flex-direction:column;width:100%;position:relative;background-color:var(--sp-colors-surface1);gap:1px}.sp-c-euXojQ:has(.sp-stack){background-color:var(--sp-colors-surface2)}.sp-c-bpmgvy{transform:translate(-4px, 9px) scale(0.13, 0.13)}.sp-c-bpmgvy *{position:absolute;width:96px;height:96px}.sp-c-fVPbOs{all:initial;font-size:var(--sp-font-size);font-family:var(--sp-font-body);display:block;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-tap-highlight-color:transparent;-webkit-font-smoothing:subpixel-antialiased}@media screen and (min-resolution: 2dppx){.sp-c-fVPbOs{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}.sp-c-fVPbOs *{box-sizing:border-box}.sp-c-fVPbOs .sp-wrapper:focus{outline:0}.sp-c-gtcpyq{flex:1;position:relative;overflow:auto;background:var(--sp-colors-surface1)}.sp-c-gtcpyq .cm-scroller{padding:var(--sp-space-4) 0}.sp-c-gtcpyq .sp-c-fWymNx{padding:var(--sp-space-4) 0}@media screen and (max-width: 768px){@supports (-webkit-overflow-scrolling: touch){.sp-c-gtcpyq .cm-content{font-size:16px}}}.sp-c-jOWzsE{margin:0;outline:none;height:100%}.sp-c-jkvvao .sp-syntax-string{color:var(--sp-syntax-color-string);font-style:var(--sp-syntax-fontStyle-string)}.sp-c-jkvvao .sp-syntax-plain{color:var(--sp-syntax-color-plain);font-style:var(--sp-syntax-fontStyle-plain)}.sp-c-jkvvao .sp-syntax-comment{color:var(--sp-syntax-color-comment);font-style:var(--sp-syntax-fontStyle-comment)}.sp-c-jkvvao .sp-syntax-keyword{color:var(--sp-syntax-color-keyword);font-style:var(--sp-syntax-fontStyle-keyword)}.sp-c-jkvvao .sp-syntax-definition{color:var(--sp-syntax-color-definition);font-style:var(--sp-syntax-fontStyle-definition)}.sp-c-jkvvao .sp-syntax-punctuation{color:var(--sp-syntax-color-punctuation);font-style:var(--sp-syntax-fontStyle-punctuation)}.sp-c-jkvvao .sp-syntax-property{color:var(--sp-syntax-color-property);font-style:var(--sp-syntax-fontStyle-property)}.sp-c-jkvvao .sp-syntax-tag{color:var(--sp-syntax-color-tag);font-style:var(--sp-syntax-fontStyle-tag)}.sp-c-jkvvao .sp-syntax-static{color:var(--sp-syntax-color-static);font-style:var(--sp-syntax-fontStyle-static)}.sp-c-juMdfR{flex:1;display:flex;flex-direction:column;background:white;overflow:auto;position:relative}.sp-c-juMdfR .sp-bridge-frame{border:0;position:absolute;left:var(--sp-space-2);bottom:var(--sp-space-2);z-index:var(--sp-zIndices-top);height:12px;width:30%;mix-blend-mode:multiply;pointer-events:none}.sp-c-fgviib{border:0;outline:0;width:100%;height:100%;min-height:160px;max-height:2000px;flex:1}.sp-c-kwibBT{display:flex;position:absolute;bottom:var(--sp-space-2);right:var(--sp-space-2);z-index:var(--sp-zIndices-overlay);gap:var(--sp-space-2)}.sp-c-ivYAPe{padding:0}.sp-c-lgESqD{min-width:var(--sp-space-6);justify-content:center}.sp-c-cUFVvP{display:flex;align-items:center;height:var(--sp-layout-headerHeight);border-bottom:1px solid var(--sp-colors-surface2);padding:var(--sp-space-3) var(--sp-space-2);background:var(--sp-colors-surface1)}.sp-c-jzEuAZ{background-color:var(--sp-colors-surface2);color:var(--sp-colors-clickable);padding:var(--sp-space-1) var(--sp-space-3);border-radius:99999px;border:1px solid var(--sp-colors-surface2);height:24px;line-height:24px;font-size:inherit;outline:none;flex:1;margin-left:var(--sp-space-4);width:0;transition:background var(--sp-transitions-default)}.sp-c-jzEuAZ:hover{background-color:var(--sp-colors-surface3)}.sp-c-jzEuAZ:focus{background-color:var(--sp-colors-surface1);border:1px solid var(--sp-colors-accent);color:var(--sp-colors-base)}}--sxs{--sxs:3 sp-c-PJLV-kCOVwI-status-pass sp-c-PJLV-kEzYsr-status-fail sp-c-PJLV-gHAhSA-status-skip sp-c-PJLV-jgnHyR-status-title sp-c-PJLV-iCgxLS-status-run sp-c-PJLV-bnDZSy-status-pass sp-c-PJLV-eYuGwt-status-fail sp-c-fVPbOs-gMQIch-variant-light sp-c-fVPbOs-LrWkf-variant-dark}@media{.sp-c-PJLV-kCOVwI-status-pass{color:var(--test-pass)}.sp-c-PJLV-kEzYsr-status-fail{color:var(--test-fail)}.sp-c-PJLV-gHAhSA-status-skip{color:var(--test-skip)}.sp-c-PJLV-jgnHyR-status-title{color:var(--test-title)}.sp-c-PJLV-iCgxLS-status-run{background:var(--test-run);color:var(--sp-colors-surface1)}.sp-c-PJLV-bnDZSy-status-pass{background:var(--test-pass);color:var(--sp-colors-surface1)}.sp-c-PJLV-eYuGwt-status-fail{background:var(--test-fail);color:var(--sp-colors-surface1)}.sp-c-fVPbOs-gMQIch-variant-light{color-scheme:light}.sp-c-fVPbOs-LrWkf-variant-dark{color-scheme:dark}}</style> <link rel="stylesheet" href="/_astro/_id_.q1pg320X.css">
<link rel="stylesheet" href="/_astro/_id_.Ck7a8zcL.css"></head> <body data-preload class="relative flex h-full flex-col bg-background font-sans text-on-background [&_main]:my-6"> <script>
  // @ts-check
  const storedThemeChoice = window.localStorage.getItem('__theme') ?? 'system'

  window.__setTheme = setTheme
  // prettier-ignore
  window.__setTheme(/** @type {ThemeChoice} */ (storedThemeChoice))

  /**
   * @type {(themeChoice: ThemeChoice) => void}
   */
  function setTheme(themeChoice) {
    let theme = themeChoice

    if (themeChoice === 'system') {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    document.body.classList.toggle('dark', theme === 'dark')

    window.localStorage.setItem('__theme', themeChoice)

    document.body.dispatchEvent(
      new CustomEvent('newTheme', {
        detail: {
          themeChoice,
          theme,
        },
      }),
    )
  }

  window.addEventListener('storage', function (e) {
    const newTheme = e.newValue
    if (newTheme && newTheme && e.key === '__theme') {
      // prettier-ignore
      window.__setTheme(/** @type {ThemeChoice} */ (newTheme))
    }
  })

  window.addEventListener('load', function () {
    document.querySelectorAll('[data-preload]').forEach((elem) => {
      elem.removeAttribute('data-preload')
    })
  })
</script> <div class="w-full"> <div class="pt-nav-height sm:hidden"> <div class="h-nav-height fixed top-0 left-0 z-30 flex w-screen items-center justify-between rounded-none bg-background/90 backdrop-blur-xs px-horizontal-padding"> <div class="flex flex-row items-center gap-2 min-w-0"> <a href="/pt/posts/" data-testid="parent-page-link" aria-label="Voltar à pagina anterior"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left "><path d="m15 18-6-6 6-6"></path></svg> </a> <h2 class="m-0 truncate font-sans font-normal">Mineração de Texto com as legendas de Game of Thrones - Phelipe Teles</h2> </div> <button type="button" class="hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 bg-transparent" data-a11y-dialog-show="sidenav" data-testid="open-sidenav" aria-label="Abrir barra de navegação lateral"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu "><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg> </button> </div> </div> <div class="hidden h-full w-full sm:block"> <div class="grid grid-cols-layout"> <div class="flex w-full items-center justify-between"> <div class="mx-auto flex w-full max-w-content justify-between"> <nav class="flex justify-between" aria-label="Navegação principal"> <ul class="m-0 flex flex-row list-none gap-4"> <li class=""> <a id="about" href="/pt/" class="py-2 inline-block h-full w-full group"> <span class="underline underline-offset-8 decoration-2 decoration-transparent group-hover:decoration-hover"> Sobre </span> </a> </li><li class=""> <a id="posts" href="/pt/posts/" class="py-2 inline-block h-full w-full group" aria-current="page"> <span class="underline underline-offset-8 decoration-2 decoration-primary group-hover:decoration-primary-hover"> Posts </span> </a> </li> </ul> </nav> <div class="flex flex-row items-center gap-2">  <div style="--cols:3;--select-padding:24px" class="px-1 rounded-sm items-center grid auto-cols-max justify-between bg-surface shadow-xs shadow-shadow"> <select class="py-1 sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-theme-select="true" aria-label="Escolha um tema" style="--select-padding:32px">  <option value="light">Claro</option> <option value="dark">Escuro</option> <option value="system">Sistema</option>   </select> <span class="col-span-1 col-start-1 row-start-1 text-sm">  <svg class="feather" viewBox="0 0 24 24" width="24" height="24"> <title>Ícone do tema</title> <defs> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon " id="moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun " id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor " id="monitor"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg> </defs> <use data-theme-select-icon href="#monitor"></use> </svg>  </span> <span class="justify-self-end row-start-1 col-start-3 col-span-1 text-sm">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div> <script type="module">const i=document.querySelectorAll("[data-theme-select]");i?.forEach(e=>{const t=window.localStorage.getItem("__theme")??"system";s(t);const o=Array.from(e.options).find(n=>n.value===t);o&&o.setAttribute("selected",""),e.addEventListener("change",function(n){if(!n.target)return;const c=n.target.selectedOptions[0];c&&window.__setTheme(c.value)})});document.body.addEventListener("newTheme",function(e){const t=e.detail.themeChoice;s(t)});function s(e){const t={dark:"#moon",light:"#sun",system:"#monitor"}[e];i.forEach(o=>{o.parentElement?.querySelector("[data-theme-select-icon]")?.setAttribute("href",t)})}</script> </div> </div> </div> </div> </div> </div> <aside data-a11y-dialog="sidenav" aria-hidden="true" class="fixed z-50 h-full w-full" style="visibility: hidden;"> <div data-a11y-dialog-hide class="fixed inset-0 -z-1 w-full bg-neutral-700 bg-opacity-75 backdrop-blur-xs"></div> <div role="document" class="ml-auto h-full flex flex-col w-3/4 rounded-none bg-background py-0 will-change-transform"> <div class="mb-2 flex h-nav-height items-center justify-end px-horizontal-padding"> <button type="button" data-a11y-dialog-hide="true" aria-label="Close" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x "><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> </button> </div> <nav class="flex flex-col" aria-label="Navegação principal"> <ul class="m-0 flex list-none flex-col items-center justify-center gap-2 px-horizontal-padding"> <li class="w-full"> <a id="about" href="/pt/" class="flex items-center justify-center flex-row transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded-sm whitespace-nowrap py-1 px-2 bg-surface text-on-background"><div class="pr-2"></div>Sobre<div class="pl-2"></div></a> </li><li class="w-full"> <a id="posts" href="/pt/posts/" aria-current="page" class="flex items-center justify-center flex-row transition-colors duration-300 disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded-sm whitespace-nowrap py-1 px-2 bg-primary text-on-primary hover:bg-primary-hover shadow-xs shadow-shadow"><div class="pr-2"></div>Posts<div class="pl-2"></div></a> </li> </ul> </nav> <div class="flex flex-col gap-2 pb-4 mt-auto px-horizontal-padding [&_div]:flex-1"> <div style="--cols:3;--select-padding:24px" class="px-1 rounded-sm items-center grid auto-cols-max justify-between bg-background"> <select class="py-1 sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-language-select="true" aria-label="Escolha a linguagem" style="--select-padding:32px">  <option value="en">English</option> <option selected value="pt">Português</option>   </select> <span class="col-span-1 col-start-1 row-start-1 text-sm">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages " slot="start-icon"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg>  </span> <span class="justify-self-end row-start-1 col-start-3 col-span-1 text-sm">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div> <script type="module">const a=document.querySelectorAll("[data-language-select]");a?.forEach(e=>{e.addEventListener("change",function(){window.location.href=n()})});function n(){const e=window.location.pathname;let t=e;switch(e){case"/pt":t="/";break;case"/":t="/pt/";break;default:e.startsWith("/pt/")?t=e.replace("/pt/","/"):t="/pt"+e;break}return t}</script> <div style="--cols:3;--select-padding:24px" class="px-1 rounded-sm items-center grid auto-cols-max justify-between bg-surface shadow-xs shadow-shadow"> <select class="py-1 sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-theme-select="true" aria-label="Escolha um tema" style="--select-padding:32px">  <option value="light">Claro</option> <option value="dark">Escuro</option> <option value="system">Sistema</option>   </select> <span class="col-span-1 col-start-1 row-start-1 text-sm">  <svg class="feather" viewBox="0 0 24 24" width="24" height="24"> <title>Ícone do tema</title> <defs> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon " id="moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun " id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor " id="monitor"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg> </defs> <use data-theme-select-icon href="#monitor"></use> </svg>  </span> <span class="justify-self-end row-start-1 col-start-3 col-span-1 text-sm">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div>  </div> </div> </aside> <script type="module" src="/_astro/SideNav.astro_astro_type_script_index_0_lang.DwDLKeHA.js"></script>   <main class="grid grid-cols-layout"> <div class="sm:col-content px-0"> <article> <header class="flex flex-col"> <h1 class="mb-4 text-4xl max-w-prose"> Mineração de Texto com as legendas de Game of Thrones </h1> <div class="mb-4 flex gap-2 flex-row flex-wrap"> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="1.25em" height="1.25em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar shrink-0"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg> <time datetime="2019-04-20"> 20  de  abril, 2019 </time> </div> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="1.25em" height="1.25em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-timer shrink-0"><line x1="10" x2="14" y1="2" y2="2"></line><line x1="12" x2="15" y1="14" y2="11"></line><circle cx="12" cy="14" r="8"></circle></svg> <div>11 min.</div> </div> <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover flex flex-row gap-2 items-center shrink-0" target="_blank" href="https://github.com/phelipetls/blog/blob/master/src/content/posts/game-of-thrones-text-mining/index.pt.mdx"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-code2 "><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m9 18 3-3-3-3"></path><path d="m5 12-3 3 3 3"></path></svg> Código fonte</a> </div> <div class="mb-4 flex max-w-xl flex-wrap gap-2"> <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-1" href="/pt/tags/r/"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> r  </a> <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-2" href="/pt/tags/">  ...  </a> </div> </header> <hr class="my-8"> <div data-blog-post-container data-toc="open" class="group flex flex-col lg:gap-8 lg:flex-row-reverse"> <aside style="--offset-from-top:1rem" class="relative shrink-0 mb-8 lg:ml-auto lg:mb-0 lg:basis-1/3 lg:sticky lg:top-(--offset-from-top) lg:h-[calc(100vh-var(--offset-from-top)*2)] overflow-hidden"> <button type="button" data-toggle-toc="true" data-open-toc-label="Abrir tabela de conteúdo" data-closed-toc-label="Fechar tabela de conteúdo" aria-label="Fechar tabela de conteúdo" style="--duration:150ms" data-preload="true" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary duration-300 min-w-[40px] h-[40px] justify-center items-center rounded-full px-2 z-1 absolute top-4 right-4 hidden lg:grid lg:min-w-0 lg:group-data-toc-open:grid-cols-[0fr_max-content] lg:group-data-toc-closed:grid-cols-[1fr_max-content] transition-all duration-(--duration) ease-in-out lg:justify-center"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-(--duration) ease-out group-data-toc-open:scale-100 group-data-toc-open:delay-(--duration)"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-(--duration) ease-in group-data-toc-closed:scale-100 group-data-toc-closed:delay-[var(--duration)"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg> <div class="col-start-1 col-end-1 group-data-toc-closed:mx-2 truncate"> Abrir tabela de conteúdo </div> </button> <div data-blog-post-toc-container data-preload class="card lg:h-full lg:p-4 lg:ml-auto lg:opacity-100 lg:group-data-toc-closed:opacity-0 lg:group-data-toc-closed:pointer-events-none transition-opacity duration-300 ease-in-out"> <div class="hidden lg:flex lg:h-full lg:flex-col"> <div class="flex items-center gap-2 h-10 flex-none"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list "><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg> <h2 class="m-0">Tabela de conteúdo</h2> <div class="ml-auto flex items-center transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg> </div> </div> <nav data-toc-wrapper class="pt-4 h-full min-h-0 lg:overflow-y-auto [&#38;_a_*]:indent-0 [&#38;_ol]:m-0 [&#38;_ol]:list-none [&#38;_ol]:indent-4 [&#38;_ol_li[data-active]>a]:text-primary [&#38;_ol_li[data-active]]:before:bg-primary [&#38;_ol_li]:relative [&#38;_ol_li]:before:absolute [&#38;_ol_li]:before:left-0 [&#38;_ol_li]:before:top-0 [&#38;_ol_li]:before:h-full [&#38;_ol_li]:before:w-px [&#38;_ol_li]:before:bg-divider [&#38;_ol_li]:before:content-[''] [&#38;_ol_li_a:hover]:bg-hover [&#38;_ol_li_a]:block [&#38;_ol_li_a]:truncate [&#38;_ol_li_a]:border-b-0 [&#38;_ol_li_a]:transition-colors [&#38;_ol_li_a]:duration-300 [&#38;_ol_ol]:indent-8 [&#38;_ol_ol_ol]:indent-12 [&#38;_ol_ol_ol_ol]:indent-16"> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#obtendo-os-dados">Obtendo os dados</a>  </li><li data-astro-toc="1"> <a href="#correlação-entre-as-palavras">Correlação entre as palavras</a>  </li><li data-astro-toc="1"> <a href="#palavras-mais-frequentes">Palavras mais frequentes</a>  </li><li data-astro-toc="1"> <a href="#análise-de-sentimentos">Análise de sentimentos</a>  </li></ol> </nav> </div> <details class="group px-horizontal-padding py-4 lg:hidden" aria-label="Tabela de conteúdo"> <summary class="list-none"> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list "><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg> <h2 class="m-0">Tabela de conteúdo</h2> <div class="flex items-center ml-auto transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg> </div> </div> </summary> <nav data-toc-wrapper class="mt-4 [&#38;_ol]:m-0 [&#38;_ol]:list-outside [&#38;_ol]:px-horizontal-padding [&#38;_ol_li:not(:first-child)]:mt-1"> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#obtendo-os-dados">Obtendo os dados</a>  </li><li data-astro-toc="1"> <a href="#correlação-entre-as-palavras">Correlação entre as palavras</a>  </li><li data-astro-toc="1"> <a href="#palavras-mais-frequentes">Palavras mais frequentes</a>  </li><li data-astro-toc="1"> <a href="#análise-de-sentimentos">Análise de sentimentos</a>  </li></ol> </nav> </details> <script type="module">const s=document.querySelector("nav[data-toc-wrapper] ol"),o=s?.closest("[data-toc-wrapper]"),l=document.querySelector("[data-blog-post]"),a=s?.querySelector("li");function u(t){t.setAttribute("data-active","")}function d(t){t.removeAttribute("data-active")}function f(){s?.querySelectorAll("li").forEach(d)}function g(t){const e=t.getAttribute("id"),c=s?.querySelector(`li a[href="#${e}"]`);return c?c.closest("li"):null}const h=new IntersectionObserver(t=>{t.forEach(e=>{if(!o)return;const c=e.target;if(e.isIntersecting){const n=g(c);if(!n)return;f(),u(n);const r=o.getBoundingClientRect(),i=n.getBoundingClientRect();if(n===a){o.scrollTop=0;return}if(r.top>i.top){o.scrollTop-=r.top-i.top;return}i.bottom>r.bottom&&(o.scrollTop+=i.bottom-r.bottom)}})},{threshold:1}),m=l.querySelectorAll("h2, h3, h4, h4, h6");for(const t of m)h.observe(t);</script> </div> </aside> <div data-blog-post class="min-w-0 [&#38;>pre]:my-8 max-sm:[&#38;>pre]:full-bleed *:data-codeblock:my-8 max-sm:*:data-codeblock:full-bleed max-sm:[&#38;>[data-codeblock]_pre]:rounded-none max-sm:[&#38;>[data-codeblock]_[data-codeblock-header]]:rounded-none [&#38;>hr]:border-0 [&#38;>hr]:text-center [&#38;>hr]:after:content-['⁂'] max-sm:[&#38;>figure]:full-bleed [&#38;>astro-island>div]:my-8 [&#38;>lite-youtube]:my-8 [&#38;>blockquote]:my-8 [&#38;>figure_video]:min-h-[15em] [&#38;_.katex-display]:max-w-prose [&#38;_.katex-display]:overflow-x-auto [&#38;_.katex-display]:overflow-y-hidden"> <p class="max-w-prose">Neste post procuro visualizar dados textuais das legendads de Game of Thrones
com o R, utilizando o pacote <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://www.tidytextmining.com"><code>tidytext</code></a>, que
torna trivial esse tipo de tarefa.</p>
<p class="max-w-prose">A ideia é transformar um bloco de texto, como um livro, em um tidy DataFrame. No
nosso, caso faremos com as legendas de GOT.</p>
<h2 id="obtendo-os-dados" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Obtendo os dados<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#obtendo-os-dados"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Os dados brutos foram coletados
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://www.kaggle.com/gunnvant/game-of-thrones-srt">aqui</a>, formato JSON. São 7
arquivos, que contêm todas as legendas para as sete temporadas de GOT.
Felizmente, há uma biblioteca para ler arquivos JSON no R, o <code>jsonlite</code>.</p>
<p class="max-w-prose">No código abaixo, o que fiz foi ler cada arquivo, aplicando a função
<code>jsonlite::fromJSON()</code> a cada um deles com <code>purrr::map()</code>, o que me dá uma
lista. Depois, transformei essa lista em um vetor com <code>unlist()</code>, que por fim
transformei em um data.frame com <code>tibble::enframe()</code>.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="ZOdiSP" prefix="r70" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;library(jsonlite)\nlibrary(tidyverse)\n\nsetwd(\&quot;~/got_subtitles/\&quot;)\n\n# vetor com o endereço dos arquivos\narquivos &lt;- dir(path = getwd(), pattern = \&quot;json$\&quot;, full.names = T)\n\n# lendo os arquivos\ngot_subs_raw &lt;- map(arquivos, ~ fromJSON(.x)) %&gt;%\n  unlist() %&gt;%\n  enframe()\n\ngot_subs_raw&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(jsonlite)</span></span>
<span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(tidyverse)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2">setwd</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"~/got_subtitles/"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># vetor com o endereço dos arquivos</span></span>
<span class="line"><span style="color:#ABB2BF">arquivos </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#56B6C2"> dir</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">path</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> getwd</span><span style="color:#ABB2BF">(), </span><span style="color:#E06C75;font-style:italic">pattern</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "json$"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">full.names</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic"># lendo os arquivos</span></span>
<span class="line"><span style="color:#ABB2BF">got_subs_raw </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> map(arquivos, </span><span style="color:#C678DD">~</span><span style="color:#ABB2BF"> fromJSON(.x)) %>%</span></span>
<span class="line"><span style="color:#56B6C2">  unlist</span><span style="color:#ABB2BF">() %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  enframe()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">got_subs_raw</span></span></code></pre> </div> <script type="module" src="/_astro/CodeBlock.astro_astro_type_script_index_0_lang.CZ7V3yCn.js"></script>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="22NliF" prefix="r71" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 44,890 x 2\n##    name                             value\n##    &lt;chr&gt;                            &lt;chr&gt;\n##  1 Game Of Thrones S01E01 Winter I~ Easy, boy.\n##  2 Game Of Thrones S01E01 Winter I~ Our orders were to track the wildlings.\n##  3 Game Of Thrones S01E01 Winter I~ - Right. Give it here. - No!\n##  4 Game Of Thrones S01E01 Winter I~ Put away your blade.\n##  5 Game Of Thrones S01E01 Winter I~ - I take orders from your father, not ~\n##  6 Game Of Thrones S01E01 Winter I~ I&#39;m sorry, Bran.\n##  7 Game Of Thrones S01E01 Winter I~ Lord Stark?\n##  8 Game Of Thrones S01E01 Winter I~ There are five pups.\n##  9 Game Of Thrones S01E01 Winter I~ One for each of the Stark children.\n## 10 Game Of Thrones S01E01 Winter I~ The direwolf is the sigil of your hous~\n## # ... with 44,880 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 44,890 x 2</span></span>
<span class="line"><span>##    name                             value</span></span>
<span class="line"><span>##    &#x3C;chr>                            &#x3C;chr></span></span>
<span class="line"><span>##  1 Game Of Thrones S01E01 Winter I~ Easy, boy.</span></span>
<span class="line"><span>##  2 Game Of Thrones S01E01 Winter I~ Our orders were to track the wildlings.</span></span>
<span class="line"><span>##  3 Game Of Thrones S01E01 Winter I~ - Right. Give it here. - No!</span></span>
<span class="line"><span>##  4 Game Of Thrones S01E01 Winter I~ Put away your blade.</span></span>
<span class="line"><span>##  5 Game Of Thrones S01E01 Winter I~ - I take orders from your father, not ~</span></span>
<span class="line"><span>##  6 Game Of Thrones S01E01 Winter I~ I'm sorry, Bran.</span></span>
<span class="line"><span>##  7 Game Of Thrones S01E01 Winter I~ Lord Stark?</span></span>
<span class="line"><span>##  8 Game Of Thrones S01E01 Winter I~ There are five pups.</span></span>
<span class="line"><span>##  9 Game Of Thrones S01E01 Winter I~ One for each of the Stark children.</span></span>
<span class="line"><span>## 10 Game Of Thrones S01E01 Winter I~ The direwolf is the sigil of your hous~</span></span>
<span class="line"><span>## # ... with 44,880 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">Agora vamos limpar esse DataFrame, procurando extrair variáveis interessantes
como temporada, número e nome do episódio etc.</p>
<p class="max-w-prose">Primeiro vamos retirar o prefixo ‘Game of Throns S’, o que nos deixa com ‘01E01
Winter Is Coming’, <code>{Temporada}E{Episódio} {Nome do episódio}</code>. Vamos usar
regexes para extrair cada parte individualmente.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1o2cJK" prefix="r72" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_subs &lt;- got_subs_raw %&gt;%\n  mutate(\n    name = str_remove(name, \&quot;Game Of Thrones S\&quot;),\n    season_episode = str_extract(name, \&quot;\\\\d+E\\\\d+\&quot;),\n    name = str_match(name, \&quot;([A-z,&#39; ]+)\\\\.srt\&quot;)[, 2] %&gt;% trimws()\n  ) %&gt;%\n\n  # separando a temporada do episódio\n  separate(season_episode, c(\&quot;season\&quot;, \&quot;episode\&quot;), sep = \&quot;E\&quot;) %&gt;%\n\n  # transformando o que é número para numeric\n  mutate(\n    season = as.numeric(season),\n    episode = as.numeric(episode)\n  ) %&gt;%\n  select(season, episode, name, value)\n\ngot_subs&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_subs </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> got_subs_raw %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    name</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> str_remove(name, </span><span style="color:#98C379">"Game Of Thrones S"</span><span style="color:#ABB2BF">),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    season_episode</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> str_extract(name, </span><span style="color:#98C379">"</span><span style="color:#56B6C2">\\</span><span style="color:#98C379">d+E</span><span style="color:#56B6C2">\\</span><span style="color:#98C379">d+"</span><span style="color:#ABB2BF">),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    name</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> str_match(name, </span><span style="color:#98C379">"([A-z,' ]+)</span><span style="color:#56B6C2">\\</span><span style="color:#98C379">.srt"</span><span style="color:#ABB2BF">)[, </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">] %>% </span><span style="color:#56B6C2">trimws</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">  ) %>%</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  # separando a temporada do episódio</span></span>
<span class="line"><span style="color:#ABB2BF">  separate(season_episode, </span><span style="color:#56B6C2">c</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"season"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"episode"</span><span style="color:#ABB2BF">), </span><span style="color:#E06C75;font-style:italic">sep</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "E"</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  # transformando o que é número para numeric</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    season</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> as.numeric</span><span style="color:#ABB2BF">(season),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    episode</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> as.numeric</span><span style="color:#ABB2BF">(episode)</span></span>
<span class="line"><span style="color:#ABB2BF">  ) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  select(season, episode, name, value)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">got_subs</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="25syrV" prefix="r73" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 44,890 x 4\n##    season episode name          value\n##     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;\n##  1      1       1 Winter Is Co~ Easy, boy.\n##  2      1       1 Winter Is Co~ Our orders were to track the wildlings.\n##  3      1       1 Winter Is Co~ - Right. Give it here. - No!\n##  4      1       1 Winter Is Co~ Put away your blade.\n##  5      1       1 Winter Is Co~ - I take orders from your father, not you.~\n##  6      1       1 Winter Is Co~ I&#39;m sorry, Bran.\n##  7      1       1 Winter Is Co~ Lord Stark?\n##  8      1       1 Winter Is Co~ There are five pups.\n##  9      1       1 Winter Is Co~ One for each of the Stark children.\n## 10      1       1 Winter Is Co~ The direwolf is the sigil of your house.\n## # ... with 44,880 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 44,890 x 4</span></span>
<span class="line"><span>##    season episode name          value</span></span>
<span class="line"><span>##     &#x3C;dbl>   &#x3C;dbl> &#x3C;chr>         &#x3C;chr></span></span>
<span class="line"><span>##  1      1       1 Winter Is Co~ Easy, boy.</span></span>
<span class="line"><span>##  2      1       1 Winter Is Co~ Our orders were to track the wildlings.</span></span>
<span class="line"><span>##  3      1       1 Winter Is Co~ - Right. Give it here. - No!</span></span>
<span class="line"><span>##  4      1       1 Winter Is Co~ Put away your blade.</span></span>
<span class="line"><span>##  5      1       1 Winter Is Co~ - I take orders from your father, not you.~</span></span>
<span class="line"><span>##  6      1       1 Winter Is Co~ I'm sorry, Bran.</span></span>
<span class="line"><span>##  7      1       1 Winter Is Co~ Lord Stark?</span></span>
<span class="line"><span>##  8      1       1 Winter Is Co~ There are five pups.</span></span>
<span class="line"><span>##  9      1       1 Winter Is Co~ One for each of the Stark children.</span></span>
<span class="line"><span>## 10      1       1 Winter Is Co~ The direwolf is the sigil of your house.</span></span>
<span class="line"><span>## # ... with 44,880 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">Podemos tornar isso se quebrarmos a coluna <code>value</code> em unidades menores, como
palavras. O pacote <code>tidytext</code> tem uma função para isso, chamada <code>unnest_tokens</code>.
É mais geral e pode servir para separar um texto em caracteres, frases,
parágrafos etc.</p>
<p class="max-w-prose">Será útil também a função <code>rownames_to_column</code>, para podermos saber quais
palavras pertencem à mesma frase após a separação etc.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1kRbmD" prefix="r74" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;library(tidytext)\n\ngot_words &lt;- got_subs %&gt;%\n  rownames_to_column() %&gt;%\n  unnest_tokens(word, value)\n\ngot_words&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(tidytext)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">got_words </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> got_subs %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  rownames_to_column() %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  unnest_tokens(word, value)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">got_words</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="2oAUMU" prefix="r75" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 286,901 x 5\n##    rowname season episode name             word\n##    &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;\n##  1 1            1       1 Winter Is Coming easy\n##  2 1            1       1 Winter Is Coming boy\n##  3 2            1       1 Winter Is Coming our\n##  4 2            1       1 Winter Is Coming orders\n##  5 2            1       1 Winter Is Coming were\n##  6 2            1       1 Winter Is Coming to\n##  7 2            1       1 Winter Is Coming track\n##  8 2            1       1 Winter Is Coming the\n##  9 2            1       1 Winter Is Coming wildlings\n## 10 3            1       1 Winter Is Coming right\n## # ... with 286,891 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 286,901 x 5</span></span>
<span class="line"><span>##    rowname season episode name             word</span></span>
<span class="line"><span>##    &#x3C;chr>    &#x3C;dbl>   &#x3C;dbl> &#x3C;chr>            &#x3C;chr></span></span>
<span class="line"><span>##  1 1            1       1 Winter Is Coming easy</span></span>
<span class="line"><span>##  2 1            1       1 Winter Is Coming boy</span></span>
<span class="line"><span>##  3 2            1       1 Winter Is Coming our</span></span>
<span class="line"><span>##  4 2            1       1 Winter Is Coming orders</span></span>
<span class="line"><span>##  5 2            1       1 Winter Is Coming were</span></span>
<span class="line"><span>##  6 2            1       1 Winter Is Coming to</span></span>
<span class="line"><span>##  7 2            1       1 Winter Is Coming track</span></span>
<span class="line"><span>##  8 2            1       1 Winter Is Coming the</span></span>
<span class="line"><span>##  9 2            1       1 Winter Is Coming wildlings</span></span>
<span class="line"><span>## 10 3            1       1 Winter Is Coming right</span></span>
<span class="line"><span>## # ... with 286,891 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">Vamos contar quais são as palavras mais comuns:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z2z7vu" prefix="r76" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_words %&gt;%\n  count(word, sort = T)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_words %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(word, </span><span style="color:#E06C75;font-style:italic">sort</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T)</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1ckNEv" prefix="r77" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 9,695 x 2\n##    word      n\n##    &lt;chr&gt; &lt;int&gt;\n##  1 the   11856\n##  2 you   10585\n##  3 i     10267\n##  4 to     7864\n##  5 a      6006\n##  6 and    5064\n##  7 of     4430\n##  8 your   3342\n##  9 my     3234\n## 10 it     2962\n## # ... with 9,685 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 9,695 x 2</span></span>
<span class="line"><span>##    word      n</span></span>
<span class="line"><span>##    &#x3C;chr> &#x3C;int></span></span>
<span class="line"><span>##  1 the   11856</span></span>
<span class="line"><span>##  2 you   10585</span></span>
<span class="line"><span>##  3 i     10267</span></span>
<span class="line"><span>##  4 to     7864</span></span>
<span class="line"><span>##  5 a      6006</span></span>
<span class="line"><span>##  6 and    5064</span></span>
<span class="line"><span>##  7 of     4430</span></span>
<span class="line"><span>##  8 your   3342</span></span>
<span class="line"><span>##  9 my     3234</span></span>
<span class="line"><span>## 10 it     2962</span></span>
<span class="line"><span>## # ... with 9,685 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">A maioria são preposições, pronomes etc., o que não é muito interessante.
Felizmente, isso é muito facilmente resolvido por esse pacote. Basta rodar um
<code>dplyr::anti_join</code> com um dataset que contém essas palavras, conhecidas como
‘stop words’.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1dIA9o" prefix="r78" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_words &lt;- got_words %&gt;%\n  anti_join(stop_words)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_words </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> got_words %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  anti_join(stop_words)</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="20RpnN" prefix="r79" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## Joining, by = \&quot;word\&quot;&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## Joining, by = "word"</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z2z7vu" prefix="r80" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_words %&gt;%\n  count(word, sort = T)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_words %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(word, </span><span style="color:#E06C75;font-style:italic">sort</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T)</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1mxiJG" prefix="r81" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 9,079 x 2\n##    word        n\n##    &lt;chr&gt;   &lt;int&gt;\n##  1 lord     1133\n##  2 king      831\n##  3 father    693\n##  4 grace     517\n##  5 time      513\n##  6 lady      510\n##  7 north     412\n##  8 stark     409\n##  9 people    394\n## 10 brother   393\n## # ... with 9,069 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 9,079 x 2</span></span>
<span class="line"><span>##    word        n</span></span>
<span class="line"><span>##    &#x3C;chr>   &#x3C;int></span></span>
<span class="line"><span>##  1 lord     1133</span></span>
<span class="line"><span>##  2 king      831</span></span>
<span class="line"><span>##  3 father    693</span></span>
<span class="line"><span>##  4 grace     517</span></span>
<span class="line"><span>##  5 time      513</span></span>
<span class="line"><span>##  6 lady      510</span></span>
<span class="line"><span>##  7 north     412</span></span>
<span class="line"><span>##  8 stark     409</span></span>
<span class="line"><span>##  9 people    394</span></span>
<span class="line"><span>## 10 brother   393</span></span>
<span class="line"><span>## # ... with 9,069 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">E aqui vemos algo mais específico de GOT, mas essas palavras são assim tão
frequentes por serem pronomes de tratamento de GOT, são as stop words desse
universo. Por isso, achei prudente retirá-las.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Zf5E4H" prefix="r82" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_stop_words &lt;- c(\n  \&quot;father\&quot;, \&quot;mother\&quot;, \&quot;queen\&quot;, \&quot;king\&quot;,\n  \&quot;boy\&quot;, \&quot;girl\&quot;, \&quot;lord\&quot;, \&quot;lady\&quot;, \&quot;son\&quot;, \&quot;sister\&quot;,\n  \&quot;grace\&quot;, \&quot;ser\&quot;, \&quot;brother\&quot;, \&quot;sister\&quot;, \&quot;king&#39;s\&quot;\n)\n\ngot_words &lt;- got_words %&gt;%\n  filter(!(word %in% got_stop_words)) %&gt;%\n  add_count(word)\n\ngot_words %&gt;%\n  count(word, sort = T)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_stop_words </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#56B6C2"> c</span><span style="color:#ABB2BF">(</span></span>
<span class="line"><span style="color:#98C379">  "father"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"mother"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"queen"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"king"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379">  "boy"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"girl"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"lord"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"lady"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"son"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"sister"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379">  "grace"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"ser"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"brother"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"sister"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"king's"</span></span>
<span class="line"><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">got_words </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> got_words %>%</span></span>
<span class="line"><span style="color:#56B6C2">  filter</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">!</span><span style="color:#ABB2BF">(word %in% got_stop_words)) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  add_count(word)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">got_words %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(word, </span><span style="color:#E06C75;font-style:italic">sort</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T)</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1t06BO" prefix="r83" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 9,065 x 2\n##    word       n\n##    &lt;chr&gt;  &lt;int&gt;\n##  1 time     513\n##  2 north    412\n##  3 stark    409\n##  4 people   394\n##  5 dead     375\n##  6 kill     349\n##  7 fight    313\n##  8 told     295\n##  9 die      284\n## 10 life     278\n## # ... with 9,055 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 9,065 x 2</span></span>
<span class="line"><span>##    word       n</span></span>
<span class="line"><span>##    &#x3C;chr>  &#x3C;int></span></span>
<span class="line"><span>##  1 time     513</span></span>
<span class="line"><span>##  2 north    412</span></span>
<span class="line"><span>##  3 stark    409</span></span>
<span class="line"><span>##  4 people   394</span></span>
<span class="line"><span>##  5 dead     375</span></span>
<span class="line"><span>##  6 kill     349</span></span>
<span class="line"><span>##  7 fight    313</span></span>
<span class="line"><span>##  8 told     295</span></span>
<span class="line"><span>##  9 die      284</span></span>
<span class="line"><span>## 10 life     278</span></span>
<span class="line"><span>## # ... with 9,055 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">E aqui as coisas começam a ficar interessantes!</p>
<p class="max-w-prose">A <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="./got_words.csv">base limpa com essas palavras pode ser baixada aqui</a>.</p>
<h2 id="correlação-entre-as-palavras" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Correlação entre as palavras<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#correlação-entre-as-palavras"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Agora, vamos visualizar quais as palavras que aparecem juntas com mais
frequência, com a função <code>pairwise_cor</code> do pacote <code>widyr</code>.</p>
<p class="max-w-prose">Só precisamos filtrar nossa base antes, porque não queremos que o R compare cada
par de 81579 palavras: escolheremos as palavras que apareçam 50 vezes ou mais.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1ncAxw" prefix="r84" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;library(widyr)\n\nword_pairs &lt;- got_words %&gt;%\n  add_count(word) %&gt;%\n  filter(n &gt;= 50) %&gt;%\n  pairwise_cor(word,\n    rowname,\n    sort = T\n  )\n\nword_pairs&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(widyr)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">word_pairs </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> got_words %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  add_count(word) %>%</span></span>
<span class="line"><span style="color:#56B6C2">  filter</span><span style="color:#ABB2BF">(n </span><span style="color:#56B6C2">>=</span><span style="color:#D19A66"> 50</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  pairwise_cor(word,</span></span>
<span class="line"><span style="color:#ABB2BF">    rowname,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    sort</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T</span></span>
<span class="line"><span style="color:#ABB2BF">  )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">word_pairs</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="18Y4jg" prefix="r85" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 109,892 x 3\n##    item1    item2    correlation\n##    &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n##  1 color    font           0.968\n##  2 font     color          0.968\n##  3 rock     casterly       0.908\n##  4 casterly rock           0.908\n##  5 watch    night&#39;s        0.674\n##  6 night&#39;s  watch          0.674\n##  7 white    walkers        0.639\n##  8 walkers  white          0.639\n##  9 jon      snow           0.540\n## 10 snow     jon            0.540\n## # ... with 109,882 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 109,892 x 3</span></span>
<span class="line"><span>##    item1    item2    correlation</span></span>
<span class="line"><span>##    &#x3C;chr>    &#x3C;chr>          &#x3C;dbl></span></span>
<span class="line"><span>##  1 color    font           0.968</span></span>
<span class="line"><span>##  2 font     color          0.968</span></span>
<span class="line"><span>##  3 rock     casterly       0.908</span></span>
<span class="line"><span>##  4 casterly rock           0.908</span></span>
<span class="line"><span>##  5 watch    night's        0.674</span></span>
<span class="line"><span>##  6 night's  watch          0.674</span></span>
<span class="line"><span>##  7 white    walkers        0.639</span></span>
<span class="line"><span>##  8 walkers  white          0.639</span></span>
<span class="line"><span>##  9 jon      snow           0.540</span></span>
<span class="line"><span>## 10 snow     jon            0.540</span></span>
<span class="line"><span>## # ... with 109,882 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">Dentre alguns resultado interessantes, nos deparamos com um bastante anormal.
color font? font color? Isso é código HTML usado para formatação que acabou
entrando no documento, que eventualmente serão ignoradas.</p>
<p class="max-w-prose">Para visualizar essas relações, vamos usar grafos. Nele as palavras são nós e os
vértices as corrrelações (um vértice mais escuro indica uma correlação mais
alta), teremos assim uma network dos top 100 par de palavras mais
correlacionados entre si.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1NzLP" prefix="r86" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;library(ggraph)\nlibrary(igraph)\n\nset.seed(0)\n\nword_pairs %&gt;%\n  filter(!(item1 %in% c(\&quot;font\&quot;, \&quot;color\&quot;, \&quot;game\&quot;))) %&gt;%\n  top_n(100) %&gt;%\n  graph_from_data_frame() %&gt;%\n  ggraph(layout = \&quot;fr\&quot;) +\n  geom_edge_link(aes(edge_alpha = correlation),\n    show.legend = F\n  ) +\n  geom_node_point(\n    color = \&quot;skyblue\&quot;,\n    size = 3\n  ) +\n  geom_node_text(aes(label = name),\n    repel = T\n  ) +\n  theme_void()&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(ggraph)</span></span>
<span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(igraph)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2">set.seed</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">word_pairs %>%</span></span>
<span class="line"><span style="color:#56B6C2">  filter</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">!</span><span style="color:#ABB2BF">(item1 %in% </span><span style="color:#56B6C2">c</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"font"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"color"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"game"</span><span style="color:#ABB2BF">))) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  top_n(</span><span style="color:#D19A66">100</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  graph_from_data_frame() %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggraph(</span><span style="color:#E06C75;font-style:italic">layout</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "fr"</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_edge_link(aes(</span><span style="color:#E06C75;font-style:italic">edge_alpha</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> correlation),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    show.legend</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> F</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_node_point(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    color</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "skyblue"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    size</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 3</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_node_text(aes(</span><span style="color:#E06C75;font-style:italic">label</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> name),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    repel</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  theme_void()</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_grafo-de-palavras.BsSVKfs6_ZnQDCD.webp" alt="Grafo das palavras mais comuns em Game of Thrones" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Grafo das palavras mais comuns em Game of Thrones</figcaption> </figure>
<h2 id="palavras-mais-frequentes" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Palavras mais frequentes<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#palavras-mais-frequentes"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Agora, vamos visualizar quais as palavras mais frequentes em geral e por
temporada. Para isso vamos utilizar nuvem de palavras.</p>
<p class="max-w-prose">O em geral primeiro. Vamos ver quais são as top 50 palavras em uma nuvem, com a
função <code>wordcloud::wordcloud</code>, que toma como argumentos principais um vetor de
palavras e um de frequências.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1PJojS" prefix="r87" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;library(wordcloud)\nlibrary(RColorBrewer)\n\npaleta &lt;- brewer.pal(6, \&quot;Dark2\&quot;)\n\nset.seed(99)\n\ngot_words %&gt;%\n  count(word) %&gt;%\n  with(wordcloud(word,\n    n,\n    max.words = 50,\n    colors = paleta\n  ))&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(wordcloud)</span></span>
<span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(RColorBrewer)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">paleta </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> brewer.pal(</span><span style="color:#D19A66">6</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"Dark2"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#56B6C2">set.seed</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">99</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">got_words %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(word) %>%</span></span>
<span class="line"><span style="color:#56B6C2">  with</span><span style="color:#ABB2BF">(wordcloud(word,</span></span>
<span class="line"><span style="color:#ABB2BF">    n,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    max.words</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 50</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    colors</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> paleta</span></span>
<span class="line"><span style="color:#ABB2BF">  ))</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_nuvem-de-palavras.t0ZN-d8r_Z1XfcBm.webp" alt="Nuvem de palavras das palavras mais comuns em Game of Thrones" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Nuvem de palavras das palavras mais comuns em Game of Thrones</figcaption> </figure>
<p class="max-w-prose">Agora, vamos ver como isso varia para cada temporada, com o pacote
<code>ggwordcloud</code>.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z26B46K" prefix="r88" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;library(ggwordcloud)\n\ntheme_set(theme_minimal())\n\ngot_words &lt;- got_words %&gt;%\n  filter(!str_detect(word, \&quot;font|color\&quot;))\n\ngot_words %&gt;%\n  count(season, word, name = \&quot;count\&quot;) %&gt;%\n  group_by(season) %&gt;%\n  top_n(20, count) %&gt;%\n  ggplot(aes(\n    label = word,\n    size = count,\n    color = count %&gt;% as.numeric()\n  )) +\n  geom_text_wordcloud(rm_outside = T) +\n  scale_size_area(max_size = 10) +\n  scale_color_viridis_c() +\n  facet_wrap(. ~ season, nrow = 3, ncol = 3)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2">library</span><span style="color:#ABB2BF">(ggwordcloud)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">theme_set(theme_minimal())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">got_words </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> got_words %>%</span></span>
<span class="line"><span style="color:#56B6C2">  filter</span><span style="color:#ABB2BF">(</span><span style="color:#56B6C2">!</span><span style="color:#ABB2BF">str_detect(word, </span><span style="color:#98C379">"font|color"</span><span style="color:#ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">got_words %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(season, word, </span><span style="color:#E06C75;font-style:italic">name</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "count"</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  group_by(season) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  top_n(</span><span style="color:#D19A66">20</span><span style="color:#ABB2BF">, count) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    label</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> word,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    size</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> count,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    color</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> count %>% </span><span style="color:#56B6C2">as.numeric</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_text_wordcloud(</span><span style="color:#E06C75;font-style:italic">rm_outside</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_size_area(</span><span style="color:#E06C75;font-style:italic">max_size</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 10</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_color_viridis_c() </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  facet_wrap(. </span><span style="color:#C678DD">~</span><span style="color:#ABB2BF"> season, </span><span style="color:#E06C75;font-style:italic">nrow</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 3</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">ncol</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 3</span><span style="color:#ABB2BF">)</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_nuvem_de_palavras_por_temporada.BP_2QmLP_1nDh8i.webp" alt="Nuvem de palavras por temporada" loading="lazy" decoding="async" fetchpriority="auto" width="1366" height="728" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Nuvem de palavras por temporada</figcaption> </figure>
<h2 id="análise-de-sentimentos" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Análise de sentimentos<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#análise-de-sentimentos"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Outra coisa que é interessante de ser feita é analisar o sentimento médio do
texto, se nele há mais palavras consideradas negativas ou positivas etc.</p>
<p class="max-w-prose">Esse é um tópico delicado teoricamente, já que não é algo tão trivial para um
computador deduzir se uma frase expressa um sentimento bom ou ruim. Não vamos
deixar o computador fazer isso, mas usar um léxico que mapeia palavras a
sentimentos, feito por humanos.</p>
<p class="max-w-prose">Por exemplo, o léxico <code>afinn</code> classifica algumas mil palavras em uma escala que
varia de -5 (muito negativo) até 5 (muito positivo).</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1xfmgr" prefix="r89" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;get_sentiments(\&quot;afinn\&quot;)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">get_sentiments(</span><span style="color:#98C379">"afinn"</span><span style="color:#ABB2BF">)</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="BKYtD" prefix="r90" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 2,476 x 2\n##    word       score\n##    &lt;chr&gt;      &lt;int&gt;\n##  1 abandon       -2\n##  2 abandoned     -2\n##  3 abandons      -2\n##  4 abducted      -2\n##  5 abduction     -2\n##  6 abductions    -2\n##  7 abhor         -3\n##  8 abhorred      -3\n##  9 abhorrent     -3\n## 10 abhors        -3\n## # ... with 2,466 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 2,476 x 2</span></span>
<span class="line"><span>##    word       score</span></span>
<span class="line"><span>##    &#x3C;chr>      &#x3C;int></span></span>
<span class="line"><span>##  1 abandon       -2</span></span>
<span class="line"><span>##  2 abandoned     -2</span></span>
<span class="line"><span>##  3 abandons      -2</span></span>
<span class="line"><span>##  4 abducted      -2</span></span>
<span class="line"><span>##  5 abduction     -2</span></span>
<span class="line"><span>##  6 abductions    -2</span></span>
<span class="line"><span>##  7 abhor         -3</span></span>
<span class="line"><span>##  8 abhorred      -3</span></span>
<span class="line"><span>##  9 abhorrent     -3</span></span>
<span class="line"><span>## 10 abhors        -3</span></span>
<span class="line"><span>## # ... with 2,466 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">Já esse classifica cada palavra binariamente, em ‘negativa’ ou ‘positiva’,
cobrindo uma porção maior de palavras.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1tXemv" prefix="r91" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;get_sentiments(\&quot;bing\&quot;)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">get_sentiments(</span><span style="color:#98C379">"bing"</span><span style="color:#ABB2BF">)</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="3sqmw" prefix="r92" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 6,788 x 2\n##    word        sentiment\n##    &lt;chr&gt;       &lt;chr&gt;\n##  1 2-faced     negative\n##  2 2-faces     negative\n##  3 a+          positive\n##  4 abnormal    negative\n##  5 abolish     negative\n##  6 abominable  negative\n##  7 abominably  negative\n##  8 abominate   negative\n##  9 abomination negative\n## 10 abort       negative\n## # ... with 6,778 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 6,788 x 2</span></span>
<span class="line"><span>##    word        sentiment</span></span>
<span class="line"><span>##    &#x3C;chr>       &#x3C;chr></span></span>
<span class="line"><span>##  1 2-faced     negative</span></span>
<span class="line"><span>##  2 2-faces     negative</span></span>
<span class="line"><span>##  3 a+          positive</span></span>
<span class="line"><span>##  4 abnormal    negative</span></span>
<span class="line"><span>##  5 abolish     negative</span></span>
<span class="line"><span>##  6 abominable  negative</span></span>
<span class="line"><span>##  7 abominably  negative</span></span>
<span class="line"><span>##  8 abominate   negative</span></span>
<span class="line"><span>##  9 abomination negative</span></span>
<span class="line"><span>## 10 abort       negative</span></span>
<span class="line"><span>## # ... with 6,778 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">Outra base possível de ser usada é essa, que cobre muito mais palavras e
categorias, além de ter mais palavras positivas (em relação às negativas) que a
base ‘bing’.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z29INha" prefix="r93" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;get_sentiments(\&quot;nrc\&quot;)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">get_sentiments(</span><span style="color:#98C379">"nrc"</span><span style="color:#ABB2BF">)</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1HhtQ8" prefix="r94" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## # A tibble: 13,901 x 2\n##    word        sentiment\n##    &lt;chr&gt;       &lt;chr&gt;\n##  1 abacus      trust\n##  2 abandon     fear\n##  3 abandon     negative\n##  4 abandon     sadness\n##  5 abandoned   anger\n##  6 abandoned   fear\n##  7 abandoned   negative\n##  8 abandoned   sadness\n##  9 abandonment anger\n## 10 abandonment fear\n## # ... with 13,891 more rows&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## # A tibble: 13,901 x 2</span></span>
<span class="line"><span>##    word        sentiment</span></span>
<span class="line"><span>##    &#x3C;chr>       &#x3C;chr></span></span>
<span class="line"><span>##  1 abacus      trust</span></span>
<span class="line"><span>##  2 abandon     fear</span></span>
<span class="line"><span>##  3 abandon     negative</span></span>
<span class="line"><span>##  4 abandon     sadness</span></span>
<span class="line"><span>##  5 abandoned   anger</span></span>
<span class="line"><span>##  6 abandoned   fear</span></span>
<span class="line"><span>##  7 abandoned   negative</span></span>
<span class="line"><span>##  8 abandoned   sadness</span></span>
<span class="line"><span>##  9 abandonment anger</span></span>
<span class="line"><span>## 10 abandonment fear</span></span>
<span class="line"><span>## # ... with 13,891 more rows</span></span></code></pre> </div> 
<p class="max-w-prose">Vamos aplicar a análise de sentimento com as três e ver como elas se
diferenciam.</p>
<p class="max-w-prose">Vejamos primeiro quais são as palavras negativas e positivas mais comuns.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="2uPhfc" prefix="r95" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_bing &lt;- got_words %&gt;%\n  filter(word != \&quot;stark\&quot;) %&gt;%\n  select(-rowname) %&gt;%\n  inner_join(get_sentiments(\&quot;bing\&quot;))&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_bing </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> got_words %>%</span></span>
<span class="line"><span style="color:#56B6C2">  filter</span><span style="color:#ABB2BF">(word </span><span style="color:#56B6C2">!=</span><span style="color:#98C379"> "stark"</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  select(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">rowname) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  inner_join(get_sentiments(</span><span style="color:#98C379">"bing"</span><span style="color:#ABB2BF">))</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="20RpnN" prefix="r96" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## Joining, by = \&quot;word\&quot;&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## Joining, by = "word"</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="2tzKX4" prefix="r97" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_bing %&gt;%\n  distinct(word, .keep_all = T) %&gt;%\n  group_by(sentiment) %&gt;%\n  top_n(10, n) %&gt;%\n  ggplot(aes(fct_reorder(word, n),\n    n,\n    fill = sentiment\n  )) +\n  geom_col(show.legend = F) +\n  coord_flip() +\n  facet_wrap(. ~ sentiment, scale = \&quot;free_y\&quot;) +\n  labs(\n    x = NULL, y = NULL,\n    title = \&quot;Palavras Negativas e Positivas Mais Comuns\&quot;\n  )&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_bing %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  distinct(word, </span><span style="color:#E06C75;font-style:italic">.keep_all</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> T) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  group_by(sentiment) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  top_n(</span><span style="color:#D19A66">10</span><span style="color:#ABB2BF">, n) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(fct_reorder(word, n),</span></span>
<span class="line"><span style="color:#ABB2BF">    n,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    fill</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> sentiment</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_col(</span><span style="color:#E06C75;font-style:italic">show.legend</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> F) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  coord_flip() </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  facet_wrap(. </span><span style="color:#C678DD">~</span><span style="color:#ABB2BF"> sentiment, </span><span style="color:#E06C75;font-style:italic">scale</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "free_y"</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> NULL</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Palavras Negativas e Positivas Mais Comuns"</span></span>
<span class="line"><span style="color:#ABB2BF">  )</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_palavras-negativas-e-positivas.wlcvDCfu_1ah1RP.webp" alt="Palavras negativas e positivas" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Palavras negativas e positivas</figcaption> </figure>
<p class="max-w-prose">Agora, vamos fazer isso em por temporada e medir o sentimento médio a cada seção
de n palavras.</p>
<p class="max-w-prose">Vamos usar o dataset <code>afinn</code> e uma seção formada por 25 palavras.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="VUUDY" prefix="r98" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_afinn &lt;- got_words %&gt;%\n  inner_join(get_sentiments(\&quot;afinn\&quot;)) %&gt;%\n  select(-rowname, -n) %&gt;%\n  mutate(\n    row = row_number(),\n    section = row %/% 25\n  ) %&gt;%\n  ungroup()&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_afinn </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> got_words %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  inner_join(get_sentiments(</span><span style="color:#98C379">"afinn"</span><span style="color:#ABB2BF">)) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  select(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">rowname, </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">n) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    row</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> row_number(),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    section</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> row </span><span style="color:#56B6C2">%/%</span><span style="color:#D19A66"> 25</span></span>
<span class="line"><span style="color:#ABB2BF">  ) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ungroup()</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="20RpnN" prefix="r99" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## Joining, by = \&quot;word\&quot;&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## Joining, by = "word"</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1zzifz" prefix="r100" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_afinn %&gt;%\n  group_by(season, section) %&gt;%\n  summarise(avg_sentiment = mean(score)) %&gt;%\n  ggplot(aes(section,\n    avg_sentiment,\n    fill = avg_sentiment\n  )) +\n  geom_col(show.legend = F) +\n  labs(\n    x = \&quot;Seções\&quot;, y = \&quot;Sentimento médio\\n\&quot;,\n    title = \&quot;Sentimento médio a cada 25 palavras por temporada\&quot;\n  ) +\n  scale_fill_gradient2(\n    low = \&quot;firebrick3\&quot;,\n    high = \&quot;dodgerblue3\&quot;\n  ) +\n  facet_wrap(season ~ ., scale = \&quot;free_x\&quot;)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_afinn %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  group_by(season, section) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  summarise(</span><span style="color:#E06C75;font-style:italic">avg_sentiment</span><span style="color:#56B6C2"> =</span><span style="color:#56B6C2"> mean</span><span style="color:#ABB2BF">(score)) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(section,</span></span>
<span class="line"><span style="color:#ABB2BF">    avg_sentiment,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    fill</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> avg_sentiment</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_col(</span><span style="color:#E06C75;font-style:italic">show.legend</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> F) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Seções"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Sentimento médio</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Sentimento médio a cada 25 palavras por temporada"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_fill_gradient2(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    low</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "firebrick3"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    high</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "dodgerblue3"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  facet_wrap(season </span><span style="color:#C678DD">~</span><span style="color:#ABB2BF"> ., </span><span style="color:#E06C75;font-style:italic">scale</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "free_x"</span><span style="color:#ABB2BF">)</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_sentimento-medio-afinn.DA5QgffO_14zmff.webp" alt="Sentimento médio, método afinn" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Sentimento médio, método afinn</figcaption> </figure>
<p class="max-w-prose">Em geral, podemos ver que as temporadas foram ficando mais pesadas. Os picos
azuis claros foram ficando cada vez mais raros e os vales vermelhos mais agudos,
chegando a seu clímax na temporada 5, o Walk of Shame.</p>
<p class="max-w-prose">Vamos tentar o mesmo com as outras duas bases. Como elas classificam as palavras
binariamente, a ideia é calcular o ‘sentimento líquido’, o que se entende pela
diferença no número de palavras positivas e negativas, para cada seção.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1d17qq" prefix="r101" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_bing %&gt;%\n  select(-n) %&gt;%\n  mutate(\n    row = row_number(),\n    section = row %/% 25\n  ) %&gt;%\n  count(season, episode, section, sentiment) %&gt;%\n  spread(sentiment, n, fill = 0) %&gt;%\n  mutate(net_sentiment = positive - negative) %&gt;%\n  ggplot(aes(section,\n    net_sentiment,\n    fill = net_sentiment\n  )) +\n  geom_col(show.legend = F) +\n  scale_fill_gradient2(\n    low = \&quot;firebrick3\&quot;,\n    high = \&quot;navyblue\&quot;\n  ) +\n  facet_wrap(. ~ season, scale = \&quot;free_x\&quot;) +\n  labs(\n    x = \&quot;Seções\&quot;, y = \&quot;Sentimento médio\\n\&quot;,\n    title = \&quot;Sentimento médio a cada 25 palavras por temporada\&quot;,\n    subtitle = \&quot;Método Bing\&quot;\n  )&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_bing %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  select(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">n) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    row</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> row_number(),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    section</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> row </span><span style="color:#56B6C2">%/%</span><span style="color:#D19A66"> 25</span></span>
<span class="line"><span style="color:#ABB2BF">  ) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(season, episode, section, sentiment) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  spread(sentiment, n, </span><span style="color:#E06C75;font-style:italic">fill</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 0</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span><span style="color:#E06C75;font-style:italic">net_sentiment</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> positive </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> negative) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(section,</span></span>
<span class="line"><span style="color:#ABB2BF">    net_sentiment,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    fill</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> net_sentiment</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_col(</span><span style="color:#E06C75;font-style:italic">show.legend</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> F) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_fill_gradient2(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    low</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "firebrick3"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    high</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "navyblue"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  facet_wrap(. </span><span style="color:#C678DD">~</span><span style="color:#ABB2BF"> season, </span><span style="color:#E06C75;font-style:italic">scale</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "free_x"</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Seções"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Sentimento médio</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Sentimento médio a cada 25 palavras por temporada"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    subtitle</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Método Bing"</span></span>
<span class="line"><span style="color:#ABB2BF">  )</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_sentimento-medio-bing.hdELw9em_1Ju0tj.webp" alt="Sentimento médio, método bing" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Sentimento médio, método bing</figcaption> </figure>
<p class="max-w-prose">Ok, isso em geral vai de encontro com o que já havíamos visto.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1OVMwg" prefix="r102" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_nrc &lt;- got_words %&gt;%\n  filter(word != \&quot;stark\&quot;) %&gt;%\n  select(-rowname) %&gt;%\n  inner_join(get_sentiments(\&quot;nrc\&quot;) %&gt;%\n    filter(sentiment %in% c(\&quot;negative\&quot;, \&quot;positive\&quot;)))&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_nrc </span><span style="color:#56B6C2">&#x3C;-</span><span style="color:#ABB2BF"> got_words %>%</span></span>
<span class="line"><span style="color:#56B6C2">  filter</span><span style="color:#ABB2BF">(word </span><span style="color:#56B6C2">!=</span><span style="color:#98C379"> "stark"</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  select(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">rowname) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  inner_join(get_sentiments(</span><span style="color:#98C379">"nrc"</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#56B6C2">    filter</span><span style="color:#ABB2BF">(sentiment %in% </span><span style="color:#56B6C2">c</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"negative"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"positive"</span><span style="color:#ABB2BF">)))</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> [No name] </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="20RpnN" prefix="r103" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;## Joining, by = \&quot;word\&quot;&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span>## Joining, by = "word"</span></span></code></pre> </div> 
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M64 14.648c-35.346 0-64 19.19-64 42.863C0 78.275 22.046 95.589 51.316 99.53V86.699c-15.55-4.89-26.166-14.693-26.166-25.991 0-16.183 21.779-29.303 48.646-29.303 26.866 0 46.693 8.975 46.693 29.303 0 10.486-5.273 17.95-14.066 22.72 1.204.908 2.22 2.072 2.904 3.419l.388.655C121.025 79.772 128 69.189 128 57.51c0-23.672-28.654-42.863-64-42.863zm20.1 74.88c-2.612.257-5.322.41-8.114.462l.002 9.63a88.362 88.362 0 0 0 12.474-2.492l-.501-.941c-.68-1.268-1.347-2.543-2.033-3.807a41.01 41.01 0 0 0-1.828-2.851z" />
  <path d="M97.469 81.036s3.874 1.169 6.124 2.307c.78.396 2.132 1.184 3.106 2.22a8.388 8.388 0 0 1 1.42 2.04l15.266 25.74-24.674.01-11.537-21.666s-2.363-4.06-3.817-5.237c-1.213-.982-1.73-1.331-2.929-1.331h-5.862l.004 28.219-21.834.009V41.263h43.845s19.97.36 19.97 19.359S97.47 81.035 97.47 81.035zm-9.497-24.137-13.218-.009-.006 12.257 13.224-.004s6.124-.019 6.124-6.235c0-6.34-6.124-6.01-6.124-6.01z" fill-rule="evenodd" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> r </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1pI74z" prefix="r104" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;got_nrc %&gt;%\n  select(-n) %&gt;%\n  mutate(\n    row = row_number(),\n    section = row %/% 25\n  ) %&gt;%\n  count(season, episode, section, sentiment) %&gt;%\n  spread(sentiment, n, fill = 0) %&gt;%\n  mutate(net_sentiment = positive - negative) %&gt;%\n  ggplot(aes(section,\n    net_sentiment,\n    fill = net_sentiment\n  )) +\n  geom_col(show.legend = F) +\n  scale_fill_gradient2(\n    low = \&quot;firebrick3\&quot;,\n    high = \&quot;navyblue\&quot;\n  ) +\n  facet_wrap(. ~ season, scale = \&quot;free_x\&quot;) +\n  labs(\n    x = \&quot;Seções\&quot;, y = \&quot;Sentimento médio\\n\&quot;,\n    title = \&quot;Sentimento médio a cada 25 palavras por temporada\&quot;,\n    subtitle = \&quot;Método NRC\&quot;\n  )&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">got_nrc %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  select(</span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF">n) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    row</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> row_number(),</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    section</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> row </span><span style="color:#56B6C2">%/%</span><span style="color:#D19A66"> 25</span></span>
<span class="line"><span style="color:#ABB2BF">  ) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  count(season, episode, section, sentiment) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  spread(sentiment, n, </span><span style="color:#E06C75;font-style:italic">fill</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> 0</span><span style="color:#ABB2BF">) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  mutate(</span><span style="color:#E06C75;font-style:italic">net_sentiment</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> positive </span><span style="color:#56B6C2">-</span><span style="color:#ABB2BF"> negative) %>%</span></span>
<span class="line"><span style="color:#ABB2BF">  ggplot(aes(section,</span></span>
<span class="line"><span style="color:#ABB2BF">    net_sentiment,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    fill</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> net_sentiment</span></span>
<span class="line"><span style="color:#ABB2BF">  )) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  geom_col(</span><span style="color:#E06C75;font-style:italic">show.legend</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> F) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  scale_fill_gradient2(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    low</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "firebrick3"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    high</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "navyblue"</span></span>
<span class="line"><span style="color:#ABB2BF">  ) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  facet_wrap(. </span><span style="color:#C678DD">~</span><span style="color:#ABB2BF"> season, </span><span style="color:#E06C75;font-style:italic">scale</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "free_x"</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">+</span></span>
<span class="line"><span style="color:#ABB2BF">  labs(</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    x</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Seções"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">y</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Sentimento médio</span><span style="color:#56B6C2">\n</span><span style="color:#98C379">"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    title</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Sentimento médio a cada 25 palavras por temporada"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic">    subtitle</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "Método NRC"</span></span>
<span class="line"><span style="color:#ABB2BF">  )</span></span></code></pre> </div> 
<figure class="my-8 max-w-2xl bg-surface rounded-md py-1"> <img src="/_astro/_sentimento-medio-nrc.B-7O4e4z_Z1vwkiY.webp" alt="Sentimento médio, método NRC" loading="lazy" decoding="async" fetchpriority="auto" width="672" height="480" class="mx-auto"> <figcaption class="mt-1 text-center font-bold">Sentimento médio, método NRC</figcaption> </figure>
<p class="max-w-prose">Pera! Já esse nos dá quase que o resultado oposto! De fato, por esse método a
série não parece ser tão negativa quanto os outros haviam sugerido. Isso porque
essa base tem muito mais palavras positivas em relação a negativas. Palavras
como ‘land’, ‘prince’ etc. são nela ‘positivas’, enquanto que nas outras, não.
Por ter mais palavras, aumentam também o número de seções.</p>
<p class="max-w-prose">Enfim, esse é um ponto delicado, incluído aqui somente por ser interessante em
si mesmo.</p> </div> </div> </article> <hr class="max-sm:full-bleed mt-8"> <nav class="flex items-stretch sm:gap-4 max-sm:full-bleed sm:my-8" aria-label="Navegação entre posts"> <a class="sm:card flex flex-1 flex-col gap-2 border-0 px-horizontal-padding py-4 transition-colors duration-300 hover:bg-hover" href="/pt/posts/visualizacao-dados-homicidios-baltimore/"> <span class="text-primary"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left "><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg> </span> Homicídios em Baltimore: visualizações com ggplot2 e gganimate </a> <div class="border-l border-divider sm:hidden"></div> <a class="sm:card flex flex-1 flex-col-reverse items-end justify-end gap-2 border-0 px-horizontal-padding py-4 text-right transition-colors duration-300 hover:bg-hover" href="/pt/posts/gram-schmidt/"> Processo de Gram-Schmidt com NumPy <span class="text-primary"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right "><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg> </span> </a> </nav> <hr class="max-sm:full-bleed mb-8"> </div> </main>  <footer class="bg-background grid grid-cols-layout"> <div class="mx-auto flex w-full max-w-content flex-col pt-4 pb-8 sm:justify-between"> <nav aria-label="Contatos" class="flex gap-2 mb-2"> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-email" href="mailto:phelipe_teles@hotmail.com" aria-label="E-mail">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail "><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>  </a> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-linkedin" href="https://linkedin.com/in/phelipeteles" aria-label="LinkedIn">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin "><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg>  </a> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-github" href="https://github.com/phelipetls" aria-label="GitHub">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>  </a> </nav> <span class=""> 
Todo conteúdo está sob a licença <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>.
 </span> </div> </footer> </body></html> <script type="module">const e=document.querySelector("[data-blog-post-container]"),t=document.querySelector("[data-toggle-toc]"),o=document.querySelector("[data-blog-post-toc-container]");let n=new AbortController;const a=localStorage.getItem("__preferred_toc_state");a!==null&&(a==="open"?s():(c(),o?.classList.add("invisible")));function s(){n.abort(),o?.classList.remove("invisible"),e instanceof HTMLElement&&t instanceof HTMLButtonElement&&(e.setAttribute("data-toc","open"),localStorage.setItem("__preferred_toc_state","open"),t.setAttribute("aria-label",t.dataset.closedTocLabel??""))}function c(){n=new AbortController,o?.addEventListener("transitionend",()=>{o?.classList.add("invisible")},{signal:n.signal}),e instanceof HTMLElement&&t instanceof HTMLButtonElement&&(e.setAttribute("data-toc","closed"),localStorage.setItem("__preferred_toc_state","closed"),t.setAttribute("aria-label",t.dataset.openTocLabel??""))}t?.addEventListener("click",()=>{if(!(e instanceof HTMLDivElement))return;e.dataset.toc==="open"?c():s()});</script>