<!DOCTYPE html><html class="h-full min-h-0 text-base sm:text-lg selection:bg-primary selection:text-on-primary scroll-smooth scroll-pt-nav-height sm:scroll-pt-0" lang="pt-BR" data-notransition> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="deploy-date" content="2025-10-15"><meta name="author" content="Phelipe Teles"><meta name="color-scheme" content="dark light"><title>Web Scraping de páginas dinâmicas com Python - Phelipe Teles | Phelipe Teles</title><link rel="canonical" href="https://phelipetls.github.io/pt/posts/web-scraping-de-paginas-dinamicas/"><meta name="description" content="Web scraping pode ficar bem complicado quando a página é dinâmica, você não mais
precisa somente carregar o código-fonte da página mas também precisa esperar o
JavaScript da página construir a página, que é o caso do site do Reclame Aqui."><meta name="robots" content="index, follow"><meta property="og:title" content="Web Scraping de páginas dinâmicas com Python"><meta property="og:type" content="article"><meta property="og:image" content="https://phelipetls.github.io/pt/posts/web-scraping-de-paginas-dinamicas/image.png"><meta property="og:url" content="https://phelipetls.github.io/pt/posts/web-scraping-de-paginas-dinamicas/"><meta property="og:image:url" content="https://phelipetls.github.io/pt/posts/web-scraping-de-paginas-dinamicas/image.png"><meta property="og:image:height"><meta property="og:image:alt" content="Blog Post Web Scraping de páginas dinâmicas com Python Preview Image"><meta property="article:published_time" content="2019-08-18T00:00:00Z"><meta property="article:author" content="Phelipe Teles"><meta property="article:tag" content="web-scraping"><meta property="article:tag" content="pandas"><meta property="article:tag" content="regex"><meta property="article:tag" content="dataviz"><meta name="twitter:card" content="summary_large_image"><meta content="https://phelipetls.github.io/pt/posts/web-scraping-de-paginas-dinamicas/image.png" name="twitter:image"> <meta name="publish-date" content="2019-08-18"> <meta name="keywords" content="web-scraping, pandas, regex, dataviz"><meta name="description" content="Web scraping pode ficar bem complicado quando a página é dinâmica, você não mais
precisa somente carregar o código-fonte da página mas também precisa esperar o
JavaScript da página construir a página, que é o caso do site do Reclame Aqui."> <style id="sandpack">--sxs{--sxs:0 light sp-482805736}@media{.light{--sp-space-1:4px;--sp-space-2:8px;--sp-space-3:12px;--sp-space-4:16px;--sp-space-5:20px;--sp-space-6:24px;--sp-space-7:28px;--sp-space-8:32px;--sp-space-9:36px;--sp-space-10:40px;--sp-space-11:44px;--sp-border-radius:4px;--sp-layout-height:300px;--sp-layout-headerHeight:40px;--sp-transitions-default:150ms ease;--sp-zIndices-base:1;--sp-zIndices-overlay:2;--sp-zIndices-top:3;--sp-colors-surface1:#ffffff;--sp-colors-surface2:#EFEFEF;--sp-colors-surface3:#F3F3F3;--sp-colors-disabled:#C5C5C5;--sp-colors-base:#323232;--sp-colors-clickable:#808080;--sp-colors-hover:#4D4D4D;--sp-colors-accent:#3973E0;--sp-colors-error:#EA3323;--sp-colors-errorSurface:#FCF1F0;--sp-colors-warning:#6A4516;--sp-colors-warningSurface:#FEF2C0;--sp-font-body:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--sp-font-mono:"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace;--sp-font-size:13px;--sp-font-lineHeight:20px;--sp-syntax-color-plain:#151515;--sp-syntax-color-comment:#999;--sp-syntax-fontStyle-comment:italic;--sp-syntax-color-keyword:#7C5AE3;--sp-syntax-color-tag:#0971F1;--sp-syntax-color-punctuation:#3B3B3B;--sp-syntax-color-definition:#85A600;--sp-syntax-color-property:#3B3B3B;--sp-syntax-color-static:#3B3B3B;--sp-syntax-color-string:#2E6BD0}.sp-482805736{--sp-space-1:4px;--sp-space-2:8px;--sp-space-3:12px;--sp-space-4:16px;--sp-space-5:20px;--sp-space-6:24px;--sp-space-7:28px;--sp-space-8:32px;--sp-space-9:36px;--sp-space-10:40px;--sp-space-11:44px;--sp-border-radius:4px;--sp-layout-height:300px;--sp-layout-headerHeight:40px;--sp-transitions-default:150ms ease;--sp-zIndices-base:1;--sp-zIndices-overlay:2;--sp-zIndices-top:3;--sp-colors-surface1:#282c34;--sp-colors-surface2:#21252b;--sp-colors-surface3:#2c313c;--sp-colors-disabled:#4d4d4d;--sp-colors-base:#a8b1c2;--sp-colors-clickable:#a8b1c2;--sp-colors-hover:#e8effc;--sp-colors-accent:#c678dd;--sp-colors-error:#e06c75;--sp-colors-errorSurface:#ffeceb;--sp-colors-warning:#E7C400;--sp-colors-warningSurface:#3A3000;--sp-font-body:"Fira Sans", sans-serif;--sp-font-mono:Consolas, Menlo, Monaco, "Fira Code", monospace;--sp-font-size:1rem;--sp-font-lineHeight:1.5;--sp-syntax-color-plain:#a8b1c2;--sp-syntax-color-comment:#757575;--sp-syntax-fontStyle-comment:italic;--sp-syntax-color-keyword:#c678dd;--sp-syntax-color-tag:#e06c75;--sp-syntax-color-punctuation:#a8b1c2;--sp-syntax-color-definition:#62aeef;--sp-syntax-color-property:#d19a66;--sp-syntax-color-static:#a8b1c2;--sp-syntax-color-string:#98c379}}--sxs{--sxs:1 sp-k-eyOShd sp-k-iOHdLQ}@media{@keyframes sp-k-eyOShd{0%{opacity:0}100%{opacity:1}}@keyframes sp-k-iOHdLQ{0%{transform:rotateX(-25.5deg) rotateY(45deg)}100%{transform:rotateX(-25.5deg) rotateY(405deg)}}}--sxs{--sxs:2 sp-c-gMfcns sp-c-bxeRRt sp-c-hfoyCM sp-c-fWymNx sp-c-euXojQ sp-c-bpmgvy sp-c-PJLV sp-c-fVPbOs sp-c-gtcpyq sp-c-jOWzsE sp-c-jkvvao sp-c-juMdfR sp-c-fgviib sp-c-kwibBT sp-c-ivYAPe sp-c-lgESqD sp-c-cUFVvP sp-c-jzEuAZ}@media{.sp-c-gMfcns svg{margin:auto}.sp-c-bxeRRt{-webkit-appearance:none;appearance:none;outline:none;display:flex;align-items:center;font-size:inherit;font-family:inherit;background-color:transparent;transition:color var(--sp-transitions-default), background var(--sp-transitions-default);cursor:pointer;color:var(--sp-colors-clickable);border:0;text-decoration:none}.sp-c-bxeRRt:disabled{color:var(--sp-colors-disabled)}.sp-c-bxeRRt:hover:not(:disabled,[data-active='true']){color:var(--sp-colors-hover)}.sp-c-bxeRRt[data-active="true"]{color:var(--sp-colors-accent)}.sp-c-bxeRRt svg{min-width:var(--sp-space-4);width:var(--sp-space-4);height:var(--sp-space-4)}.sp-c-bxeRRt.sp-c-gMfcns{padding:var(--sp-space-1);height:var(--sp-space-7);display:flex}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:not(:has(span)){width:var(--sp-space-7)}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:has(svg + span){padding-right:var(--sp-space-3);padding-left:var(--sp-space-2);gap:var(--sp-space-1)}.sp-c-hfoyCM{padding:0 var(--sp-space-1) 0 var(--sp-space-1);border-radius:var(--sp-border-radius);margin-left:var(--sp-space-1);width:var(--sp-space-5);visibility:hidden}.sp-c-hfoyCM svg{width:var(--sp-space-3);height:var(--sp-space-3);display:block;position:relative;top:1px}.sp-c-fWymNx{margin:0;display:block;font-family:var(--sp-font-mono);font-size:var(--sp-font-size);color:var(--sp-syntax-color-plain);line-height:var(--sp-font-lineHeight)}.sp-c-euXojQ{display:flex;flex-direction:column;width:100%;position:relative;background-color:var(--sp-colors-surface1);gap:1px}.sp-c-euXojQ:has(.sp-stack){background-color:var(--sp-colors-surface2)}.sp-c-bpmgvy{transform:translate(-4px, 9px) scale(0.13, 0.13)}.sp-c-bpmgvy *{position:absolute;width:96px;height:96px}.sp-c-fVPbOs{all:initial;font-size:var(--sp-font-size);font-family:var(--sp-font-body);display:block;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-tap-highlight-color:transparent;-webkit-font-smoothing:subpixel-antialiased}@media screen and (min-resolution: 2dppx){.sp-c-fVPbOs{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}.sp-c-fVPbOs *{box-sizing:border-box}.sp-c-fVPbOs .sp-wrapper:focus{outline:0}.sp-c-gtcpyq{flex:1;position:relative;overflow:auto;background:var(--sp-colors-surface1)}.sp-c-gtcpyq .cm-scroller{padding:var(--sp-space-4) 0}.sp-c-gtcpyq .sp-c-fWymNx{padding:var(--sp-space-4) 0}@media screen and (max-width: 768px){@supports (-webkit-overflow-scrolling: touch){.sp-c-gtcpyq .cm-content{font-size:16px}}}.sp-c-jOWzsE{margin:0;outline:none;height:100%}.sp-c-jkvvao .sp-syntax-string{color:var(--sp-syntax-color-string);font-style:var(--sp-syntax-fontStyle-string)}.sp-c-jkvvao .sp-syntax-plain{color:var(--sp-syntax-color-plain);font-style:var(--sp-syntax-fontStyle-plain)}.sp-c-jkvvao .sp-syntax-comment{color:var(--sp-syntax-color-comment);font-style:var(--sp-syntax-fontStyle-comment)}.sp-c-jkvvao .sp-syntax-keyword{color:var(--sp-syntax-color-keyword);font-style:var(--sp-syntax-fontStyle-keyword)}.sp-c-jkvvao .sp-syntax-definition{color:var(--sp-syntax-color-definition);font-style:var(--sp-syntax-fontStyle-definition)}.sp-c-jkvvao .sp-syntax-punctuation{color:var(--sp-syntax-color-punctuation);font-style:var(--sp-syntax-fontStyle-punctuation)}.sp-c-jkvvao .sp-syntax-property{color:var(--sp-syntax-color-property);font-style:var(--sp-syntax-fontStyle-property)}.sp-c-jkvvao .sp-syntax-tag{color:var(--sp-syntax-color-tag);font-style:var(--sp-syntax-fontStyle-tag)}.sp-c-jkvvao .sp-syntax-static{color:var(--sp-syntax-color-static);font-style:var(--sp-syntax-fontStyle-static)}.sp-c-juMdfR{flex:1;display:flex;flex-direction:column;background:white;overflow:auto;position:relative}.sp-c-juMdfR .sp-bridge-frame{border:0;position:absolute;left:var(--sp-space-2);bottom:var(--sp-space-2);z-index:var(--sp-zIndices-top);height:12px;width:30%;mix-blend-mode:multiply;pointer-events:none}.sp-c-fgviib{border:0;outline:0;width:100%;height:100%;min-height:160px;max-height:2000px;flex:1}.sp-c-kwibBT{display:flex;position:absolute;bottom:var(--sp-space-2);right:var(--sp-space-2);z-index:var(--sp-zIndices-overlay);gap:var(--sp-space-2)}.sp-c-ivYAPe{padding:0}.sp-c-lgESqD{min-width:var(--sp-space-6);justify-content:center}.sp-c-cUFVvP{display:flex;align-items:center;height:var(--sp-layout-headerHeight);border-bottom:1px solid var(--sp-colors-surface2);padding:var(--sp-space-3) var(--sp-space-2);background:var(--sp-colors-surface1)}.sp-c-jzEuAZ{background-color:var(--sp-colors-surface2);color:var(--sp-colors-clickable);padding:var(--sp-space-1) var(--sp-space-3);border-radius:99999px;border:1px solid var(--sp-colors-surface2);height:24px;line-height:24px;font-size:inherit;outline:none;flex:1;margin-left:var(--sp-space-4);width:0;transition:background var(--sp-transitions-default)}.sp-c-jzEuAZ:hover{background-color:var(--sp-colors-surface3)}.sp-c-jzEuAZ:focus{background-color:var(--sp-colors-surface1);border:1px solid var(--sp-colors-accent);color:var(--sp-colors-base)}}--sxs{--sxs:3 sp-c-PJLV-kCOVwI-status-pass sp-c-PJLV-kEzYsr-status-fail sp-c-PJLV-gHAhSA-status-skip sp-c-PJLV-jgnHyR-status-title sp-c-PJLV-iCgxLS-status-run sp-c-PJLV-bnDZSy-status-pass sp-c-PJLV-eYuGwt-status-fail sp-c-fVPbOs-gMQIch-variant-light sp-c-fVPbOs-LrWkf-variant-dark}@media{.sp-c-PJLV-kCOVwI-status-pass{color:var(--test-pass)}.sp-c-PJLV-kEzYsr-status-fail{color:var(--test-fail)}.sp-c-PJLV-gHAhSA-status-skip{color:var(--test-skip)}.sp-c-PJLV-jgnHyR-status-title{color:var(--test-title)}.sp-c-PJLV-iCgxLS-status-run{background:var(--test-run);color:var(--sp-colors-surface1)}.sp-c-PJLV-bnDZSy-status-pass{background:var(--test-pass);color:var(--sp-colors-surface1)}.sp-c-PJLV-eYuGwt-status-fail{background:var(--test-fail);color:var(--sp-colors-surface1)}.sp-c-fVPbOs-gMQIch-variant-light{color-scheme:light}.sp-c-fVPbOs-LrWkf-variant-dark{color-scheme:dark}}</style> <link rel="stylesheet" href="/_astro/_id_.CkIdR5X1.css">
<link rel="stylesheet" href="/_astro/_id_.Ck7a8zcL.css"></head> <body class="relative flex h-full flex-col bg-background font-sans text-on-background [&_main]:my-6"> <script>
  // @ts-check
  const storedThemeChoice = window.localStorage.getItem('__theme') ?? 'system'

  window.__setTheme = setTheme
  // prettier-ignore
  window.__setTheme(/** @type {ThemeChoice} */ (storedThemeChoice))

  /**
   * @type {(themeChoice: ThemeChoice) => Promise<void>}
   */
  async function setTheme(themeChoice) {
    let theme = themeChoice

    if (themeChoice === 'system') {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    const changeTheme = () => {
      document.body.classList.toggle('dark', theme === 'dark')
    }

    let viewTransition = null

    if (
      document.startViewTransition &&
      !document.documentElement.hasAttribute('data-notransition')
    ) {
      document.documentElement.setAttribute('data-notransition', '')

      const width = document.documentElement.clientWidth
      const height = document.documentElement.clientHeight
      const diagonal = Math.sqrt(width ** 2 + height ** 2)
      const circleRadius = height > width ? height : diagonal
      document.documentElement.style.setProperty(
        '--circle-radius',
        `${circleRadius}px`,
      )

      viewTransition = document.startViewTransition(() => {
        changeTheme()
      })
    } else {
      changeTheme()
    }

    window.localStorage.setItem('__theme', themeChoice)

    document.body.dispatchEvent(
      new CustomEvent('newTheme', {
        detail: {
          themeChoice,
          theme,
        },
      }),
    )

    if (viewTransition) {
      await viewTransition.finished
      document.documentElement.removeAttribute('data-notransition')
    }
  }

  window.addEventListener('storage', function (e) {
    const newTheme = e.newValue
    if (newTheme && newTheme && e.key === '__theme') {
      // prettier-ignore
      window.__setTheme(/** @type {ThemeChoice} */ (newTheme))
    }
  })

  window.addEventListener('load', function () {
    document.documentElement.removeAttribute('data-notransition')
  })
</script> <div class="w-full"> <div class="pt-nav-height sm:hidden"> <div class="h-nav-height fixed top-0 left-0 z-30 flex w-screen items-center justify-between rounded-none bg-background/90 backdrop-blur-xs px-horizontal-padding"> <div class="flex flex-row items-center gap-2 min-w-0"> <a href="/pt/posts/" data-testid="parent-page-link" aria-label="Voltar à pagina anterior"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left "><path d="m15 18-6-6 6-6"></path></svg> </a> <h2 class="m-0 truncate font-sans font-normal">Web Scraping de páginas dinâmicas com Python - Phelipe Teles</h2> </div> <button type="button" class="hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 bg-transparent" data-a11y-dialog-show="sidenav" data-testid="open-sidenav" aria-label="Abrir barra de navegação lateral"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu "><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg> </button> </div> </div> <div class="hidden h-full w-full sm:block"> <div class="grid grid-cols-layout"> <div class="flex w-full items-center justify-between"> <div class="mx-auto flex w-full max-w-content justify-between"> <nav class="flex justify-between" aria-label="Navegação principal"> <ul class="m-0 flex flex-row list-none gap-4"> <li class=""> <a id="about" href="/pt/" class="py-2 inline-block h-full w-full group"> <span class="underline underline-offset-8 decoration-2 decoration-transparent group-hover:decoration-hover"> Sobre </span> </a> </li><li class=""> <a id="posts" href="/pt/posts/" class="py-2 inline-block h-full w-full group" aria-current="page"> <span class="underline underline-offset-8 decoration-2 decoration-primary group-hover:decoration-primary-hover"> Posts </span> </a> </li> </ul> </nav> <div class="flex flex-row items-center gap-2">  <div style="--icon-size:24px;--select-padding:var(--icon-size)" class="rounded-sm items-center grid justify-between bg-surface shadow-xs shadow-shadow"> <select class="sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-theme-select="true" aria-label="Escolha um tema" style="--select-padding:32px">  <option value="light">Claro</option> <option value="dark">Escuro</option> <option value="system">Sistema</option>   </select> <span class="col-span-1 col-start-1 row-start-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-[16px] [&#38;_svg]:h-[16px] pointer-events-none">  <svg class="feather" viewBox="0 0 24 24" width="24" height="24"> <title>Ícone do tema</title> <defs> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon " id="moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun " id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor " id="monitor"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg> </defs> <use data-theme-select-icon href="#monitor"></use> </svg>  </span> <span class="justify-self-end row-start-1 col-start-3 col-span-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-[16px] [&#38;_svg]:h-[16px] pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div> <script type="module">const i=document.querySelectorAll("[data-theme-select]");i?.forEach(e=>{const t=window.localStorage.getItem("__theme")??"system";s(t);const o=Array.from(e.options).find(n=>n.value===t);o&&o.setAttribute("selected",""),e.addEventListener("change",function(n){if(!n.target)return;const c=n.target.selectedOptions[0];c&&window.__setTheme(c.value)})});document.body.addEventListener("newTheme",function(e){const t=e.detail.themeChoice;s(t)});function s(e){const t={dark:"#moon",light:"#sun",system:"#monitor"}[e];i.forEach(o=>{o.parentElement?.querySelector("[data-theme-select-icon]")?.setAttribute("href",t)})}</script> </div> </div> </div> </div> </div> </div> <aside data-a11y-dialog="sidenav" aria-hidden="true" class="fixed z-50 h-full w-full" style="visibility: hidden;"> <div data-a11y-dialog-hide class="fixed inset-0 -z-1 w-full bg-neutral-700/75 backdrop-blur-xs"></div> <div role="document" class="ml-auto h-full flex flex-col w-3/4 rounded-none bg-background py-0 will-change-transform"> <div class="mb-2 flex h-nav-height items-center justify-end px-horizontal-padding"> <button type="button" data-a11y-dialog-hide="true" aria-label="Close" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x "><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> </button> </div> <nav class="flex flex-col" aria-label="Navegação principal"> <ul class="m-0 flex list-none flex-col items-center justify-center gap-2 px-horizontal-padding"> <li class="w-full"> <a id="about" href="/pt/" class="flex items-center justify-center flex-row transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded-sm whitespace-nowrap py-1 px-2 bg-surface text-on-background"><div class="pr-2"></div>Sobre<div class="pl-2"></div></a> </li><li class="w-full"> <a id="posts" href="/pt/posts/" aria-current="page" class="flex items-center justify-center flex-row transition-colors duration-300 disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded-sm whitespace-nowrap py-1 px-2 bg-primary text-on-primary hover:bg-primary-hover shadow-xs shadow-shadow"><div class="pr-2"></div>Posts<div class="pl-2"></div></a> </li> </ul> </nav> <div class="flex flex-col gap-2 pb-4 mt-auto px-horizontal-padding [&_div]:flex-1"> <div style="--icon-size:24px;--select-padding:var(--icon-size)" class="rounded-sm items-center grid justify-between bg-background"> <select class="sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-language-select="true" aria-label="Escolha a linguagem" style="--select-padding:32px">  <option value="en">English</option> <option selected value="pt">Português</option>   </select> <span class="col-span-1 col-start-1 row-start-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-[16px] [&#38;_svg]:h-[16px] pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages " slot="start-icon"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg>  </span> <span class="justify-self-end row-start-1 col-start-3 col-span-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-[16px] [&#38;_svg]:h-[16px] pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div> <script type="module">const a=document.querySelectorAll("[data-language-select]");a?.forEach(e=>{e.addEventListener("change",function(){window.location.href=n()})});function n(){const e=window.location.pathname;let t=e;switch(e){case"/pt":t="/";break;case"/":t="/pt/";break;default:e.startsWith("/pt/")?t=e.replace("/pt/","/"):t="/pt"+e;break}return t}</script> <div style="--icon-size:24px;--select-padding:var(--icon-size)" class="rounded-sm items-center grid justify-between bg-surface shadow-xs shadow-shadow"> <select class="sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-theme-select="true" aria-label="Escolha um tema" style="--select-padding:32px">  <option value="light">Claro</option> <option value="dark">Escuro</option> <option value="system">Sistema</option>   </select> <span class="col-span-1 col-start-1 row-start-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-[16px] [&#38;_svg]:h-[16px] pointer-events-none">  <svg class="feather" viewBox="0 0 24 24" width="24" height="24"> <title>Ícone do tema</title> <defs> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon " id="moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun " id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor " id="monitor"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg> </defs> <use data-theme-select-icon href="#monitor"></use> </svg>  </span> <span class="justify-self-end row-start-1 col-start-3 col-span-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-[16px] [&#38;_svg]:h-[16px] pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div>  </div> </div> </aside> <script type="module" src="/_astro/SideNav.astro_astro_type_script_index_0_lang.DwDLKeHA.js"></script>   <main class="grid grid-cols-layout"> <div class="sm:col-content px-0"> <article> <header class="flex flex-col"> <h1 class="mb-4 text-4xl max-w-prose"> Web Scraping de páginas dinâmicas com Python </h1> <div class="mb-4 flex gap-2 flex-row flex-wrap"> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="1.25em" height="1.25em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar shrink-0"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg> <time datetime="2019-08-18"> 18  de  agosto, 2019 </time> </div> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="1.25em" height="1.25em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-timer shrink-0"><line x1="10" x2="14" y1="2" y2="2"></line><line x1="12" x2="15" y1="14" y2="11"></line><circle cx="12" cy="14" r="8"></circle></svg> <div>2 min.</div> </div> <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover flex flex-row gap-2 items-center shrink-0" target="_blank" href="https://github.com/phelipetls/blog/blob/master/src/content/posts/web-scraping-de-paginas-dinamicas/index.pt.mdx"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-code2 "><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m9 18 3-3-3-3"></path><path d="m5 12-3 3 3 3"></path></svg> Código fonte</a> </div> <div class="mb-4 flex max-w-xl flex-wrap gap-2"> <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-2" href="/pt/tags/web-scraping/"> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag "><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"></path><path d="M7 7h.01"></path></svg> web-scraping  </a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-2" href="/pt/tags/pandas/"> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag "><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"></path><path d="M7 7h.01"></path></svg> pandas  </a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-2" href="/pt/tags/regex/"> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag "><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"></path><path d="M7 7h.01"></path></svg> regex  </a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-2" href="/pt/tags/dataviz/"> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag "><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"></path><path d="M7 7h.01"></path></svg> dataviz  </a> <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-2" href="/pt/tags/">  ...  </a> </div> </header> <hr class="my-8"> <div data-blog-post-container data-toc="closed" class="group flex flex-col lg:gap-8">  <div data-blog-post class="min-w-0 [&#38;>pre]:my-8 max-sm:[&#38;>pre]:full-bleed *:data-codeblock:my-8 max-sm:*:data-codeblock:full-bleed max-sm:[&#38;>[data-codeblock]_pre]:rounded-none max-sm:[&#38;>[data-codeblock]_[data-codeblock-header]]:rounded-none [&#38;>hr]:border-0 [&#38;>hr]:text-center [&#38;>hr]:after:content-['⁂'] max-sm:[&#38;>figure]:full-bleed [&#38;>astro-island>div]:my-8 [&#38;>lite-youtube]:my-8 [&#38;>blockquote]:my-8 [&#38;>figure_video]:min-h-[15em] [&#38;_.katex-display]:max-w-prose [&#38;_.katex-display]:overflow-x-auto [&#38;_.katex-display]:overflow-y-hidden"> <p class="max-w-prose">Web scraping pode ficar bem complicado quando a página é dinâmica, você não mais
precisa somente carregar o código-fonte da página mas também precisa esperar o
JavaScript da página construir a página, que é o caso do site do Reclame Aqui.</p>
<p class="max-w-prose">Nesses casos, precisamos controlar um navegador remotamente por meio de um <em>web
driver</em>, por exemplo, o <code>geckodriver</code> para o Firefox ou <code>chromedriver</code> para o
Chrome.</p>
<p class="max-w-prose">Para isso, usamos uma biblioteca a partir da qual podemos instruir este
navegador a fazer o que queremos, por exemplo o <code>Selenium</code>.</p>
<p class="max-w-prose">Pros meus propósitos, usarei o <code>Selenium</code> para abrir uma URL e extrair alguma
informação na página, tarefa para alguma biblioteca que entenda estrutura HTML e
facilite a extração dos elementos, como a <code>BeautifulSoup</code>.</p>
<p class="max-w-prose">Utilizo essas duas bibliotecas no script abaixo. E podemos instalá-las com:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path fill="none" d="M4.24 4.24h119.53v119.53H4.24z" />
  <path class="dark:fill-[#ffffff]" fill="#293138" d="M109.01 28.64 71.28 6.24c-2.25-1.33-4.77-2-7.28-2s-5.03.67-7.28 2.01l-37.74 22.4c-4.5 2.67-7.28 7.61-7.28 12.96v44.8c0 5.35 2.77 10.29 7.28 12.96l37.73 22.4c2.25 1.34 4.76 2 7.28 2 2.51 0 5.03-.67 7.28-2l37.74-22.4c4.5-2.67 7.28-7.62 7.28-12.96V41.6c0-5.34-2.77-10.29-7.28-12.96zM79.79 98.59l.06 3.22c0 .39-.25.83-.55.99l-1.91 1.1c-.3.15-.56-.03-.56-.42l-.03-3.17c-1.63.68-3.29.84-4.34.42-.2-.08-.29-.37-.21-.71l.69-2.91c.06-.23.18-.46.34-.6.06-.06.12-.1.18-.13.11-.06.22-.07.31-.03 1.14.38 2.59.2 3.99-.5 1.78-.9 2.97-2.72 2.95-4.52-.02-1.64-.9-2.31-3.05-2.33-2.74.01-5.3-.53-5.34-4.57-.03-3.32 1.69-6.78 4.43-8.96l-.03-3.25c0-.4.24-.84.55-1l1.85-1.18c.3-.15.56.04.56.43l.03 3.25c1.36-.54 2.54-.69 3.61-.44.23.06.34.38.24.75l-.72 2.88c-.06.22-.18.44-.33.58a.77.77 0 0 1-.19.14c-.1.05-.19.06-.28.05-.49-.11-1.65-.36-3.48.56-1.92.97-2.59 2.64-2.58 3.88.02 1.48.77 1.93 3.39 1.97 3.49.06 4.99 1.58 5.03 5.09.05 3.44-1.79 7.15-4.61 9.41zm26.34-60.5-35.7 22.05c-4.45 2.6-7.73 5.52-7.74 10.89v43.99c0 3.21 1.3 5.29 3.29 5.9-.65.11-1.32.19-1.98.19-2.09 0-4.15-.57-5.96-1.64l-37.73-22.4c-3.69-2.19-5.98-6.28-5.98-10.67V41.6c0-4.39 2.29-8.48 5.98-10.67l37.74-22.4c1.81-1.07 3.87-1.64 5.96-1.64s4.15.57 5.96 1.64l37.74 22.4c3.11 1.85 5.21 5.04 5.8 8.63-1.27-2.67-4.09-3.39-7.38-1.47z" />
  <path fill="#4FA847" d="m99.12 90.73-9.4 5.62c-.25.15-.43.31-.43.61v2.46c0 .3.2.43.45.28l9.54-5.8c.25-.15.29-.42.29-.72v-2.17c0-.3-.2-.42-.45-.28z" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> Bash </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1M9bSv" prefix="r34" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;$ pip3 instal selenium bs4&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF">$</span><span style="color:#98C379"> pip3</span><span style="color:#98C379"> instal</span><span style="color:#98C379"> selenium</span><span style="color:#98C379"> bs4</span></span></code></pre> </div> <script type="module" src="/_astro/CodeBlock.astro_astro_type_script_index_0_lang.CZ7V3yCn.js"></script>
<p class="max-w-prose">Para fazer o crawleamento, criei uma classe que aceita o nome de uma empresa e o
web driver a ser utilizado.</p>
<p class="max-w-prose">Ela tem o método <code>ReclameAqui.extrair_informacoes(n_paginas)</code> que vai extrair os
links e títulos das reclamações das primeiras <code>n_paginas</code>.</p>
<p class="max-w-prose">Outro método, o <code>ReclameAqui.extrair_descricoes()</code>, abre cada uma dessas URLs e
extrai as descrições das informações.</p>
<p class="max-w-prose">Para extrair a informação desejada, nós fazemos o <code>BeautifulSoup</code> “entender” o
código-fonte primeiro para depois usarmos os métodos para extração de algum
element do HTML.</p>
<p class="max-w-prose">Por exemplo, para extrair o título e os links das reclamações em cada página,
procuramos por parágrafos que contenham a classe <code>text-detail</code>:
(<code>&lt;p class=&#39;text-detail&#39;&gt;&lt;/p&gt;</code>), e depois procuramos elementos <code>a</code>, que contém o
título dentro dele e o link dentro do atributo <code>href</code>.</p>
<p class="max-w-prose">Já para a descrição, procuramos por um elemento <code>div</code> com a classe
<code>complain-body</code>, e extraímos o texto dentro dele.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path class="fill-[#4b8bbe] dark:fill-[#FFD845]" fill="#FFD845" d="M49.33 62h29.159C86.606 62 93 55.132 93 46.981V19.183c0-7.912-6.632-13.856-14.555-15.176-5.014-.835-10.195-1.215-15.187-1.191-4.99.023-9.612.448-13.805 1.191C37.098 6.188 35 10.758 35 19.183V30h29v4H23.776c-8.484 0-15.914 5.108-18.237 14.811-2.681 11.12-2.8 17.919 0 29.53C7.614 86.983 12.569 93 21.054 93H31V79.952C31 70.315 39.428 62 49.33 62zm-1.838-39.11c-3.026 0-5.478-2.479-5.478-5.545 0-3.079 2.451-5.581 5.478-5.581 3.015 0 5.479 2.502 5.479 5.581-.001 3.066-2.465 5.545-5.479 5.545zm74.789 25.921C120.183 40.363 116.178 34 107.682 34H97v12.981C97 57.031 88.206 65 78.489 65H49.33C41.342 65 35 72.326 35 80.326v27.8c0 7.91 6.745 12.564 14.462 14.834 9.242 2.717 17.994 3.208 29.051 0C85.862 120.831 93 116.549 93 108.126V97H64v-4h43.682c8.484 0 11.647-5.776 14.599-14.66 3.047-9.145 2.916-17.799 0-29.529zm-41.955 55.606c3.027 0 5.479 2.479 5.479 5.547 0 3.076-2.451 5.579-5.479 5.579-3.015 0-5.478-2.502-5.478-5.579 0-3.068 2.463-5.547 5.478-5.547z" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> Python </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z12cwTM" prefix="r35" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;from time import sleep\nfrom selenium import webdriver\nfrom bs4 import BeautifulSoup as bs\n\n\nclass ReclameAqui:\n\n    base_url = \&quot;https://www.reclameaqui.com.br/empresa/\&quot;\n\n    def __init__(self, driver, empresa):\n        self.driver = driver\n        self.empresa = empresa\n\n    def extrair_informacoes(self, n_paginas):\n        url = self.base_url + self.empresa + \&quot;/lista-reclamacoes/?pagina=\&quot;\n        self.reclamacoes, self.titulos, self.links = [], [], []\n\n        for i in range(1, n_paginas + 1):\n            self.driver.get(url + str(i))\n            sleep(3)\n            html = bs(self.driver.page_source, \&quot;html.parser\&quot;)\n\n            reclamacoes_html = html.find_all(\&quot;p\&quot;, {\&quot;class\&quot;: \&quot;text-detail\&quot;})\n            reclamacoes_na_pagina = [\n                reclamacao.text.split(\&quot;|\&quot;) for reclamacao in reclamacoes_html\n            ]\n            self.reclamacoes.extend(reclamacoes_na_pagina)\n\n            titulos_e_links = html.find_all(\n                \&quot;a\&quot;, {\&quot;class\&quot;: \&quot;link-complain-id-complains\&quot;}\n            )\n            self.titulos.extend([titulo.text.strip() for titulo in titulos_e_links])\n            self.links.extend([link.get(\&quot;href\&quot;) for link in titulos_e_links])\n\n    def extrair_descricoes(self):\n        urls = [self.base_url + link[1:] for link in self.links]\n        self.descricoes = []\n        for url in urls:\n            self.driver.get(url)\n            sleep(3)\n            html = bs(self.driver.page_source, \&quot;html.parser\&quot;)\n            descricao = html.find(\&quot;div\&quot;, {\&quot;class\&quot;: \&quot;complain-body\&quot;}).text.strip()\n            self.descricoes.append(descricao)&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD">from</span><span style="color:#ABB2BF"> time </span><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> sleep</span></span>
<span class="line"><span style="color:#C678DD">from</span><span style="color:#ABB2BF"> selenium </span><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> webdriver</span></span>
<span class="line"><span style="color:#C678DD">from</span><span style="color:#ABB2BF"> bs4 </span><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> BeautifulSoup </span><span style="color:#C678DD">as</span><span style="color:#ABB2BF"> bs</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">class</span><span style="color:#E5C07B"> ReclameAqui</span><span style="color:#ABB2BF">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">    base_url </span><span style="color:#56B6C2">=</span><span style="color:#98C379"> "https://www.reclameaqui.com.br/empresa/"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">    def</span><span style="color:#56B6C2"> __init__</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">driver</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">empresa</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.driver </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> driver</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.empresa </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> empresa</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">    def</span><span style="color:#61AFEF"> extrair_informacoes</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66;font-style:italic">n_paginas</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">        url </span><span style="color:#56B6C2">=</span><span style="color:#E5C07B"> self</span><span style="color:#ABB2BF">.base_url </span><span style="color:#56B6C2">+</span><span style="color:#E5C07B"> self</span><span style="color:#ABB2BF">.empresa </span><span style="color:#56B6C2">+</span><span style="color:#98C379"> "/lista-reclamacoes/?pagina="</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.reclamacoes, </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.titulos, </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.links </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [], [], []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">        for</span><span style="color:#ABB2BF"> i </span><span style="color:#C678DD">in</span><span style="color:#56B6C2"> range</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, n_paginas </span><span style="color:#56B6C2">+</span><span style="color:#D19A66"> 1</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#E5C07B">            self</span><span style="color:#ABB2BF">.driver.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(url </span><span style="color:#56B6C2">+</span><span style="color:#56B6C2"> str</span><span style="color:#ABB2BF">(i))</span></span>
<span class="line"><span style="color:#61AFEF">            sleep</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">            html </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> bs</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.driver.page_source, </span><span style="color:#98C379">"html.parser"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">            reclamacoes_html </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> html.</span><span style="color:#61AFEF">find_all</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"p"</span><span style="color:#ABB2BF">, {</span><span style="color:#98C379">"class"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"text-detail"</span><span style="color:#ABB2BF">})</span></span>
<span class="line"><span style="color:#ABB2BF">            reclamacoes_na_pagina </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [</span></span>
<span class="line"><span style="color:#ABB2BF">                reclamacao.text.</span><span style="color:#61AFEF">split</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"|"</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> reclamacao </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> reclamacoes_html</span></span>
<span class="line"><span style="color:#ABB2BF">            ]</span></span>
<span class="line"><span style="color:#E5C07B">            self</span><span style="color:#ABB2BF">.reclamacoes.</span><span style="color:#61AFEF">extend</span><span style="color:#ABB2BF">(reclamacoes_na_pagina)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">            titulos_e_links </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> html.</span><span style="color:#61AFEF">find_all</span><span style="color:#ABB2BF">(</span></span>
<span class="line"><span style="color:#98C379">                "a"</span><span style="color:#ABB2BF">, {</span><span style="color:#98C379">"class"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"link-complain-id-complains"</span><span style="color:#ABB2BF">}</span></span>
<span class="line"><span style="color:#ABB2BF">            )</span></span>
<span class="line"><span style="color:#E5C07B">            self</span><span style="color:#ABB2BF">.titulos.</span><span style="color:#61AFEF">extend</span><span style="color:#ABB2BF">([titulo.text.</span><span style="color:#61AFEF">strip</span><span style="color:#ABB2BF">() </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> titulo </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> titulos_e_links])</span></span>
<span class="line"><span style="color:#E5C07B">            self</span><span style="color:#ABB2BF">.links.</span><span style="color:#61AFEF">extend</span><span style="color:#ABB2BF">([link.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"href"</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> link </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> titulos_e_links])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">    def</span><span style="color:#61AFEF"> extrair_descricoes</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B;font-style:italic">self</span><span style="color:#ABB2BF">):</span></span>
<span class="line"><span style="color:#ABB2BF">        urls </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.base_url </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> link[</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">:] </span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> link </span><span style="color:#C678DD">in</span><span style="color:#E5C07B"> self</span><span style="color:#ABB2BF">.links]</span></span>
<span class="line"><span style="color:#E5C07B">        self</span><span style="color:#ABB2BF">.descricoes </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#C678DD">        for</span><span style="color:#ABB2BF"> url </span><span style="color:#C678DD">in</span><span style="color:#ABB2BF"> urls:</span></span>
<span class="line"><span style="color:#E5C07B">            self</span><span style="color:#ABB2BF">.driver.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(url)</span></span>
<span class="line"><span style="color:#61AFEF">            sleep</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">            html </span><span style="color:#56B6C2">=</span><span style="color:#61AFEF"> bs</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.driver.page_source, </span><span style="color:#98C379">"html.parser"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">            descricao </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> html.</span><span style="color:#61AFEF">find</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"div"</span><span style="color:#ABB2BF">, {</span><span style="color:#98C379">"class"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"complain-body"</span><span style="color:#ABB2BF">}).text.</span><span style="color:#61AFEF">strip</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#E5C07B">            self</span><span style="color:#ABB2BF">.descricoes.</span><span style="color:#61AFEF">append</span><span style="color:#ABB2BF">(descricao)</span></span></code></pre> </div> 
<p class="max-w-prose">Esse código deve funcionar para qualquer empresa contanto que a estrutura do
HTML do ReclameAqui não mude (isto é, o nome das classes e o tipo dos elementos
onde as informações se encontram).</p> </div> </div> </article> <hr class="max-sm:full-bleed mt-8"> <nav class="flex items-stretch sm:gap-4 max-sm:full-bleed sm:my-8" aria-label="Navegação entre posts"> <a class="sm:card flex flex-1 flex-col gap-2 border-0 px-horizontal-padding py-4 transition-colors duration-300 hover:bg-hover" href="/pt/posts/gram-schmidt/"> <span class="text-primary"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left "><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg> </span> Processo de Gram-Schmidt com NumPy </a> <div class="border-l border-divider sm:hidden"></div> <a class="sm:card flex flex-1 flex-col-reverse items-end justify-end gap-2 border-0 px-horizontal-padding py-4 text-right transition-colors duration-300 hover:bg-hover" href="/pt/posts/demystifying-git-rebase/"> Desmistificando git rebase <span class="text-primary"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right "><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg> </span> </a> </nav> <hr class="max-sm:full-bleed mb-8"> </div> </main>  <footer class="bg-background grid grid-cols-layout"> <div class="mx-auto flex w-full max-w-content flex-col pt-4 pb-8 sm:justify-between"> <nav aria-label="Contatos" class="flex gap-2 mb-2"> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-email" href="mailto:phelipe_teles@hotmail.com" aria-label="E-mail">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail "><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>  </a> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-linkedin" href="https://linkedin.com/in/phelipeteles" aria-label="LinkedIn">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin "><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg>  </a> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-github" href="https://github.com/phelipetls" aria-label="GitHub">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>  </a> </nav> <span class="text-sm"> 
Todo conteúdo está sob a licença <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>.
 </span> </div> </footer> </body></html> <script type="module">const e=document.querySelector("[data-blog-post-container]"),t=document.querySelector("[data-toggle-toc]"),o=document.querySelector("[data-blog-post-toc-container]");let n=new AbortController;const a=localStorage.getItem("__preferred_toc_state");a!==null&&(a==="open"?s():(c(),o?.classList.add("invisible")));function s(){n.abort(),o?.classList.remove("invisible"),e instanceof HTMLElement&&t instanceof HTMLButtonElement&&(e.setAttribute("data-toc","open"),localStorage.setItem("__preferred_toc_state","open"),t.setAttribute("aria-label",t.dataset.closedTocLabel??""))}function c(){n=new AbortController,o?.addEventListener("transitionend",()=>{o?.classList.add("invisible")},{signal:n.signal}),e instanceof HTMLElement&&t instanceof HTMLButtonElement&&(e.setAttribute("data-toc","closed"),localStorage.setItem("__preferred_toc_state","closed"),t.setAttribute("aria-label",t.dataset.openTocLabel??""))}t?.addEventListener("click",()=>{if(!(e instanceof HTMLDivElement))return;e.dataset.toc==="open"?c():s()});</script>