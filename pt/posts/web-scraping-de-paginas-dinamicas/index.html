<!doctype html><html class="scroll-smooth scroll-pt-nav-height sm:scroll-pt-0
h-full text-base selection:bg-primary selection:text-on-primary sm:text-lg" lang=pt-br><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=deploy-date content="2022-11-06"><meta name=author content="Phelipe Teles"><meta name=color-scheme content="dark light"><style>@font-face{font-family:fira sans;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/fira-sans-v16-latin-regular.woff2)format('woff2')}@font-face{font-family:fira sans;font-style:normal;font-weight:600;font-display:swap;src:url(/fonts/fira-sans-v16-latin-600.woff2)format('woff2')}@font-face{font-family:merriweather;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/merriweather-v30-latin-regular.woff2)format('woff2')}@font-face{font-family:merriweather;font-style:normal;font-weight:700;font-display:swap;src:url(/fonts/merriweather-v30-latin-700.woff2)format('woff2')}</style><script async defer data-website-id=32b90065-c2a6-4390-9684-dfde99409815 src=https://umami-production-10b2.up.railway.app/main.js></script>
<script type=module defer src=https://phelipetls.github.io/js/bundle.min.js></script><meta name=description content="Desenvolvedor web front-end que escreve sobre a prática da programação e suas ferramentas"><meta name=publish-date content="2019-08-18"><meta name=last-modified-date content="2022-10-01"><meta name=keywords content="web-scraping,pandas,regex,dataviz"><title>Web Scraping de páginas dinâmicas com Python |
Phelipe Teles</title><meta property="og:title" content="Web Scraping de páginas dinâmicas com Python"><meta property="og:description" content="Web scraping pode ficar bem complicado quando a página é dinâmica, você não mais precisa somente carregar o código-fonte da página mas também precisa esperar o JavaScript da página construir a página, que é o caso do site do Reclame Aqui."><meta property="og:type" content="article"><meta property="og:url" content="https://phelipetls.github.io/pt/posts/web-scraping-de-paginas-dinamicas/"><meta property="og:image" content="https://phelipetls.github.io/pt/posts/web-scraping-de-paginas-dinamicas/post-image.pt.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-08-18T00:00:00+00:00"><meta property="article:modified_time" content="2022-10-01T09:33:44-03:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://phelipetls.github.io/pt/posts/web-scraping-de-paginas-dinamicas/post-image.pt.png"><meta name=twitter:title content="Web Scraping de páginas dinâmicas com Python"><meta name=twitter:description content="Web scraping pode ficar bem complicado quando a página é dinâmica, você não mais precisa somente carregar o código-fonte da página mas também precisa esperar o JavaScript da página construir a página, que é o caso do site do Reclame Aqui."><link rel=stylesheet href="/css/main.min.css"><link rel=stylesheet href=https://phelipetls.github.io/css/vendor/lite-yt-embed.min.css><link rel=stylesheet href=/css/dark-syntax-highlight.min.css></head><body data-preload class="ease h-full bg-background font-sans text-on-background transition-colors duration-500"><script>(()=>{window.__setTheme=s;var e=o();window.__setTheme(e),window.addEventListener("load",function(){document.body.removeAttribute("data-preload"),t(e)}),window.addEventListener("storage",function(e){const t=e.newValue;e.key==="__theme"&&window.__setTheme(t)});function s(e){if(!e)return;a(e),c(e),t(e)}function c(e){localStorage.setItem("__theme",e)}function o(){return localStorage.getItem("__theme")||"system"}function i(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function n(e){return e==="system"?i():e}function a(e){const t=n(e);document.body.classList.toggle("dark",t==="dark")}function r(e){return new CustomEvent("newTheme",{detail:{themeChoice:e,theme:n(e)}})}function t(e){document.body.dispatchEvent(r(e))}})()</script><div class="relative flex h-full flex-col"><div data-nav-container class="mb-8 w-full"><div class="pt-nav-height sm:hidden"><nav class="fixed top-0 left-0 z-30 flex w-screen justify-between rounded-none border-b border-divider bg-background/90 py-4 px-horizontal-padding backdrop-blur" aria-label="Navegação principal"><div class="flex flex-row items-center gap-2 overflow-hidden"><a class=border-0 href=https://phelipetls.github.io/pt/posts/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"/></svg></a><h2 class="m-0 truncate font-sans font-normal">Web Scraping de páginas dinâmicas com Python</h2></div><button data-a11y-dialog-show=sidenav class="btn btn-icon" aria-label="Abrir barra de navegação lateral"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></nav></div><div class="hidden h-full w-full sm:block"><div class="flex h-full w-full items-center justify-between bg-background pr-horizontal-padding"><div class="mx-auto flex h-full w-full max-w-content justify-between"><nav class="flex h-full justify-between overflow-x-auto px-horizontal-padding" aria-label="Navegação principal"><ul class="m-0 flex list-none flex-row flex-nowrap items-center gap-2"><li><a id=about href=https://phelipetls.github.io/pt/ class="hover:bg-hover
relative
flex
items-center
justify-center
rounded
border-0
py-1
px-2
transition-colors
duration-300"><span>Sobre</span></a></li><li><a id=posts href=https://phelipetls.github.io/pt/posts/ aria-current=page class="bg-primary card hover:bg-primary-hover
relative
flex
items-center
justify-center
rounded
border-0
py-1
px-2
transition-colors
duration-300"><span class=text-on-primary>Posts</span></a></li><li><a id=projects href=https://phelipetls.github.io/pt/projects/ class="hover:bg-hover
relative
flex
items-center
justify-center
rounded
border-0
py-1
px-2
transition-colors
duration-300"><span>Projetos</span></a></li><li><a id=resume href=https://phelipetls.github.io/pt/resume/ class="hover:bg-hover
relative
flex
items-center
justify-center
rounded
border-0
py-1
px-2
transition-colors
duration-300"><span>Currículo</span></a></li></ul></nav><div class="h-full py-3"><div class="flex h-full flex-row items-stretch gap-2 pl-2"><div class="relative flex h-full flex-row items-center"><span class="pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-sm"><svg class="feather" viewBox="0 0 24 24" width="24" height="24"><title>Ícone do tema</title><defs><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg><svg id="monitor" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-monitor"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg></defs><use data-theme-select-icon href=#monitor></use></svg></span>
<select class="card h-full appearance-none bg-surface py-1 px-8 text-center" data-theme-select id=theme-select aria-label="Escolha um tema"><option value=light>Claro</option><option value=dark>Escuro</option><option value=system>Sistema</option></select>
<span class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-sm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></div></div></div></div></div></div></div><aside data-a11y-dialog=sidenav aria-hidden=true class="fixed z-50 h-full w-full" style=visibility:hidden><div data-a11y-dialog-hide class="fixed inset-0 -z-1 w-full bg-neutral-700 bg-opacity-75 backdrop-blur-sm"></div><div role=document class="ml-auto h-full w-3/4 rounded-none bg-background py-0 will-change-transform"><div class="flex h-full flex-col justify-between"><div class="mb-2 flex h-nav-height items-center justify-end px-horizontal-padding"><button data-a11y-dialog-hide class="btn btn-icon" aria-label=Close><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div><nav class="flex flex-1 flex-col"><ul class="m-0 flex list-none flex-col items-center justify-center gap-4 px-horizontal-padding"><li class=w-full><a id=about href=https://phelipetls.github.io/pt/ class="hover:bg-hover
block
w-full
rounded
border-0
p-2
text-center
text-xl
transition-colors
duration-300">Sobre</a></li><li class=w-full><a id=posts href=https://phelipetls.github.io/pt/posts/ aria-current=page class="card bg-primary text-on-primary hover:bg-primary-hover
block
w-full
rounded
border-0
p-2
text-center
text-xl
transition-colors
duration-300">Posts</a></li><li class=w-full><a id=projects href=https://phelipetls.github.io/pt/projects/ class="hover:bg-hover
block
w-full
rounded
border-0
p-2
text-center
text-xl
transition-colors
duration-300">Projetos</a></li><li class=w-full><a id=resume href=https://phelipetls.github.io/pt/resume/ class="hover:bg-hover
block
w-full
rounded
border-0
p-2
text-center
text-xl
transition-colors
duration-300">Currículo</a></li></ul></nav><div class="mb-4 flex h-12 flex-row items-center justify-center px-horizontal-padding"><div class="relative flex h-full flex-row items-center"><span class="pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-sm"><svg class="feather" viewBox="0 0 24 24" width="24" height="24"><title>Ícone do tema</title><defs><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg><svg id="monitor" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-monitor"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg></defs><use data-theme-select-icon href=#monitor></use></svg></span>
<select class="card h-full appearance-none bg-surface py-1 px-8 text-center" data-theme-select id=theme-select aria-label="Escolha um tema"><option value=light>Claro</option><option value=dark>Escuro</option><option value=system>Sistema</option></select>
<span class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-sm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></div></div></div></div></aside><main class="grid grid-cols-layout"><div class="col-full max-w-full rounded-none px-horizontal-padding pt-8 shadow-none sm:col-content sm:px-0"><article><header><h1 class="mb-4 text-4xl">Web Scraping de páginas dinâmicas com Python</h1><div class="mb-4 flex flex-col gap-2"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-book-open"><path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/><path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/></svg><div>1 min.</div></div><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><time datetime=2019-08-18>18 de
Agosto</time></div></div><div class="mb-4 flex flex-wrap gap-2"><a href=/pt/tags/web-scraping/ class="tag whitespace-nowrap">web-scraping</a>
<a href=/pt/tags/pandas/ class="tag whitespace-nowrap">pandas</a>
<a href=/pt/tags/regex/ class="tag whitespace-nowrap">regex</a>
<a href=/pt/tags/dataviz/ class="tag whitespace-nowrap">dataviz</a>
<a href=/pt/tags class=tag aria-label="Todas as tags">...</a></div></header><hr class=my-8><div class="flex flex-col-reverse lg:grid lg:grid-cols-[1fr,minmax(0,1fr)]"><div data-blog-post class="[&>pre]:full-width-on-mobile
       [&>figure]:full-width-on-mobile
    [&>[data-codeblock]]:full-width-on-mobile
max-w-prose
[&>[data-codeblock]_pre]:max-sm:rounded-none
[&>[data-codeblock-with-header]]:mt-16
[&_img]:mx-auto
              [&>hr]:border-0
[&>hr]:text-center
              [&>hr]:after:content-['⁂']
[&>pre]:my-8
              [&>figure]:my-8
[&>blockquote]:my-8
              [&>figure_img]:bg-surface
          [&>figure_img]:shadow
              [&>figure_img]:shadow-shadow
       [&>figure_img]:sm:rounded
          [&>figure_video]:min-h-[15em]
      [&>figure_video]:bg-surface
        [&>figure_video]:shadow
            [&>figure_video]:shadow-shadow
     [&>figure_video]:sm:rounded
        [&_.katex-display]:overflow-x-auto
 [&_.katex-display]:overflow-y-hidden"><p>Web scraping pode ficar bem complicado quando a página é dinâmica, você não mais
precisa somente carregar o código-fonte da página mas também precisa esperar o
JavaScript da página construir a página, que é o caso do site do Reclame Aqui.</p><p>Nesses casos, precisamos controlar um navegador remotamente por meio de um <em>web
driver</em>, por exemplo, o <code>geckodriver</code> para o Firefox ou <code>chromedriver</code> para o
Chrome.</p><p>Para isso, usamos uma biblioteca a partir da qual podemos instruir este
navegador a fazer o que queremos, por exemplo o <code>Selenium</code>.</p><p>Pros meus propósitos, usarei o <code>Selenium</code> para abrir uma URL e extrair alguma
informação na página, tarefa para alguma biblioteca que entenda estrutura HTML e
facilite a extração dos elementos, como a <code>BeautifulSoup</code>.</p><p>Utilizo essas duas bibliotecas no script abaixo. E podemos instalá-las com:</p><div data-codeblock class="mt-16 [&_pre]:sm:rounded-tl-none
   group relative mb-8 [&_pre]:shadow [&_pre]:shadow-shadow [&_.highlight_pre]:[color-scheme:_dark]"><div data-codeblock-header class="absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-full overflow-hidden sm:left-0"><div class="chroma flex items-center gap-2 rounded-t border-t border-primary px-2 py-1"><div class=shrink-0><div class="h-[24px] w-[24px] [&>svg_*]:fill-current"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg width=" height="24" viewBox="0 0 128 128"><path fill="none" d="M-143.76 4.24h119.53v119.53h-119.53z"/><path fill="#293138" d="M109.01 28.64 71.28 6.24c-2.25-1.33-4.77-2-7.28-2s-5.03.67-7.28 2.01l-37.74 22.4c-4.5 2.67-7.28 7.61-7.28 12.96v44.8c0 5.35 2.77 10.29 7.28 12.96l37.73 22.4c2.25 1.34 4.76 2 7.28 2 2.51.0 5.03-.67 7.28-2l37.74-22.4c4.5-2.67 7.28-7.62 7.28-12.96V41.6c0-5.34-2.77-10.29-7.28-12.96zM79.79 98.59l.06 3.22c0 .39-.25.83-.55.99l-1.91 1.1c-.3.15-.56-.03-.56-.42l-.03-3.17c-1.63.68-3.29.84-4.34.42-.2-.08-.29-.37-.21-.71l.69-2.91c.06-.23.18-.46.34-.6.06-.06.12-.1.18-.13.11-.06.22-.07.31-.03 1.14.38 2.59.2 3.99-.5 1.78-.9 2.97-2.72 2.95-4.52-.02-1.64-.9-2.31-3.05-2.33-2.74.01-5.3-.53-5.34-4.57-.03-3.32 1.69-6.78 4.43-8.96l-.03-3.25c0-.4.24-.84.55-1l1.85-1.18c.3-.15.56.04.56.43l.03 3.25c1.36-.54 2.54-.69 3.61-.44.23.06.34.38.24.75l-.72 2.88c-.06.22-.18.44-.33.58a.77.77.0 01-.19.14c-.1.05-.19.06-.28.05-.49-.11-1.65-.36-3.48.56-1.92.97-2.59 2.64-2.58 3.88.02 1.48.77 1.93 3.39 1.97 3.49.06 4.99 1.58 5.03 5.09.05 3.44-1.79 7.15-4.61 9.41zm19.78-5.41c0 .3-.04.58-.29.72l-9.54 5.8c-.25.15-.45.02-.45-.28v-2.46c0-.3.18-.46.43-.61l9.4-5.62c.25-.15.45-.02.45.28v2.17zm6.56-55.09-35.7 22.05c-4.45 2.6-7.73 5.52-7.74 10.89v43.99c0 3.21 1.3 5.29 3.29 5.9-.65.11-1.32.19-1.98.19-2.09.0-4.15-.57-5.96-1.64l-37.73-22.4c-3.69-2.19-5.98-6.28-5.98-10.67V41.6c0-4.39 2.29-8.48 5.98-10.67l37.74-22.4c1.81-1.07 3.87-1.64 5.96-1.64s4.15.57 5.96 1.64l37.74 22.4c3.11 1.85 5.21 5.04 5.8 8.63-1.27-2.67-4.09-3.39-7.38-1.47z"/></svg width="24" height="24"></div></div><div>Bash</div></div></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell-session data-lang=shell-session><span class=line><span class=cl><span class=gp>$</span> pip3 instal selenium bs4
</span></span></code></pre></div><button data-copy-code-button data-user-copied=false class="dark
btn btn-icon btn-icon-action group pointer-events-none absolute right-0 top-3 hidden -translate-x-1/2 bg-surface opacity-0 transition-opacity duration-500 group-hover:pointer-events-auto group-hover:opacity-100 data-[user-copied=true]:border-green-500" aria-label="Copiar código">
<span class="group-data-[user-copied=true]:hidden"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clipboard"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></svg></span><span class="text-green-500 group-data-[user-copied=false]:hidden [&>svg_*]:stroke-current"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check"><polyline points="20 6 9 17 4 12"/></svg></span></button></div><p>Para fazer o crawleamento, criei uma classe que aceita o nome de uma empresa e o
web driver a ser utilizado.</p><p>Ela tem o método <code>ReclameAqui.extrair_informacoes(n_paginas)</code> que vai extrair os
links e títulos das reclamações das primeiras <code>n_paginas</code>.</p><p>Outro método, o <code>ReclameAqui.extrair_descricoes()</code>, abre cada uma dessas URLs e
extrai as descrições das informações.</p><p>Para extrair a informação desejada, nós fazemos o <code>BeautifulSoup</code> &ldquo;entender&rdquo; o
código-fonte primeiro para depois usarmos os métodos para extração de algum
element do HTML.</p><p>Por exemplo, para extrair o título e os links das reclamações em cada página,
procuramos por parágrafos que contenham a classe <code>text-detail</code>:
(<code>&lt;p class='text-detail'>&lt;/p></code>), e depois procuramos elementos <code>a</code>, que contém o
título dentro dele e o link dentro do atributo <code>href</code>.</p><p>Já para a descrição, procuramos por um elemento <code>div</code> com a classe
<code>complain-body</code>, e extraímos o texto dentro dele.</p><div data-codeblock class="mt-16 [&_pre]:sm:rounded-tl-none
   group relative mb-8 [&_pre]:shadow [&_pre]:shadow-shadow [&_.highlight_pre]:[color-scheme:_dark]"><div data-codeblock-header class="absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-full overflow-hidden sm:left-0"><div class="chroma flex items-center gap-2 rounded-t border-t border-primary px-2 py-1"><div class=shrink-0><div class="h-[24px] w-[24px] [&>svg_*]:fill-current"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg width=" height="24" viewBox="0 0 128 128"><path fill="#ffd845" d="M49.33 62h29.159C86.606 62 93 55.132 93 46.981V19.183c0-7.912-6.632-13.856-14.555-15.176-5.014-.835-10.195-1.215-15.187-1.191-4.99.023-9.612.448-13.805 1.191C37.098 6.188 35 10.758 35 19.183V30h29v4H23.776c-8.484.0-15.914 5.108-18.237 14.811-2.681 11.12-2.8 17.919.0 29.53C7.614 86.983 12.569 93 21.054 93H31V79.952C31 70.315 39.428 62 49.33 62zm-1.838-39.11c-3.026.0-5.478-2.479-5.478-5.545.0-3.079 2.451-5.581 5.478-5.581 3.015.0 5.479 2.502 5.479 5.581-.001 3.066-2.465 5.545-5.479 5.545zm74.789 25.921C120.183 40.363 116.178 34 107.682 34H97v12.981C97 57.031 88.206 65 78.489 65H49.33C41.342 65 35 72.326 35 80.326v27.8c0 7.91 6.745 12.564 14.462 14.834 9.242 2.717 17.994 3.208 29.051.0C85.862 120.831 93 116.549 93 108.126V97H64v-4h43.682c8.484.0 11.647-5.776 14.599-14.66 3.047-9.145 2.916-17.799.0-29.529zm-41.955 55.606c3.027.0 5.479 2.479 5.479 5.547.0 3.076-2.451 5.579-5.479 5.579-3.015.0-5.478-2.502-5.478-5.579.0-3.068 2.463-5.547 5.478-5.547z"/></svg width="24" height="24"></div></div><div>Python</div></div></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>time</span> <span class=kn>import</span> <span class=n>sleep</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>selenium</span> <span class=kn>import</span> <span class=n>webdriver</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>bs4</span> <span class=kn>import</span> <span class=n>BeautifulSoup</span> <span class=k>as</span> <span class=n>bs</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReclameAqui</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>base_url</span> <span class=o>=</span> <span class=s2>&#34;https://www.reclameaqui.com.br/empresa/&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>driver</span><span class=p>,</span> <span class=n>empresa</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>driver</span> <span class=o>=</span> <span class=n>driver</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>empresa</span> <span class=o>=</span> <span class=n>empresa</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>extrair_informacoes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n_paginas</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>url</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>base_url</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>empresa</span> <span class=o>+</span> <span class=s2>&#34;/lista-reclamacoes/?pagina=&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>reclamacoes</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>titulos</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>links</span> <span class=o>=</span> <span class=p>[],</span> <span class=p>[],</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>n_paginas</span> <span class=o>+</span> <span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>driver</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>html</span> <span class=o>=</span> <span class=n>bs</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>driver</span><span class=o>.</span><span class=n>page_source</span><span class=p>,</span> <span class=s2>&#34;html.parser&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>reclamacoes_html</span> <span class=o>=</span> <span class=n>html</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&#34;p&#34;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&#34;class&#34;</span><span class=p>:</span> <span class=s2>&#34;text-detail&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>            <span class=n>reclamacoes_na_pagina</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=n>reclamacao</span><span class=o>.</span><span class=n>text</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&#34;|&#34;</span><span class=p>)</span> <span class=k>for</span> <span class=n>reclamacao</span> <span class=ow>in</span> <span class=n>reclamacoes_html</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>reclamacoes</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>reclamacoes_na_pagina</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>titulos_e_links</span> <span class=o>=</span> <span class=n>html</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&#34;class&#34;</span><span class=p>:</span> <span class=s2>&#34;link-complain-id-complains&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>titulos</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=n>titulo</span><span class=o>.</span><span class=n>text</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span> <span class=k>for</span> <span class=n>titulo</span> <span class=ow>in</span> <span class=n>titulos_e_links</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>links</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=n>link</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;href&#34;</span><span class=p>)</span> <span class=k>for</span> <span class=n>link</span> <span class=ow>in</span> <span class=n>titulos_e_links</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>extrair_descricoes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>urls</span> <span class=o>=</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>base_url</span> <span class=o>+</span> <span class=n>link</span><span class=p>[</span><span class=mi>1</span><span class=p>:]</span> <span class=k>for</span> <span class=n>link</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>links</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>descricoes</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=n>urls</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>driver</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>html</span> <span class=o>=</span> <span class=n>bs</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>driver</span><span class=o>.</span><span class=n>page_source</span><span class=p>,</span> <span class=s2>&#34;html.parser&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>descricao</span> <span class=o>=</span> <span class=n>html</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&#34;class&#34;</span><span class=p>:</span> <span class=s2>&#34;complain-body&#34;</span><span class=p>})</span><span class=o>.</span><span class=n>text</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>descricoes</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>descricao</span><span class=p>)</span></span></span></code></pre></div><button data-copy-code-button data-user-copied=false class="dark
btn btn-icon btn-icon-action group pointer-events-none absolute right-0 top-3 hidden -translate-x-1/2 bg-surface opacity-0 transition-opacity duration-500 group-hover:pointer-events-auto group-hover:opacity-100 data-[user-copied=true]:border-green-500" aria-label="Copiar código">
<span class="group-data-[user-copied=true]:hidden"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clipboard"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></svg></span><span class="text-green-500 group-data-[user-copied=false]:hidden [&>svg_*]:stroke-current"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check"><polyline points="20 6 9 17 4 12"/></svg></span></button></div><p>Esse código deve funcionar para qualquer empresa contanto que a estrutura do
HTML do ReclameAqui não mude (isto é, o nome das classes e o tipo dos elementos
onde as informações se encontram).</p></div><aside></aside></div></article><template data-theme-copy-code-tooltip-template><div data-theme-copy-code-tooltip role=tooltip class="dark pointer-events-none absolute rounded border border-green-500 bg-background px-2 text-on-background" style=opacity:0>Copiado<div data-arrow class="dark absolute h-[8px] w-[8px] rotate-45 border-r border-b border-divider bg-background"></div></div></template><hr class="full-width-on-mobile mt-8"><div class="full-width-on-mobile sm:my-8"><nav class="flex items-stretch sm:gap-4" aria-label="Navegação entre posts"><a class="sm:card flex flex-none basis-1/2 flex-col gap-2 border-0 py-4 px-horizontal-padding transition-colors duration-500 hover:bg-hover" href=/pt/posts/gram-schmidt/><span class=text-primary><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg></span>Processo de Gram-Schmidt com NumPy</a><div class="border-l border-divider sm:hidden"></div><a class="sm:card flex flex-none basis-1/2 flex-col-reverse items-end justify-end gap-2 border-0 py-4 px-horizontal-padding text-right transition-colors duration-500 hover:bg-hover" href=/pt/posts/demystifying-git-rebase/>Desmistificando git rebase
<span class=text-primary><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span></a></nav></div><hr class="full-width-on-mobile mb-8"><template data-utterances-template><div class="grid place-items-center"><div data-utterances-loading role=progressbar class="[&_svg]:animate-spin [&_svg]:duration-[1500ms]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-loader"><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/></svg></div><script src=https://utteranc.es/client.js data-repo=phelipetls/phelipetls.github.io data-issue-term=pathname crossorigin=anonymous data-theme=github-light async></script></div><hr class="mt-8 hidden sm:block"></template></div></main><footer class="mt-8 border-t border-divider bg-background sm:border-0"><div class="mx-auto flex w-full max-w-content flex-col items-center gap-2 px-horizontal-padding pt-4 pb-8 sm:justify-between"><nav aria-label=Contatos class="flex gap-2"><a id=contact-email class="rounded-full transition-colors duration-500 hover:bg-hover p-2 [&_svg]:transition-colors [&_svg]:duration-200 hover:text-primary border-0" href=mailto:phelipe_teles@hotmail.com aria-label=E-mail><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a><a id=contact-linkedin class="rounded-full transition-colors duration-500 hover:bg-hover p-2 [&_svg]:transition-colors [&_svg]:duration-200 hover:text-primary border-0" href=https://linkedin.com/in/phelipeteles aria-label=LinkedIn><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a><a id=contact-github class="rounded-full transition-colors duration-500 hover:bg-hover p-2 [&_svg]:transition-colors [&_svg]:duration-200 hover:text-primary border-0" href=https://github.com/phelipetls aria-label=GitHub><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></nav><span class=text-center>Todo conteúdo está sob a licença
<a rel=license href=http://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0</a>.</span></div></footer></div><script src=https://phelipetls.github.io/js/post-bundle.min.js></script></body></html>