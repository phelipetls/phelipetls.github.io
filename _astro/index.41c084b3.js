import{_ as ce,a as R,b as D,c as rt,e as Q,n as pt,l as le}from"./index.9b1fa820.js";import{S as fe}from"./base-3665f77c.2bb28e9f.js";import"./jsx-runtime.7a8c40fc.js";import"./index.57fae3ab.js";import"./_commonjsHelpers.042e6b4d.js";import"./Tab.e3ea653a.js";import"./createReactComponent.099c7328.js";import"./CopyCodeBlockButton.ce6a0b11.js";import"./index.ffa87b56.js";import"./floating-ui.dom.browser.min.8b9d8992.js";var at={},st={};st.byteLength=pe;st.toByteArray=ye;st.fromByteArray=ge;var N=[],L=[],he=typeof Uint8Array<"u"?Uint8Array:Array,ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var J=0,de=ft.length;J<de;++J)N[J]=ft[J],L[ft.charCodeAt(J)]=J;L["-".charCodeAt(0)]=62;L["_".charCodeAt(0)]=63;function kt(i){var s=i.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=i.indexOf("=");o===-1&&(o=s);var u=o===s?0:4-o%4;return[o,u]}function pe(i){var s=kt(i),o=s[0],u=s[1];return(o+u)*3/4-u}function me(i,s,o){return(s+o)*3/4-o}function ye(i){var s,o=kt(i),u=o[0],f=o[1],l=new he(me(i,u,f)),h=0,a=f>0?u-4:u,m;for(m=0;m<a;m+=4)s=L[i.charCodeAt(m)]<<18|L[i.charCodeAt(m+1)]<<12|L[i.charCodeAt(m+2)]<<6|L[i.charCodeAt(m+3)],l[h++]=s>>16&255,l[h++]=s>>8&255,l[h++]=s&255;return f===2&&(s=L[i.charCodeAt(m)]<<2|L[i.charCodeAt(m+1)]>>4,l[h++]=s&255),f===1&&(s=L[i.charCodeAt(m)]<<10|L[i.charCodeAt(m+1)]<<4|L[i.charCodeAt(m+2)]>>2,l[h++]=s>>8&255,l[h++]=s&255),l}function we(i){return N[i>>18&63]+N[i>>12&63]+N[i>>6&63]+N[i&63]}function ve(i,s,o){for(var u,f=[],l=s;l<o;l+=3)u=(i[l]<<16&16711680)+(i[l+1]<<8&65280)+(i[l+2]&255),f.push(we(u));return f.join("")}function ge(i){for(var s,o=i.length,u=o%3,f=[],l=16383,h=0,a=o-u;h<a;h+=l)f.push(ve(i,h,h+l>a?a:h+l));return u===1?(s=i[o-1],f.push(N[s>>2]+N[s<<4&63]+"==")):u===2&&(s=(i[o-2]<<8)+i[o-1],f.push(N[s>>10]+N[s>>4&63]+N[s<<2&63]+"=")),f.join("")}var mt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */mt.read=function(i,s,o,u,f){var l,h,a=f*8-u-1,m=(1<<a)-1,v=m>>1,g=-7,y=o?f-1:0,E=o?-1:1,_=i[s+y];for(y+=E,l=_&(1<<-g)-1,_>>=-g,g+=a;g>0;l=l*256+i[s+y],y+=E,g-=8);for(h=l&(1<<-g)-1,l>>=-g,g+=u;g>0;h=h*256+i[s+y],y+=E,g-=8);if(l===0)l=1-v;else{if(l===m)return h?NaN:(_?-1:1)*(1/0);h=h+Math.pow(2,u),l=l-v}return(_?-1:1)*h*Math.pow(2,l-u)};mt.write=function(i,s,o,u,f,l){var h,a,m,v=l*8-f-1,g=(1<<v)-1,y=g>>1,E=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=u?0:l-1,b=u?1:-1,w=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(a=isNaN(s)?1:0,h=g):(h=Math.floor(Math.log(s)/Math.LN2),s*(m=Math.pow(2,-h))<1&&(h--,m*=2),h+y>=1?s+=E/m:s+=E*Math.pow(2,1-y),s*m>=2&&(h++,m/=2),h+y>=g?(a=0,h=g):h+y>=1?(a=(s*m-1)*Math.pow(2,f),h=h+y):(a=s*Math.pow(2,y-1)*Math.pow(2,f),h=0));f>=8;i[o+_]=a&255,_+=b,a/=256,f-=8);for(h=h<<f|a,v+=f;v>0;i[o+_]=h&255,_+=b,h/=256,v-=8);i[o+_-b]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const s=st,o=mt,u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=a,i.SlowBuffer=z,i.INSPECT_MAX_BYTES=50;const f=2147483647;i.kMaxLength=f,a.TYPED_ARRAY_SUPPORT=l(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const r=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(r,t),r.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function h(r){if(r>f)throw new RangeError('The value "'+r+'" is invalid for option "size"');const t=new Uint8Array(r);return Object.setPrototypeOf(t,a.prototype),t}function a(r,t,e){if(typeof r=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(r)}return m(r,t,e)}a.poolSize=8192;function m(r,t,e){if(typeof r=="string")return E(r,t);if(ArrayBuffer.isView(r))return b(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(j(r,ArrayBuffer)||r&&j(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(j(r,SharedArrayBuffer)||r&&j(r.buffer,SharedArrayBuffer)))return w(r,t,e);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return a.from(n,t,e);const c=I(r);if(c)return c;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return a.from(r[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}a.from=function(r,t,e){return m(r,t,e)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function v(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function g(r,t,e){return v(r),r<=0?h(r):t!==void 0?typeof e=="string"?h(r).fill(t,e):h(r).fill(t):h(r)}a.alloc=function(r,t,e){return g(r,t,e)};function y(r){return v(r),h(r<0?0:B(r)|0)}a.allocUnsafe=function(r){return y(r)},a.allocUnsafeSlow=function(r){return y(r)};function E(r,t){if((typeof t!="string"||t==="")&&(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const e=gt(r,t)|0;let n=h(e);const c=n.write(r,t);return c!==e&&(n=n.slice(0,c)),n}function _(r){const t=r.length<0?0:B(r.length)|0,e=h(t);for(let n=0;n<t;n+=1)e[n]=r[n]&255;return e}function b(r){if(j(r,Uint8Array)){const t=new Uint8Array(r);return w(t.buffer,t.byteOffset,t.byteLength)}return _(r)}function w(r,t,e){if(t<0||r.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&e===void 0?n=new Uint8Array(r):e===void 0?n=new Uint8Array(r,t):n=new Uint8Array(r,t,e),Object.setPrototypeOf(n,a.prototype),n}function I(r){if(a.isBuffer(r)){const t=B(r.length)|0,e=h(t);return e.length===0||r.copy(e,0,0,t),e}if(r.length!==void 0)return typeof r.length!="number"||lt(r.length)?h(0):_(r);if(r.type==="Buffer"&&Array.isArray(r.data))return _(r.data)}function B(r){if(r>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return r|0}function z(r){return+r!=r&&(r=0),a.alloc(+r)}a.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==a.prototype},a.compare=function(t,e){if(j(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),j(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,c=e.length;for(let d=0,p=Math.min(n,c);d<p;++d)if(t[d]!==e[d]){n=t[d],c=e[d];break}return n<c?-1:c<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return a.alloc(0);let n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const c=a.allocUnsafe(e);let d=0;for(n=0;n<t.length;++n){let p=t[n];if(j(p,Uint8Array))d+p.length>c.length?(a.isBuffer(p)||(p=a.from(p)),p.copy(c,d)):Uint8Array.prototype.set.call(c,p,d);else if(a.isBuffer(p))p.copy(c,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=p.length}return c};function gt(r,t){if(a.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||j(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const e=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&e===0)return 0;let c=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return ct(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Tt(r).length;default:if(c)return n?-1:ct(r).length;t=(""+t).toLowerCase(),c=!0}}a.byteLength=gt;function Vt(r,t,e){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return te(this,t,e);case"utf8":case"utf-8":return xt(this,t,e);case"ascii":return Kt(this,t,e);case"latin1":case"binary":return Qt(this,t,e);case"base64":return Xt(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}a.prototype._isBuffer=!0;function V(r,t,e){const n=r[t];r[t]=r[e],r[e]=n}a.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)V(this,e,e+1);return this},a.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)V(this,e,e+3),V(this,e+1,e+2);return this},a.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)V(this,e,e+7),V(this,e+1,e+6),V(this,e+2,e+5),V(this,e+3,e+4);return this},a.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?xt(this,0,t):Vt.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:a.compare(this,t)===0},a.prototype.inspect=function(){let t="";const e=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},u&&(a.prototype[u]=a.prototype.inspect),a.prototype.compare=function(t,e,n,c,d){if(j(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),c===void 0&&(c=0),d===void 0&&(d=this.length),e<0||n>t.length||c<0||d>this.length)throw new RangeError("out of range index");if(c>=d&&e>=n)return 0;if(c>=d)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,c>>>=0,d>>>=0,this===t)return 0;let p=d-c,x=n-e;const F=Math.min(p,x),A=this.slice(c,d),P=t.slice(e,n);for(let S=0;S<F;++S)if(A[S]!==P[S]){p=A[S],x=P[S];break}return p<x?-1:x<p?1:0};function _t(r,t,e,n,c){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,lt(e)&&(e=c?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(c)return-1;e=r.length-1}else if(e<0)if(c)e=0;else return-1;if(typeof t=="string"&&(t=a.from(t,n)),a.isBuffer(t))return t.length===0?-1:Et(r,t,e,n,c);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?c?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):Et(r,[t],e,n,c);throw new TypeError("val must be string, number or Buffer")}function Et(r,t,e,n,c){let d=1,p=r.length,x=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;d=2,p/=2,x/=2,e/=2}function F(P,S){return d===1?P[S]:P.readUInt16BE(S*d)}let A;if(c){let P=-1;for(A=e;A<p;A++)if(F(r,A)===F(t,P===-1?0:A-P)){if(P===-1&&(P=A),A-P+1===x)return P*d}else P!==-1&&(A-=A-P),P=-1}else for(e+x>p&&(e=p-x),A=e;A>=0;A--){let P=!0;for(let S=0;S<x;S++)if(F(r,A+S)!==F(t,S)){P=!1;break}if(P)return A}return-1}a.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},a.prototype.indexOf=function(t,e,n){return _t(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return _t(this,t,e,n,!1)};function qt(r,t,e,n){e=Number(e)||0;const c=r.length-e;n?(n=Number(n),n>c&&(n=c)):n=c;const d=t.length;n>d/2&&(n=d/2);let p;for(p=0;p<n;++p){const x=parseInt(t.substr(p*2,2),16);if(lt(x))return p;r[e+p]=x}return p}function Ht(r,t,e,n){return et(ct(t,r.length-e),r,e,n)}function Gt(r,t,e,n){return et(oe(t),r,e,n)}function Jt(r,t,e,n){return et(Tt(t),r,e,n)}function Yt(r,t,e,n){return et(ae(t,r.length-e),r,e,n)}a.prototype.write=function(t,e,n,c){if(e===void 0)c="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")c=e,n=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(n)?(n=n>>>0,c===void 0&&(c="utf8")):(c=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const d=this.length-e;if((n===void 0||n>d)&&(n=d),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");let p=!1;for(;;)switch(c){case"hex":return qt(this,t,e,n);case"utf8":case"utf-8":return Ht(this,t,e,n);case"ascii":case"latin1":case"binary":return Gt(this,t,e,n);case"base64":return Jt(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Yt(this,t,e,n);default:if(p)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),p=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Xt(r,t,e){return t===0&&e===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(t,e))}function xt(r,t,e){e=Math.min(r.length,e);const n=[];let c=t;for(;c<e;){const d=r[c];let p=null,x=d>239?4:d>223?3:d>191?2:1;if(c+x<=e){let F,A,P,S;switch(x){case 1:d<128&&(p=d);break;case 2:F=r[c+1],(F&192)===128&&(S=(d&31)<<6|F&63,S>127&&(p=S));break;case 3:F=r[c+1],A=r[c+2],(F&192)===128&&(A&192)===128&&(S=(d&15)<<12|(F&63)<<6|A&63,S>2047&&(S<55296||S>57343)&&(p=S));break;case 4:F=r[c+1],A=r[c+2],P=r[c+3],(F&192)===128&&(A&192)===128&&(P&192)===128&&(S=(d&15)<<18|(F&63)<<12|(A&63)<<6|P&63,S>65535&&S<1114112&&(p=S))}}p===null?(p=65533,x=1):p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|p&1023),n.push(p),c+=x}return Zt(n)}const bt=4096;function Zt(r){const t=r.length;if(t<=bt)return String.fromCharCode.apply(String,r);let e="",n=0;for(;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=bt));return e}function Kt(r,t,e){let n="";e=Math.min(r.length,e);for(let c=t;c<e;++c)n+=String.fromCharCode(r[c]&127);return n}function Qt(r,t,e){let n="";e=Math.min(r.length,e);for(let c=t;c<e;++c)n+=String.fromCharCode(r[c]);return n}function te(r,t,e){const n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);let c="";for(let d=t;d<e;++d)c+=se[r[d]];return c}function ee(r,t,e){const n=r.slice(t,e);let c="";for(let d=0;d<n.length-1;d+=2)c+=String.fromCharCode(n[d]+n[d+1]*256);return c}a.prototype.slice=function(t,e){const n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);const c=this.subarray(t,e);return Object.setPrototypeOf(c,a.prototype),c};function M(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||M(t,e,this.length);let c=this[t],d=1,p=0;for(;++p<e&&(d*=256);)c+=this[t+p]*d;return c},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||M(t,e,this.length);let c=this[t+--e],d=1;for(;e>0&&(d*=256);)c+=this[t+--e]*d;return c},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t=t>>>0,e||M(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||M(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||M(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||M(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=$(function(t){t=t>>>0,G(t,"offset");const e=this[t],n=this[t+7];(e===void 0||n===void 0)&&Y(t,this.length-8);const c=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,d=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(c)+(BigInt(d)<<BigInt(32))}),a.prototype.readBigUInt64BE=$(function(t){t=t>>>0,G(t,"offset");const e=this[t],n=this[t+7];(e===void 0||n===void 0)&&Y(t,this.length-8);const c=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],d=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(c)<<BigInt(32))+BigInt(d)}),a.prototype.readIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||M(t,e,this.length);let c=this[t],d=1,p=0;for(;++p<e&&(d*=256);)c+=this[t+p]*d;return d*=128,c>=d&&(c-=Math.pow(2,8*e)),c},a.prototype.readIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||M(t,e,this.length);let c=e,d=1,p=this[t+--c];for(;c>0&&(d*=256);)p+=this[t+--c]*d;return d*=128,p>=d&&(p-=Math.pow(2,8*e)),p},a.prototype.readInt8=function(t,e){return t=t>>>0,e||M(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,e){t=t>>>0,e||M(t,2,this.length);const n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n},a.prototype.readInt16BE=function(t,e){t=t>>>0,e||M(t,2,this.length);const n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n},a.prototype.readInt32LE=function(t,e){return t=t>>>0,e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t=t>>>0,e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=$(function(t){t=t>>>0,G(t,"offset");const e=this[t],n=this[t+7];(e===void 0||n===void 0)&&Y(t,this.length-8);const c=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(c)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),a.prototype.readBigInt64BE=$(function(t){t=t>>>0,G(t,"offset");const e=this[t],n=this[t+7];(e===void 0||n===void 0)&&Y(t,this.length-8);const c=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(c)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)}),a.prototype.readFloatLE=function(t,e){return t=t>>>0,e||M(t,4,this.length),o.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t=t>>>0,e||M(t,4,this.length),o.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||M(t,8,this.length),o.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||M(t,8,this.length),o.read(this,t,!1,52,8)};function T(r,t,e,n,c,d){if(!a.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>c||t<d)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,n,c){if(t=+t,e=e>>>0,n=n>>>0,!c){const x=Math.pow(2,8*n)-1;T(this,t,e,n,x,0)}let d=1,p=0;for(this[e]=t&255;++p<n&&(d*=256);)this[e+p]=t/d&255;return e+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,n,c){if(t=+t,e=e>>>0,n=n>>>0,!c){const x=Math.pow(2,8*n)-1;T(this,t,e,n,x,0)}let d=n-1,p=1;for(this[e+d]=t&255;--d>=0&&(p*=256);)this[e+d]=t/p&255;return e+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,1,255,0),this[e]=t&255,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function It(r,t,e,n,c){Mt(t,n,c,r,e,7);let d=Number(t&BigInt(4294967295));r[e++]=d,d=d>>8,r[e++]=d,d=d>>8,r[e++]=d,d=d>>8,r[e++]=d;let p=Number(t>>BigInt(32)&BigInt(4294967295));return r[e++]=p,p=p>>8,r[e++]=p,p=p>>8,r[e++]=p,p=p>>8,r[e++]=p,e}function Bt(r,t,e,n,c){Mt(t,n,c,r,e,7);let d=Number(t&BigInt(4294967295));r[e+7]=d,d=d>>8,r[e+6]=d,d=d>>8,r[e+5]=d,d=d>>8,r[e+4]=d;let p=Number(t>>BigInt(32)&BigInt(4294967295));return r[e+3]=p,p=p>>8,r[e+2]=p,p=p>>8,r[e+1]=p,p=p>>8,r[e]=p,e+8}a.prototype.writeBigUInt64LE=$(function(t,e=0){return It(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=$(function(t,e=0){return Bt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(t,e,n,c){if(t=+t,e=e>>>0,!c){const F=Math.pow(2,8*n-1);T(this,t,e,n,F-1,-F)}let d=0,p=1,x=0;for(this[e]=t&255;++d<n&&(p*=256);)t<0&&x===0&&this[e+d-1]!==0&&(x=1),this[e+d]=(t/p>>0)-x&255;return e+n},a.prototype.writeIntBE=function(t,e,n,c){if(t=+t,e=e>>>0,!c){const F=Math.pow(2,8*n-1);T(this,t,e,n,F-1,-F)}let d=n-1,p=1,x=0;for(this[e+d]=t&255;--d>=0&&(p*=256);)t<0&&x===0&&this[e+d+1]!==0&&(x=1),this[e+d]=(t/p>>0)-x&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4},a.prototype.writeBigInt64LE=$(function(t,e=0){return It(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=$(function(t,e=0){return Bt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function St(r,t,e,n,c,d){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function At(r,t,e,n,c){return t=+t,e=e>>>0,c||St(r,t,e,4),o.write(r,t,e,n,23,4),e+4}a.prototype.writeFloatLE=function(t,e,n){return At(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return At(this,t,e,!1,n)};function Ft(r,t,e,n,c){return t=+t,e=e>>>0,c||St(r,t,e,8),o.write(r,t,e,n,52,8),e+8}a.prototype.writeDoubleLE=function(t,e,n){return Ft(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return Ft(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,c){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!c&&c!==0&&(c=this.length),e>=t.length&&(e=t.length),e||(e=0),c>0&&c<n&&(c=n),c===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),t.length-e<c-n&&(c=t.length-e+n);const d=c-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,n,c):Uint8Array.prototype.set.call(t,this.subarray(n,c),e),d},a.prototype.fill=function(t,e,n,c){if(typeof t=="string"){if(typeof e=="string"?(c=e,e=0,n=this.length):typeof n=="string"&&(c=n,n=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!a.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(t.length===1){const p=t.charCodeAt(0);(c==="utf8"&&p<128||c==="latin1")&&(t=p)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let d;if(typeof t=="number")for(d=e;d<n;++d)this[d]=t;else{const p=a.isBuffer(t)?t:a.from(t,c),x=p.length;if(x===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(d=0;d<n-e;++d)this[d+e]=p[d%x]}return this};const H={};function ut(r,t,e){H[r]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(c){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:c,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}ut("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ut("ERR_INVALID_ARG_TYPE",function(r,t){return`The "${r}" argument must be of type number. Received type ${typeof t}`},TypeError),ut("ERR_OUT_OF_RANGE",function(r,t,e){let n=`The value of "${r}" is out of range.`,c=e;return Number.isInteger(e)&&Math.abs(e)>2**32?c=Pt(String(e)):typeof e=="bigint"&&(c=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(c=Pt(c)),c+="n"),n+=` It must be ${t}. Received ${c}`,n},RangeError);function Pt(r){let t="",e=r.length;const n=r[0]==="-"?1:0;for(;e>=n+4;e-=3)t=`_${r.slice(e-3,e)}${t}`;return`${r.slice(0,e)}${t}`}function re(r,t,e){G(t,"offset"),(r[t]===void 0||r[t+e]===void 0)&&Y(t,r.length-(e+1))}function Mt(r,t,e,n,c,d){if(r>e||r<t){const p=typeof t=="bigint"?"n":"";let x;throw d>3?t===0||t===BigInt(0)?x=`>= 0${p} and < 2${p} ** ${(d+1)*8}${p}`:x=`>= -(2${p} ** ${(d+1)*8-1}${p}) and < 2 ** ${(d+1)*8-1}${p}`:x=`>= ${t}${p} and <= ${e}${p}`,new H.ERR_OUT_OF_RANGE("value",x,r)}re(n,c,d)}function G(r,t){if(typeof r!="number")throw new H.ERR_INVALID_ARG_TYPE(t,"number",r)}function Y(r,t,e){throw Math.floor(r)!==r?(G(r,e),new H.ERR_OUT_OF_RANGE(e||"offset","an integer",r)):t<0?new H.ERR_BUFFER_OUT_OF_BOUNDS:new H.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,r)}const ne=/[^+/0-9A-Za-z-_]/g;function ie(r){if(r=r.split("=")[0],r=r.trim().replace(ne,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function ct(r,t){t=t||1/0;let e;const n=r.length;let c=null;const d=[];for(let p=0;p<n;++p){if(e=r.charCodeAt(p),e>55295&&e<57344){if(!c){if(e>56319){(t-=3)>-1&&d.push(239,191,189);continue}else if(p+1===n){(t-=3)>-1&&d.push(239,191,189);continue}c=e;continue}if(e<56320){(t-=3)>-1&&d.push(239,191,189),c=e;continue}e=(c-55296<<10|e-56320)+65536}else c&&(t-=3)>-1&&d.push(239,191,189);if(c=null,e<128){if((t-=1)<0)break;d.push(e)}else if(e<2048){if((t-=2)<0)break;d.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;d.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;d.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return d}function oe(r){const t=[];for(let e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function ae(r,t){let e,n,c;const d=[];for(let p=0;p<r.length&&!((t-=2)<0);++p)e=r.charCodeAt(p),n=e>>8,c=e%256,d.push(c),d.push(n);return d}function Tt(r){return s.toByteArray(ie(r))}function et(r,t,e,n){let c;for(c=0;c<n&&!(c+e>=t.length||c>=r.length);++c)t[c+e]=r[c];return c}function j(r,t){return r instanceof t||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===t.name}function lt(r){return r!==r}const se=function(){const r="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){const n=e*16;for(let c=0;c<16;++c)t[n+c]=r[e]+r[c]}return t}();function $(r){return typeof BigInt>"u"?ue:r}function ue(){throw new Error("BigInt not supported")}})(at);var _e=Object.create,yt=Object.defineProperty,Ee=Object.getOwnPropertyDescriptor,jt=Object.getOwnPropertyNames,xe=Object.getPrototypeOf,be=Object.prototype.hasOwnProperty,Ie=(i,s,o)=>s in i?yt(i,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[s]=o,O=(i,s)=>function(){return s||(0,i[jt(i)[0]])((s={exports:{}}).exports,s),s.exports},Be=(i,s,o,u)=>{if(s&&typeof s=="object"||typeof s=="function")for(let f of jt(s))!be.call(i,f)&&f!==o&&yt(i,f,{get:()=>s[f],enumerable:!(u=Ee(s,f))||u.enumerable});return i},k=(i,s,o)=>(o=i!=null?_e(xe(i)):{},Be(s||!i||!i.__esModule?yt(o,"default",{value:i,enumerable:!0}):o,i)),Se=(i,s,o)=>(Ie(i,typeof s!="symbol"?s+"":s,o),o),wt=(i,s,o)=>{if(!s.has(i))throw TypeError("Cannot "+o)},C=(i,s,o)=>(wt(i,s,"read from private field"),o?o.call(i):s.get(i)),q=(i,s,o)=>{if(s.has(i))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(i):s.set(i,o)},X=(i,s,o,u)=>(wt(i,s,"write to private field"),u?u.call(i,o):s.set(i,o),o),U=(i,s,o)=>(wt(i,s,"access private method"),o),Rt=O({"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/pad.js"(i,s){s.exports=function(u,f){var l="000000000"+u;return l.substr(l.length-f)}}}),Ae=O({"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/fingerprint.browser.js"(i,s){var o=Rt(),u=typeof window=="object"?window:self,f=Object.keys(u).length,l=navigator.mimeTypes?navigator.mimeTypes.length:0,h=o((l+navigator.userAgent.length).toString(36)+f.toString(36),4);s.exports=function(){return h}}}),Fe=O({"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/getRandomValue.browser.js"(i,s){var o,u=typeof window<"u"&&(window.crypto||window.msCrypto)||typeof self<"u"&&self.crypto;u?(f=Math.pow(2,32)-1,o=function(){return Math.abs(u.getRandomValues(new Uint32Array(1))[0]/f)}):o=Math.random;var f;s.exports=o}}),Dt=O({"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/index.js"(i,s){var o=Ae(),u=Rt(),f=Fe(),l=0,h=4,a=36,m=Math.pow(a,h);function v(){return u((f()*m<<0).toString(a),h)}function g(){return l=l<m?l:0,l++,l-1}function y(){var E="c",_=new Date().getTime().toString(a),b=u(g().toString(a),h),w=o(),I=v()+v();return E+_+b+w+I}y.slug=function(){var _=new Date().getTime().toString(36),b=g().toString(36).slice(-4),w=o().slice(0,1)+o().slice(-1),I=v().slice(-2);return _.slice(-2)+b+w+I},y.isCuid=function(_){return typeof _!="string"?!1:!!_.startsWith("c")},y.isSlug=function(_){if(typeof _!="string")return!1;var b=_.length;return b>=7&&b<=10},y.fingerprint=o,s.exports=y}}),Nt=O({"../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/format.js"(i){Object.defineProperty(i,"__esModule",{value:!0}),i.format=void 0;var s=/(%?)(%([sdjo]))/g;function o(f,l){switch(l){case"s":return f;case"d":case"i":return Number(f);case"j":return JSON.stringify(f);case"o":{if(typeof f=="string")return f;var h=JSON.stringify(f);return h==="{}"||h==="[]"||/^\[object .+?\]$/.test(h)?f:h}}}function u(f){for(var l=[],h=1;h<arguments.length;h++)l[h-1]=arguments[h];if(l.length===0)return f;var a=0,m=f.replace(s,function(v,g,y,E){var _=l[a],b=o(_,E);return g?v:(a++,b)});return a<l.length&&(m+=" "+l.slice(a).join(" ")),m=m.replace(/%{2,2}/g,"%"),m}i.format=u}}),Pe=O({"../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/invariant.js"(i){var s=i&&i.__extends||function(){var v=function(g,y){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(E[b]=_[b])},v(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");v(g,y);function E(){this.constructor=g}g.prototype=y===null?Object.create(y):(E.prototype=y.prototype,new E)}}(),o=i&&i.__spreadArray||function(v,g){for(var y=0,E=g.length,_=v.length;y<E;y++,_++)v[_]=g[y];return v};Object.defineProperty(i,"__esModule",{value:!0}),i.invariant=i.createInvariantWith=i.InvariantError=void 0;var u=Nt(),f=2;function l(v){if(v.stack){var g=v.stack.split(`
`);g.splice(1,f),v.stack=g.join(`
`)}}var h=function(v){s(g,v);function g(y){for(var E=[],_=1;_<arguments.length;_++)E[_-1]=arguments[_];var b=v.call(this,y)||this;return b.message=y,b.name="Invariant Violation",b.message=u.format.apply(void 0,o([y],E)),l(b),b}return g}(Error);i.InvariantError=h;function a(v){var g=function(y,E){for(var _=[],b=2;b<arguments.length;b++)_[b-2]=arguments[b];if(!y){var w=u.format.apply(void 0,o([E],_)),I=!!v.prototype.name,B=I?new v(w):v(w);throw l(B),B}};return g}i.createInvariantWith=a;function m(v){for(var g=[],y=1;y<arguments.length;y++)g[y-1]=arguments[y];return a(v).apply(void 0,g)}i.invariant=a(h),i.invariant.as=m}}),tt=O({"../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/index.js"(i){var s=i&&i.__createBinding||(Object.create?function(u,f,l,h){h===void 0&&(h=l),Object.defineProperty(u,h,{enumerable:!0,get:function(){return f[l]}})}:function(u,f,l,h){h===void 0&&(h=l),u[h]=f[l]}),o=i&&i.__exportStar||function(u,f){for(var l in u)l!=="default"&&!Object.prototype.hasOwnProperty.call(f,l)&&s(f,u,l)};Object.defineProperty(i,"__esModule",{value:!0}),o(Pe(),i),o(Nt(),i)}}),zt=O({"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/createDeferredExecutor.js"(i){Object.defineProperty(i,"__esModule",{value:!0}),i.createDeferredExecutor=void 0;function s(){const o=(u,f)=>{o.state="pending",o.resolve=l=>{if(o.state!=="pending")return;o.result=l;const h=a=>(o.state="fulfilled",a);return u(l instanceof Promise?l:Promise.resolve(l).then(h))},o.reject=l=>{if(o.state==="pending")return queueMicrotask(()=>{o.state="rejected"}),f(o.rejectionReason=l)}};return o}i.createDeferredExecutor=s}}),Me=O({"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/DeferredPromise.js"(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DeferredPromise=void 0;var s=zt(),o=class extends Promise{#t;resolve;reject;constructor(u=null){const f=(0,s.createDeferredExecutor)();super((l,h)=>{f(l,h),u?.(f.resolve,f.reject)}),this.#t=f,this.resolve=this.#t.resolve,this.reject=this.#t.reject}get state(){return this.#t.state}get rejectionReason(){return this.#t.rejectionReason}then(u,f){return this.#e(super.then(u,f))}catch(u){return this.#e(super.catch(u))}finally(u){return this.#e(super.finally(u))}#e(u){return Object.defineProperties(u,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})}};i.DeferredPromise=o}}),vt=O({"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/index.js"(i){var s=i&&i.__createBinding||(Object.create?function(u,f,l,h){h===void 0&&(h=l);var a=Object.getOwnPropertyDescriptor(f,l);(!a||("get"in a?!f.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return f[l]}}),Object.defineProperty(u,h,a)}:function(u,f,l,h){h===void 0&&(h=l),u[h]=f[l]}),o=i&&i.__exportStar||function(u,f){for(var l in u)l!=="default"&&!Object.prototype.hasOwnProperty.call(f,l)&&s(f,u,l)};Object.defineProperty(i,"__esModule",{value:!0}),o(zt(),i),o(Me(),i)}}),$t=O({"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/MemoryLeakError.js"(i){Object.defineProperty(i,"__esModule",{value:!0}),i.MemoryLeakError=void 0;var s=class extends Error{emitter;type;count;constructor(o,u,f){super(`Possible EventEmitter memory leak detected. ${f} ${u.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=o,this.type=u,this.count=f,this.name="MaxListenersExceededWarning"}};i.MemoryLeakError=s}}),Te=O({"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/Emitter.js"(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Emitter=void 0;var s=$t(),o,u,f,l,h,a,m,v,g,y,E,_=class{constructor(){q(this,l),q(this,a),q(this,v),q(this,y),q(this,o,void 0),q(this,u,void 0),q(this,f,void 0),X(this,o,new Map),X(this,u,_.defaultMaxListeners),X(this,f,!1)}static listenerCount(w,I){return w.listenerCount(I)}setMaxListeners(w){return X(this,u,w),this}getMaxListeners(){return C(this,u)}eventNames(){return Array.from(C(this,o).keys())}emit(w,...I){const B=U(this,l,h).call(this,w);return B.forEach(z=>{z.apply(this,I)}),B.length>0}addListener(w,I){U(this,y,E).call(this,"newListener",w,I);const B=U(this,l,h).call(this,w).concat(I);if(C(this,o).set(w,B),C(this,u)>0&&this.listenerCount(w)>C(this,u)&&!C(this,f)){X(this,f,!0);const z=new s.MemoryLeakError(this,w,this.listenerCount(w));console.warn(z)}return this}on(w,I){return this.addListener(w,I)}once(w,I){return this.addListener(w,U(this,v,g).call(this,w,I))}prependListener(w,I){const B=U(this,l,h).call(this,w);if(B.length>0){const z=[I].concat(B);C(this,o).set(w,z)}else C(this,o).set(w,B.concat(I));return this}prependOnceListener(w,I){return this.prependListener(w,U(this,v,g).call(this,w,I))}removeListener(w,I){const B=U(this,l,h).call(this,w);return B.length>0&&(U(this,a,m).call(this,B,I),C(this,o).set(w,B),U(this,y,E).call(this,"removeListener",w,I)),this}off(w,I){return this.removeListener(w,I)}removeAllListeners(w){return w?C(this,o).delete(w):C(this,o).clear(),this}listeners(w){return Array.from(U(this,l,h).call(this,w))}listenerCount(w){return U(this,l,h).call(this,w).length}rawListeners(w){return this.listeners(w)}},b=_;o=new WeakMap,u=new WeakMap,f=new WeakMap,l=new WeakSet,h=function(w){return C(this,o).get(w)||[]},a=new WeakSet,m=function(w,I){const B=w.indexOf(I);return B>-1&&w.splice(B,1),[]},v=new WeakSet,g=function(w,I){const B=(...z)=>{this.removeListener(w,B),I.apply(this,z)};return B},y=new WeakSet,E=function(w,I,B){this.emit(w,I,B)},Se(b,"defaultMaxListeners",10),i.Emitter=b}}),Oe=O({"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/index.js"(i){var s=i&&i.__createBinding||(Object.create?function(u,f,l,h){h===void 0&&(h=l);var a=Object.getOwnPropertyDescriptor(f,l);(!a||("get"in a?!f.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return f[l]}}),Object.defineProperty(u,h,a)}:function(u,f,l,h){h===void 0&&(h=l),u[h]=f[l]}),o=i&&i.__exportStar||function(u,f){for(var l in u)l!=="default"&&!Object.prototype.hasOwnProperty.call(f,l)&&s(f,u,l)};Object.defineProperty(i,"__esModule",{value:!0}),o(Te(),i),o($t(),i)}}),Ce=k(Dt());k(tt());var ht=k(vt()),Le=window.localStorage.CSB_EMULATOR_DEBUG,Ue="\x1B[0m",ke="\x1B[32;1m",je="\x1B[31m",Re="\x1B[34m",De="\x1B[33;1m",Ne="\x1B[35;1m",Ot="\x1B[36;1m",ze={preview:De,emulator:Ne,runtime:Ot,bridge:Re,"runtime:worker":Ot};function Wt(i){return function(o,...u){if(Le==="true"){const f=()=>o.includes("sender")?`${ke}sender`:o.includes("receiver")?`${je}receiver`:"",l=o.replace(/\[.+\]:/,"");console.log(`${ze[i]}${i}:${f()}${Ue}:${l}`,...u)}}}var W=Wt("emulator"),$e=class{constructor(i){this.target=i,this.emitter=new EventTarget,this.channel=new MessageChannel,this.receiverPort=this.channel.port1;const s=new ht.DeferredPromise,o=u=>{u.data.type==="internal/ready"&&(W("[message-sender]: runtime is ready"),s.resolve())};window.addEventListener("message",o),s.then(()=>{window.removeEventListener("message",o)}),this.receiverReadyPromise=s,this.receiverPort.onmessage=u=>{const f=u.data;f.type!=null&&(W('[message-sender]: emitting "%s" event...',f.type,f.payload),this.emitter.dispatchEvent(new MessageEvent(f.type,{data:f.payload})))}}emitter;channel;receiverPort;receiverReadyPromise;async handshake(){const i=new ht.DeferredPromise;await this.receiverReadyPromise,W("[message-sender]: sending handshake"),this.target.postMessage({type:"internal/handshake"},"*",[this.channel.port2]),this.on("internal/handshake/done",()=>{i.resolve(),clearTimeout(s)});const s=setTimeout(()=>{i.reject(new Error("MessageSender: Handshake timeout"))},5e3);return i}on(i,s,o){W('[message-sender]: add listener "%s"',i),this.emitter.addEventListener(i,u=>{u instanceof MessageEvent&&s(u)},o)}off(i,s,o){this.emitter.removeEventListener(i,s,o)}async send(i,...s){const o=new ht.DeferredPromise,u=(0,Ce.default)(),f=s[0]||{};W('[message-sender]: send "%s" (%s)',i,u,f),this.receiverPort.postMessage({type:i,payload:{operationId:u,payload:f}}),W('[message-sender]: adding done listener for "%s" (%s)',i,u);const l=a=>{const{data:m}=a;if(m.operationId===u){const v=m.listenerPayload||{};W('[message-sender]: resolving "%s (%s) promise!',i,u),o.resolve({...v,operationId:m.operationId})}},h=a=>{const{data:m}=a;m.operationId===u&&(W('[message-sender]: rejecting "%s (%s) promise!',i,u),o.reject(m.error))};return this.on("internal/operation/done",l),this.on("internal/operation/failed",h),o.finally(()=>{this.emitter.removeEventListener("internal/operation/done",l),this.emitter.removeEventListener("internal/operation/failed",h)})}},Z=k(tt()),Ct=k(vt()),We=k(Dt()),K=k(tt()),Ve=class{constructor(i){this.channel=i}async init(i){await this.channel.send("fs/init",{files:i})}async readFile(i,s){const o=await this.channel.send("fs/readFile",{path:i,encoding:s}).catch(u=>{throw new Error((0,K.format)('Failed to read file at path "%s"',i),{cause:u})});if(!o)throw new Error("File not found");return o.data}async writeFile(i,s,o){let u,f=!1;typeof o=="object"?(u=o.encoding,f=!!o.recursive):typeof o=="string"&&(u=o),await this.channel.send("fs/writeFile",{path:i,content:s,encoding:u,recursive:f}).catch(l=>{throw new Error((0,K.format)('Failed to write file at path "%s"',i),{cause:l})})}async readdir(i){const s=await this.channel.send("fs/readdir",{path:i}).catch(o=>{throw new Error((0,K.format)('Failed to read directory at path "%s"',i),{cause:o})});if(!s)throw new Error("Directory not found");return s.data}async mkdir(i,s){const o=!!s?.recursive;await this.channel.send("fs/mkdir",{path:i,recursive:o}).catch(u=>{throw new Error((0,K.format)('Failed to make directory at path "%s"',i),{cause:u})})}async stat(i){const s=await this.channel.send("fs/stat",{path:i}).catch(o=>{throw new Error((0,K.format)('Failed to stat file at path "%s"',i),{cause:o})});if(!s)throw new Error("File not found");return s.data}async watch(i,s,o){const u=(0,We.default)();return await this.channel.send("fs/watch",{watcherId:u,includes:i,excludes:s}),this.channel.on("fs/watch-event",({data:f})=>{if(f.watcherId===u&&o){const l={...f};delete l.watcherId,o(l)}}),{dispose:()=>this.channel.send("fs/unwatch",{watcherId:u})}}},nt=k(tt()),Lt=k(Oe()),qe=class{constructor(i){this.channel=i}create(){return new He(this.channel)}},He=class{constructor(i){this.channel=i,this.state="running",this.stdout=new Lt.Emitter,this.stderr=new Lt.Emitter,this.stdin={write:s=>{if(!this.id)throw new Error("Failed to write to stdin, no process is currently running");return this.channel.send("shell/stdin",{data:s,workerId:this.id})}},this.forwardStdEvents()}id;state;stdout;stderr;stdin;forwardStdEvents(){this.channel.on("worker/tty",i=>{const{data:s}=i;if(s.workerId===this.id)switch(s.payload.type){case"out":{this.stdout.emit("data",s.payload.data);break}case"err":{this.stderr.emit("data",s.payload.data);break}}})}async runCommand(i,s,o={}){(0,nt.invariant)(!this.id,'Failed to run "runCommand" on a ShellProcess: there is already a process running.');const u=await this.channel.send("shell/runCommand",{command:i,args:s,options:o});return(0,nt.invariant)(u,'Failed to run "runCommand" on a ShellProcess: was not able to retrieve a running process.'),this.id=u.id,this.state="running",u}async on(i,s){switch(i){case"progress":{this.channel.on("worker/progress",({data:o})=>{s(o.status)});return}case"exit":{this.channel.on("worker/exit",({data:o})=>{o.workerId===this.id&&s(o.exitCode,o.error)});return}}}async kill(){(0,nt.invariant)(this.id,'Failed to run "kill" on a ShellProcess: there is no process running. Did you forget to run it?'),this.state="idle",await this.channel.send("shell/exit",{id:this.id}).catch(i=>{throw new Error((0,nt.format)('Failed to kill shell with ID "%s"',this.id),{cause:i})}),this.id=void 0}},dt=k(tt()),Ge=k(vt()),Je=2e4,Ye=class{constructor(i){this.channel=i}async waitFor(i,s,o=Je){const u=new Ge.DeferredPromise,f=setTimeout(()=>{u.reject()},o),l=await this.channel.send("preview/get/info",i).catch(a=>{u.reject(new Error((0,dt.format)('Failed to look up preview information for shell ID "%s" (port: %d)',i.sourceShellId,i.port)))}),h=l&&s(l);return h&&u.resolve({url:l.url,port:l.port,sourceShellId:l.sourceShellId}),this.channel.on("preview/port/ready",({data:a})=>{!h&&s(a)&&u.resolve({url:a.url,port:a.port,sourceShellId:a.sourceShellId})}),u.finally(()=>{clearTimeout(f)})}async getByShellId(i,s){return this.waitFor({sourceShellId:i},o=>o.sourceShellId===i,s).catch(o=>{throw new Error((0,dt.format)('Failed to get shell by ID "%s"',i),{cause:o})})}async waitForPort(i,s){return this.waitFor({port:i},o=>o.port===i,s).catch(o=>{throw new Error((0,dt.format)("Failed to await port %d",i),{cause:o})})}},Xe="https://nodebox-runtime.codesandbox.io",it=Wt("emulator"),Ze=class{constructor(i){this.options=i,(0,Z.invariant)(this.options.iframe,'Failed to create a Nodebox: expected "iframe" argument to be a reference to an <iframe> element but got %j',this.options.iframe),this.url=this.options.runtimeUrl||Xe,this.isConnected=!1}channel=null;isConnected;url;fileSystemApi=null;shellApi=null;previewApi=null;async connect(){const{iframe:i,cdnUrl:s}=this.options;it("[message-sender]: Connecting to node emulator...");const o=new Ct.DeferredPromise;this.url||o.reject(new Error("Nodebox URL is missing. Did you forget to provide it when creating this Nodebox instance?")),(0,Z.invariant)(i.contentWindow,"Failed to create a MessageChannel with the Nodebox iframe: no content window found"),this.channel=new $e(i.contentWindow);const u=new Ct.DeferredPromise;return i.setAttribute("src",this.url),i.addEventListener("load",()=>{u.resolve()},{once:!0}),i.addEventListener("error",f=>{u.reject(f.error)},{once:!0}),await u,it("[message-sender]: IFrame loaded..."),await this.channel.handshake(),it("[message-sender]: Handshake completed..."),this.channel.send("connect",{cdnUrl:s}),this.channel.on("runtime/ready",()=>{o.resolve()}),o.then(()=>{it("[message-sender]: Connected to runtime..."),this.isConnected=!0})}get fs(){return(0,Z.invariant)(this.isConnected,'Failed to access the File System API: consumer is not connected. Did you forget to run "connect()"?'),this.fileSystemApi?this.fileSystemApi:(this.fileSystemApi=new Ve(this.channel),this.fileSystemApi)}get shell(){return(0,Z.invariant)(this.isConnected,'Failed to access the Shell API: consumer is not connected. Did you forget to run "connect()"?'),this.shellApi?this.shellApi:(this.shellApi=new qe(this.channel),this.shellApi)}get preview(){return(0,Z.invariant)(this.isConnected,'Failed to access the Preview API: consumer is not connected. Did you forget to run "connect()"?'),this.previewApi?this.previewApi:(this.previewApi=new Ye(this.channel),this.previewApi)}},Ke="INJECT_AND_INVOKE",Qe="PREVIEW_LOADED",ot=function(i,s){return s===void 0&&(s="utf8"),typeof i=="string"?at.Buffer.from(i,s):i},tr=function(i){return typeof i=="string"?i:at.Buffer.from(i).toString("utf-8")},er=function(i){return Object.entries(i).reduce(function(s,o){var u=o[0],f=o[1];return s[u]=ot(f.code),s},{})},rr=function(i){var s,o={},u=["dev","start"];try{o=JSON.parse(i).scripts}catch(y){throw Q("Could not parse package.json file: "+y.message)}le.invariant(o,"Failed to start. Please provide a `start` or `dev` script on the package.json");for(var f=0;f<u.length;f++)if(u[f]in o){var l=u[f],h=o[l],a=(s=h.match(/(\w+=\w+;)*\w+=\w+/g))===null||s===void 0?void 0:s.reduce(function(y,E){var _=E.split("="),b=_[0],w=_[1];return y[b]=w,y},{}),m=h.replace(/(\w+=\w+;)*\w+=\w+/g,"").trim().split(" "),v=m[0],g=m.slice(1);return[v,g,{env:a}]}throw Q("Failed to start. Please provide a `start` or `dev` script on the package.json")},Ut=function(i){return typeof i=="string"?i:typeof i=="object"&&"message"in i?i.message:Q("The server could not be reached. Make sure that the node script is running and that a port has been started.")},nr=function(){function i(){this.listeners={},this.listenersCount=0,this.channelId=Math.floor(Math.random()*1e6),this.listeners=[]}return i.prototype.cleanup=function(){this.listeners={},this.listenersCount=0},i.prototype.dispatch=function(s){Object.values(this.listeners).forEach(function(o){return o(s)})},i.prototype.listener=function(s){var o=this;if(typeof s!="function")return function(){};var u=this.listenersCount;return this.listeners[u]=s,this.listenersCount++,function(){delete o.listeners[u]}},i}();function ir(i,s){return R(this,void 0,void 0,function(){var o,u,f,l,h;return D(this,function(a){return o=i.contentWindow,pt(o,"Failed to await preview iframe: no content window found"),u=9e4,f=20,l=0,[2,new Promise(function(m,v){var g=function(){var y=function(){clearTimeout(h),l=f,m(),i.removeEventListener("load",y)};if(l>=f){v(Q("Could not able to connect to preview."));return}i.setAttribute("src",s),h=setTimeout(function(){g(),i.removeEventListener("load",y)},u),l=l+1,i.addEventListener("load",y)};i.addEventListener("error",function(){return v(new Error("Iframe error"))}),i.addEventListener("abort",function(){return v(new Error("Aborted"))}),g()})]})})}var or=function(i,s){i.style.border="0",i.style.width=s.width||"100%",i.style.height=s.height||"100%",i.style.overflow="hidden",i.allow="cross-origin-isolated"},ar=`var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e={},n={};!function(t){t.__esModule=!0,t.default=["log","debug","info","warn","error","table","clear","time","timeEnd","count","assert","command","result"]}(n);var a,o={},i={};(a=i).__esModule=!0,a.default=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+"-"+Date.now()};var u={},s={__esModule:!0};s.update=s.state=void 0,s.update=function(t){s.state=t};var f={},c={};!function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)};r.__esModule=!0,r.initialState=void 0,r.initialState={timings:{},count:{}};var n=function(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()};r.default=function(t,a){var o,i,u;switch(void 0===t&&(t=r.initialState),a.type){case"COUNT":var s=t.count[a.name]||0;return e(e({},t),{count:e(e({},t.count),(o={},o[a.name]=s+1,o))});case"TIME_START":return e(e({},t),{timings:e(e({},t.timings),(i={},i[a.name]={start:n()},i))});case"TIME_END":var f=t.timings[a.name],c=n(),l=c-f.start;return e(e({},t),{timings:e(e({},t.timings),(u={},u[a.name]=e(e({},f),{end:c,time:l}),u))});default:return t}}}(c),function(r){var e=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var n=e(c),a=s;r.default=function(t){a.update(n.default(a.state,t))}}(f);var l={__esModule:!0};l.timeEnd=l.timeStart=l.count=void 0,l.count=function(t){return{type:"COUNT",name:t}},l.timeStart=function(t){return{type:"TIME_START",name:t}},l.timeEnd=function(t){return{type:"TIME_END",name:t}};var d=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};u.__esModule=!0,u.stop=u.start=void 0;var p=s,h=d(f),m=l;u.start=function(t){h.default(m.timeStart(t))},u.stop=function(t){var r=null===p.state||void 0===p.state?void 0:p.state.timings[t];return r&&!r.end?(h.default(m.timeEnd(t)),{method:"log",data:[t+": "+p.state.timings[t].time+"ms"]}):{method:"warn",data:["Timer '"+t+"' does not exist"]}};var y={},v=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};y.__esModule=!0,y.increment=void 0;var _=s,b=v(f),g=l;y.increment=function(t){return b.default(g.count(t)),{method:"log",data:[t+": "+_.state.count[t]]}};var M={},T=t&&t.__spreadArrays||function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var o=arguments[r],i=0,u=o.length;i<u;i++,a++)n[a]=o[i];return n};M.__esModule=!0,M.test=void 0,M.test=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return!t&&(0===r.length&&r.push("console.assert"),{method:"error",data:T(["Assertion failed:"],r)})},function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)},n=t&&t.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),a=t&&t.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),o=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)"default"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&n(r,t,e);return a(r,t),r},s=t&&t.__spreadArrays||function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var o=arguments[r],i=0,u=o.length;i<u;i++,a++)n[a]=o[i];return n},f=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var c=f(i),l=o(u),d=o(y),p=o(M);r.default=function(t,r,n){var a=n||c.default();switch(t){case"clear":return{method:t,id:a};case"count":return!!(o="string"==typeof r[0]?r[0]:"default")&&e(e({},d.increment(o)),{id:a});case"time":case"timeEnd":var o;return!!(o="string"==typeof r[0]?r[0]:"default")&&("time"===t?(l.start(o),!1):e(e({},l.stop(o)),{id:a}));case"assert":if(0!==r.length){var i=p.test.apply(p,s([r[0]],r.slice(1)));if(i)return e(e({},i),{id:a})}return!1;case"error":return{method:t,id:a,data:r.map((function(t){try{return t.stack||t}catch(r){return t}}))};default:return{method:t,id:a,data:r}}}}(o);var S={},O={};!function(t){var r;t.__esModule=!0,function(t){t[t.infinity=0]="infinity",t[t.minusInfinity=1]="minusInfinity",t[t.minusZero=2]="minusZero"}(r||(r={})),t.default={type:"Arithmetic",lookup:Number,shouldTransform:function(t,r){return"number"===t&&(r===1/0||r===-1/0||function(t){return 1/t==-1/0}(r))},toSerializable:function(t){return t===1/0?r.infinity:t===-1/0?r.minusInfinity:r.minusZero},fromSerializable:function(t){return t===r.infinity?1/0:t===r.minusInfinity?-1/0:t===r.minusZero?-0:t}}}(O);var w={};!function(t){t.__esModule=!0,t.default={type:"Function",lookup:Function,shouldTransform:function(t,r){return"function"==typeof r},toSerializable:function(t){var r="";try{r=t.toString().substring(r.indexOf("{")+1,r.lastIndexOf("}"))}catch(t){}return{name:t.name,body:r,proto:Object.getPrototypeOf(t).constructor.name}},fromSerializable:function(t){try{var r=function(){};return"string"==typeof t.name&&Object.defineProperty(r,"name",{value:t.name,writable:!1}),"string"==typeof t.body&&Object.defineProperty(r,"body",{value:t.body,writable:!1}),"string"==typeof t.proto&&(r.constructor={name:t.proto}),r}catch(r){return t}}}}(w);var A={};!function(t){var r;function e(t){for(var r={},e=0,n=t.attributes;e<n.length;e++){var a=n[e];r[a.name]=a.value}return r}t.__esModule=!0,t.default={type:"HTMLElement",shouldTransform:function(t,r){return r&&r.children&&"string"==typeof r.innerHTML&&"string"==typeof r.tagName},toSerializable:function(t){return{tagName:t.tagName.toLowerCase(),attributes:e(t),innerHTML:t.innerHTML}},fromSerializable:function(t){try{var e=(r||(r=document.implementation.createHTMLDocument("sandbox"))).createElement(t.tagName);e.innerHTML=t.innerHTML;for(var n=0,a=Object.keys(t.attributes);n<a.length;n++){var o=a[n];try{e.setAttribute(o,t.attributes[o])}catch(t){}}return e}catch(r){return t}}}}(A);var j={};!function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)};r.__esModule=!0,r.default={type:"Map",shouldTransform:function(t,r){return r&&r.constructor&&"Map"===r.constructor.name},toSerializable:function(t){var r={};return t.forEach((function(t,e){var n="object"==typeof e?JSON.stringify(e):e;r[n]=t})),{name:"Map",body:r,proto:Object.getPrototypeOf(t).constructor.name}},fromSerializable:function(t){var r=t.body,n=e({},r);return"string"==typeof t.proto&&(n.constructor={name:t.proto}),n}}}(j);var z={};!function(t){t.__esModule=!0;var r="@t",e=/^#*@(t|r)$/,n=(0,eval)("this"),a="function"==typeof ArrayBuffer,o="function"==typeof Map,i="function"==typeof Set,u=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],s=Array.prototype.slice,f={serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)}},c=function(){function t(t,r){this.references=t,this.transforms=r,this.transformsMap=this._makeTransformsMap(),this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}return t._createRefMark=function(t){var r=Object.create(null);return r["@r"]=t,r},t.prototype._createCircularCandidate=function(t,r,e){this.circularCandidates.push(t),this.circularCandidatesDescrs.push({parent:r,key:e,refIdx:-1})},t.prototype._applyTransform=function(t,e,n,a){var o=Object.create(null),i=a.toSerializable(t);return"object"==typeof i&&this._createCircularCandidate(t,e,n),o[r]=a.type,o.data=this._handleValue((function(){return i}),e,n),o},t.prototype._handleArray=function(t){for(var r=[],e=function(e){r[e]=n._handleValue((function(){return t[e]}),r,e)},n=this,a=0;a<t.length;a++)e(a);return r},t.prototype._handlePlainObject=function(t){var r,n,a=Object.create(null),o=function(r){if(Reflect.has(t,r)){var n=e.test(r)?"#"+r:r;a[n]=i._handleValue((function(){return t[r]}),a,n)}},i=this;for(var u in t)o(u);var s=null===(n=null===(r=null==t?void 0:t.__proto__)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name;return s&&"Object"!==s&&(a.constructor={name:s}),a},t.prototype._handleObject=function(t,r,e){return this._createCircularCandidate(t,r,e),Array.isArray(t)?this._handleArray(t):this._handlePlainObject(t)},t.prototype._ensureCircularReference=function(r){var e=this.circularCandidates.indexOf(r);if(e>-1){var n=this.circularCandidatesDescrs[e];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),t._createRefMark(n.refIdx)}return null},t.prototype._handleValue=function(t,r,e){try{var n=t(),a=typeof n,o="object"===a&&null!==n;if(o){var i=this._ensureCircularReference(n);if(i)return i}var u=this._findTransform(a,n);return u?this._applyTransform(n,r,e,u):o?this._handleObject(n,r,e):n}catch(t){try{return this._handleValue((function(){return t instanceof Error?t:new Error(t)}),r,e)}catch(t){return null}}},t.prototype._makeTransformsMap=function(){if(o){var t=new Map;return this.transforms.forEach((function(r){r.lookup&&t.set(r.lookup,r)})),t}},t.prototype._findTransform=function(t,r){if(o&&r&&r.constructor&&(null==(a=this.transformsMap.get(r.constructor))?void 0:a.shouldTransform(t,r)))return a;for(var e=0,n=this.transforms;e<n.length;e++){var a;if((a=n[e]).shouldTransform(t,r))return a}},t.prototype.transform=function(){for(var r=this,e=[this._handleValue((function(){return r.references}),null,null)],n=0,a=this.circularCandidatesDescrs;n<a.length;n++){var o=a[n];o.refIdx>0&&(e[o.refIdx]=o.parent[o.key],o.parent[o.key]=t._createRefMark(o.refIdx))}return e},t}(),l=function(){function t(t,r){this.activeTransformsStack=[],this.visitedRefs=Object.create(null),this.references=t,this.transformMap=r}return t.prototype._handlePlainObject=function(t){var r=Object.create(null);for(var n in"constructor"in t&&(t.constructor&&"string"==typeof t.constructor.name||(t.constructor={name:"Object"})),t)t.hasOwnProperty(n)&&(this._handleValue(t[n],t,n),e.test(n)&&(r[n.substring(1)]=t[n],delete t[n]));for(var a in r)t[a]=r[a]},t.prototype._handleTransformedObject=function(t,e,n){var a=t[r],o=this.transformMap[a];if(!o)throw new Error("Can't find transform for \\""+a+'" type.');this.activeTransformsStack.push(t),this._handleValue(t.data,t,"data"),this.activeTransformsStack.pop(),e[n]=o.fromSerializable(t.data)},t.prototype._handleCircularSelfRefDuringTransform=function(t,r,e){var n=this.references;Object.defineProperty(r,e,{val:void 0,configurable:!0,enumerable:!0,get:function(){return void 0===this.val&&(this.val=n[t]),this.val},set:function(t){this.val=t}})},t.prototype._handleCircularRef=function(t,r,e){this.activeTransformsStack.includes(this.references[t])?this._handleCircularSelfRefDuringTransform(t,r,e):(this.visitedRefs[t]||(this.visitedRefs[t]=!0,this._handleValue(this.references[t],this.references,t)),r[e]=this.references[t])},t.prototype._handleValue=function(t,e,n){if("object"==typeof t&&null!==t){var a=t["@r"];if(void 0!==a)this._handleCircularRef(a,e,n);else if(t[r])this._handleTransformedObject(t,e,n);else if(Array.isArray(t))for(var o=0;o<t.length;o++)this._handleValue(t[o],t,o);else this._handlePlainObject(t)}},t.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]},t}(),d=[{type:"[[NaN]]",shouldTransform:function(t,r){return"number"===t&&isNaN(r)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(t){return"undefined"===t},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",lookup:Date,shouldTransform:function(t,r){return r instanceof Date},toSerializable:function(t){return t.getTime()},fromSerializable:function(t){var r=new Date;return r.setTime(t),r}},{type:"[[RegExp]]",lookup:RegExp,shouldTransform:function(t,r){return r instanceof RegExp},toSerializable:function(t){var r={src:t.source,flags:""};return t.globalThis&&(r.flags+="g"),t.ignoreCase&&(r.flags+="i"),t.multiline&&(r.flags+="m"),r},fromSerializable:function(t){return new RegExp(t.src,t.flags)}},{type:"[[Error]]",lookup:Error,shouldTransform:function(t,r){return r instanceof Error},toSerializable:function(t){var r,e;return t.stack||null===(e=(r=Error).captureStackTrace)||void 0===e||e.call(r,t),{name:t.name,message:t.message,stack:t.stack}},fromSerializable:function(t){var r=new(n[t.name]||Error)(t.message);return r.stack=t.stack,r}},{type:"[[ArrayBuffer]]",lookup:a&&ArrayBuffer,shouldTransform:function(t,r){return a&&r instanceof ArrayBuffer},toSerializable:function(t){var r=new Int8Array(t);return s.call(r)},fromSerializable:function(t){if(a){var r=new ArrayBuffer(t.length);return new Int8Array(r).set(t),r}return t}},{type:"[[TypedArray]]",shouldTransform:function(t,r){if(a)return ArrayBuffer.isView(r)&&!(r instanceof DataView);for(var e=0,o=u;e<o.length;e++){var i=o[e];if("function"==typeof n[i]&&r instanceof n[i])return!0}return!1},toSerializable:function(t){return{ctorName:t.constructor.name,arr:s.call(t)}},fromSerializable:function(t){return"function"==typeof n[t.ctorName]?new n[t.ctorName](t.arr):t.arr}},{type:"[[Map]]",lookup:o&&Map,shouldTransform:function(t,r){return o&&r instanceof Map},toSerializable:function(t){var r=[];return t.forEach((function(t,e){r.push(e),r.push(t)})),r},fromSerializable:function(t){if(o){for(var r=new Map,e=0;e<t.length;e+=2)r.set(t[e],t[e+1]);return r}for(var n=[],a=0;a<t.length;a+=2)n.push([t[e],t[e+1]]);return n}},{type:"[[Set]]",lookup:i&&Set,shouldTransform:function(t,r){return i&&r instanceof Set},toSerializable:function(t){var r=[];return t.forEach((function(t){r.push(t)})),r},fromSerializable:function(t){if(i){for(var r=new Set,e=0;e<t.length;e++)r.add(t[e]);return r}return t}}],p=function(){function t(t){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=t||f,this.addTransforms(d)}return t.prototype.addTransforms=function(t){for(var r=0,e=t=Array.isArray(t)?t:[t];r<e.length;r++){var n=e[r];if(this.transformsMap[n.type])throw new Error('Transform with type "'+n.type+'" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},t.prototype.removeTransforms=function(t){for(var r=0,e=t=Array.isArray(t)?t:[t];r<e.length;r++){var n=e[r],a=this.transforms.indexOf(n);a>-1&&this.transforms.splice(a,1),delete this.transformsMap[n.type]}return this},t.prototype.encode=function(t){var r=new c(t,this.transforms).transform();return this.serializer.serialize(r)},t.prototype.decode=function(t){var r=this.serializer.deserialize(t);return new l(r,this.transformsMap).transform()},t}();t.default=p}(z);var E=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};S.__esModule=!0,S.Decode=P=S.Encode=void 0;var k=E(O),C=E(w),D=E(A),N=E(j),R=E(z),I=[D.default,C.default,k.default,N.default],x=new R.default;x.addTransforms(I);var P=S.Encode=function(t){return JSON.parse(x.encode(t))};S.Decode=function(t){return x.decode(JSON.stringify(t))},function(r){var e=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var a=e(n),i=e(o),u=S;r.default=function(t,r,e){void 0===e&&(e=!0);for(var n=t,o={pointers:{},src:{npm:"https://npmjs.com/package/console-feed",github:"https://github.com/samdenty99/console-feed"}},s=function(t){var a=n[t];n[t]=function(){a.apply(this,arguments);var n=[].slice.call(arguments);setTimeout((function(){var a=i.default(t,n);if(a){var o=a;e&&(o=u.Encode(a)),r(o,a)}}))},o.pointers[t]=a},f=0,c=a.default;f<c.length;f++)s(c[f]);return n.feed=o,n}}(e),r(e)(window.console,(function(t){var r=P(t);parent.postMessage({type:"console",codesandbox:!0,log:Array.isArray(r)?r[0]:r},"*")}));
`;function sr(){var i=window.history.__proto__,s=[],o=0,u=function(h){parent.postMessage({type:"urlchange",url:h,back:o>0,forward:o<s.length-1},"*")};function f(h,a){s.splice(o+1),s.push({url:h,state:a}),o=s.length-1}Object.assign(window.history,{go:function(h){var a=o+h;if(a>=0&&a<=s.length-1){o=a;var m=s[o],v=m.url,g=m.state;i.replaceState.call(window.history,g,"",v);var y=document.location.href;u(y),window.dispatchEvent(new PopStateEvent("popstate",{state:g}))}},back:function(){window.history.go(-1)},forward:function(){window.history.go(1)},pushState:function(h,a,m){i.replaceState.call(window.history,h,a,m),f(m,h),u(document.location.href)},replaceState:function(h,a,m){i.replaceState.call(window.history,h,a,m),s[o]={state:h,url:m},u(document.location.href)}});function l(h){var a=h.data;a.type==="urlback"?history.back():a.type==="urlforward"?history.forward():a.type==="refresh"&&document.location.reload()}window.addEventListener("message",l)}var ur=[{code:sr.toString(),id:"historyListener"},{code:"function consoleHook() {"+ar+`
};`,id:"consoleHook"}],cr=function(i){ur.forEach(function(s){var o,u=s.code,f=s.id,l={uid:f,type:Ke,code:"exports.activate = "+u,scope:{}};(o=i.contentWindow)===null||o===void 0||o.postMessage(l,"*")})},Er=function(i){ce(s,i);function s(o,u,f){f===void 0&&(f={});var l=i.call(this,o,u,rt(rt({},f),{bundlerURL:f.bundlerURL}))||this;return l._modulesCache=new Map,l._initPromise=null,l.emitter=new nr,l.manageIframes(o),l.emulator=new Ze({iframe:l.emulatorIframe,runtimeUrl:l.options.bundlerURL}),l}return s.prototype._init=function(o){return R(this,void 0,void 0,function(){return D(this,function(u){switch(u.label){case 0:return[4,this.emulator.connect()];case 1:return u.sent(),[4,this.emulator.fs.init(o)];case 2:return u.sent(),[4,this.globalListeners()];case 3:return u.sent(),[2]}})})},s.prototype.compile=function(o){return R(this,void 0,void 0,function(){var u,f;return D(this,function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),this.dispatch({type:"start",firstLoad:!0}),this._initPromise||(this._initPromise=this._init(o)),[4,this._initPromise];case 1:return l.sent(),this.dispatch({type:"connected"}),[4,this.createShellProcessFromTask(o)];case 2:return u=l.sent().id,[4,this.createPreviewURLFromId(u)];case 3:return l.sent(),[4,this.setLocationURLIntoIFrame()];case 4:return l.sent(),this.dispatchDoneMessage(),[3,6];case 5:return f=l.sent(),this.dispatch({type:"action",action:"notification",notificationType:"error",title:Ut(f)}),this.dispatch({type:"done",compilatonError:!0}),[3,6];case 6:return[2]}})})},s.prototype.createShellProcessFromTask=function(o){return R(this,void 0,void 0,function(){var u,f,l=this;return D(this,function(h){switch(h.label){case 0:return u=tr(o["/package.json"]),this.emulatorCommand=rr(u),this.emulatorShellProcess=this.emulator.shell.create(),[4,this.emulatorShellProcess.on("exit",function(a){l.dispatch({type:"action",action:"notification",notificationType:"error",title:Q("Error: process.exit("+a+") called.")})})];case 1:return h.sent(),[4,this.emulatorShellProcess.on("progress",function(a){var m,v;if(a.state==="command_running"||a.state==="starting_command"){l.dispatch({type:"shell/progress",data:rt(rt({},a),{command:[(m=l.emulatorCommand)===null||m===void 0?void 0:m[0],(v=l.emulatorCommand)===null||v===void 0?void 0:v[1].join(" ")].join(" ")})});return}l.dispatch({type:"shell/progress",data:a})})];case 2:return h.sent(),this.emulatorShellProcess.stdout.on("data",function(a){l.dispatch({type:"stdout",payload:{data:a,type:"out"}})}),this.emulatorShellProcess.stderr.on("data",function(a){l.dispatch({type:"stdout",payload:{data:a,type:"err"}})}),[4,(f=this.emulatorShellProcess).runCommand.apply(f,this.emulatorCommand)];case 3:return[2,h.sent()]}})})},s.prototype.createPreviewURLFromId=function(o){return R(this,void 0,void 0,function(){var u;return D(this,function(f){switch(f.label){case 0:return this.iframePreviewUrl=void 0,[4,this.emulator.preview.getByShellId(o)];case 1:return u=f.sent().url,this.iframePreviewUrl=u,[2]}})})},s.prototype.manageIframes=function(o){var u;if(typeof o=="string"){var f=document.querySelector(o);pt(f,"The element '"+o+"' was not found"),this.iframe=document.createElement("iframe")}else this.iframe=o;or(this.iframe,this.options),pt(this.iframe.parentNode,"The given iframe does not have a parent."),this.emulatorIframe=document.createElement("iframe"),this.emulatorIframe.classList.add("sp-bridge-frame"),(u=this.iframe.parentNode)===null||u===void 0||u.appendChild(this.emulatorIframe)},s.prototype.setLocationURLIntoIFrame=function(){return R(this,void 0,void 0,function(){return D(this,function(o){switch(o.label){case 0:return this.iframePreviewUrl?[4,ir(this.iframe,this.iframePreviewUrl)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},s.prototype.dispatchDoneMessage=function(){this.dispatch({type:"done",compilatonError:!1}),this.iframePreviewUrl&&this.dispatch({type:"urlchange",url:this.iframePreviewUrl,back:!1,forward:!1})},s.prototype.globalListeners=function(){return R(this,void 0,void 0,function(){var o=this;return D(this,function(u){switch(u.label){case 0:return window.addEventListener("message",function(f){f.data.type===Qe&&cr(o.iframe),f.data.type==="urlchange"&&o.dispatch({type:"urlchange",url:f.data.url,back:f.data.back,forward:f.data.forward}),o.dispatch(f.data)}),[4,this.emulator.fs.watch(["*"],[".next","node_modules","build","dist","vendor",".config",".vuepress"],function(f){return R(o,void 0,void 0,function(){var l,h,a,m,v,g,y;return D(this,function(E){switch(E.label){case 0:return f?(l=f,h="newPath"in l?l.newPath:"path"in l?l.path:"",[4,this.emulator.fs.stat(h)]):[2];case 1:if(a=E.sent().type,a!=="file")return[2,null];E.label=2;case 2:switch(E.trys.push([2,10,,11]),m=l.type,m){case"change":return[3,3];case"create":return[3,3];case"remove":return[3,5];case"rename":return[3,6];case"close":return[3,8]}return[3,9];case 3:return[4,this.emulator.fs.readFile(l.path,"utf8")];case 4:return v=E.sent(),this.dispatch({type:"fs/change",path:l.path,content:v}),this._modulesCache.set(l.path,ot(v)),[3,9];case 5:return this.dispatch({type:"fs/remove",path:l.path}),this._modulesCache.delete(l.path),[3,9];case 6:return this.dispatch({type:"fs/remove",path:l.oldPath}),this._modulesCache.delete(l.oldPath),[4,this.emulator.fs.readFile(l.newPath,"utf8")];case 7:return g=E.sent(),this.dispatch({type:"fs/change",path:l.newPath,content:g}),this._modulesCache.set(l.newPath,ot(g)),[3,9];case 8:return[3,9];case 9:return[3,11];case 10:return y=E.sent(),this.dispatch({type:"action",action:"notification",notificationType:"error",title:Ut(y)}),[3,11];case 11:return[2]}})})})];case 1:return u.sent(),[2]}})})},s.prototype.restartShellProcess=function(){var o;return R(this,void 0,void 0,function(){return D(this,function(u){switch(u.label){case 0:return this.emulatorShellProcess&&this.emulatorCommand?(this.dispatch({type:"start",firstLoad:!0}),[4,this.emulatorShellProcess.kill()]):[3,3];case 1:return u.sent(),(o=this.iframe)===null||o===void 0||o.removeAttribute("attr"),[4,this.compile(Object.fromEntries(this._modulesCache))];case 2:u.sent(),u.label=3;case 3:return[2]}})})},s.prototype.updateSandbox=function(o){var u=this,f,l=er(o.files);if(((f=this.emulatorShellProcess)===null||f===void 0?void 0:f.state)==="running"){Object.entries(l).forEach(function(h){var a=h[0],m=h[1];(!u._modulesCache.get(a)||at.Buffer.compare(m,u._modulesCache.get(a))!==0)&&u.emulator.fs.writeFile(a,m,{recursive:!0})});return}this.dispatch({codesandbox:!0,modules:l,template:o.template,type:"compile"}),Object.entries(l).forEach(function(h){var a=h[0],m=h[1];u._modulesCache.set(a,ot(m))})},s.prototype.dispatch=function(o){var u,f;return R(this,void 0,void 0,function(){var l;return D(this,function(h){switch(h.label){case 0:switch(l=o.type,l){case"compile":return[3,1];case"refresh":return[3,2];case"urlback":return[3,4];case"urlforward":return[3,4];case"shell/restart":return[3,5];case"shell/openPreview":return[3,6]}return[3,7];case 1:return this.compile(o.modules),[3,8];case 2:return[4,this.setLocationURLIntoIFrame()];case 3:return h.sent(),[3,8];case 4:return(f=(u=this.iframe)===null||u===void 0?void 0:u.contentWindow)===null||f===void 0||f.postMessage(o,"*"),[3,8];case 5:return this.restartShellProcess(),[3,8];case 6:return window.open(this.iframePreviewUrl,"_blank"),[3,8];case 7:this.emitter.dispatch(o),h.label=8;case 8:return[2]}})})},s.prototype.listen=function(o){return this.emitter.listener(o)},s.prototype.destroy=function(){this.emulatorIframe.remove(),this.emitter.cleanup()},s}(fe);export{Er as SandpackNode};
