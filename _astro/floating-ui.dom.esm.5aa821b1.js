function B(t){return t.split("-")[0]}function X(t){return t.split("-")[1]}function W(t){return["top","bottom"].includes(B(t))?"x":"y"}function tt(t){return t==="y"?"height":"width"}function K(t,e,n){let{reference:i,floating:o}=t;const s=i.x+i.width/2-o.width/2,l=i.y+i.height/2-o.height/2,r=W(e),c=tt(r),f=i[c]/2-o[c]/2,g=B(e),a=r==="x";let u;switch(g){case"top":u={x:s,y:i.y-o.height};break;case"bottom":u={x:s,y:i.y+i.height};break;case"right":u={x:i.x+i.width,y:l};break;case"left":u={x:i.x-o.width,y:l};break;default:u={x:i.x,y:i.y}}switch(X(e)){case"start":u[r]-=f*(n&&a?-1:1);break;case"end":u[r]+=f*(n&&a?-1:1);break}return u}const ft=async(t,e,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:l}=n,r=s.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:o}),{x:g,y:a}=K(f,i,c),u=i,d={},h=0;for(let m=0;m<r.length;m++){const{name:p,fn:x}=r[m],{x:b,y:w,data:v,reset:y}=await x({x:g,y:a,initialPlacement:i,placement:u,strategy:o,middlewareData:d,rects:f,platform:l,elements:{reference:t,floating:e}});if(g=b??g,a=w??a,d={...d,[p]:{...d[p],...v}},y&&h<=50){h++,typeof y=="object"&&(y.placement&&(u=y.placement),y.rects&&(f=y.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:o}):y.rects),{x:g,y:a}=K(f,u,c)),m=-1;continue}}return{x:g,y:a,placement:u,strategy:o,middlewareData:d}};function at(t){return{top:0,right:0,bottom:0,left:0,...t}}function et(t){return typeof t!="number"?at(t):{top:t,right:t,bottom:t,left:t}}function k(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function ut(t,e){var n;e===void 0&&(e={});const{x:i,y:o,platform:s,rects:l,elements:r,strategy:c}=t,{boundary:f="clippingAncestors",rootBoundary:g="viewport",elementContext:a="floating",altBoundary:u=!1,padding:d=0}=e,h=et(d),p=r[u?a==="floating"?"reference":"floating":a],x=k(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(p)))==null||n?p:p.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(r.floating)),boundary:f,rootBoundary:g,strategy:c})),b=a==="floating"?{...l.floating,x:i,y:o}:l.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(r.floating)),v=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},y=k(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:w,strategy:c}):b);return{top:(x.top-y.top+h.top)/v.y,bottom:(y.bottom-x.bottom+h.bottom)/v.y,left:(x.left-y.left+h.left)/v.x,right:(y.right-x.right+h.right)/v.x}}const dt=Math.min,gt=Math.max;function _(t,e,n){return gt(t,dt(e,n))}const Dt=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:i=0}=t??{},{x:o,y:s,placement:l,rects:r,platform:c}=e;if(n==null)return{};const f=et(i),g={x:o,y:s},a=W(l),u=X(l),d=tt(a),h=await c.getDimensions(n),m=a==="y"?"top":"left",p=a==="y"?"bottom":"right",x=r.reference[d]+r.reference[a]-g[a]-r.floating[d],b=g[a]-r.reference[a],w=await(c.getOffsetParent==null?void 0:c.getOffsetParent(n));let v=w?a==="y"?w.clientHeight||0:w.clientWidth||0:0;v===0&&(v=r.floating[d]);const y=x/2-b/2,M=f[m],I=v-h[d]-f[p],L=v/2-h[d]/2+y,H=_(M,L,I),lt=(u==="start"?f[m]:f[p])>0&&L!==H&&r.reference[d]<=r.floating[d]?L<M?M-L:I-L:0;return{[a]:g[a]-lt,data:{[a]:H,centerOffset:L-H}}}});async function ht(t,e){const{placement:n,platform:i,elements:o}=t,s=await(i.isRTL==null?void 0:i.isRTL(o.floating)),l=B(n),r=X(n),c=W(n)==="x",f=["left","top"].includes(l)?-1:1,g=s&&c?-1:1,a=typeof e=="function"?e(t):e;let{mainAxis:u,crossAxis:d,alignmentAxis:h}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...a};return r&&typeof h=="number"&&(d=r==="end"?h*-1:h),c?{x:d*g,y:u*f}:{x:u*f,y:d*g}}const Pt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,o=await ht(e,t);return{x:n+o.x,y:i+o.y,data:o}}}};function mt(t){return t==="x"?"y":"x"}const St=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:o}=e,{mainAxis:s=!0,crossAxis:l=!1,limiter:r={fn:p=>{let{x,y:b}=p;return{x,y:b}}},...c}=t,f={x:n,y:i},g=await ut(e,c),a=W(B(o)),u=mt(a);let d=f[a],h=f[u];if(s){const p=a==="y"?"top":"left",x=a==="y"?"bottom":"right",b=d+g[p],w=d-g[x];d=_(b,d,w)}if(l){const p=u==="y"?"top":"left",x=u==="y"?"bottom":"right",b=h+g[p],w=h-g[x];h=_(b,h,w)}const m=r.fn({...e,[a]:d,[u]:h});return{...m,data:{x:m.x-n,y:m.y-i}}}}};function O(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function A(t){return O(t).getComputedStyle(t)}function T(t){return ot(t)?(t.nodeName||"").toLowerCase():""}let N;function nt(){if(N)return N;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(N=t.brands.map(e=>e.brand+"/"+e.version).join(" "),N):navigator.userAgent}function C(t){return t instanceof O(t).HTMLElement}function R(t){return t instanceof O(t).Element}function ot(t){return t instanceof O(t).Node}function U(t){if(typeof ShadowRoot>"u")return!1;const e=O(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function F(t){const{overflow:e,overflowX:n,overflowY:i,display:o}=A(t);return/auto|scroll|overlay|hidden/.test(e+i+n)&&!["inline","contents"].includes(o)}function pt(t){return["table","td","th"].includes(T(t))}function Y(t){const e=/firefox/i.test(nt()),n=A(t),i=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||(i?i!=="none":!1)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)||["transform","perspective"].some(o=>n.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const s=n.contain;return s!=null?s.includes(o):!1})}function it(){return!/^((?!chrome|android).)*safari/i.test(nt())}function z(t){return["html","body","#document"].includes(T(t))}const q=Math.min,P=Math.max,G=Math.round,j={x:1,y:1};function S(t){const e=!R(t)&&t.contextElement?t.contextElement:R(t)?t:null;if(!e)return j;const n=e.getBoundingClientRect(),i=A(e);if(i.boxSizing!=="border-box")return C(e)?{x:e.offsetWidth>0&&G(n.width)/e.offsetWidth||1,y:e.offsetHeight>0&&G(n.height)/e.offsetHeight||1}:j;let o=n.width/parseFloat(i.width),s=n.height/parseFloat(i.height);return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}function D(t,e,n,i){var o,s,l,r;e===void 0&&(e=!1),n===void 0&&(n=!1);const c=t.getBoundingClientRect();let f=j;e&&(i?R(i)&&(f=S(i)):f=S(t));const g=R(t)?O(t):window,a=!it()&&n,u=(c.left+(a&&(o=(s=g.visualViewport)==null?void 0:s.offsetLeft)!=null?o:0))/f.x,d=(c.top+(a&&(l=(r=g.visualViewport)==null?void 0:r.offsetTop)!=null?l:0))/f.y,h=c.width/f.x,m=c.height/f.y;return{width:h,height:m,top:d,right:u+h,bottom:d+m,left:u,x:u,y:d}}function E(t){return((ot(t)?t.ownerDocument:t.document)||window.document).documentElement}function $(t){return R(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function st(t){return D(E(t)).left+$(t).scrollLeft}function xt(t,e,n){const i=C(e),o=E(e),s=D(t,!0,n==="fixed",e);let l={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(i||!i&&n!=="fixed")if((T(e)!=="body"||F(o))&&(l=$(e)),C(e)){const c=D(e,!0);r.x=c.x+e.clientLeft,r.y=c.y+e.clientTop}else o&&(r.x=st(o));return{x:s.left+l.scrollLeft-r.x,y:s.top+l.scrollTop-r.y,width:s.width,height:s.height}}function V(t){if(T(t)==="html")return t;const e=t.assignedSlot||t.parentNode||(U(t)?t.host:null)||E(t);return U(e)?e.host:e}function J(t){return!C(t)||A(t).position==="fixed"?null:t.offsetParent}function wt(t){let e=V(t);for(;C(e)&&!z(e);){if(Y(e))return e;e=V(e)}return null}function Q(t){const e=O(t);let n=J(t);for(;n&&pt(n)&&A(n).position==="static";)n=J(n);return n&&(T(n)==="html"||T(n)==="body"&&A(n).position==="static"&&!Y(n))?e:n||wt(t)||e}function yt(t){if(C(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=D(t);return{width:e.width,height:e.height}}function bt(t){let{rect:e,offsetParent:n,strategy:i}=t;const o=C(n),s=E(n);if(n===s)return e;let l={scrollLeft:0,scrollTop:0},r={x:1,y:1};const c={x:0,y:0};if((o||!o&&i!=="fixed")&&((T(n)!=="body"||F(s))&&(l=$(n)),C(n))){const f=D(n);r=S(n),c.x=f.x+n.clientLeft,c.y=f.y+n.clientTop}return{width:e.width*r.x,height:e.height*r.y,x:e.x*r.x-l.scrollLeft*r.x+c.x,y:e.y*r.y-l.scrollTop*r.y+c.y}}function vt(t,e){const n=O(t),i=E(t),o=n.visualViewport;let s=i.clientWidth,l=i.clientHeight,r=0,c=0;if(o){s=o.width,l=o.height;const f=it();(f||!f&&e==="fixed")&&(r=o.offsetLeft,c=o.offsetTop)}return{width:s,height:l,x:r,y:c}}function At(t){var e;const n=E(t),i=$(t),o=(e=t.ownerDocument)==null?void 0:e.body,s=P(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=P(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let r=-i.scrollLeft+st(t);const c=-i.scrollTop;return A(o||n).direction==="rtl"&&(r+=P(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:l,x:r,y:c}}function rt(t){const e=V(t);return z(e)?t.ownerDocument.body:C(e)&&F(e)?e:rt(e)}function ct(t,e){var n;e===void 0&&(e=[]);const i=rt(t),o=i===((n=t.ownerDocument)==null?void 0:n.body),s=O(i);return o?e.concat(s,s.visualViewport||[],F(i)?i:[]):e.concat(i,ct(i))}function Ct(t,e){const n=D(t,!0,e==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,s=C(t)?S(t):{x:1,y:1},l=t.clientWidth*s.x,r=t.clientHeight*s.y,c=o*s.x,f=i*s.y;return{top:f,left:c,right:c+l,bottom:f+r,x:c,y:f,width:l,height:r}}function Z(t,e,n){return e==="viewport"?k(vt(t,n)):R(e)?Ct(e,n):k(At(E(t)))}function Rt(t,e){const n=e.get(t);if(n)return n;let i=ct(t).filter(r=>R(r)&&T(r)!=="body"),o=null;const s=A(t).position==="fixed";let l=s?V(t):t;for(;R(l)&&!z(l);){const r=A(l),c=Y(l);(s?!c&&!o:!c&&r.position==="static"&&!!o&&["absolute","fixed"].includes(o.position))?i=i.filter(g=>g!==l):o=r,l=V(l)}return e.set(t,i),i}function Ot(t){let{element:e,boundary:n,rootBoundary:i,strategy:o}=t;const l=[...n==="clippingAncestors"?Rt(e,this._c):[].concat(n),i],r=l[0],c=l.reduce((f,g)=>{const a=Z(e,g,o);return f.top=P(a.top,f.top),f.right=q(a.right,f.right),f.bottom=q(a.bottom,f.bottom),f.left=P(a.left,f.left),f},Z(e,r,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const Tt={getClippingRect:Ot,convertOffsetParentRelativeRectToViewportRelativeRect:bt,isElement:R,getDimensions:yt,getOffsetParent:Q,getDocumentElement:E,getScale:S,async getElementRects(t){let{reference:e,floating:n,strategy:i}=t;const o=this.getOffsetParent||Q,s=this.getDimensions;return{reference:xt(e,await o(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>A(t).direction==="rtl"},Vt=(t,e,n)=>{const i=new Map,o={platform:Tt,...n},s={...o.platform,_c:i};return ft(t,e,{...o,platform:s})};export{Dt as a,Vt as c,Pt as o,St as s};
