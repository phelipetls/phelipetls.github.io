function z(t){return t.split("-")[1]}function it(t){return t==="y"?"height":"width"}function B(t){return t.split("-")[0]}function q(t){return["top","bottom"].includes(B(t))?"x":"y"}function st(t,e,o){let{reference:n,floating:c}=t;const r=n.x+n.width/2-c.width/2,i=n.y+n.height/2-c.height/2,l=q(e),f=it(l),a=n[f]/2-c[f]/2,u=l==="x";let s;switch(B(e)){case"top":s={x:r,y:n.y-c.height};break;case"bottom":s={x:r,y:n.y+n.height};break;case"right":s={x:n.x+n.width,y:i};break;case"left":s={x:n.x-c.width,y:i};break;default:s={x:n.x,y:n.y}}switch(z(e)){case"start":s[l]-=a*(o&&u?-1:1);break;case"end":s[l]+=a*(o&&u?-1:1)}return s}const Dt=async(t,e,o)=>{const{placement:n="bottom",strategy:c="absolute",middleware:r=[],platform:i}=o,l=r.filter(Boolean),f=await(i.isRTL==null?void 0:i.isRTL(e));let a=await i.getElementRects({reference:t,floating:e,strategy:c}),{x:u,y:s}=st(a,n,f),d=n,m={},g=0;for(let p=0;p<l.length;p++){const{name:h,fn:x}=l[p],{x:y,y:w,data:R,reset:b}=await x({x:u,y:s,initialPlacement:n,placement:d,strategy:c,middlewareData:m,rects:a,platform:i,elements:{reference:t,floating:e}});u=y??u,s=w??s,m={...m,[h]:{...m[h],...R}},b&&g<=50&&(g++,typeof b=="object"&&(b.placement&&(d=b.placement),b.rects&&(a=b.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:c}):b.rects),{x:u,y:s}=st(a,d,f)),p=-1)}return{x:u,y:s,placement:d,strategy:c,middlewareData:m}};function pt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function I(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function gt(t,e){var o;e===void 0&&(e={});const{x:n,y:c,platform:r,rects:i,elements:l,strategy:f}=t,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:s="floating",altBoundary:d=!1,padding:m=0}=e,g=pt(m),p=l[d?s==="floating"?"reference":"floating":s],h=I(await r.getClippingRect({element:(o=await(r.isElement==null?void 0:r.isElement(p)))==null||o?p:p.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:a,rootBoundary:u,strategy:f})),x=s==="floating"?{...i.floating,x:n,y:c}:i.reference,y=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),w=await(r.isElement==null?void 0:r.isElement(y))&&await(r.getScale==null?void 0:r.getScale(y))||{x:1,y:1},R=I(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:x,offsetParent:y,strategy:f}):x);return{top:(h.top-R.top+g.top)/w.y,bottom:(R.bottom-h.bottom+g.bottom)/w.y,left:(h.left-R.left+g.left)/w.x,right:(R.right-h.right+g.right)/w.x}}const $t=Math.min,Pt=Math.max;function et(t,e,o){return Pt(t,$t(e,o))}const Bt=t=>({name:"arrow",options:t,async fn(e){const{element:o,padding:n=0}=t||{},{x:c,y:r,placement:i,rects:l,platform:f,elements:a}=e;if(o==null)return{};const u=pt(n),s={x:c,y:r},d=q(i),m=it(d),g=await f.getDimensions(o),p=d==="y",h=p?"top":"left",x=p?"bottom":"right",y=p?"clientHeight":"clientWidth",w=l.reference[m]+l.reference[d]-s[d]-l.floating[m],R=s[d]-l.reference[d],b=await(f.getOffsetParent==null?void 0:f.getOffsetParent(o));let P=b?b[y]:0;P&&await(f.isElement==null?void 0:f.isElement(b))||(P=a.floating[y]||l.floating[m]);const F=w/2-R/2,H=u[h],N=P-g[m]-u[x],D=P/2-g[m]/2+F,v=et(H,D,N),A=z(i)!=null&&D!=v&&l.reference[m]/2-(D<H?u[h]:u[x])-g[m]/2<0;return{[d]:s[d]-(A?D<H?H-D:N-D:0),data:{[d]:v,centerOffset:D-v}}}}),kt=["top","right","bottom","left"];kt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Ct={left:"right",right:"left",bottom:"top",top:"bottom"};function J(t){return t.replace(/left|right|bottom|top/g,e=>Ct[e])}function Ot(t,e,o){o===void 0&&(o=!1);const n=z(t),c=q(t),r=it(c);let i=c==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(i=J(i)),{main:i,cross:J(i)}}const St={start:"end",end:"start"};function tt(t){return t.replace(/start|end/g,e=>St[e])}const Mt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;const{placement:n,middlewareData:c,rects:r,initialPlacement:i,platform:l,elements:f}=e,{mainAxis:a=!0,crossAxis:u=!0,fallbackPlacements:s,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...p}=t,h=B(n),x=B(i)===i,y=await(l.isRTL==null?void 0:l.isRTL(f.floating)),w=s||(x||!g?[J(i)]:function(v){const A=J(v);return[tt(v),A,tt(A)]}(i));s||m==="none"||w.push(...function(v,A,V,C){const k=z(v);let T=function(j,Z,Tt){const lt=["left","right"],ct=["right","left"],At=["top","bottom"],Et=["bottom","top"];switch(j){case"top":case"bottom":return Tt?Z?ct:lt:Z?lt:ct;case"left":case"right":return Z?At:Et;default:return[]}}(B(v),V==="start",C);return k&&(T=T.map(j=>j+"-"+k),A&&(T=T.concat(T.map(tt)))),T}(i,g,m,y));const R=[i,...w],b=await gt(e,p),P=[];let F=((o=c.flip)==null?void 0:o.overflows)||[];if(a&&P.push(b[h]),u){const{main:v,cross:A}=Ot(n,r,y);P.push(b[v],b[A])}if(F=[...F,{placement:n,overflows:P}],!P.every(v=>v<=0)){var H,N;const v=(((H=c.flip)==null?void 0:H.index)||0)+1,A=R[v];if(A)return{data:{index:v,overflows:F},reset:{placement:A}};let V=(N=F.filter(C=>C.overflows[0]<=0).sort((C,k)=>C.overflows[1]-k.overflows[1])[0])==null?void 0:N.placement;if(!V)switch(d){case"bestFit":{var D;const C=(D=F.map(k=>[k.placement,k.overflows.filter(T=>T>0).reduce((T,j)=>T+j,0)]).sort((k,T)=>k[1]-T[1])[0])==null?void 0:D[0];C&&(V=C);break}case"initialPlacement":V=i}if(n!==V)return{reset:{placement:V}}}return{}}}},Nt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,c=await async function(r,i){const{placement:l,platform:f,elements:a}=r,u=await(f.isRTL==null?void 0:f.isRTL(a.floating)),s=B(l),d=z(l),m=q(l)==="x",g=["left","top"].includes(s)?-1:1,p=u&&m?-1:1,h=typeof i=="function"?i(r):i;let{mainAxis:x,crossAxis:y,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return d&&typeof w=="number"&&(y=d==="end"?-1*w:w),m?{x:y*p,y:x*g}:{x:x*g,y:y*p}}(e,t);return{x:o+c.x,y:n+c.y,data:c}}}};function Wt(t){return t==="x"?"y":"x"}const jt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:o,y:n,placement:c}=e,{mainAxis:r=!0,crossAxis:i=!1,limiter:l={fn:h=>{let{x,y}=h;return{x,y}}},...f}=t,a={x:o,y:n},u=await gt(e,f),s=q(B(c)),d=Wt(s);let m=a[s],g=a[d];if(r){const h=s==="y"?"bottom":"right";m=et(m+u[s==="y"?"top":"left"],m,m-u[h])}if(i){const h=d==="y"?"bottom":"right";g=et(g+u[d==="y"?"top":"left"],g,g-u[h])}const p=l.fn({...e,[s]:m,[d]:g});return{...p,data:{x:p.x-o,y:p.y-n}}}}};function L(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function $(t){return L(t).getComputedStyle(t)}function ht(t){return t instanceof L(t).Node}function W(t){return ht(t)?(t.nodeName||"").toLowerCase():""}let G;function yt(){if(G)return G;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(G=t.brands.map(e=>e.brand+"/"+e.version).join(" "),G):navigator.userAgent}function E(t){return t instanceof L(t).HTMLElement}function O(t){return t instanceof L(t).Element}function at(t){return typeof ShadowRoot>"u"?!1:t instanceof L(t).ShadowRoot||t instanceof ShadowRoot}function Q(t){const{overflow:e,overflowX:o,overflowY:n,display:c}=$(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(c)}function Ft(t){return["table","td","th"].includes(W(t))}function nt(t){const e=/firefox/i.test(yt()),o=$(t),n=o.backdropFilter||o.WebkitBackdropFilter;return o.transform!=="none"||o.perspective!=="none"||!!n&&n!=="none"||e&&o.willChange==="filter"||e&&!!o.filter&&o.filter!=="none"||["transform","perspective"].some(c=>o.willChange.includes(c))||["paint","layout","strict","content"].some(c=>{const r=o.contain;return r!=null&&r.includes(c)})}function ot(){return/^((?!chrome|android).)*safari/i.test(yt())}function rt(t){return["html","body","#document"].includes(W(t))}const ft=Math.min,X=Math.max,K=Math.round;function xt(t){const e=$(t);let o=parseFloat(e.width),n=parseFloat(e.height);const c=E(t),r=c?t.offsetWidth:o,i=c?t.offsetHeight:n,l=K(o)!==r||K(n)!==i;return l&&(o=r,n=i),{width:o,height:n,fallback:l}}function wt(t){return O(t)?t:t.contextElement}const vt={x:1,y:1};function M(t){const e=wt(t);if(!E(e))return vt;const o=e.getBoundingClientRect(),{width:n,height:c,fallback:r}=xt(e);let i=(r?K(o.width):o.width)/n,l=(r?K(o.height):o.height)/c;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}function Y(t,e,o,n){var c,r;e===void 0&&(e=!1),o===void 0&&(o=!1);const i=t.getBoundingClientRect(),l=wt(t);let f=vt;e&&(n?O(n)&&(f=M(n)):f=M(t));const a=l?L(l):window,u=ot()&&o;let s=(i.left+(u&&((c=a.visualViewport)==null?void 0:c.offsetLeft)||0))/f.x,d=(i.top+(u&&((r=a.visualViewport)==null?void 0:r.offsetTop)||0))/f.y,m=i.width/f.x,g=i.height/f.y;if(l){const p=L(l),h=n&&O(n)?L(n):n;let x=p.frameElement;for(;x&&n&&h!==p;){const y=M(x),w=x.getBoundingClientRect(),R=getComputedStyle(x);w.x+=(x.clientLeft+parseFloat(R.paddingLeft))*y.x,w.y+=(x.clientTop+parseFloat(R.paddingTop))*y.y,s*=y.x,d*=y.y,m*=y.x,g*=y.y,s+=w.x,d+=w.y,x=L(x).frameElement}}return I({width:m,height:g,x:s,y:d})}function S(t){return((ht(t)?t.ownerDocument:t.document)||window.document).documentElement}function U(t){return O(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function bt(t){return Y(S(t)).left+U(t).scrollLeft}function _(t){if(W(t)==="html")return t;const e=t.assignedSlot||t.parentNode||at(t)&&t.host||S(t);return at(e)?e.host:e}function Rt(t){const e=_(t);return rt(e)?e.ownerDocument.body:E(e)&&Q(e)?e:Rt(e)}function Lt(t,e){var o;e===void 0&&(e=[]);const n=Rt(t),c=n===((o=t.ownerDocument)==null?void 0:o.body),r=L(n);return c?e.concat(r,r.visualViewport||[],Q(n)?n:[]):e.concat(n,Lt(n))}function ut(t,e,o){let n;if(e==="viewport")n=function(i,l){const f=L(i),a=S(i),u=f.visualViewport;let s=a.clientWidth,d=a.clientHeight,m=0,g=0;if(u){s=u.width,d=u.height;const p=ot();(!p||p&&l==="fixed")&&(m=u.offsetLeft,g=u.offsetTop)}return{width:s,height:d,x:m,y:g}}(t,o);else if(e==="document")n=function(i){const l=S(i),f=U(i),a=i.ownerDocument.body,u=X(l.scrollWidth,l.clientWidth,a.scrollWidth,a.clientWidth),s=X(l.scrollHeight,l.clientHeight,a.scrollHeight,a.clientHeight);let d=-f.scrollLeft+bt(i);const m=-f.scrollTop;return $(a).direction==="rtl"&&(d+=X(l.clientWidth,a.clientWidth)-u),{width:u,height:s,x:d,y:m}}(S(t));else if(O(e))n=function(i,l){const f=Y(i,!0,l==="fixed"),a=f.top+i.clientTop,u=f.left+i.clientLeft,s=E(i)?M(i):{x:1,y:1};return{width:i.clientWidth*s.x,height:i.clientHeight*s.y,x:u*s.x,y:a*s.y}}(e,o);else{const i={...e};if(ot()){var c,r;const l=L(t);i.x-=((c=l.visualViewport)==null?void 0:c.offsetLeft)||0,i.y-=((r=l.visualViewport)==null?void 0:r.offsetTop)||0}n=i}return I(n)}function dt(t,e){return E(t)&&$(t).position!=="fixed"?e?e(t):t.offsetParent:null}function mt(t,e){const o=L(t);if(!E(t))return o;let n=dt(t,e);for(;n&&Ft(n)&&$(n).position==="static";)n=dt(n,e);return n&&(W(n)==="html"||W(n)==="body"&&$(n).position==="static"&&!nt(n))?o:n||function(c){let r=_(c);for(;E(r)&&!rt(r);){if(nt(r))return r;r=_(r)}return null}(t)||o}function Ht(t,e,o){const n=E(e),c=S(e),r=Y(t,!0,o==="fixed",e);let i={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(n||!n&&o!=="fixed")if((W(e)!=="body"||Q(c))&&(i=U(e)),E(e)){const f=Y(e,!0);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else c&&(l.x=bt(c));return{x:r.left+i.scrollLeft-l.x,y:r.top+i.scrollTop-l.y,width:r.width,height:r.height}}const Vt={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:c}=t;const r=o==="clippingAncestors"?function(a,u){const s=u.get(a);if(s)return s;let d=Lt(a).filter(h=>O(h)&&W(h)!=="body"),m=null;const g=$(a).position==="fixed";let p=g?_(a):a;for(;O(p)&&!rt(p);){const h=$(p),x=nt(p);h.position==="fixed"&&(m=null),(g?x||m:x||h.position!=="static"||!m||!["absolute","fixed"].includes(m.position))?m=h:d=d.filter(y=>y!==p),p=_(p)}return u.set(a,d),d}(e,this._c):[].concat(o),i=[...r,n],l=i[0],f=i.reduce((a,u)=>{const s=ut(e,u,c);return a.top=X(s.top,a.top),a.right=ft(s.right,a.right),a.bottom=ft(s.bottom,a.bottom),a.left=X(s.left,a.left),a},ut(e,l,c));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const c=E(o),r=S(o);if(o===r)return e;let i={scrollLeft:0,scrollTop:0},l={x:1,y:1};const f={x:0,y:0};if((c||!c&&n!=="fixed")&&((W(o)!=="body"||Q(r))&&(i=U(o)),E(o))){const a=Y(o);l=M(o),f.x=a.x+o.clientLeft,f.y=a.y+o.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-i.scrollLeft*l.x+f.x,y:e.y*l.y-i.scrollTop*l.y+f.y}},isElement:O,getDimensions:function(t){return xt(t)},getOffsetParent:mt,getDocumentElement:S,getScale:M,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const c=this.getOffsetParent||mt,r=this.getDimensions;return{reference:Ht(e,await c(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>$(t).direction==="rtl"},Xt=(t,e,o)=>{const n=new Map,c={platform:Vt,...o},r={...c.platform,_c:n};return Dt(t,e,{...c,platform:r})};export{Nt as D,Mt as b,jt as k,Bt as u,Xt as z};
