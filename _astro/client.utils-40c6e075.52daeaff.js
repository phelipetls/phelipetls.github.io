import{e as i,l as m}from"./index.b98b9e16.js";var b=function(){function e(){this.listeners={},this.listenersCount=0,this.channelId=Math.floor(Math.random()*1e6),this.listeners=[]}return e.prototype.cleanup=function(){this.listeners={},this.listenersCount=0},e.prototype.dispatch=function(t){Object.values(this.listeners).forEach(function(r){return r(t)})},e.prototype.listener=function(t){var r=this;if(typeof t!="function")return function(){};var n=this.listenersCount;return this.listeners[n]=t,this.listenersCount++,function(){delete r.listeners[n]}},e}(),w=0;function k(){var e=Date.now(),t=Math.round(Math.random()*1e4),r=w+=1;return(+(""+e+t+r)).toString(16)}var y=function(e){return typeof e=="string"?new TextEncoder().encode(e):e},j=function(e){return typeof e=="string"?e:new TextDecoder().decode(e)},M=function(e){return Object.entries(e).reduce(function(t,r){var n=r[0],s=r[1];return t[n]=y(s.code),t},{})},C=function(e){var t,r={},n=["dev","start"];try{r=JSON.parse(e).scripts}catch(a){throw i("Could not parse package.json file: "+a.message)}m.invariant(r,"Failed to start. Please provide a `start` or `dev` script on the package.json");for(var s=0;s<n.length;s++)if(n[s]in r){var f=n[s],o=r[f],l=(t=o.match(/(\w+=\w+;)*\w+=\w+/g))===null||t===void 0?void 0:t.reduce(function(a,h){var c=h.split("="),d=c[0],g=c[1];return a[d]=g,a},{}),u=o.replace(/(\w+=\w+;)*\w+=\w+/g,"").trim().split(" "),v=u[0],p=u.slice(1);return[v,p,{env:l}]}throw i("Failed to start. Please provide a `start` or `dev` script on the package.json")},F=function(e){return typeof e=="string"?e:typeof e=="object"&&"message"in e?e.message:i("The server could not be reached. Make sure that the node script is running and that a port has been started.")};export{b as E,M as a,k as b,C as f,F as g,j as r,y as w};
