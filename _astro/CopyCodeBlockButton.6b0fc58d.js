import{r as e}from"./index.57fae3ab.js";import{r as N}from"./index.ffa87b56.js";import{c as j,I as B}from"./createReactComponent.2e000565.js";import{O as $,E as S,T as A,m as D}from"./floating-ui.dom.browser.min.8b9d8992.js";import{j as o,c as a}from"./jsx-runtime.7a8c40fc.js";const I=j("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),L=j("Clipboard",[["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1",key:"wz2j3u"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);function X(T){const{code:k,className:v,successTooltipText:C,errorTooltipText:i,...E}=T,p=e.useRef(null),d=e.useRef(null),u=e.useRef(null),[l,c]=e.useState(null),r=l!==null,s=l===i,[x,R]=e.useState(null);return e.useEffect(()=>{R(document.body)},[]),e.useEffect(()=>{const t=d.current;if(!t)return;(async()=>{if(!r)return;const f=p.current,n=u.current;if(!f||!n)return;const{x:b,y:w,middlewareData:y}=await $(f,t,{placement:"top",middleware:[S({padding:8}),A(8),D({element:n})]}),h=y.arrow?.x,g=y.arrow?.y;t.style.left=b!=null?`${b}px`:"",t.style.top=w!=null?`${w}px`:"",t.style.animation="tooltip-animation 1.5s forwards",n.style.left=h!=null?`${h}px`:"",n.style.top=g!=null?`${g}px`:"",n.style.bottom="-4px"})();const m=()=>{c(null)};return t?.addEventListener("animationend",m),()=>{t?.removeEventListener("animationend",m)}},[r]),o.jsxs(B,{ref:p,className:a([r?s?"border-warn":"border-green-500":"",v]),onClick:async()=>{try{await navigator.clipboard.writeText(k),c(C)}catch{c(i)}},...E,children:[r?o.jsx("span",{className:a("[&_svg]:stroke-current",s?"text-warn":"text-green-500"),children:o.jsx(I,{})}):o.jsx("span",{className:"text-[var(--code-fg)]",children:o.jsx(L,{})}),x&&r&&N.createPortal(o.jsxs("div",{ref:d,role:"tooltip",className:a("dark pointer-events-none absolute rounded border bg-background px-2 text-on-background",s?"border-warn":"border-green-500"),children:[l,o.jsx("div",{ref:u,className:a("absolute h-[8px] w-[8px] rotate-45 border-b border-r bg-background",s?"border-warn":"border-green-500")})]}),x)]})}export{X as C};
