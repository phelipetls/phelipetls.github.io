function V(t){return t.split("-")[0]}function _(t){return t.split("-")[1]}function M(t){return["top","bottom"].includes(V(t))?"x":"y"}function K(t){return t==="y"?"height":"width"}function Z(t,e,n){let{reference:o,floating:i}=t;const r=o.x+o.width/2-i.width/2,a=o.y+o.height/2-i.height/2,l=M(e),f=K(l),s=o[f]/2-i[f]/2,u=l==="x";let c;switch(V(e)){case"top":c={x:r,y:o.y-i.height};break;case"bottom":c={x:r,y:o.y+o.height};break;case"right":c={x:o.x+o.width,y:a};break;case"left":c={x:o.x-i.width,y:a};break;default:c={x:o.x,y:o.y}}switch(_(e)){case"start":c[l]-=s*(n&&u?-1:1);break;case"end":c[l]+=s*(n&&u?-1:1)}return c}const pt=async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:r=[],platform:a}=n,l=r.filter(Boolean),f=await(a.isRTL==null?void 0:a.isRTL(e));let s=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:c}=Z(s,o,f),h=o,d={},p=0;for(let g=0;g<l.length;g++){const{name:m,fn:w}=l[g],{x:y,y:x,data:b,reset:R}=await w({x:u,y:c,initialPlacement:o,placement:h,strategy:i,middlewareData:d,rects:s,platform:a,elements:{reference:t,floating:e}});u=y??u,c=x??c,d={...d,[m]:{...d[m],...b}},R&&p<=50&&(p++,typeof R=="object"&&(R.placement&&(h=R.placement),R.rects&&(s=R.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):R.rects),{x:u,y:c}=Z(s,h,f)),g=-1)}return{x:u,y:c,placement:h,strategy:i,middlewareData:d}};function ct(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function X(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function st(t,e){var n;e===void 0&&(e={});const{x:o,y:i,platform:r,rects:a,elements:l,strategy:f}=t,{boundary:s="clippingAncestors",rootBoundary:u="viewport",elementContext:c="floating",altBoundary:h=!1,padding:d=0}=e,p=ct(d),g=l[h?c==="floating"?"reference":"floating":c],m=X(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(g)))==null||n?g:g.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:s,rootBoundary:u,strategy:f})),w=c==="floating"?{...a.floating,x:o,y:i}:a.reference,y=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),x=await(r.isElement==null?void 0:r.isElement(y))&&await(r.getScale==null?void 0:r.getScale(y))||{x:1,y:1},b=X(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:y,strategy:f}):w);return{top:(m.top-b.top+p.top)/x.y,bottom:(b.bottom-m.bottom+p.bottom)/x.y,left:(m.left-b.left+p.left)/x.x,right:(b.right-m.right+p.right)/x.x}}const yt=Math.min,xt=Math.max;function G(t,e,n){return xt(t,yt(e,n))}const Et=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:o=0}=t??{},{x:i,y:r,placement:a,rects:l,platform:f}=e;if(n==null)return{};const s=ct(o),u={x:i,y:r},c=M(a),h=_(a),d=K(c),p=await f.getDimensions(n),g=c==="y"?"top":"left",m=c==="y"?"bottom":"right",w=l.reference[d]+l.reference[c]-u[c]-l.floating[d],y=u[c]-l.reference[c],x=await(f.getOffsetParent==null?void 0:f.getOffsetParent(n));let b=x?c==="y"?x.clientHeight||0:x.clientWidth||0:0;b===0&&(b=l.floating[d]);const R=w/2-y/2,O=s[g],C=b-p[d]-s[m],v=b/2-p[d]/2+R,T=G(O,v,C),W=(h==="start"?s[g]:s[m])>0&&v!==T&&l.reference[d]<=l.floating[d];return{[c]:u[c]-(W?v<O?O-v:C-v:0),data:{[c]:T,centerOffset:v-T}}}}),wt={left:"right",right:"left",bottom:"top",top:"bottom"};function Y(t){return t.replace(/left|right|bottom|top/g,e=>wt[e])}function bt(t,e,n){n===void 0&&(n=!1);const o=_(t),i=M(t),r=K(i);let a=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=Y(a)),{main:a,cross:Y(a)}}const vt={start:"end",end:"start"};function tt(t){return t.replace(/start|end/g,e=>vt[e])}const Rt=["top","right","bottom","left"];Rt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Pt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:i,rects:r,initialPlacement:a,platform:l,elements:f}=e,{mainAxis:s=!0,crossAxis:u=!0,fallbackPlacements:c,fallbackStrategy:h="bestFit",flipAlignment:d=!0,...p}=t,g=V(o),m=c||(g===a||!d?[Y(a)]:function(v){const T=Y(v);return[tt(v),T,tt(T)]}(a)),w=[a,...m],y=await st(e,p),x=[];let b=((n=i.flip)==null?void 0:n.overflows)||[];if(s&&x.push(y[g]),u){const{main:v,cross:T}=bt(o,r,await(l.isRTL==null?void 0:l.isRTL(f.floating)));x.push(y[v],y[T])}if(b=[...b,{placement:o,overflows:x}],!x.every(v=>v<=0)){var R,O;const v=((R=(O=i.flip)==null?void 0:O.index)!=null?R:0)+1,T=w[v];if(T)return{data:{index:v,overflows:b},reset:{placement:T}};let W="bottom";switch(h){case"bestFit":{var C;const U=(C=b.map(N=>[N,N.overflows.filter(H=>H>0).reduce((H,mt)=>H+mt,0)]).sort((N,H)=>N[1]-H[1])[0])==null?void 0:C[0].placement;U&&(W=U);break}case"initialPlacement":W=a}if(o!==W)return{reset:{placement:W}}}return{}}}},Dt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,i=await async function(r,a){const{placement:l,platform:f,elements:s}=r,u=await(f.isRTL==null?void 0:f.isRTL(s.floating)),c=V(l),h=_(l),d=M(l)==="x",p=["left","top"].includes(c)?-1:1,g=u&&d?-1:1,m=typeof a=="function"?a(r):a;let{mainAxis:w,crossAxis:y,alignmentAxis:x}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return h&&typeof x=="number"&&(y=h==="end"?-1*x:x),d?{x:y*g,y:w*p}:{x:w*p,y:y*g}}(e,t);return{x:n+i.x,y:o+i.y,data:i}}}};function Tt(t){return t==="x"?"y":"x"}const Ot=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:i}=e,{mainAxis:r=!0,crossAxis:a=!1,limiter:l={fn:m=>{let{x:w,y}=m;return{x:w,y}}},...f}=t,s={x:n,y:o},u=await st(e,f),c=M(V(i)),h=Tt(c);let d=s[c],p=s[h];if(r){const m=c==="y"?"bottom":"right";d=G(d+u[c==="y"?"top":"left"],d,d-u[m])}if(a){const m=h==="y"?"bottom":"right";p=G(p+u[h==="y"?"top":"left"],p,p-u[m])}const g=l.fn({...e,[c]:d,[h]:p});return{...g,data:{x:g.x-n,y:g.y-o}}}}};function E(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function A(t){return E(t).getComputedStyle(t)}function D(t){return ft(t)?(t.nodeName||"").toLowerCase():""}let j;function at(){if(j)return j;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(j=t.brands.map(e=>e.brand+"/"+e.version).join(" "),j):navigator.userAgent}function L(t){return t instanceof E(t).HTMLElement}function $(t){return t instanceof E(t).Element}function ft(t){return t instanceof E(t).Node}function et(t){return typeof ShadowRoot>"u"?!1:t instanceof E(t).ShadowRoot||t instanceof ShadowRoot}function z(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=A(t);return/auto|scroll|overlay|hidden/.test(e+o+n)&&!["inline","contents"].includes(i)}function At(t){return["table","td","th"].includes(D(t))}function I(t){const e=/firefox/i.test(at()),n=A(t),o=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!o&&o!=="none"||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const r=n.contain;return r!=null&&r.includes(i)})}function ut(){return!/^((?!chrome|android).)*safari/i.test(at())}function Q(t){return["html","body","#document"].includes(D(t))}const nt=Math.min,S=Math.max,ot=Math.round,J={x:1,y:1};function B(t){const e=!$(t)&&t.contextElement?t.contextElement:$(t)?t:null;if(!e)return J;const n=e.getBoundingClientRect(),o=A(e);if(o.boxSizing!=="border-box")return L(e)?{x:e.offsetWidth>0&&ot(n.width)/e.offsetWidth||1,y:e.offsetHeight>0&&ot(n.height)/e.offsetHeight||1}:J;let i=n.width/parseFloat(o.width),r=n.height/parseFloat(o.height);return i&&Number.isFinite(i)||(i=1),r&&Number.isFinite(r)||(r=1),{x:i,y:r}}function k(t,e,n,o){var i,r,a,l;e===void 0&&(e=!1),n===void 0&&(n=!1);const f=t.getBoundingClientRect();let s=J;e&&(o?$(o)&&(s=B(o)):s=B(t));const u=$(t)?E(t):window,c=!ut()&&n,h=(f.left+(c&&(i=(r=u.visualViewport)==null?void 0:r.offsetLeft)!=null?i:0))/s.x,d=(f.top+(c&&(a=(l=u.visualViewport)==null?void 0:l.offsetTop)!=null?a:0))/s.y,p=f.width/s.x,g=f.height/s.y;return{width:p,height:g,top:d,right:h+p,bottom:d+g,left:h,x:h,y:d}}function P(t){return((ft(t)?t.ownerDocument:t.document)||window.document).documentElement}function q(t){return $(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function dt(t){return k(P(t)).left+q(t).scrollLeft}function Lt(t,e,n){const o=L(e),i=P(e),r=k(t,!0,n==="fixed",e);let a={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(o||!o&&n!=="fixed")if((D(e)!=="body"||z(i))&&(a=q(e)),L(e)){const f=k(e,!0);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=dt(i));return{x:r.left+a.scrollLeft-l.x,y:r.top+a.scrollTop-l.y,width:r.width,height:r.height}}function F(t){if(D(t)==="html")return t;const e=t.assignedSlot||t.parentNode||(et(t)?t.host:null)||P(t);return et(e)?e.host:e}function it(t){return L(t)&&A(t).position!=="fixed"?t.offsetParent:null}function rt(t){const e=E(t);let n=it(t);for(;n&&At(n)&&A(n).position==="static";)n=it(n);return n&&(D(n)==="html"||D(n)==="body"&&A(n).position==="static"&&!I(n))?e:n||function(o){let i=F(o);for(;L(i)&&!Q(i);){if(I(i))return i;i=F(i)}return null}(t)||e}function ht(t){const e=F(t);return Q(e)?t.ownerDocument.body:L(e)&&z(e)?e:ht(e)}function gt(t,e){var n;e===void 0&&(e=[]);const o=ht(t),i=o===((n=t.ownerDocument)==null?void 0:n.body),r=E(o);return i?e.concat(r,r.visualViewport||[],z(o)?o:[]):e.concat(o,gt(o))}function lt(t,e,n){return e==="viewport"?X(function(o,i){const r=E(o),a=P(o),l=r.visualViewport;let f=a.clientWidth,s=a.clientHeight,u=0,c=0;if(l){f=l.width,s=l.height;const h=ut();(h||!h&&i==="fixed")&&(u=l.offsetLeft,c=l.offsetTop)}return{width:f,height:s,x:u,y:c}}(t,n)):$(e)?function(o,i){const r=k(o,!0,i==="fixed"),a=r.top+o.clientTop,l=r.left+o.clientLeft,f=L(o)?B(o):{x:1,y:1},s=o.clientWidth*f.x,u=o.clientHeight*f.y,c=l*f.x,h=a*f.y;return{top:h,left:c,right:c+s,bottom:h+u,x:c,y:h,width:s,height:u}}(e,n):X(function(o){var i;const r=P(o),a=q(o),l=(i=o.ownerDocument)==null?void 0:i.body,f=S(r.scrollWidth,r.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),s=S(r.scrollHeight,r.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0);let u=-a.scrollLeft+dt(o);const c=-a.scrollTop;return A(l||r).direction==="rtl"&&(u+=S(r.clientWidth,l?l.clientWidth:0)-f),{width:f,height:s,x:u,y:c}}(P(t)))}const $t={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=n==="clippingAncestors"?function(s,u){const c=u.get(s);if(c)return c;let h=gt(s).filter(m=>$(m)&&D(m)!=="body"),d=null;const p=A(s).position==="fixed";let g=p?F(s):s;for(;$(g)&&!Q(g);){const m=A(g),w=I(g);(p?w||d:w||m.position!=="static"||!d||!["absolute","fixed"].includes(d.position))?d=m:h=h.filter(y=>y!==g),g=F(g)}return u.set(s,h),h}(e,this._c):[].concat(n),a=[...r,o],l=a[0],f=a.reduce((s,u)=>{const c=lt(e,u,i);return s.top=S(c.top,s.top),s.right=nt(c.right,s.right),s.bottom=nt(c.bottom,s.bottom),s.left=S(c.left,s.left),s},lt(e,l,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=L(n),r=P(n);if(n===r)return e;let a={scrollLeft:0,scrollTop:0},l={x:1,y:1};const f={x:0,y:0};if((i||!i&&o!=="fixed")&&((D(n)!=="body"||z(r))&&(a=q(n)),L(n))){const s=k(n);l=B(n),f.x=s.x+n.clientLeft,f.y=s.y+n.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-a.scrollLeft*l.x+f.x,y:e.y*l.y-a.scrollTop*l.y+f.y}},isElement:$,getDimensions:function(t){if(L(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=k(t);return{width:e.width,height:e.height}},getOffsetParent:rt,getDocumentElement:P,getScale:B,async getElementRects(t){let{reference:e,floating:n,strategy:o}=t;const i=this.getOffsetParent||rt,r=this.getDimensions;return{reference:Lt(e,await i(n),o),floating:{x:0,y:0,...await r(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>A(t).direction==="rtl"},Wt=(t,e,n)=>{const o=new Map,i={platform:$t,...n},r={...i.platform,_c:o};return pt(t,e,{...i,platform:r})};export{Ot as E,Wt as O,Dt as T,Pt as b,Et as m};
