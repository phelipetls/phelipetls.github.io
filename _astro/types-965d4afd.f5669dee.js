import{c as y}from"./_commonjsHelpers.042e6b4d.js";var j=Object.prototype.hasOwnProperty;function N(r,t,n){for(n of r.keys())if(m(n,t))return n}function m(r,t){var n,e,a;if(r===t)return!0;if(r&&t&&(n=r.constructor)===t.constructor){if(n===Date)return r.getTime()===t.getTime();if(n===RegExp)return r.toString()===t.toString();if(n===Array){if((e=r.length)===t.length)for(;e--&&m(r[e],t[e]););return e===-1}if(n===Set){if(r.size!==t.size)return!1;for(e of r)if(a=e,a&&typeof a=="object"&&(a=N(t,a),!a)||!t.has(a))return!1;return!0}if(n===Map){if(r.size!==t.size)return!1;for(e of r)if(a=e[0],a&&typeof a=="object"&&(a=N(t,a),!a)||!m(e[1],t.get(a)))return!1;return!0}if(n===ArrayBuffer)r=new Uint8Array(r),t=new Uint8Array(t);else if(n===DataView){if((e=r.byteLength)===t.byteLength)for(;e--&&r.getInt8(e)===t.getInt8(e););return e===-1}if(ArrayBuffer.isView(r)){if((e=r.byteLength)===t.byteLength)for(;e--&&r[e]===t[e];);return e===-1}if(!n||typeof r=="object"){e=0;for(n in r)if(j.call(r,n)&&++e&&!j.call(t,n)||!(n in t)||!m(r[n],t[n]))return!1;return Object.keys(t).length===e}}return r!==r&&t!==t}var I={},A={},d={};Object.defineProperty(d,"__esModule",{value:!0});d.format=void 0;var x=/(%?)(%([sdjo]))/g;function R(r,t){switch(t){case"s":return r;case"d":case"i":return Number(r);case"j":return JSON.stringify(r);case"o":{if(typeof r=="string")return r;var n=JSON.stringify(r);return n==="{}"||n==="[]"||/^\[object .+?\]$/.test(n)?r:n}}}function M(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(t.length===0)return r;var e=0,a=r.replace(x,function(i,l,c,s){var u=t[e],f=R(u,s);return l?i:(e++,f)});return e<t.length&&(a+=" "+t.slice(e).join(" ")),a=a.replace(/%{2,2}/g,"%"),a}d.format=M;(function(r){var t=y&&y.__extends||function(){var u=function(f,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var g in v)Object.prototype.hasOwnProperty.call(v,g)&&(h[g]=v[g])},u(f,o)};return function(f,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");u(f,o);function h(){this.constructor=f}f.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}}(),n=y&&y.__spreadArray||function(u,f){for(var o=0,h=f.length,v=u.length;o<h;o++,v++)u[v]=f[o];return u};Object.defineProperty(r,"__esModule",{value:!0}),r.invariant=r.createInvariantWith=r.InvariantError=void 0;var e=d,a=2;function i(u){if(u.stack){var f=u.stack.split(`
`);f.splice(1,a),u.stack=f.join(`
`)}}var l=function(u){t(f,u);function f(o){for(var h=[],v=1;v<arguments.length;v++)h[v-1]=arguments[v];var g=u.call(this,o)||this;return g.message=o,g.name="Invariant Violation",g.message=e.format.apply(void 0,n([o],h)),i(g),g}return f}(Error);r.InvariantError=l;function c(u){var f=function(o,h){for(var v=[],g=2;g<arguments.length;g++)v[g-2]=arguments[g];if(!o){var w=e.format.apply(void 0,n([h],v)),P=!!u.prototype.name,S=P?new u(w):u(w);throw i(S),S}};return f}r.createInvariantWith=c;function s(u){for(var f=[],o=1;o<arguments.length;o++)f[o-1]=arguments[o];return c(u).apply(void 0,f)}r.invariant=c(l),r.invariant.as=s})(A);(function(r){var t=y&&y.__createBinding||(Object.create?function(e,a,i,l){l===void 0&&(l=i),Object.defineProperty(e,l,{enumerable:!0,get:function(){return a[i]}})}:function(e,a,i,l){l===void 0&&(l=i),e[l]=a[i]}),n=y&&y.__exportStar||function(e,a){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(a,i)&&t(a,e,i)};Object.defineProperty(r,"__esModule",{value:!0}),n(A,r),n(d,r)})(I);var O=function(r,t){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])},O(r,t)};function k(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");O(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var _=function(){return _=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_.apply(this,arguments)};function J(r,t,n,e){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function c(f){try{u(e.next(f))}catch(o){l(o)}}function s(f){try{u(e.throw(f))}catch(o){l(o)}}function u(f){f.done?i(f.value):a(f.value).then(c,s)}u((e=e.apply(r,t||[])).next())})}function U(r,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,a,i,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(u){return function(f){return s([u,f])}}function s(u){if(e)throw new TypeError("Generator is already executing.");for(;n;)try{if(e=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(r,n)}catch(f){u=[6,f],a=0}finally{e=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Y(r,t,n){if(n||arguments.length===2)for(var e=0,a=t.length,i;e<a;e++)(i||!(e in t))&&(i||(i=Array.prototype.slice.call(t,0,e)),i[e]=t[e]);return r.concat(i||Array.prototype.slice.call(t))}var T=function(r){return"[sandpack-client]: "+r};function p(r,t){return t===void 0&&(t="Value is nullish"),I.invariant(r!=null,T(t)),r}var C='"dependencies" was not specified - provide either a package.json or a "dependencies" value',E='"entry" was not specified - provide either a package.json with the "main" field or an "entry" value';function W(r,t,n){return r===void 0&&(r={}),t===void 0&&(t={}),n===void 0&&(n="/index.js"),JSON.stringify({name:"sandpack-project",main:n,dependencies:r,devDependencies:t},null,2)}function $(r,t,n,e){var a,i,l=V(r),c=l["/package.json"];if(!c)return p(t,C),p(e,E),l["/package.json"]={code:W(t,n,e)},l;if(c){var s=JSON.parse(c.code);p(!(!t&&!s.dependencies),E),t&&(s.dependencies=_(_({},(a=s.dependencies)!==null&&a!==void 0?a:{}),t??{})),n&&(s.devDependencies=_(_({},(i=s.devDependencies)!==null&&i!==void 0?i:{}),n??{})),e&&(s.main=e),l["/package.json"]={code:JSON.stringify(s,null,2)}}return l}function q(r){if(r.title==="SyntaxError"){var t=r.title,n=r.path,e=r.message,a=r.line,i=r.column;return{title:t,path:n,message:e,line:a,column:i}}var l=z(r.payload.frames);if(!l)return{message:r.message};var c=B(l),s=G(l),u=D(l._originalFileName,r.message,s,c);return{message:u,title:r.title,path:l._originalFileName,line:l._originalLineNumber,column:l._originalColumnNumber}}function z(r){if(r)return r.find(function(t){return!!t._originalFileName})}function G(r){return r?" ("+r._originalLineNumber+":"+r._originalColumnNumber+")":""}function B(r){var t=r._originalScriptCode[r._originalScriptCode.length-1],n=t.lineNumber.toString().length,e=2,a=3,i=e+n+a+r._originalColumnNumber;return r._originalScriptCode.reduce(function(l,c){var s=c.highlight?">":" ",u=c.lineNumber.toString().length===n?""+c.lineNumber:" "+c.lineNumber,f=c.highlight?`
`+" ".repeat(i)+"^":"";return l+`
`+s+" "+u+" | "+c.content+f},"")}function D(r,t,n,e){return r+": "+t+n+`
`+e}var V=function(r){return typeof r=="string"?r.startsWith("/")?r:"/"+r:Array.isArray(r)?r.map(function(t){return t.startsWith("/")?t:"/"+t}):typeof r=="object"&&r!==null?Object.entries(r).reduce(function(t,n){var e=n[0],a=n[1],i=e.startsWith("/")?e:"/"+e;return t[i]=a,t},{}):null},b;(function(r){r[r.None=0]="None",r[r.Error=10]="Error",r[r.Warning=20]="Warning",r[r.Info=30]="Info",r[r.Debug=40]="Debug"})(b||(b={}));export{b as S,J as _,U as a,$ as b,k as c,m as d,q as e,_ as f,T as g,p as h,W as i,Y as j,I as l,V as n};
