import{c as commonjsGlobal,a as getAugmentedNamespace}from"./_commonjsHelpers.042e6b4d.js";import"./ThemeSelect.astro_astro_type_script_index_0_lang.a8b55151.js";var pdfobjectExports={},pdfobject={get exports(){return pdfobjectExports},set exports(R){pdfobjectExports=R}};/**
 *  PDFObject v2.2.8
 *  https://github.com/pipwerks/PDFObject
 *  @license
 *  Copyright (c) 2008-2022 Philip Hutchison
 *  MIT-style license: http://pipwerks.mit-license.org/
 *  UMD module pattern from https://github.com/umdjs/umd/blob/master/templates/returnExports.js
 */(function(R){(function(i,t){R.exports?R.exports=t():i.PDFObject=t()})(commonjsGlobal,function(){if(typeof window>"u"||window.navigator===void 0||window.navigator.userAgent===void 0||window.navigator.mimeTypes===void 0)return!1;let i="2.2.8",t=window.navigator,r=window.navigator.userAgent,o="ActiveXObject"in window,g=window.Promise!==void 0,S=t.mimeTypes["application/pdf"]!==void 0,P=t.platform!==void 0&&t.platform==="MacIntel"&&t.maxTouchPoints!==void 0&&t.maxTouchPoints>1||/Mobi|Tablet|Android|iPad|iPhone/.test(r),y=!P&&t.vendor!==void 0&&/Apple/.test(t.vendor)&&/Safari/.test(r),m=!P&&/irefox/.test(r)&&r.split("rv:").length>1?parseInt(r.split("rv:")[1].split(".")[0],10)>18:!1,I=function(c){var n;try{n=new ActiveXObject(c)}catch{n=null}return n},T=!P&&(g||m||S||o&&function(){return!!(I("AcroPDF.PDF")||I("PDF.PdfCtrl"))}()),F=function(c){let n="",s;if(c){for(s in c)c.hasOwnProperty(s)&&(n+=encodeURIComponent(s)+"="+encodeURIComponent(c[s])+"&");n&&(n="#"+n,n=n.slice(0,n.length-1))}return n},p=function(c,n){return n||console.log("[PDFObject] "+c),!1},k=function(c){for(;c.firstChild;)c.removeChild(c.firstChild)},N=function(c){let n=document.body;return typeof c=="string"?n=document.querySelector(c):window.jQuery!==void 0&&c instanceof jQuery&&c.length?n=c.get(0):c.nodeType!==void 0&&c.nodeType===1&&(n=c),n},d=function(c,n,s,f,h,C,L,M,Q,X){k(n);let Y=s;if(c==="pdfjs"){let U=X.indexOf("?")!==-1?"&":"?";Y=X+U+"file="+encodeURIComponent(s)+f}let q=c==="pdfjs"||c==="iframe"?"iframe":"embed",z=document.createElement(q);if(z.className="pdfobject",z.type="application/pdf",z.title=M,z.src=Y,L&&(z.id=L),q==="iframe"&&(z.allow="fullscreen",z.frameborder="0"),!Q){let U=q==="embed"?"overflow: auto;":"border: none;";n!==document.body?U+="width: "+h+"; height: "+C+";":U+="position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;",z.style.cssText=U}return n.classList.add("pdfobject-container"),n.appendChild(z),n.getElementsByTagName(q)[0]},b=function(c,n,s){let f=n||!1,h=s||{},C=typeof h.id=="string"?h.id:"",L=h.page||!1,M=h.pdfOpenParams||{},Q=typeof h.fallbackLink=="string"||typeof h.fallbackLink=="boolean"?h.fallbackLink:!0,X=h.width||"100%",Y=h.height||"100%",q=h.title||"Embedded PDF",z=typeof h.assumptionMode=="boolean"?h.assumptionMode:!0,U=typeof h.forcePDFJS=="boolean"?h.forcePDFJS:!1,W=typeof h.supportRedirect=="boolean"?h.supportRedirect:!1,D=typeof h.omitInlineStyles=="boolean"?h.omitInlineStyles:!1,K=typeof h.suppressConsole=="boolean"?h.suppressConsole:!1,se=typeof h.forceIframe=="boolean"?h.forceIframe:!1,me=h.PDFJS_URL||!1,Pe=N(f),H="",A="",E="<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>";return typeof c!="string"?p("URL is not valid",K):Pe?(L&&(M.page=L),A=F(M),U&&me?d("pdfjs",Pe,c,A,X,Y,C,q,D,me):T||z&&!P?d(se||W||y?"iframe":"embed",Pe,c,A,X,Y,C,q,D):me?d("pdfjs",Pe,c,A,X,Y,C,q,D,me):(Q&&(H=typeof Q=="string"?Q:E,Pe.innerHTML=H.replace(/\[url\]/g,c)),p("This browser does not support embedded PDFs",K))):p("Target element cannot be determined",K)};return{embed:function(c,n,s){return b(c,n,s)},pdfobjectversion:function(){return i}(),supportsPDFs:function(){return T}()}})})(pdfobject);function commonjsRequire(R){throw new Error('Could not dynamically require "'+R+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(R){pdfExports=R}},dommatrixExports={},dommatrix={get exports(){return dommatrixExports},set exports(R){dommatrixExports=R}};/*!
* DOMMatrix v1.0.3 (https://thednp.github.io/dommatrix/)
* Copyright 2022 Â© thednp
* Licensed under MIT (https://github.com/thednp/DOMMatrix/blob/master/LICENSE)
*/var hasRequiredDommatrix;function requireDommatrix(){return hasRequiredDommatrix||(hasRequiredDommatrix=1,function(R,i){(function(t,r){R.exports=r()})(commonjsGlobal,function(){function t(d){var b=new F,c=Array.from(d);if(!c.every(function(G){return!Number.isNaN(G)}))throw TypeError('CSSMatrix: "'+d+'" must only have numbers.');if(c.length===16){var n=c[0],s=c[1],f=c[2],h=c[3],C=c[4],L=c[5],M=c[6],Q=c[7],X=c[8],Y=c[9],q=c[10],z=c[11],U=c[12],W=c[13],D=c[14],K=c[15];b.m11=n,b.a=n,b.m21=C,b.c=C,b.m31=X,b.m41=U,b.e=U,b.m12=s,b.b=s,b.m22=L,b.d=L,b.m32=Y,b.m42=W,b.f=W,b.m13=f,b.m23=M,b.m33=q,b.m43=D,b.m14=h,b.m24=Q,b.m34=z,b.m44=K}else if(c.length===6){var se=c[0],me=c[1],Pe=c[2],H=c[3],A=c[4],E=c[5];b.m11=se,b.a=se,b.m12=me,b.b=me,b.m21=Pe,b.c=Pe,b.m22=H,b.d=H,b.m41=A,b.e=A,b.m42=E,b.f=E}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return b}function r(d){var b=Object.keys(new F);if(typeof d=="object"&&b.every(function(c){return c in d}))return t([d.m11,d.m12,d.m13,d.m14,d.m21,d.m22,d.m23,d.m24,d.m31,d.m32,d.m33,d.m34,d.m41,d.m42,d.m43,d.m44]);throw TypeError('CSSMatrix: "'+JSON.stringify(d)+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function o(d){if(typeof d!="string")throw TypeError('CSSMatrix: "'+d+'" is not a string.');var b=String(d).replace(/\s/g,""),c=new F,n='CSSMatrix: invalid transform string "'+d+'"';return b.split(")").filter(function(s){return s}).forEach(function(s){var f=s.split("("),h=f[0],C=f[1];if(!C)throw TypeError(n);var L=C.split(",").map(function(A){return A.includes("rad")?parseFloat(A)*(180/Math.PI):parseFloat(A)}),M=L[0],Q=L[1],X=L[2],Y=L[3],q=[M,Q,X],z=[M,Q,X,Y];if(h==="perspective"&&M&&[Q,X].every(function(A){return A===void 0}))c.m34=-1/M;else if(h.includes("matrix")&&[6,16].includes(L.length)&&L.every(function(A){return!Number.isNaN(+A)})){var U=L.map(function(A){return Math.abs(A)<1e-6?0:A});c=c.multiply(t(U))}else if(h==="translate3d"&&q.every(function(A){return!Number.isNaN(+A)}))c=c.translate(M,Q,X);else if(h==="translate"&&M&&X===void 0)c=c.translate(M,Q||0,0);else if(h==="rotate3d"&&z.every(function(A){return!Number.isNaN(+A)})&&Y)c=c.rotateAxisAngle(M,Q,X,Y);else if(h==="rotate"&&M&&[Q,X].every(function(A){return A===void 0}))c=c.rotate(0,0,M);else if(h==="scale3d"&&q.every(function(A){return!Number.isNaN(+A)})&&q.some(function(A){return A!==1}))c=c.scale(M,Q,X);else if(h==="scale"&&!Number.isNaN(M)&&M!==1&&X===void 0){var W=Number.isNaN(+Q),D=W?M:Q;c=c.scale(M,D,1)}else if(h==="skew"&&(M||!Number.isNaN(M)&&Q)&&X===void 0)c=c.skew(M,Q||0);else if(/[XYZ]/.test(h)&&M&&[Q,X].every(function(A){return A===void 0})&&["translate","rotate","scale","skew"].some(function(A){return h.includes(A)}))if(["skewX","skewY"].includes(h))c=c[h](M);else{var K=h.replace(/[XYZ]/,""),se=h.replace(K,""),me=["X","Y","Z"].indexOf(se),Pe=K==="scale"?1:0,H=[me===0?M:Pe,me===1?M:Pe,me===2?M:Pe];c=c[K].apply(c,H)}else throw TypeError(n)}),c}function g(d,b){return b?[d.a,d.b,d.c,d.d,d.e,d.f]:[d.m11,d.m12,d.m13,d.m14,d.m21,d.m22,d.m23,d.m24,d.m31,d.m32,d.m33,d.m34,d.m41,d.m42,d.m43,d.m44]}function S(d,b,c){var n=new F;return n.m41=d,n.e=d,n.m42=b,n.f=b,n.m43=c,n}function _(d,b,c){var n=new F,s=Math.PI/180,f=d*s,h=b*s,C=c*s,L=Math.cos(f),M=-Math.sin(f),Q=Math.cos(h),X=-Math.sin(h),Y=Math.cos(C),q=-Math.sin(C),z=Q*Y,U=-Q*q;n.m11=z,n.a=z,n.m12=U,n.b=U,n.m13=X;var W=M*X*Y+L*q;n.m21=W,n.c=W;var D=L*Y-M*X*q;return n.m22=D,n.d=D,n.m23=-M*Q,n.m31=M*q-L*X*Y,n.m32=M*Y+L*X*q,n.m33=L*Q,n}function P(d,b,c,n){var s=new F,f=Math.sqrt(d*d+b*b+c*c);if(f===0)return s;var h=d/f,C=b/f,L=c/f,M=n*(Math.PI/360),Q=Math.sin(M),X=Math.cos(M),Y=Q*Q,q=h*h,z=C*C,U=L*L,W=1-2*(z+U)*Y;s.m11=W,s.a=W;var D=2*(h*C*Y+L*Q*X);s.m12=D,s.b=D,s.m13=2*(h*L*Y-C*Q*X);var K=2*(C*h*Y-L*Q*X);s.m21=K,s.c=K;var se=1-2*(U+q)*Y;return s.m22=se,s.d=se,s.m23=2*(C*L*Y+h*Q*X),s.m31=2*(L*h*Y+C*Q*X),s.m32=2*(L*C*Y-h*Q*X),s.m33=1-2*(q+z)*Y,s}function y(d,b,c){var n=new F;return n.m11=d,n.a=d,n.m22=b,n.d=b,n.m33=c,n}function m(d,b){var c=new F;if(d){var n=d*Math.PI/180,s=Math.tan(n);c.m21=s,c.c=s}if(b){var f=b*Math.PI/180,h=Math.tan(f);c.m12=h,c.b=h}return c}function I(d){return m(d,0)}function u(d){return m(0,d)}function T(d,b){var c=b.m11*d.m11+b.m12*d.m21+b.m13*d.m31+b.m14*d.m41,n=b.m11*d.m12+b.m12*d.m22+b.m13*d.m32+b.m14*d.m42,s=b.m11*d.m13+b.m12*d.m23+b.m13*d.m33+b.m14*d.m43,f=b.m11*d.m14+b.m12*d.m24+b.m13*d.m34+b.m14*d.m44,h=b.m21*d.m11+b.m22*d.m21+b.m23*d.m31+b.m24*d.m41,C=b.m21*d.m12+b.m22*d.m22+b.m23*d.m32+b.m24*d.m42,L=b.m21*d.m13+b.m22*d.m23+b.m23*d.m33+b.m24*d.m43,M=b.m21*d.m14+b.m22*d.m24+b.m23*d.m34+b.m24*d.m44,Q=b.m31*d.m11+b.m32*d.m21+b.m33*d.m31+b.m34*d.m41,X=b.m31*d.m12+b.m32*d.m22+b.m33*d.m32+b.m34*d.m42,Y=b.m31*d.m13+b.m32*d.m23+b.m33*d.m33+b.m34*d.m43,q=b.m31*d.m14+b.m32*d.m24+b.m33*d.m34+b.m34*d.m44,z=b.m41*d.m11+b.m42*d.m21+b.m43*d.m31+b.m44*d.m41,U=b.m41*d.m12+b.m42*d.m22+b.m43*d.m32+b.m44*d.m42,W=b.m41*d.m13+b.m42*d.m23+b.m43*d.m33+b.m44*d.m43,D=b.m41*d.m14+b.m42*d.m24+b.m43*d.m34+b.m44*d.m44;return t([c,n,s,f,h,C,L,M,Q,X,Y,q,z,U,W,D])}var F=function(){for(var b=[],c=arguments.length;c--;)b[c]=arguments[c];var n=this;if(n.a=1,n.b=0,n.c=0,n.d=1,n.e=0,n.f=0,n.m11=1,n.m12=0,n.m13=0,n.m14=0,n.m21=0,n.m22=1,n.m23=0,n.m24=0,n.m31=0,n.m32=0,n.m33=1,n.m34=0,n.m41=0,n.m42=0,n.m43=0,n.m44=1,b.length){var s=[16,6].some(function(f){return f===b.length})?b:b[0];return n.setMatrixValue(s)}return n},p={isIdentity:{configurable:!0},is2D:{configurable:!0}};p.isIdentity.get=function(){var d=this;return d.m11===1&&d.m12===0&&d.m13===0&&d.m14===0&&d.m21===0&&d.m22===1&&d.m23===0&&d.m24===0&&d.m31===0&&d.m32===0&&d.m33===1&&d.m34===0&&d.m41===0&&d.m42===0&&d.m43===0&&d.m44===1},p.is2D.get=function(){var d=this;return d.m31===0&&d.m32===0&&d.m33===1&&d.m34===0&&d.m43===0&&d.m44===1},F.prototype.setMatrixValue=function(b){var c=this;return typeof b=="string"&&b.length&&b!=="none"?o(b):[Array,Float64Array,Float32Array].some(function(n){return b instanceof n})?t(b):[F,DOMMatrix,Object].some(function(n){return b instanceof n})?r(b):c},F.prototype.toFloat32Array=function(b){return Float32Array.from(g(this,b))},F.prototype.toFloat64Array=function(b){return Float64Array.from(g(this,b))},F.prototype.toString=function(){var b=this,c=b.is2D,n=b.toFloat64Array(c).join(", "),s=c?"matrix":"matrix3d";return s+"("+n+")"},F.prototype.toJSON=function(){var b=this,c=b.is2D,n=b.isIdentity;return Object.assign({},b,{is2D:c,isIdentity:n})},F.prototype.multiply=function(b){return T(this,b)},F.prototype.translate=function(b,c,n){var s=b,f=c,h=n;return f===void 0&&(f=0),h===void 0&&(h=0),T(this,S(s,f,h))},F.prototype.scale=function(b,c,n){var s=b,f=c,h=n;return f===void 0&&(f=b),h===void 0&&(h=1),T(this,y(s,f,h))},F.prototype.rotate=function(b,c,n){var s=b,f=c||0,h=n||0;return typeof b=="number"&&c===void 0&&n===void 0&&(h=s,s=0,f=0),T(this,_(s,f,h))},F.prototype.rotateAxisAngle=function(b,c,n,s){if([b,c,n,s].some(function(f){return Number.isNaN(+f)}))throw new TypeError("CSSMatrix: expecting 4 values");return T(this,P(b,c,n,s))},F.prototype.skewX=function(b){return T(this,I(b))},F.prototype.skewY=function(b){return T(this,u(b))},F.prototype.skew=function(b,c){return T(this,m(b,c))},F.prototype.transformPoint=function(b){var c=this,n=c.m11*b.x+c.m21*b.y+c.m31*b.z+c.m41*b.w,s=c.m12*b.x+c.m22*b.y+c.m32*b.z+c.m42*b.w,f=c.m13*b.x+c.m23*b.y+c.m33*b.z+c.m43*b.w,h=c.m14*b.x+c.m24*b.y+c.m34*b.z+c.m44*b.w;return b instanceof DOMPoint?new DOMPoint(n,s,f,h):{x:n,y:s,z:f,w:h}},Object.defineProperties(F.prototype,p),Object.assign(F,{Translate:S,Rotate:_,RotateAxisAngle:P,Scale:y,SkewX:I,SkewY:u,Skew:m,Multiply:T,fromArray:t,fromMatrix:r,fromString:o,toArray:g});var k="1.0.3",N=k;return Object.assign(F,{Version:N}),F})}(dommatrix)),dommatrixExports}var ponyfillExports={},ponyfill={get exports(){return ponyfillExports},set exports(R){ponyfillExports=R}},hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(R,i){(function(t,r){r(i)})(commonjsGlobal,function(t){var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(e){return"Symbol("+e+")"};function o(){}function g(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal}var S=g();function _(e){return typeof e=="object"&&e!==null||typeof e=="function"}var P=o,y=Promise,m=Promise.prototype.then,I=Promise.resolve.bind(y),u=Promise.reject.bind(y);function T(e){return new y(e)}function F(e){return I(e)}function p(e){return u(e)}function k(e,a,x){return m.call(e,a,x)}function N(e,a,x){k(k(e,a,x),void 0,P)}function d(e,a){N(e,a)}function b(e,a){N(e,void 0,a)}function c(e,a,x){return k(e,a,x)}function n(e){k(e,void 0,P)}var s=function(){var e=S&&S.queueMicrotask;if(typeof e=="function")return e;var a=F(void 0);return function(x){return k(a,x)}}();function f(e,a,x){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,x)}function h(e,a,x){try{return F(f(e,a,x))}catch(V){return p(V)}}var C=16384,L=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(a){var x=this._back,V=x;x._elements.length===C-1&&(V={_elements:[],_next:void 0}),x._elements.push(a),V!==x&&(this._back=V,x._next=V),++this._size},e.prototype.shift=function(){var a=this._front,x=a,V=this._cursor,oe=V+1,ge=a._elements,Se=ge[V];return oe===C&&(x=a._next,oe=0),--this._size,this._cursor=oe,a!==x&&(this._front=x),ge[V]=void 0,Se},e.prototype.forEach=function(a){for(var x=this._cursor,V=this._front,oe=V._elements;(x!==oe.length||V._next!==void 0)&&!(x===oe.length&&(V=V._next,oe=V._elements,x=0,oe.length===0));)a(oe[x]),++x},e.prototype.peek=function(){var a=this._front,x=this._cursor;return a._elements[x]},e}();function M(e,a){e._ownerReadableStream=a,a._reader=e,a._state==="readable"?q(e):a._state==="closed"?U(e):z(e,a._storedError)}function Q(e,a){var x=e._ownerReadableStream;return ct(x,a)}function X(e){e._ownerReadableStream._state==="readable"?W(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):D(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Y(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function q(e){e._closedPromise=T(function(a,x){e._closedPromise_resolve=a,e._closedPromise_reject=x})}function z(e,a){q(e),W(e,a)}function U(e){q(e),K(e)}function W(e,a){e._closedPromise_reject!==void 0&&(n(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function D(e,a){z(e,a)}function K(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var se=r("[[AbortSteps]]"),me=r("[[ErrorSteps]]"),Pe=r("[[CancelSteps]]"),H=r("[[PullSteps]]"),A=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},E=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function G(e){return typeof e=="object"||typeof e=="function"}function j(e,a){if(e!==void 0&&!G(e))throw new TypeError(a+" is not an object.")}function l(e,a){if(typeof e!="function")throw new TypeError(a+" is not a function.")}function v(e){return typeof e=="object"&&e!==null||typeof e=="function"}function w(e,a){if(!v(e))throw new TypeError(a+" is not an object.")}function O(e,a,x){if(e===void 0)throw new TypeError("Parameter "+a+" is required in '"+x+"'.")}function B(e,a,x){if(e===void 0)throw new TypeError(a+" is required in '"+x+"'.")}function $(e){return Number(e)}function J(e){return e===0?0:e}function ee(e){return J(E(e))}function ne(e,a){var x=0,V=Number.MAX_SAFE_INTEGER,oe=Number(e);if(oe=J(oe),!A(oe))throw new TypeError(a+" is not a finite number");if(oe=ee(oe),oe<x||oe>V)throw new TypeError(a+" is outside the accepted range of "+x+" to "+V+", inclusive");return!A(oe)||oe===0?0:oe}function le(e,a){if(!_t(e))throw new TypeError(a+" is not a ReadableStream.")}function ie(e){return new we(e)}function ce(e,a){e._reader._readRequests.push(a)}function he(e,a,x){var V=e._reader,oe=V._readRequests.shift();x?oe._closeSteps():oe._chunkSteps(a)}function be(e){return e._reader._readRequests.length}function _e(e){var a=e._reader;return!(a===void 0||!xe(a))}var we=function(){function e(a){if(O(a,1,"ReadableStreamDefaultReader"),le(a,"First parameter"),wt(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");M(this,a),this._readRequests=new L}return Object.defineProperty(e.prototype,"closed",{get:function(){return xe(this)?this._closedPromise:p($e("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(a){return a===void 0&&(a=void 0),xe(this)?this._ownerReadableStream===void 0?p(Y("cancel")):Q(this,a):p($e("cancel"))},e.prototype.read=function(){if(!xe(this))return p($e("read"));if(this._ownerReadableStream===void 0)return p(Y("read from"));var a,x,V=T(function(ge,Se){a=ge,x=Se}),oe={_chunkSteps:function(ge){return a({value:ge,done:!1})},_closeSteps:function(){return a({value:void 0,done:!0})},_errorSteps:function(ge){return x(ge)}};return Ae(this,oe),V},e.prototype.releaseLock=function(){if(!xe(this))throw $e("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");X(this)}},e}();Object.defineProperties(we.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(we.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function xe(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof we}function Ae(e,a){var x=e._ownerReadableStream;x._disturbed=!0,x._state==="closed"?a._closeSteps():x._state==="errored"?a._errorSteps(x._storedError):x._readableStreamController[H](a)}function $e(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}var Xe,Oe;typeof r.asyncIterator=="symbol"&&(Oe=(Xe={},Xe[r.asyncIterator]=function(){return this},Xe),Object.defineProperty(Oe,r.asyncIterator,{enumerable:!1}));var Ee=function(){function e(a,x){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=x}return e.prototype.next=function(){var a=this,x=function(){return a._nextSteps()};return this._ongoingPromise=this._ongoingPromise?c(this._ongoingPromise,x,x):x(),this._ongoingPromise},e.prototype.return=function(a){var x=this,V=function(){return x._returnSteps(a)};return this._ongoingPromise?c(this._ongoingPromise,V,V):V()},e.prototype._nextSteps=function(){var a=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var x=this._reader;if(x._ownerReadableStream===void 0)return p(Y("iterate"));var V,oe,ge=T(function(Re,je){V=Re,oe=je}),Se={_chunkSteps:function(Re){a._ongoingPromise=void 0,s(function(){return V({value:Re,done:!1})})},_closeSteps:function(){a._ongoingPromise=void 0,a._isFinished=!0,X(x),V({value:void 0,done:!0})},_errorSteps:function(Re){a._ongoingPromise=void 0,a._isFinished=!0,X(x),oe(Re)}};return Ae(x,Se),ge},e.prototype._returnSteps=function(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;var x=this._reader;if(x._ownerReadableStream===void 0)return p(Y("finish iterating"));if(!this._preventCancel){var V=Q(x,a);return X(x),c(V,function(){return{value:a,done:!0}})}return X(x),F({value:a,done:!0})},e}(),re={next:function(){return Me(this)?this._asyncIteratorImpl.next():p(qe("next"))},return:function(e){return Me(this)?this._asyncIteratorImpl.return(e):p(qe("return"))}};Oe!==void 0&&Object.setPrototypeOf(re,Oe);function ve(e,a){var x=ie(e),V=new Ee(x,a),oe=Object.create(re);return oe._asyncIteratorImpl=V,oe}function Me(e){if(!_(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Ee}catch{return!1}}function qe(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}var fe=Number.isNaN||function(e){return e!==e};function Ce(e){return e.slice()}function Le(e,a,x,V,oe){new Uint8Array(e).set(new Uint8Array(x,V,oe),a)}function ue(e){return e}function Z(e){return!1}function te(e,a,x){if(e.slice)return e.slice(a,x);var V=x-a,oe=new ArrayBuffer(V);return Le(oe,0,e,a,V),oe}function pe(e){return!(typeof e!="number"||fe(e)||e<0)}function ke(e){var a=te(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function Ne(e){var a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function de(e,a,x){if(!pe(x)||x===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:x}),e._queueTotalSize+=x}function ae(e){var a=e._queue.peek();return a.value}function ye(e){e._queue=new L,e._queueTotalSize=0}var Te=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!Be(this))throw Er("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(a){if(!Be(this))throw Er("respond");if(O(a,1,"respond"),a=ne(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Z(this._view.buffer),Zt(this._associatedReadableByteStreamController,a)},e.prototype.respondWithNewView=function(a){if(!Be(this))throw Er("respondWithNewView");if(O(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Z(a.buffer),er(this._associatedReadableByteStreamController,a)},e}();Object.defineProperties(Te.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Te.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Ie=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!De(this))throw jt("byobRequest");return wr(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!De(this))throw jt("desiredSize");return jr(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!De(this))throw jt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError("The stream (in "+a+" state) is not in the readable state and cannot be closed");Ut(this)},e.prototype.enqueue=function(a){if(!De(this))throw jt("enqueue");if(O(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var x=this._controlledReadableByteStream._state;if(x!=="readable")throw new TypeError("The stream (in "+x+" state) is not in the readable state and cannot be enqueued to");Jt(this,a)},e.prototype.error=function(a){if(a===void 0&&(a=void 0),!De(this))throw jt("error");lt(this,a)},e.prototype[Pe]=function(a){Fe(this),ye(this);var x=this._cancelAlgorithm(a);return dt(this),x},e.prototype[H]=function(a){var x=this._controlledReadableByteStream;if(this._queueTotalSize>0){var V=this._queue.shift();this._queueTotalSize-=V.byteLength,Je(this);var oe=new Uint8Array(V.buffer,V.byteOffset,V.byteLength);a._chunkSteps(oe);return}var ge=this._autoAllocateChunkSize;if(ge!==void 0){var Se=void 0;try{Se=new ArrayBuffer(ge)}catch(je){a._errorSteps(je);return}var Re={buffer:Se,bufferByteLength:ge,byteOffset:0,byteLength:ge,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(Re)}ce(x,a),We(this)},e}();Object.defineProperties(Ie.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ie.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function De(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Ie}function Be(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Te}function We(e){var a=Tt(e);if(a){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var x=e._pullAlgorithm();N(x,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,We(e))},function(V){lt(e,V)})}}function Fe(e){at(e),e._pendingPullIntos=new L}function Ve(e,a){var x=!1;e._state==="closed"&&(x=!0);var V=et(a);a.readerType==="default"?he(e,V,x):On(e,V,x)}function et(e){var a=e.bytesFilled,x=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/x)}function ze(e,a,x,V){e._queue.push({buffer:a,byteOffset:x,byteLength:V}),e._queueTotalSize+=V}function Qe(e,a){var x=a.elementSize,V=a.bytesFilled-a.bytesFilled%x,oe=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),ge=a.bytesFilled+oe,Se=ge-ge%x,Re=oe,je=!1;Se>V&&(Re=Se-a.bytesFilled,je=!0);for(var Ge=e._queue;Re>0;){var He=Ge.peek(),Ye=Math.min(Re,He.byteLength),it=a.byteOffset+a.bytesFilled;Le(a.buffer,it,He.buffer,He.byteOffset,Ye),He.byteLength===Ye?Ge.shift():(He.byteOffset+=Ye,He.byteLength-=Ye),e._queueTotalSize-=Ye,nt(e,Ye,a),Re-=Ye}return je}function nt(e,a,x){x.bytesFilled+=a}function Je(e){e._queueTotalSize===0&&e._closeRequested?(dt(e),qt(e._controlledReadableByteStream)):We(e)}function at(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ze(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;var a=e._pendingPullIntos.peek();Qe(e,a)&&(vt(e),Ve(e._controlledReadableByteStream,a))}}function mt(e,a,x){var V=e._controlledReadableByteStream,oe=1;a.constructor!==DataView&&(oe=a.constructor.BYTES_PER_ELEMENT);var ge=a.constructor,Se=a.buffer,Re={buffer:Se,bufferByteLength:Se.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:oe,viewConstructor:ge,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(Re),$r(V,x);return}if(V._state==="closed"){var je=new ge(Re.buffer,Re.byteOffset,0);x._closeSteps(je);return}if(e._queueTotalSize>0){if(Qe(e,Re)){var Ge=et(Re);Je(e),x._chunkSteps(Ge);return}if(e._closeRequested){var He=new TypeError("Insufficient bytes to fill elements in the given buffer");lt(e,He),x._errorSteps(He);return}}e._pendingPullIntos.push(Re),$r(V,x),We(e)}function yt(e,a){var x=e._controlledReadableByteStream;if(Pr(x))for(;Hr(x)>0;){var V=vt(e);Ve(x,V)}}function Ot(e,a,x){if(nt(e,a,x),!(x.bytesFilled<x.elementSize)){vt(e);var V=x.bytesFilled%x.elementSize;if(V>0){var oe=x.byteOffset+x.bytesFilled,ge=te(x.buffer,oe-V,oe);ze(e,ge,0,ge.byteLength)}x.bytesFilled-=V,Ve(e._controlledReadableByteStream,x),Ze(e)}}function Ct(e,a){var x=e._pendingPullIntos.peek();at(e);var V=e._controlledReadableByteStream._state;V==="closed"?yt(e):Ot(e,a,x),We(e)}function vt(e){var a=e._pendingPullIntos.shift();return a}function Tt(e){var a=e._controlledReadableByteStream;if(a._state!=="readable"||e._closeRequested||!e._started)return!1;if(_e(a)&&be(a)>0||Pr(a)&&Hr(a)>0)return!0;var x=jr(e);return x>0}function dt(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ut(e){var a=e._controlledReadableByteStream;if(!(e._closeRequested||a._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){var x=e._pendingPullIntos.peek();if(x.bytesFilled>0){var V=new TypeError("Insufficient bytes to fill elements in the given buffer");throw lt(e,V),V}}dt(e),qt(a)}}function Jt(e,a){var x=e._controlledReadableByteStream;if(!(e._closeRequested||x._state!=="readable")){var V=a.buffer,oe=a.byteOffset,ge=a.byteLength,Se=V;if(e._pendingPullIntos.length>0){var Re=e._pendingPullIntos.peek();Z(Re.buffer),Re.buffer=Re.buffer}if(at(e),_e(x))if(be(x)===0)ze(e,Se,oe,ge);else{e._pendingPullIntos.length>0&&vt(e);var je=new Uint8Array(Se,oe,ge);he(x,je,!1)}else Pr(x)?(ze(e,Se,oe,ge),Ze(e)):ze(e,Se,oe,ge);We(e)}}function lt(e,a){var x=e._controlledReadableByteStream;x._state==="readable"&&(Fe(e),ye(e),dt(e),mn(x,a))}function wr(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){var a=e._pendingPullIntos.peek(),x=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),V=Object.create(Te.prototype);Fn(V,e,x),e._byobRequest=V}return e._byobRequest}function jr(e){var a=e._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Zt(e,a){var x=e._pendingPullIntos.peek(),V=e._controlledReadableByteStream._state;if(V==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(x.bytesFilled+a>x.byteLength)throw new RangeError("bytesWritten out of range")}x.buffer=x.buffer,Ct(e,a)}function er(e,a){var x=e._pendingPullIntos.peek(),V=e._controlledReadableByteStream._state;if(V==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(x.byteOffset+x.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(x.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(x.bytesFilled+a.byteLength>x.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var oe=a.byteLength;x.buffer=a.buffer,Ct(e,oe)}function Gr(e,a,x,V,oe,ge,Se){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,ye(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=ge,a._pullAlgorithm=V,a._cancelAlgorithm=oe,a._autoAllocateChunkSize=Se,a._pendingPullIntos=new L,e._readableStreamController=a;var Re=x();N(F(Re),function(){a._started=!0,We(a)},function(je){lt(a,je)})}function kn(e,a,x){var V=Object.create(Ie.prototype),oe=function(){},ge=function(){return F(void 0)},Se=function(){return F(void 0)};a.start!==void 0&&(oe=function(){return a.start(V)}),a.pull!==void 0&&(ge=function(){return a.pull(V)}),a.cancel!==void 0&&(Se=function(je){return a.cancel(je)});var Re=a.autoAllocateChunkSize;if(Re===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Gr(e,V,oe,ge,Se,x,Re)}function Fn(e,a,x){e._associatedReadableByteStreamController=a,e._view=x}function Er(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function jt(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function zr(e){return new Gt(e)}function $r(e,a){e._reader._readIntoRequests.push(a)}function On(e,a,x){var V=e._reader,oe=V._readIntoRequests.shift();x?oe._closeSteps(a):oe._chunkSteps(a)}function Hr(e){return e._reader._readIntoRequests.length}function Pr(e){var a=e._reader;return!(a===void 0||!Rt(a))}var Gt=function(){function e(a){if(O(a,1,"ReadableStreamBYOBReader"),le(a,"First parameter"),wt(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!De(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");M(this,a),this._readIntoRequests=new L}return Object.defineProperty(e.prototype,"closed",{get:function(){return Rt(this)?this._closedPromise:p(tr("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(a){return a===void 0&&(a=void 0),Rt(this)?this._ownerReadableStream===void 0?p(Y("cancel")):Q(this,a):p(tr("cancel"))},e.prototype.read=function(a){if(!Rt(this))return p(tr("read"));if(!ArrayBuffer.isView(a))return p(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return p(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return p(new TypeError("view's buffer must have non-zero byteLength"));if(Z(a.buffer),this._ownerReadableStream===void 0)return p(Y("read from"));var x,V,oe=T(function(Se,Re){x=Se,V=Re}),ge={_chunkSteps:function(Se){return x({value:Se,done:!1})},_closeSteps:function(Se){return x({value:Se,done:!0})},_errorSteps:function(Se){return V(Se)}};return Vr(this,a,ge),oe},e.prototype.releaseLock=function(){if(!Rt(this))throw tr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");X(this)}},e}();Object.defineProperties(Gt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Gt.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Rt(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Gt}function Vr(e,a,x){var V=e._ownerReadableStream;V._disturbed=!0,V._state==="errored"?x._errorSteps(V._storedError):mt(V._readableStreamController,a,x)}function tr(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function zt(e,a){var x=e.highWaterMark;if(x===void 0)return a;if(fe(x)||x<0)throw new RangeError("Invalid highWaterMark");return x}function rr(e){var a=e.size;return a||function(){return 1}}function nr(e,a){j(e,a);var x=e?.highWaterMark,V=e?.size;return{highWaterMark:x===void 0?void 0:$(x),size:V===void 0?void 0:Mn(V,a+" has member 'size' that")}}function Mn(e,a){return l(e,a),function(x){return $(e(x))}}function In(e,a){j(e,a);var x=e?.abort,V=e?.close,oe=e?.start,ge=e?.type,Se=e?.write;return{abort:x===void 0?void 0:Dn(x,e,a+" has member 'abort' that"),close:V===void 0?void 0:Ln(V,e,a+" has member 'close' that"),start:oe===void 0?void 0:Nn(oe,e,a+" has member 'start' that"),write:Se===void 0?void 0:Bn(Se,e,a+" has member 'write' that"),type:ge}}function Dn(e,a,x){return l(e,x),function(V){return h(e,a,[V])}}function Ln(e,a,x){return l(e,x),function(){return h(e,a,[])}}function Nn(e,a,x){return l(e,x),function(V){return f(e,a,[V])}}function Bn(e,a,x){return l(e,x),function(V,oe){return h(e,a,[V,oe])}}function Xr(e,a){if(!Mt(e))throw new TypeError(a+" is not a WritableStream.")}function Wn(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}var Un=typeof AbortController=="function";function jn(){if(Un)return new AbortController}var $t=function(){function e(a,x){a===void 0&&(a={}),x===void 0&&(x={}),a===void 0?a=null:w(a,"First parameter");var V=nr(x,"Second parameter"),oe=In(a,"First parameter");qr(this);var ge=oe.type;if(ge!==void 0)throw new RangeError("Invalid type is specified");var Se=rr(V),Re=zt(V,1);ti(this,oe,Re,Se)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!Mt(this))throw lr("locked");return It(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(a){return a===void 0&&(a=void 0),Mt(this)?It(this)?p(new TypeError("Cannot abort a stream that already has a writer")):ir(this,a):p(lr("abort"))},e.prototype.close=function(){return Mt(this)?It(this)?p(new TypeError("Cannot close a stream that already has a writer")):ht(this)?p(new TypeError("Cannot close an already-closing stream")):Kr(this):p(lr("close"))},e.prototype.getWriter=function(){if(!Mt(this))throw lr("getWriter");return Yr(this)},e}();Object.defineProperties($t.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty($t.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function Yr(e){return new Ht(e)}function Gn(e,a,x,V,oe,ge){oe===void 0&&(oe=1),ge===void 0&&(ge=function(){return 1});var Se=Object.create($t.prototype);qr(Se);var Re=Object.create(Dt.prototype);return rn(Se,Re,e,a,x,V,oe,ge),Se}function qr(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new L,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Mt(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof $t}function It(e){return e._writer!==void 0}function ir(e,a){var x;if(e._state==="closed"||e._state==="errored")return F(void 0);e._writableStreamController._abortReason=a,(x=e._writableStreamController._abortController)===null||x===void 0||x.abort();var V=e._state;if(V==="closed"||V==="errored")return F(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;var oe=!1;V==="erroring"&&(oe=!0,a=void 0);var ge=T(function(Se,Re){e._pendingAbortRequest={_promise:void 0,_resolve:Se,_reject:Re,_reason:a,_wasAlreadyErroring:oe}});return e._pendingAbortRequest._promise=ge,oe||Tr(e,a),ge}function Kr(e){var a=e._state;if(a==="closed"||a==="errored")return p(new TypeError("The stream (in "+a+" state) is not in the writable state and cannot be closed"));var x=T(function(oe,ge){var Se={_resolve:oe,_reject:ge};e._closeRequest=Se}),V=e._writer;return V!==void 0&&e._backpressure&&a==="writable"&&Lr(V),ri(e._writableStreamController),x}function zn(e){var a=T(function(x,V){var oe={_resolve:x,_reject:V};e._writeRequests.push(oe)});return a}function Cr(e,a){var x=e._state;if(x==="writable"){Tr(e,a);return}Rr(e)}function Tr(e,a){var x=e._writableStreamController;e._state="erroring",e._storedError=a;var V=e._writer;V!==void 0&&Jr(V,a),!Yn(e)&&x._started&&Rr(e)}function Rr(e){e._state="errored",e._writableStreamController[me]();var a=e._storedError;if(e._writeRequests.forEach(function(oe){oe._reject(a)}),e._writeRequests=new L,e._pendingAbortRequest===void 0){ar(e);return}var x=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,x._wasAlreadyErroring){x._reject(a),ar(e);return}var V=e._writableStreamController[se](x._reason);N(V,function(){x._resolve(),ar(e)},function(oe){x._reject(oe),ar(e)})}function $n(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Hn(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,Cr(e,a)}function Vn(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var a=e._state;a==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var x=e._writer;x!==void 0&&on(x)}function Xn(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),Cr(e,a)}function ht(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Yn(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function qn(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Kn(e){e._inFlightWriteRequest=e._writeRequests.shift()}function ar(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var a=e._writer;a!==void 0&&Ir(a,e._storedError)}function xr(e,a){var x=e._writer;x!==void 0&&a!==e._backpressure&&(a?ci(x):Lr(x)),e._backpressure=a}var Ht=function(){function e(a){if(O(a,1,"WritableStreamDefaultWriter"),Xr(a,"First parameter"),It(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;var x=a._state;if(x==="writable")!ht(a)&&a._backpressure?ur(this):ln(this),cr(this);else if(x==="erroring")Dr(this,a._storedError),cr(this);else if(x==="closed")ln(this),oi(this);else{var V=a._storedError;Dr(this,V),sn(this,V)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return xt(this)?this._closedPromise:p(kt("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!xt(this))throw kt("desiredSize");if(this._ownerWritableStream===void 0)throw Vt("desiredSize");return ei(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return xt(this)?this._readyPromise:p(kt("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(a){return a===void 0&&(a=void 0),xt(this)?this._ownerWritableStream===void 0?p(Vt("abort")):Qn(this,a):p(kt("abort"))},e.prototype.close=function(){if(!xt(this))return p(kt("close"));var a=this._ownerWritableStream;return a===void 0?p(Vt("close")):ht(a)?p(new TypeError("Cannot close an already-closing stream")):Qr(this)},e.prototype.releaseLock=function(){if(!xt(this))throw kt("releaseLock");var a=this._ownerWritableStream;a!==void 0&&Zr(this)},e.prototype.write=function(a){return a===void 0&&(a=void 0),xt(this)?this._ownerWritableStream===void 0?p(Vt("write to")):en(this,a):p(kt("write"))},e}();Object.defineProperties(Ht.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ht.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function xt(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Ht}function Qn(e,a){var x=e._ownerWritableStream;return ir(x,a)}function Qr(e){var a=e._ownerWritableStream;return Kr(a)}function Jn(e){var a=e._ownerWritableStream,x=a._state;return ht(a)||x==="closed"?F(void 0):x==="errored"?p(a._storedError):Qr(e)}function Zn(e,a){e._closedPromiseState==="pending"?Ir(e,a):li(e,a)}function Jr(e,a){e._readyPromiseState==="pending"?cn(e,a):ui(e,a)}function ei(e){var a=e._ownerWritableStream,x=a._state;return x==="errored"||x==="erroring"?null:x==="closed"?0:nn(a._writableStreamController)}function Zr(e){var a=e._ownerWritableStream,x=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Jr(e,x),Zn(e,x),a._writer=void 0,e._ownerWritableStream=void 0}function en(e,a){var x=e._ownerWritableStream,V=x._writableStreamController,oe=ni(V,a);if(x!==e._ownerWritableStream)return p(Vt("write to"));var ge=x._state;if(ge==="errored")return p(x._storedError);if(ht(x)||ge==="closed")return p(new TypeError("The stream is closing or closed and cannot be written to"));if(ge==="erroring")return p(x._storedError);var Se=zn(x);return ii(V,a,oe),Se}var tn={},Dt=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"abortReason",{get:function(){if(!kr(this))throw Mr("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){if(!kr(this))throw Mr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),e.prototype.error=function(a){if(a===void 0&&(a=void 0),!kr(this))throw Mr("error");var x=this._controlledWritableStream._state;x==="writable"&&an(this,a)},e.prototype[se]=function(a){var x=this._abortAlgorithm(a);return sr(this),x},e.prototype[me]=function(){ye(this)},e}();Object.defineProperties(Dt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Dt.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function kr(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Dt}function rn(e,a,x,V,oe,ge,Se,Re){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,ye(a),a._abortReason=void 0,a._abortController=jn(),a._started=!1,a._strategySizeAlgorithm=Re,a._strategyHWM=Se,a._writeAlgorithm=V,a._closeAlgorithm=oe,a._abortAlgorithm=ge;var je=Or(a);xr(e,je);var Ge=x(),He=F(Ge);N(He,function(){a._started=!0,or(a)},function(Ye){a._started=!0,Cr(e,Ye)})}function ti(e,a,x,V){var oe=Object.create(Dt.prototype),ge=function(){},Se=function(){return F(void 0)},Re=function(){return F(void 0)},je=function(){return F(void 0)};a.start!==void 0&&(ge=function(){return a.start(oe)}),a.write!==void 0&&(Se=function(Ge){return a.write(Ge,oe)}),a.close!==void 0&&(Re=function(){return a.close()}),a.abort!==void 0&&(je=function(Ge){return a.abort(Ge)}),rn(e,oe,ge,Se,Re,je,x,V)}function sr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ri(e){de(e,tn,0),or(e)}function ni(e,a){try{return e._strategySizeAlgorithm(a)}catch(x){return Fr(e,x),1}}function nn(e){return e._strategyHWM-e._queueTotalSize}function ii(e,a,x){try{de(e,a,x)}catch(ge){Fr(e,ge);return}var V=e._controlledWritableStream;if(!ht(V)&&V._state==="writable"){var oe=Or(e);xr(V,oe)}or(e)}function or(e){var a=e._controlledWritableStream;if(e._started&&a._inFlightWriteRequest===void 0){var x=a._state;if(x==="erroring"){Rr(a);return}if(e._queue.length!==0){var V=ae(e);V===tn?ai(e):si(e,V)}}}function Fr(e,a){e._controlledWritableStream._state==="writable"&&an(e,a)}function ai(e){var a=e._controlledWritableStream;qn(a),Ne(e);var x=e._closeAlgorithm();sr(e),N(x,function(){Vn(a)},function(V){Xn(a,V)})}function si(e,a){var x=e._controlledWritableStream;Kn(x);var V=e._writeAlgorithm(a);N(V,function(){$n(x);var oe=x._state;if(Ne(e),!ht(x)&&oe==="writable"){var ge=Or(e);xr(x,ge)}or(e)},function(oe){x._state==="writable"&&sr(e),Hn(x,oe)})}function Or(e){var a=nn(e);return a<=0}function an(e,a){var x=e._controlledWritableStream;sr(e),Tr(x,a)}function lr(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function Mr(e){return new TypeError("WritableStreamDefaultController.prototype."+e+" can only be used on a WritableStreamDefaultController")}function kt(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function Vt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function cr(e){e._closedPromise=T(function(a,x){e._closedPromise_resolve=a,e._closedPromise_reject=x,e._closedPromiseState="pending"})}function sn(e,a){cr(e),Ir(e,a)}function oi(e){cr(e),on(e)}function Ir(e,a){e._closedPromise_reject!==void 0&&(n(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function li(e,a){sn(e,a)}function on(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function ur(e){e._readyPromise=T(function(a,x){e._readyPromise_resolve=a,e._readyPromise_reject=x}),e._readyPromiseState="pending"}function Dr(e,a){ur(e),cn(e,a)}function ln(e){ur(e),Lr(e)}function cn(e,a){e._readyPromise_reject!==void 0&&(n(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ci(e){ur(e)}function ui(e,a){Dr(e,a)}function Lr(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}var un=typeof DOMException<"u"?DOMException:void 0;function di(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function hi(){var e=function(x,V){this.message=x||"",this.name=V||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}var fi=di(un)?un:hi();function dn(e,a,x,V,oe,ge){var Se=ie(e),Re=Yr(a);e._disturbed=!0;var je=!1,Ge=F(void 0);return T(function(He,Ye){var it;if(ge!==void 0){if(it=function(){var Ue=new fi("Aborted","AbortError"),Ke=[];V||Ke.push(function(){return a._state==="writable"?ir(a,Ue):F(void 0)}),oe||Ke.push(function(){return e._state==="readable"?ct(e,Ue):F(void 0)}),ot(function(){return Promise.all(Ke.map(function(rt){return rt()}))},!0,Ue)},ge.aborted){it();return}ge.addEventListener("abort",it)}function ut(){return T(function(Ue,Ke){function rt(gt){gt?Ue():k(Bt(),rt,Ke)}rt(!1)})}function Bt(){return je?F(!0):k(Re._readyPromise,function(){return T(function(Ue,Ke){Ae(Se,{_chunkSteps:function(rt){Ge=k(en(Re,rt),void 0,o),Ue(!1)},_closeSteps:function(){return Ue(!0)},_errorSteps:Ke})})})}if(st(e,Se._closedPromise,function(Ue){V?bt(!0,Ue):ot(function(){return ir(a,Ue)},!0,Ue)}),st(a,Re._closedPromise,function(Ue){oe?bt(!0,Ue):ot(function(){return ct(e,Ue)},!0,Ue)}),pt(e,Se._closedPromise,function(){x?bt():ot(function(){return Jn(Re)})}),ht(a)||a._state==="closed"){var Et=new TypeError("the destination writable stream closed before all data could be piped to it");oe?bt(!0,Et):ot(function(){return ct(e,Et)},!0,Et)}n(ut());function ft(){var Ue=Ge;return k(Ge,function(){return Ue!==Ge?ft():void 0})}function st(Ue,Ke,rt){Ue._state==="errored"?rt(Ue._storedError):b(Ke,rt)}function pt(Ue,Ke,rt){Ue._state==="closed"?rt():d(Ke,rt)}function ot(Ue,Ke,rt){if(je)return;je=!0,a._state==="writable"&&!ht(a)?d(ft(),gt):gt();function gt(){N(Ue(),function(){return tt(Ke,rt)},function(Pt){return tt(!0,Pt)})}}function bt(Ue,Ke){je||(je=!0,a._state==="writable"&&!ht(a)?d(ft(),function(){return tt(Ue,Ke)}):tt(Ue,Ke))}function tt(Ue,Ke){Zr(Re),X(Se),ge!==void 0&&ge.removeEventListener("abort",it),Ue?Ye(Ke):He(void 0)}})}var Lt=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!dr(this))throw pr("desiredSize");return Nr(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!dr(this))throw pr("close");if(!Nt(this))throw new TypeError("The stream is not in a state that permits close");Yt(this)},e.prototype.enqueue=function(a){if(a===void 0&&(a=void 0),!dr(this))throw pr("enqueue");if(!Nt(this))throw new TypeError("The stream is not in a state that permits enqueue");return fr(this,a)},e.prototype.error=function(a){if(a===void 0&&(a=void 0),!dr(this))throw pr("error");St(this,a)},e.prototype[Pe]=function(a){ye(this);var x=this._cancelAlgorithm(a);return hr(this),x},e.prototype[H]=function(a){var x=this._controlledReadableStream;if(this._queue.length>0){var V=Ne(this);this._closeRequested&&this._queue.length===0?(hr(this),qt(x)):Xt(this),a._chunkSteps(V)}else ce(x,a),Xt(this)},e}();Object.defineProperties(Lt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function dr(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Lt}function Xt(e){var a=hn(e);if(a){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var x=e._pullAlgorithm();N(x,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Xt(e))},function(V){St(e,V)})}}function hn(e){var a=e._controlledReadableStream;if(!Nt(e)||!e._started)return!1;if(wt(a)&&be(a)>0)return!0;var x=Nr(e);return x>0}function hr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Yt(e){if(Nt(e)){var a=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(hr(e),qt(a))}}function fr(e,a){if(Nt(e)){var x=e._controlledReadableStream;if(wt(x)&&be(x)>0)he(x,a,!1);else{var V=void 0;try{V=e._strategySizeAlgorithm(a)}catch(oe){throw St(e,oe),oe}try{de(e,a,V)}catch(oe){throw St(e,oe),oe}}Xt(e)}}function St(e,a){var x=e._controlledReadableStream;x._state==="readable"&&(ye(e),hr(e),mn(x,a))}function Nr(e){var a=e._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function pi(e){return!hn(e)}function Nt(e){var a=e._controlledReadableStream._state;return!e._closeRequested&&a==="readable"}function fn(e,a,x,V,oe,ge,Se){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,ye(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=Se,a._strategyHWM=ge,a._pullAlgorithm=V,a._cancelAlgorithm=oe,e._readableStreamController=a;var Re=x();N(F(Re),function(){a._started=!0,Xt(a)},function(je){St(a,je)})}function gi(e,a,x,V){var oe=Object.create(Lt.prototype),ge=function(){},Se=function(){return F(void 0)},Re=function(){return F(void 0)};a.start!==void 0&&(ge=function(){return a.start(oe)}),a.pull!==void 0&&(Se=function(){return a.pull(oe)}),a.cancel!==void 0&&(Re=function(je){return a.cancel(je)}),fn(e,oe,ge,Se,Re,x,V)}function pr(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function mi(e,a){return De(e._readableStreamController)?bi(e):vi(e)}function vi(e,a){var x=ie(e),V=!1,oe=!1,ge=!1,Se=!1,Re,je,Ge,He,Ye,it=T(function(st){Ye=st});function ut(){if(V)return oe=!0,F(void 0);V=!0;var st={_chunkSteps:function(pt){s(function(){oe=!1;var ot=pt,bt=pt;ge||fr(Ge._readableStreamController,ot),Se||fr(He._readableStreamController,bt),V=!1,oe&&ut()})},_closeSteps:function(){V=!1,ge||Yt(Ge._readableStreamController),Se||Yt(He._readableStreamController),(!ge||!Se)&&Ye(void 0)},_errorSteps:function(){V=!1}};return Ae(x,st),F(void 0)}function Bt(st){if(ge=!0,Re=st,Se){var pt=Ce([Re,je]),ot=ct(e,pt);Ye(ot)}return it}function Et(st){if(Se=!0,je=st,ge){var pt=Ce([Re,je]),ot=ct(e,pt);Ye(ot)}return it}function ft(){}return Ge=Br(ft,ut,Bt),He=Br(ft,ut,Et),b(x._closedPromise,function(st){St(Ge._readableStreamController,st),St(He._readableStreamController,st),(!ge||!Se)&&Ye(void 0)}),[Ge,He]}function bi(e){var a=ie(e),x=!1,V=!1,oe=!1,ge=!1,Se=!1,Re,je,Ge,He,Ye,it=T(function(tt){Ye=tt});function ut(tt){b(tt._closedPromise,function(Ue){tt===a&&(lt(Ge._readableStreamController,Ue),lt(He._readableStreamController,Ue),(!ge||!Se)&&Ye(void 0))})}function Bt(){Rt(a)&&(X(a),a=ie(e),ut(a));var tt={_chunkSteps:function(Ue){s(function(){V=!1,oe=!1;var Ke=Ue,rt=Ue;if(!ge&&!Se)try{rt=ke(Ue)}catch(gt){lt(Ge._readableStreamController,gt),lt(He._readableStreamController,gt),Ye(ct(e,gt));return}ge||Jt(Ge._readableStreamController,Ke),Se||Jt(He._readableStreamController,rt),x=!1,V?ft():oe&&st()})},_closeSteps:function(){x=!1,ge||Ut(Ge._readableStreamController),Se||Ut(He._readableStreamController),Ge._readableStreamController._pendingPullIntos.length>0&&Zt(Ge._readableStreamController,0),He._readableStreamController._pendingPullIntos.length>0&&Zt(He._readableStreamController,0),(!ge||!Se)&&Ye(void 0)},_errorSteps:function(){x=!1}};Ae(a,tt)}function Et(tt,Ue){xe(a)&&(X(a),a=zr(e),ut(a));var Ke=Ue?He:Ge,rt=Ue?Ge:He,gt={_chunkSteps:function(Pt){s(function(){V=!1,oe=!1;var Wt=Ue?Se:ge,Qt=Ue?ge:Se;if(Qt)Wt||er(Ke._readableStreamController,Pt);else{var xn=void 0;try{xn=ke(Pt)}catch(Ur){lt(Ke._readableStreamController,Ur),lt(rt._readableStreamController,Ur),Ye(ct(e,Ur));return}Wt||er(Ke._readableStreamController,Pt),Jt(rt._readableStreamController,xn)}x=!1,V?ft():oe&&st()})},_closeSteps:function(Pt){x=!1;var Wt=Ue?Se:ge,Qt=Ue?ge:Se;Wt||Ut(Ke._readableStreamController),Qt||Ut(rt._readableStreamController),Pt!==void 0&&(Wt||er(Ke._readableStreamController,Pt),!Qt&&rt._readableStreamController._pendingPullIntos.length>0&&Zt(rt._readableStreamController,0)),(!Wt||!Qt)&&Ye(void 0)},_errorSteps:function(){x=!1}};Vr(a,tt,gt)}function ft(){if(x)return V=!0,F(void 0);x=!0;var tt=wr(Ge._readableStreamController);return tt===null?Bt():Et(tt._view,!1),F(void 0)}function st(){if(x)return oe=!0,F(void 0);x=!0;var tt=wr(He._readableStreamController);return tt===null?Bt():Et(tt._view,!0),F(void 0)}function pt(tt){if(ge=!0,Re=tt,Se){var Ue=Ce([Re,je]),Ke=ct(e,Ue);Ye(Ke)}return it}function ot(tt){if(Se=!0,je=tt,ge){var Ue=Ce([Re,je]),Ke=ct(e,Ue);Ye(Ke)}return it}function bt(){}return Ge=gn(bt,ft,pt),He=gn(bt,st,ot),ut(a),[Ge,He]}function yi(e,a){j(e,a);var x=e,V=x?.autoAllocateChunkSize,oe=x?.cancel,ge=x?.pull,Se=x?.start,Re=x?.type;return{autoAllocateChunkSize:V===void 0?void 0:ne(V,a+" has member 'autoAllocateChunkSize' that"),cancel:oe===void 0?void 0:Si(oe,x,a+" has member 'cancel' that"),pull:ge===void 0?void 0:Ai(ge,x,a+" has member 'pull' that"),start:Se===void 0?void 0:_i(Se,x,a+" has member 'start' that"),type:Re===void 0?void 0:wi(Re,a+" has member 'type' that")}}function Si(e,a,x){return l(e,x),function(V){return h(e,a,[V])}}function Ai(e,a,x){return l(e,x),function(V){return h(e,a,[V])}}function _i(e,a,x){return l(e,x),function(V){return f(e,a,[V])}}function wi(e,a){if(e=""+e,e!=="bytes")throw new TypeError(a+" '"+e+"' is not a valid enumeration value for ReadableStreamType");return e}function Ei(e,a){j(e,a);var x=e?.mode;return{mode:x===void 0?void 0:Pi(x,a+" has member 'mode' that")}}function Pi(e,a){if(e=""+e,e!=="byob")throw new TypeError(a+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode");return e}function Ci(e,a){j(e,a);var x=e?.preventCancel;return{preventCancel:!!x}}function pn(e,a){j(e,a);var x=e?.preventAbort,V=e?.preventCancel,oe=e?.preventClose,ge=e?.signal;return ge!==void 0&&Ti(ge,a+" has member 'signal' that"),{preventAbort:!!x,preventCancel:!!V,preventClose:!!oe,signal:ge}}function Ti(e,a){if(!Wn(e))throw new TypeError(a+" is not an AbortSignal.")}function Ri(e,a){j(e,a);var x=e?.readable;B(x,"readable","ReadableWritablePair"),le(x,a+" has member 'readable' that");var V=e?.writable;return B(V,"writable","ReadableWritablePair"),Xr(V,a+" has member 'writable' that"),{readable:x,writable:V}}var At=function(){function e(a,x){a===void 0&&(a={}),x===void 0&&(x={}),a===void 0?a=null:w(a,"First parameter");var V=nr(x,"Second parameter"),oe=yi(a,"First parameter");if(Wr(this),oe.type==="bytes"){if(V.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var ge=zt(V,0);kn(this,oe,ge)}else{var Se=rr(V),ge=zt(V,1);gi(this,oe,ge,Se)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!_t(this))throw Ft("locked");return wt(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(a){return a===void 0&&(a=void 0),_t(this)?wt(this)?p(new TypeError("Cannot cancel a stream that already has a reader")):ct(this,a):p(Ft("cancel"))},e.prototype.getReader=function(a){if(a===void 0&&(a=void 0),!_t(this))throw Ft("getReader");var x=Ei(a,"First parameter");return x.mode===void 0?ie(this):zr(this)},e.prototype.pipeThrough=function(a,x){if(x===void 0&&(x={}),!_t(this))throw Ft("pipeThrough");O(a,1,"pipeThrough");var V=Ri(a,"First parameter"),oe=pn(x,"Second parameter");if(wt(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(It(V.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var ge=dn(this,V.writable,oe.preventClose,oe.preventAbort,oe.preventCancel,oe.signal);return n(ge),V.readable},e.prototype.pipeTo=function(a,x){if(x===void 0&&(x={}),!_t(this))return p(Ft("pipeTo"));if(a===void 0)return p("Parameter 1 is required in 'pipeTo'.");if(!Mt(a))return p(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var V;try{V=pn(x,"Second parameter")}catch(oe){return p(oe)}return wt(this)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):It(a)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):dn(this,a,V.preventClose,V.preventAbort,V.preventCancel,V.signal)},e.prototype.tee=function(){if(!_t(this))throw Ft("tee");var a=mi(this);return Ce(a)},e.prototype.values=function(a){if(a===void 0&&(a=void 0),!_t(this))throw Ft("values");var x=Ci(a,"First parameter");return ve(this,x.preventCancel)},e}();Object.defineProperties(At.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(At.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(At.prototype,r.asyncIterator,{value:At.prototype.values,writable:!0,configurable:!0});function Br(e,a,x,V,oe){V===void 0&&(V=1),oe===void 0&&(oe=function(){return 1});var ge=Object.create(At.prototype);Wr(ge);var Se=Object.create(Lt.prototype);return fn(ge,Se,e,a,x,V,oe),ge}function gn(e,a,x){var V=Object.create(At.prototype);Wr(V);var oe=Object.create(Ie.prototype);return Gr(V,oe,e,a,x,0,void 0),V}function Wr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function _t(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof At}function wt(e){return e._reader!==void 0}function ct(e,a){if(e._disturbed=!0,e._state==="closed")return F(void 0);if(e._state==="errored")return p(e._storedError);qt(e);var x=e._reader;x!==void 0&&Rt(x)&&(x._readIntoRequests.forEach(function(oe){oe._closeSteps(void 0)}),x._readIntoRequests=new L);var V=e._readableStreamController[Pe](a);return c(V,o)}function qt(e){e._state="closed";var a=e._reader;a!==void 0&&(K(a),xe(a)&&(a._readRequests.forEach(function(x){x._closeSteps()}),a._readRequests=new L))}function mn(e,a){e._state="errored",e._storedError=a;var x=e._reader;x!==void 0&&(W(x,a),xe(x)?(x._readRequests.forEach(function(V){V._errorSteps(a)}),x._readRequests=new L):(x._readIntoRequests.forEach(function(V){V._errorSteps(a)}),x._readIntoRequests=new L))}function Ft(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function vn(e,a){j(e,a);var x=e?.highWaterMark;return B(x,"highWaterMark","QueuingStrategyInit"),{highWaterMark:$(x)}}var bn=function(e){return e.byteLength};try{Object.defineProperty(bn,"name",{value:"size",configurable:!0})}catch{}var gr=function(){function e(a){O(a,1,"ByteLengthQueuingStrategy"),a=vn(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Sn(this))throw yn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Sn(this))throw yn("size");return bn},enumerable:!1,configurable:!0}),e}();Object.defineProperties(gr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(gr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function yn(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function Sn(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof gr}var An=function(){return 1};try{Object.defineProperty(An,"name",{value:"size",configurable:!0})}catch{}var mr=function(){function e(a){O(a,1,"CountQueuingStrategy"),a=vn(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!wn(this))throw _n("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!wn(this))throw _n("size");return An},enumerable:!1,configurable:!0}),e}();Object.defineProperties(mr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(mr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function _n(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function wn(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof mr}function xi(e,a){j(e,a);var x=e?.flush,V=e?.readableType,oe=e?.start,ge=e?.transform,Se=e?.writableType;return{flush:x===void 0?void 0:ki(x,e,a+" has member 'flush' that"),readableType:V,start:oe===void 0?void 0:Fi(oe,e,a+" has member 'start' that"),transform:ge===void 0?void 0:Oi(ge,e,a+" has member 'transform' that"),writableType:Se}}function ki(e,a,x){return l(e,x),function(V){return h(e,a,[V])}}function Fi(e,a,x){return l(e,x),function(V){return f(e,a,[V])}}function Oi(e,a,x){return l(e,x),function(V,oe){return h(e,a,[V,oe])}}var vr=function(){function e(a,x,V){a===void 0&&(a={}),x===void 0&&(x={}),V===void 0&&(V={}),a===void 0&&(a=null);var oe=nr(x,"Second parameter"),ge=nr(V,"Third parameter"),Se=xi(a,"First parameter");if(Se.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(Se.writableType!==void 0)throw new RangeError("Invalid writableType specified");var Re=zt(ge,0),je=rr(ge),Ge=zt(oe,1),He=rr(oe),Ye,it=T(function(ut){Ye=ut});Mi(this,it,Ge,He,Re,je),Di(this,Se),Se.start!==void 0?Ye(Se.start(this._transformStreamController)):Ye(void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!En(this))throw Rn("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!En(this))throw Rn("writable");return this._writable},enumerable:!1,configurable:!0}),e}();Object.defineProperties(vr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(vr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function Mi(e,a,x,V,oe,ge){function Se(){return a}function Re(it){return Bi(e,it)}function je(it){return Wi(e,it)}function Ge(){return Ui(e)}e._writable=Gn(Se,Re,Ge,je,x,V);function He(){return ji(e)}function Ye(it){return yr(e,it),F(void 0)}e._readable=Br(Se,He,Ye,oe,ge),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Sr(e,!0),e._transformStreamController=void 0}function En(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof vr}function br(e,a){St(e._readable._readableStreamController,a),yr(e,a)}function yr(e,a){Pn(e._transformStreamController),Fr(e._writable._writableStreamController,a),e._backpressure&&Sr(e,!1)}function Sr(e,a){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(function(x){e._backpressureChangePromise_resolve=x}),e._backpressure=a}var Kt=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Ar(this))throw _r("desiredSize");var a=this._controlledTransformStream._readable._readableStreamController;return Nr(a)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(a){if(a===void 0&&(a=void 0),!Ar(this))throw _r("enqueue");Cn(this,a)},e.prototype.error=function(a){if(a===void 0&&(a=void 0),!Ar(this))throw _r("error");Li(this,a)},e.prototype.terminate=function(){if(!Ar(this))throw _r("terminate");Ni(this)},e}();Object.defineProperties(Kt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Kt.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Ar(e){return!_(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Kt}function Ii(e,a,x,V){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=x,a._flushAlgorithm=V}function Di(e,a){var x=Object.create(Kt.prototype),V=function(ge){try{return Cn(x,ge),F(void 0)}catch(Se){return p(Se)}},oe=function(){return F(void 0)};a.transform!==void 0&&(V=function(ge){return a.transform(ge,x)}),a.flush!==void 0&&(oe=function(){return a.flush(x)}),Ii(e,x,V,oe)}function Pn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Cn(e,a){var x=e._controlledTransformStream,V=x._readable._readableStreamController;if(!Nt(V))throw new TypeError("Readable side is not in a state that permits enqueue");try{fr(V,a)}catch(ge){throw yr(x,ge),x._readable._storedError}var oe=pi(V);oe!==x._backpressure&&Sr(x,!0)}function Li(e,a){br(e._controlledTransformStream,a)}function Tn(e,a){var x=e._transformAlgorithm(a);return c(x,void 0,function(V){throw br(e._controlledTransformStream,V),V})}function Ni(e){var a=e._controlledTransformStream,x=a._readable._readableStreamController;Yt(x);var V=new TypeError("TransformStream terminated");yr(a,V)}function Bi(e,a){var x=e._transformStreamController;if(e._backpressure){var V=e._backpressureChangePromise;return c(V,function(){var oe=e._writable,ge=oe._state;if(ge==="erroring")throw oe._storedError;return Tn(x,a)})}return Tn(x,a)}function Wi(e,a){return br(e,a),F(void 0)}function Ui(e){var a=e._readable,x=e._transformStreamController,V=x._flushAlgorithm();return Pn(x),c(V,function(){if(a._state==="errored")throw a._storedError;Yt(a._readableStreamController)},function(oe){throw br(e,oe),a._storedError})}function ji(e){return Sr(e,!1),e._backpressureChangePromise}function _r(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function Rn(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=gr,t.CountQueuingStrategy=mr,t.ReadableByteStreamController=Ie,t.ReadableStream=At,t.ReadableStreamBYOBReader=Gt,t.ReadableStreamBYOBRequest=Te,t.ReadableStreamDefaultController=Lt,t.ReadableStreamDefaultReader=we,t.TransformStream=vr,t.TransformStreamDefaultController=Kt,t.WritableStream=$t,t.WritableStreamDefaultController=Dt,t.WritableStreamDefaultWriter=Ht,Object.defineProperty(t,"__esModule",{value:!0})})}(ponyfill,ponyfillExports)),ponyfillExports}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$7=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(i,t){module.exports=t()})(globalThis,()=>(()=>{var __webpack_modules__=[,(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.UNSUPPORTED_FEATURES=i.TextRenderingMode=i.StreamType=i.RenderingIntentFlag=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FontType=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.AnnotationType=i.AnnotationStateModelType=i.AnnotationReviewState=i.AnnotationReplyType=i.AnnotationMode=i.AnnotationMarkedState=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.arrayByteLength=ne,i.arraysToBytes=le,i.assert=Pe,i.bytesToString=J,i.createPromiseCapability=Le,i.createValidAbsoluteUrl=A,i.escapeString=Oe,i.getModificationDate=Ce,i.getVerbosityLevel=D,i.info=K,i.isArrayBuffer=qe,i.isArrayEqual=fe,i.isAscii=Ee,i.objectFromMap=he,i.objectSize=ce,i.setVerbosityLevel=W,i.shadow=E,i.string32=ie,i.stringToBytes=ee,i.stringToPDFString=Xe,i.stringToUTF16BEString=re,i.stringToUTF8String=ve,i.unreachable=me,i.utf8StringToString=Me,i.warn=se,t(2);const r=[1,0,0,1,0,0];i.IDENTITY_MATRIX=r;const o=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=o;const g=1.35;i.LINE_FACTOR=g;const S=.35;i.LINE_DESCENT_FACTOR=S;const _={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=_;const P={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=P;const y="pdfjs_internal_editor_";i.AnnotationEditorPrefix=y;const m={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};i.AnnotationEditorType=m;const I={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};i.AnnotationEditorParamsType=I;const u={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=u;const T={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=T;const F={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=F;const p={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=p;const k={MARKED:"Marked",REVIEW:"Review"};i.AnnotationStateModelType=k;const N={MARKED:"Marked",UNMARKED:"Unmarked"};i.AnnotationMarkedState=N;const d={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};i.AnnotationReviewState=d;const b={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=b;const c={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=c;const n={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=n;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=s;const f={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=f;const h={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=h;const C={O:"PageOpen",C:"PageClose"};i.PageActionEventType=C;const L={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};i.StreamType=L;const M={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};i.FontType=M;const Q={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=Q;const X={NONE:0,BINARY:1,STREAM:2};i.CMapCompressionType=X;const Y={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=Y;const q={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};i.UNSUPPORTED_FEATURES=q;const z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=z;let U=Q.WARNINGS;function W(ue){Number.isInteger(ue)&&(U=ue)}function D(){return U}function K(ue){U>=Q.INFOS&&console.log(`Info: ${ue}`)}function se(ue){U>=Q.WARNINGS&&console.log(`Warning: ${ue}`)}function me(ue){throw new Error(ue)}function Pe(ue,Z){ue||me(Z)}function H(ue){if(!ue)return!1;switch(ue.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function A(ue){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!ue)return null;try{if(te&&typeof ue=="string"){if(te.addDefaultProtocol&&ue.startsWith("www.")){const ke=ue.match(/\./g);ke&&ke.length>=2&&(ue=`http://${ue}`)}if(te.tryConvertEncoding)try{ue=ve(ue)}catch{}}const pe=Z?new URL(ue,Z):new URL(ue);if(H(pe))return pe}catch{}return null}function E(ue,Z,te){return Object.defineProperty(ue,Z,{value:te,enumerable:!0,configurable:!0,writable:!1}),te}const G=function(){function Z(te,pe){this.constructor===Z&&me("Cannot initialize BaseException."),this.message=te,this.name=pe}return Z.prototype=new Error,Z.constructor=Z,Z}();i.BaseException=G;class j extends G{constructor(Z,te){super(Z,"PasswordException"),this.code=te}}i.PasswordException=j;class l extends G{constructor(Z,te){super(Z,"UnknownErrorException"),this.details=te}}i.UnknownErrorException=l;class v extends G{constructor(Z){super(Z,"InvalidPDFException")}}i.InvalidPDFException=v;class w extends G{constructor(Z){super(Z,"MissingPDFException")}}i.MissingPDFException=w;class O extends G{constructor(Z,te){super(Z,"UnexpectedResponseException"),this.status=te}}i.UnexpectedResponseException=O;class B extends G{constructor(Z){super(Z,"FormatError")}}i.FormatError=B;class $ extends G{constructor(Z){super(Z,"AbortException")}}i.AbortException=$;function J(ue){(typeof ue!="object"||ue===null||ue.length===void 0)&&me("Invalid argument for bytesToString");const Z=ue.length,te=8192;if(Z<te)return String.fromCharCode.apply(null,ue);const pe=[];for(let ke=0;ke<Z;ke+=te){const Ne=Math.min(ke+te,Z),de=ue.subarray(ke,Ne);pe.push(String.fromCharCode.apply(null,de))}return pe.join("")}function ee(ue){typeof ue!="string"&&me("Invalid argument for stringToBytes");const Z=ue.length,te=new Uint8Array(Z);for(let pe=0;pe<Z;++pe)te[pe]=ue.charCodeAt(pe)&255;return te}function ne(ue){if(ue.length!==void 0)return ue.length;if(ue.byteLength!==void 0)return ue.byteLength;me("Invalid argument for arrayByteLength")}function le(ue){const Z=ue.length;if(Z===1&&ue[0]instanceof Uint8Array)return ue[0];let te=0;for(let Ne=0;Ne<Z;Ne++)te+=ne(ue[Ne]);let pe=0;const ke=new Uint8Array(te);for(let Ne=0;Ne<Z;Ne++){let de=ue[Ne];de instanceof Uint8Array||(typeof de=="string"?de=ee(de):de=new Uint8Array(de));const ae=de.byteLength;ke.set(de,pe),pe+=ae}return ke}function ie(ue){return String.fromCharCode(ue>>24&255,ue>>16&255,ue>>8&255,ue&255)}function ce(ue){return Object.keys(ue).length}function he(ue){const Z=Object.create(null);for(const[te,pe]of ue)Z[te]=pe;return Z}function be(){const ue=new Uint8Array(4);return ue[0]=1,new Uint32Array(ue.buffer,0,1)[0]===1}function _e(){try{return new Function(""),!0}catch{return!1}}class we{static get isLittleEndian(){return E(this,"isLittleEndian",be())}static get isEvalSupported(){return E(this,"isEvalSupported",_e())}static get isOffscreenCanvasSupported(){return E(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}i.FeatureTest=we;const xe=[...Array(256).keys()].map(ue=>ue.toString(16).padStart(2,"0"));class Ae{static makeHexColor(Z,te,pe){return`#${xe[Z]}${xe[te]}${xe[pe]}`}static scaleMinMax(Z,te){let pe;Z[0]?(Z[0]<0&&(pe=te[0],te[0]=te[1],te[1]=pe),te[0]*=Z[0],te[1]*=Z[0],Z[3]<0&&(pe=te[2],te[2]=te[3],te[3]=pe),te[2]*=Z[3],te[3]*=Z[3]):(pe=te[0],te[0]=te[2],te[2]=pe,pe=te[1],te[1]=te[3],te[3]=pe,Z[1]<0&&(pe=te[2],te[2]=te[3],te[3]=pe),te[2]*=Z[1],te[3]*=Z[1],Z[2]<0&&(pe=te[0],te[0]=te[1],te[1]=pe),te[0]*=Z[2],te[1]*=Z[2]),te[0]+=Z[4],te[1]+=Z[4],te[2]+=Z[5],te[3]+=Z[5]}static transform(Z,te){return[Z[0]*te[0]+Z[2]*te[1],Z[1]*te[0]+Z[3]*te[1],Z[0]*te[2]+Z[2]*te[3],Z[1]*te[2]+Z[3]*te[3],Z[0]*te[4]+Z[2]*te[5]+Z[4],Z[1]*te[4]+Z[3]*te[5]+Z[5]]}static applyTransform(Z,te){const pe=Z[0]*te[0]+Z[1]*te[2]+te[4],ke=Z[0]*te[1]+Z[1]*te[3]+te[5];return[pe,ke]}static applyInverseTransform(Z,te){const pe=te[0]*te[3]-te[1]*te[2],ke=(Z[0]*te[3]-Z[1]*te[2]+te[2]*te[5]-te[4]*te[3])/pe,Ne=(-Z[0]*te[1]+Z[1]*te[0]+te[4]*te[1]-te[5]*te[0])/pe;return[ke,Ne]}static getAxialAlignedBoundingBox(Z,te){const pe=Ae.applyTransform(Z,te),ke=Ae.applyTransform(Z.slice(2,4),te),Ne=Ae.applyTransform([Z[0],Z[3]],te),de=Ae.applyTransform([Z[2],Z[1]],te);return[Math.min(pe[0],ke[0],Ne[0],de[0]),Math.min(pe[1],ke[1],Ne[1],de[1]),Math.max(pe[0],ke[0],Ne[0],de[0]),Math.max(pe[1],ke[1],Ne[1],de[1])]}static inverseTransform(Z){const te=Z[0]*Z[3]-Z[1]*Z[2];return[Z[3]/te,-Z[1]/te,-Z[2]/te,Z[0]/te,(Z[2]*Z[5]-Z[4]*Z[3])/te,(Z[4]*Z[1]-Z[5]*Z[0])/te]}static apply3dTransform(Z,te){return[Z[0]*te[0]+Z[1]*te[1]+Z[2]*te[2],Z[3]*te[0]+Z[4]*te[1]+Z[5]*te[2],Z[6]*te[0]+Z[7]*te[1]+Z[8]*te[2]]}static singularValueDecompose2dScale(Z){const te=[Z[0],Z[2],Z[1],Z[3]],pe=Z[0]*te[0]+Z[1]*te[2],ke=Z[0]*te[1]+Z[1]*te[3],Ne=Z[2]*te[0]+Z[3]*te[2],de=Z[2]*te[1]+Z[3]*te[3],ae=(pe+de)/2,ye=Math.sqrt((pe+de)**2-4*(pe*de-Ne*ke))/2,Te=ae+ye||1,Ie=ae-ye||1;return[Math.sqrt(Te),Math.sqrt(Ie)]}static normalizeRect(Z){const te=Z.slice(0);return Z[0]>Z[2]&&(te[0]=Z[2],te[2]=Z[0]),Z[1]>Z[3]&&(te[1]=Z[3],te[3]=Z[1]),te}static intersect(Z,te){const pe=Math.max(Math.min(Z[0],Z[2]),Math.min(te[0],te[2])),ke=Math.min(Math.max(Z[0],Z[2]),Math.max(te[0],te[2]));if(pe>ke)return null;const Ne=Math.max(Math.min(Z[1],Z[3]),Math.min(te[1],te[3])),de=Math.min(Math.max(Z[1],Z[3]),Math.max(te[1],te[3]));return Ne>de?null:[pe,Ne,ke,de]}static bezierBoundingBox(Z,te,pe,ke,Ne,de,ae,ye){const Te=[],Ie=[[],[]];let De,Be,We,Fe,Ve,et,ze,Qe;for(let Ze=0;Ze<2;++Ze){if(Ze===0?(Be=6*Z-12*pe+6*Ne,De=-3*Z+9*pe-9*Ne+3*ae,We=3*pe-3*Z):(Be=6*te-12*ke+6*de,De=-3*te+9*ke-9*de+3*ye,We=3*ke-3*te),Math.abs(De)<1e-12){if(Math.abs(Be)<1e-12)continue;Fe=-We/Be,0<Fe&&Fe<1&&Te.push(Fe);continue}ze=Be*Be-4*We*De,Qe=Math.sqrt(ze),!(ze<0)&&(Ve=(-Be+Qe)/(2*De),0<Ve&&Ve<1&&Te.push(Ve),et=(-Be-Qe)/(2*De),0<et&&et<1&&Te.push(et))}let nt=Te.length,Je;const at=nt;for(;nt--;)Fe=Te[nt],Je=1-Fe,Ie[0][nt]=Je*Je*Je*Z+3*Je*Je*Fe*pe+3*Je*Fe*Fe*Ne+Fe*Fe*Fe*ae,Ie[1][nt]=Je*Je*Je*te+3*Je*Je*Fe*ke+3*Je*Fe*Fe*de+Fe*Fe*Fe*ye;return Ie[0][at]=Z,Ie[1][at]=te,Ie[0][at+1]=ae,Ie[1][at+1]=ye,Ie[0].length=Ie[1].length=at+2,[Math.min(...Ie[0]),Math.min(...Ie[1]),Math.max(...Ie[0]),Math.max(...Ie[1])]}}i.Util=Ae;const $e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Xe(ue){if(ue[0]>="Ã¯"){let te;if(ue[0]==="Ã¾"&&ue[1]==="Ã¿"?te="utf-16be":ue[0]==="Ã¿"&&ue[1]==="Ã¾"?te="utf-16le":ue[0]==="Ã¯"&&ue[1]==="Â»"&&ue[2]==="Â¿"&&(te="utf-8"),te)try{const pe=new TextDecoder(te,{fatal:!0}),ke=ee(ue);return pe.decode(ke)}catch(pe){se(`stringToPDFString: "${pe}".`)}}const Z=[];for(let te=0,pe=ue.length;te<pe;te++){const ke=$e[ue.charCodeAt(te)];Z.push(ke?String.fromCharCode(ke):ue.charAt(te))}return Z.join("")}function Oe(ue){return ue.replace(/([()\\\n\r])/g,Z=>Z===`
`?"\\n":Z==="\r"?"\\r":`\\${Z}`)}function Ee(ue){return/^[\x00-\x7F]*$/.test(ue)}function re(ue){const Z=["Ã¾Ã¿"];for(let te=0,pe=ue.length;te<pe;te++){const ke=ue.charCodeAt(te);Z.push(String.fromCharCode(ke>>8&255),String.fromCharCode(ke&255))}return Z.join("")}function ve(ue){return decodeURIComponent(escape(ue))}function Me(ue){return unescape(encodeURIComponent(ue))}function qe(ue){return typeof ue=="object"&&ue!==null&&ue.byteLength!==void 0}function fe(ue,Z){if(ue.length!==Z.length)return!1;for(let te=0,pe=ue.length;te<pe;te++)if(ue[te]!==Z[te])return!1;return!0}function Ce(){let ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[ue.getUTCFullYear().toString(),(ue.getUTCMonth()+1).toString().padStart(2,"0"),ue.getUTCDate().toString().padStart(2,"0"),ue.getUTCHours().toString().padStart(2,"0"),ue.getUTCMinutes().toString().padStart(2,"0"),ue.getUTCSeconds().toString().padStart(2,"0")].join("")}function Le(){const ue=Object.create(null);let Z=!1;return Object.defineProperty(ue,"settled",{get(){return Z}}),ue.promise=new Promise(function(te,pe){ue.resolve=function(ke){Z=!0,te(ke)},ue.reject=function(ke){Z=!0,pe(ke)}}),ue}},(R,i,t)=>{var r=t(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,function(){globalThis.btoa||!r.isNodeJS||(globalThis.btoa=function(g){return Buffer.from(g,"binary").toString("base64")})}(),function(){globalThis.atob||!r.isNodeJS||(globalThis.atob=function(g){return Buffer.from(g,"base64").toString("binary")})}(),function(){globalThis.DOMMatrix||!r.isNodeJS||(globalThis.DOMMatrix=requireDommatrix())}(),function(){globalThis.ReadableStream||!r.isNodeJS||(globalThis.ReadableStream=requirePonyfill().ReadableStream)}(),function(){Array.prototype.at||t(4)}(),function(){Uint8Array.prototype.at||t(76)}(),function(){globalThis.structuredClone||t(86)}())},(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isNodeJS=void 0;const t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");i.isNodeJS=t},(R,i,t)=>{t(5);var r=t(75);R.exports=r("Array","at")},(R,i,t)=>{var r=t(6),o=t(41),g=t(65),S=t(63),_=t(70);r({target:"Array",proto:!0},{at:function(y){var m=o(this),I=g(m),u=S(y),T=u>=0?u:I+u;return T<0||T>=I?void 0:m[T]}}),_("at")},(R,i,t)=>{var r=t(7),o=t(8).f,g=t(45),S=t(49),_=t(39),P=t(57),y=t(69);R.exports=function(m,I){var u=m.target,T=m.global,F=m.stat,p,k,N,d,b,c;if(T?k=r:F?k=r[u]||_(u,{}):k=(r[u]||{}).prototype,k)for(N in I){if(b=I[N],m.dontCallGetSet?(c=o(k,N),d=c&&c.value):d=k[N],p=y(T?N:u+(F?".":"#")+N,m.forced),!p&&d!==void 0){if(typeof b==typeof d)continue;P(b,d)}(m.sham||d&&d.sham)&&g(b,"sham",!0),S(k,N,b,m)}}},R=>{var i=function(t){return t&&t.Math==Math&&t};R.exports=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},(R,i,t)=>{var r=t(9),o=t(11),g=t(13),S=t(14),_=t(15),P=t(20),y=t(40),m=t(43),I=Object.getOwnPropertyDescriptor;i.f=r?I:function(T,F){if(T=_(T),F=P(F),m)try{return I(T,F)}catch{}if(y(T,F))return S(!o(g.f,T,F),T[F])}},(R,i,t)=>{var r=t(10);R.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},R=>{R.exports=function(i){try{return!!i()}catch{return!0}}},(R,i,t)=>{var r=t(12),o=Function.prototype.call;R.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},(R,i,t)=>{var r=t(10);R.exports=!r(function(){var o=function(){}.bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},(R,i)=>{var t={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!t.call({1:2},1);i.f=o?function(S){var _=r(this,S);return!!_&&_.enumerable}:t},R=>{R.exports=function(i,t){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:t}}},(R,i,t)=>{var r=t(16),o=t(19);R.exports=function(g){return r(o(g))}},(R,i,t)=>{var r=t(17),o=t(10),g=t(18),S=Object,_=r("".split);R.exports=o(function(){return!S("z").propertyIsEnumerable(0)})?function(P){return g(P)=="String"?_(P,""):S(P)}:S},(R,i,t)=>{var r=t(12),o=Function.prototype,g=o.bind,S=o.call,_=r&&g.bind(S,S);R.exports=r?function(P){return P&&_(P)}:function(P){return P&&function(){return S.apply(P,arguments)}}},(R,i,t)=>{var r=t(17),o=r({}.toString),g=r("".slice);R.exports=function(S){return g(o(S),8,-1)}},R=>{var i=TypeError;R.exports=function(t){if(t==null)throw i("Can't call method on "+t);return t}},(R,i,t)=>{var r=t(21),o=t(24);R.exports=function(g){var S=r(g,"string");return o(S)?S:S+""}},(R,i,t)=>{var r=t(11),o=t(22),g=t(24),S=t(31),_=t(34),P=t(35),y=TypeError,m=P("toPrimitive");R.exports=function(I,u){if(!o(I)||g(I))return I;var T=S(I,m),F;if(T){if(u===void 0&&(u="default"),F=r(T,I,u),!o(F)||g(F))return F;throw y("Can't convert object to primitive value")}return u===void 0&&(u="number"),_(I,u)}},(R,i,t)=>{var r=t(23);R.exports=function(o){return typeof o=="object"?o!==null:r(o)}},R=>{R.exports=function(i){return typeof i=="function"}},(R,i,t)=>{var r=t(25),o=t(23),g=t(26),S=t(27),_=Object;R.exports=S?function(P){return typeof P=="symbol"}:function(P){var y=r("Symbol");return o(y)&&g(y.prototype,_(P))}},(R,i,t)=>{var r=t(7),o=t(23),g=function(S){return o(S)?S:void 0};R.exports=function(S,_){return arguments.length<2?g(r[S]):r[S]&&r[S][_]}},(R,i,t)=>{var r=t(17);R.exports=r({}.isPrototypeOf)},(R,i,t)=>{var r=t(28);R.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(R,i,t)=>{var r=t(29),o=t(10);R.exports=!!Object.getOwnPropertySymbols&&!o(function(){var g=Symbol();return!String(g)||!(Object(g)instanceof Symbol)||!Symbol.sham&&r&&r<41})},(R,i,t)=>{var r=t(7),o=t(30),g=r.process,S=r.Deno,_=g&&g.versions||S&&S.version,P=_&&_.v8,y,m;P&&(y=P.split("."),m=y[0]>0&&y[0]<4?1:+(y[0]+y[1])),!m&&o&&(y=o.match(/Edge\/(\d+)/),(!y||y[1]>=74)&&(y=o.match(/Chrome\/(\d+)/),y&&(m=+y[1]))),R.exports=m},(R,i,t)=>{var r=t(25);R.exports=r("navigator","userAgent")||""},(R,i,t)=>{var r=t(32);R.exports=function(o,g){var S=o[g];return S==null?void 0:r(S)}},(R,i,t)=>{var r=t(23),o=t(33),g=TypeError;R.exports=function(S){if(r(S))return S;throw g(o(S)+" is not a function")}},R=>{var i=String;R.exports=function(t){try{return i(t)}catch{return"Object"}}},(R,i,t)=>{var r=t(11),o=t(23),g=t(22),S=TypeError;R.exports=function(_,P){var y,m;if(P==="string"&&o(y=_.toString)&&!g(m=r(y,_))||o(y=_.valueOf)&&!g(m=r(y,_))||P!=="string"&&o(y=_.toString)&&!g(m=r(y,_)))return m;throw S("Can't convert object to primitive value")}},(R,i,t)=>{var r=t(7),o=t(36),g=t(40),S=t(42),_=t(28),P=t(27),y=o("wks"),m=r.Symbol,I=m&&m.for,u=P?m:m&&m.withoutSetter||S;R.exports=function(T){if(!g(y,T)||!(_||typeof y[T]=="string")){var F="Symbol."+T;_&&g(m,T)?y[T]=m[T]:P&&I?y[T]=I(F):y[T]=u(F)}return y[T]}},(R,i,t)=>{var r=t(37),o=t(38);(R.exports=function(g,S){return o[g]||(o[g]=S!==void 0?S:{})})("versions",[]).push({version:"3.24.1",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},R=>{R.exports=!1},(R,i,t)=>{var r=t(7),o=t(39),g="__core-js_shared__",S=r[g]||o(g,{});R.exports=S},(R,i,t)=>{var r=t(7),o=Object.defineProperty;R.exports=function(g,S){try{o(r,g,{value:S,configurable:!0,writable:!0})}catch{r[g]=S}return S}},(R,i,t)=>{var r=t(17),o=t(41),g=r({}.hasOwnProperty);R.exports=Object.hasOwn||function(_,P){return g(o(_),P)}},(R,i,t)=>{var r=t(19),o=Object;R.exports=function(g){return o(r(g))}},(R,i,t)=>{var r=t(17),o=0,g=Math.random(),S=r(1 .toString);R.exports=function(_){return"Symbol("+(_===void 0?"":_)+")_"+S(++o+g,36)}},(R,i,t)=>{var r=t(9),o=t(10),g=t(44);R.exports=!r&&!o(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!=7})},(R,i,t)=>{var r=t(7),o=t(22),g=r.document,S=o(g)&&o(g.createElement);R.exports=function(_){return S?g.createElement(_):{}}},(R,i,t)=>{var r=t(9),o=t(46),g=t(14);R.exports=r?function(S,_,P){return o.f(S,_,g(1,P))}:function(S,_,P){return S[_]=P,S}},(R,i,t)=>{var r=t(9),o=t(43),g=t(47),S=t(48),_=t(20),P=TypeError,y=Object.defineProperty,m=Object.getOwnPropertyDescriptor,I="enumerable",u="configurable",T="writable";i.f=r?g?function(p,k,N){if(S(p),k=_(k),S(N),typeof p=="function"&&k==="prototype"&&"value"in N&&T in N&&!N[T]){var d=m(p,k);d&&d[T]&&(p[k]=N.value,N={configurable:u in N?N[u]:d[u],enumerable:I in N?N[I]:d[I],writable:!1})}return y(p,k,N)}:y:function(p,k,N){if(S(p),k=_(k),S(N),o)try{return y(p,k,N)}catch{}if("get"in N||"set"in N)throw P("Accessors not supported");return"value"in N&&(p[k]=N.value),p}},(R,i,t)=>{var r=t(9),o=t(10);R.exports=r&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(R,i,t)=>{var r=t(22),o=String,g=TypeError;R.exports=function(S){if(r(S))return S;throw g(o(S)+" is not an object")}},(R,i,t)=>{var r=t(23),o=t(46),g=t(50),S=t(39);R.exports=function(_,P,y,m){m||(m={});var I=m.enumerable,u=m.name!==void 0?m.name:P;if(r(y)&&g(y,u,m),m.global)I?_[P]=y:S(P,y);else{try{m.unsafe?_[P]&&(I=!0):delete _[P]}catch{}I?_[P]=y:o.f(_,P,{value:y,enumerable:!1,configurable:!m.nonConfigurable,writable:!m.nonWritable})}return _}},(R,i,t)=>{var r=t(10),o=t(23),g=t(40),S=t(9),_=t(51).CONFIGURABLE,P=t(52),y=t(53),m=y.enforce,I=y.get,u=Object.defineProperty,T=S&&!r(function(){return u(function(){},"length",{value:8}).length!==8}),F=String(String).split("String"),p=R.exports=function(k,N,d){String(N).slice(0,7)==="Symbol("&&(N="["+String(N).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),d&&d.getter&&(N="get "+N),d&&d.setter&&(N="set "+N),(!g(k,"name")||_&&k.name!==N)&&(S?u(k,"name",{value:N,configurable:!0}):k.name=N),T&&d&&g(d,"arity")&&k.length!==d.arity&&u(k,"length",{value:d.arity});try{d&&g(d,"constructor")&&d.constructor?S&&u(k,"prototype",{writable:!1}):k.prototype&&(k.prototype=void 0)}catch{}var b=m(k);return g(b,"source")||(b.source=F.join(typeof N=="string"?N:"")),k};Function.prototype.toString=p(function(){return o(this)&&I(this).source||P(this)},"toString")},(R,i,t)=>{var r=t(9),o=t(40),g=Function.prototype,S=r&&Object.getOwnPropertyDescriptor,_=o(g,"name"),P=_&&function(){}.name==="something",y=_&&(!r||r&&S(g,"name").configurable);R.exports={EXISTS:_,PROPER:P,CONFIGURABLE:y}},(R,i,t)=>{var r=t(17),o=t(23),g=t(38),S=r(Function.toString);o(g.inspectSource)||(g.inspectSource=function(_){return S(_)}),R.exports=g.inspectSource},(R,i,t)=>{var r=t(54),o=t(7),g=t(17),S=t(22),_=t(45),P=t(40),y=t(38),m=t(55),I=t(56),u="Object already initialized",T=o.TypeError,F=o.WeakMap,p,k,N,d=function(C){return N(C)?k(C):p(C,{})},b=function(C){return function(L){var M;if(!S(L)||(M=k(L)).type!==C)throw T("Incompatible receiver, "+C+" required");return M}};if(r||y.state){var c=y.state||(y.state=new F),n=g(c.get),s=g(c.has),f=g(c.set);p=function(C,L){if(s(c,C))throw new T(u);return L.facade=C,f(c,C,L),L},k=function(C){return n(c,C)||{}},N=function(C){return s(c,C)}}else{var h=m("state");I[h]=!0,p=function(C,L){if(P(C,h))throw new T(u);return L.facade=C,_(C,h,L),L},k=function(C){return P(C,h)?C[h]:{}},N=function(C){return P(C,h)}}R.exports={set:p,get:k,has:N,enforce:d,getterFor:b}},(R,i,t)=>{var r=t(7),o=t(23),g=t(52),S=r.WeakMap;R.exports=o(S)&&/native code/.test(g(S))},(R,i,t)=>{var r=t(36),o=t(42),g=r("keys");R.exports=function(S){return g[S]||(g[S]=o(S))}},R=>{R.exports={}},(R,i,t)=>{var r=t(40),o=t(58),g=t(8),S=t(46);R.exports=function(_,P,y){for(var m=o(P),I=S.f,u=g.f,T=0;T<m.length;T++){var F=m[T];!r(_,F)&&!(y&&r(y,F))&&I(_,F,u(P,F))}}},(R,i,t)=>{var r=t(25),o=t(17),g=t(59),S=t(68),_=t(48),P=o([].concat);R.exports=r("Reflect","ownKeys")||function(m){var I=g.f(_(m)),u=S.f;return u?P(I,u(m)):I}},(R,i,t)=>{var r=t(60),o=t(67),g=o.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(_){return r(_,g)}},(R,i,t)=>{var r=t(17),o=t(40),g=t(15),S=t(61).indexOf,_=t(56),P=r([].push);R.exports=function(y,m){var I=g(y),u=0,T=[],F;for(F in I)!o(_,F)&&o(I,F)&&P(T,F);for(;m.length>u;)o(I,F=m[u++])&&(~S(T,F)||P(T,F));return T}},(R,i,t)=>{var r=t(15),o=t(62),g=t(65),S=function(_){return function(P,y,m){var I=r(P),u=g(I),T=o(m,u),F;if(_&&y!=y){for(;u>T;)if(F=I[T++],F!=F)return!0}else for(;u>T;T++)if((_||T in I)&&I[T]===y)return _||T||0;return!_&&-1}};R.exports={includes:S(!0),indexOf:S(!1)}},(R,i,t)=>{var r=t(63),o=Math.max,g=Math.min;R.exports=function(S,_){var P=r(S);return P<0?o(P+_,0):g(P,_)}},(R,i,t)=>{var r=t(64);R.exports=function(o){var g=+o;return g!==g||g===0?0:r(g)}},R=>{var i=Math.ceil,t=Math.floor;R.exports=Math.trunc||function(o){var g=+o;return(g>0?t:i)(g)}},(R,i,t)=>{var r=t(66);R.exports=function(o){return r(o.length)}},(R,i,t)=>{var r=t(63),o=Math.min;R.exports=function(g){return g>0?o(r(g),9007199254740991):0}},R=>{R.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(R,i)=>{i.f=Object.getOwnPropertySymbols},(R,i,t)=>{var r=t(10),o=t(23),g=/#|\.prototype\./,S=function(I,u){var T=P[_(I)];return T==m?!0:T==y?!1:o(u)?r(u):!!u},_=S.normalize=function(I){return String(I).replace(g,".").toLowerCase()},P=S.data={},y=S.NATIVE="N",m=S.POLYFILL="P";R.exports=S},(R,i,t)=>{var r=t(35),o=t(71),g=t(46).f,S=r("unscopables"),_=Array.prototype;_[S]==null&&g(_,S,{configurable:!0,value:o(null)}),R.exports=function(P){_[S][P]=!0}},(R,i,t)=>{var r=t(48),o=t(72),g=t(67),S=t(56),_=t(74),P=t(44),y=t(55),m=">",I="<",u="prototype",T="script",F=y("IE_PROTO"),p=function(){},k=function(n){return I+T+m+n+I+"/"+T+m},N=function(n){n.write(k("")),n.close();var s=n.parentWindow.Object;return n=null,s},d=function(){var n=P("iframe"),s="java"+T+":",f;return n.style.display="none",_.appendChild(n),n.src=String(s),f=n.contentWindow.document,f.open(),f.write(k("document.F=Object")),f.close(),f.F},b,c=function(){try{b=new ActiveXObject("htmlfile")}catch{}c=typeof document<"u"?document.domain&&b?N(b):d():N(b);for(var n=g.length;n--;)delete c[u][g[n]];return c()};S[F]=!0,R.exports=Object.create||function(s,f){var h;return s!==null?(p[u]=r(s),h=new p,p[u]=null,h[F]=s):h=c(),f===void 0?h:o.f(h,f)}},(R,i,t)=>{var r=t(9),o=t(47),g=t(46),S=t(48),_=t(15),P=t(73);i.f=r&&!o?Object.defineProperties:function(m,I){S(m);for(var u=_(I),T=P(I),F=T.length,p=0,k;F>p;)g.f(m,k=T[p++],u[k]);return m}},(R,i,t)=>{var r=t(60),o=t(67);R.exports=Object.keys||function(S){return r(S,o)}},(R,i,t)=>{var r=t(25);R.exports=r("document","documentElement")},(R,i,t)=>{var r=t(7),o=t(17);R.exports=function(g,S){return o(r[g].prototype[S])}},(R,i,t)=>{t(77)},(R,i,t)=>{var r=t(78),o=t(65),g=t(63),S=r.aTypedArray,_=r.exportTypedArrayMethod;_("at",function(y){var m=S(this),I=o(m),u=g(y),T=u>=0?u:I+u;return T<0||T>=I?void 0:m[T]})},(R,i,t)=>{var r=t(79),o=t(9),g=t(7),S=t(23),_=t(22),P=t(40),y=t(80),m=t(33),I=t(45),u=t(49),T=t(46).f,F=t(26),p=t(82),k=t(84),N=t(35),d=t(42),b=t(53),c=b.enforce,n=b.get,s=g.Int8Array,f=s&&s.prototype,h=g.Uint8ClampedArray,C=h&&h.prototype,L=s&&p(s),M=f&&p(f),Q=Object.prototype,X=g.TypeError,Y=N("toStringTag"),q=d("TYPED_ARRAY_TAG"),z="TypedArrayConstructor",U=r&&!!k&&y(g.opera)!=="Opera",W=!1,D,K,se,me={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Pe={BigInt64Array:8,BigUint64Array:8},H=function(O){if(!_(O))return!1;var B=y(O);return B==="DataView"||P(me,B)||P(Pe,B)},A=function(w){var O=p(w);if(_(O)){var B=n(O);return B&&P(B,z)?B[z]:A(O)}},E=function(w){if(!_(w))return!1;var O=y(w);return P(me,O)||P(Pe,O)},G=function(w){if(E(w))return w;throw X("Target is not a typed array")},j=function(w){if(S(w)&&(!k||F(L,w)))return w;throw X(m(w)+" is not a typed array constructor")},l=function(w,O,B,$){if(o){if(B)for(var J in me){var ee=g[J];if(ee&&P(ee.prototype,w))try{delete ee.prototype[w]}catch{try{ee.prototype[w]=O}catch{}}}(!M[w]||B)&&u(M,w,B?O:U&&f[w]||O,$)}},v=function(w,O,B){var $,J;if(o){if(k){if(B){for($ in me)if(J=g[$],J&&P(J,w))try{delete J[w]}catch{}}if(!L[w]||B)try{return u(L,w,B?O:U&&L[w]||O)}catch{}else return}for($ in me)J=g[$],J&&(!J[w]||B)&&u(J,w,O)}};for(D in me)K=g[D],se=K&&K.prototype,se?c(se)[z]=K:U=!1;for(D in Pe)K=g[D],se=K&&K.prototype,se&&(c(se)[z]=K);if((!U||!S(L)||L===Function.prototype)&&(L=function(){throw X("Incorrect invocation")},U))for(D in me)g[D]&&k(g[D],L);if((!U||!M||M===Q)&&(M=L.prototype,U))for(D in me)g[D]&&k(g[D].prototype,M);if(U&&p(C)!==M&&k(C,M),o&&!P(M,Y)){W=!0,T(M,Y,{get:function(){return _(this)?this[q]:void 0}});for(D in me)g[D]&&I(g[D],q,D)}R.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_TAG:W&&q,aTypedArray:G,aTypedArrayConstructor:j,exportTypedArrayMethod:l,exportTypedArrayStaticMethod:v,getTypedArrayConstructor:A,isView:H,isTypedArray:E,TypedArray:L,TypedArrayPrototype:M}},R=>{R.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(R,i,t)=>{var r=t(81),o=t(23),g=t(18),S=t(35),_=S("toStringTag"),P=Object,y=g(function(){return arguments}())=="Arguments",m=function(I,u){try{return I[u]}catch{}};R.exports=r?g:function(I){var u,T,F;return I===void 0?"Undefined":I===null?"Null":typeof(T=m(u=P(I),_))=="string"?T:y?g(u):(F=g(u))=="Object"&&o(u.callee)?"Arguments":F}},(R,i,t)=>{var r=t(35),o=r("toStringTag"),g={};g[o]="z",R.exports=String(g)==="[object z]"},(R,i,t)=>{var r=t(40),o=t(23),g=t(41),S=t(55),_=t(83),P=S("IE_PROTO"),y=Object,m=y.prototype;R.exports=_?y.getPrototypeOf:function(I){var u=g(I);if(r(u,P))return u[P];var T=u.constructor;return o(T)&&u instanceof T?T.prototype:u instanceof y?m:null}},(R,i,t)=>{var r=t(10);R.exports=!r(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},(R,i,t)=>{var r=t(17),o=t(48),g=t(85);R.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var S=!1,_={},P;try{P=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),P(_,[]),S=_ instanceof Array}catch{}return function(m,I){return o(m),g(I),S?P(m,I):m.__proto__=I,m}}():void 0)},(R,i,t)=>{var r=t(23),o=String,g=TypeError;R.exports=function(S){if(typeof S=="object"||r(S))return S;throw g("Can't set "+o(S)+" as a prototype")}},(R,i,t)=>{t(87),t(93),t(95),t(117),t(119);var r=t(128);R.exports=r.structuredClone},(R,i,t)=>{var r=t(15),o=t(70),g=t(88),S=t(53),_=t(46).f,P=t(89),y=t(37),m=t(9),I="Array Iterator",u=S.set,T=S.getterFor(I);R.exports=P(Array,"Array",function(p,k){u(this,{type:I,target:r(p),index:0,kind:k})},function(){var p=T(this),k=p.target,N=p.kind,d=p.index++;return!k||d>=k.length?(p.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:d,done:!1}:N=="values"?{value:k[d],done:!1}:{value:[d,k[d]],done:!1}},"values");var F=g.Arguments=g.Array;if(o("keys"),o("values"),o("entries"),!y&&m&&F.name!=="values")try{_(F,"name",{value:"values"})}catch{}},R=>{R.exports={}},(R,i,t)=>{var r=t(6),o=t(11),g=t(37),S=t(51),_=t(23),P=t(90),y=t(82),m=t(84),I=t(92),u=t(45),T=t(49),F=t(35),p=t(88),k=t(91),N=S.PROPER,d=S.CONFIGURABLE,b=k.IteratorPrototype,c=k.BUGGY_SAFARI_ITERATORS,n=F("iterator"),s="keys",f="values",h="entries",C=function(){return this};R.exports=function(L,M,Q,X,Y,q,z){P(Q,M,X);var U=function(G){if(G===Y&&me)return me;if(!c&&G in K)return K[G];switch(G){case s:return function(){return new Q(this,G)};case f:return function(){return new Q(this,G)};case h:return function(){return new Q(this,G)}}return function(){return new Q(this)}},W=M+" Iterator",D=!1,K=L.prototype,se=K[n]||K["@@iterator"]||Y&&K[Y],me=!c&&se||U(Y),Pe=M=="Array"&&K.entries||se,H,A,E;if(Pe&&(H=y(Pe.call(new L)),H!==Object.prototype&&H.next&&(!g&&y(H)!==b&&(m?m(H,b):_(H[n])||T(H,n,C)),I(H,W,!0,!0),g&&(p[W]=C))),N&&Y==f&&se&&se.name!==f&&(!g&&d?u(K,"name",f):(D=!0,me=function(){return o(se,this)})),Y)if(A={values:U(f),keys:q?me:U(s),entries:U(h)},z)for(E in A)(c||D||!(E in K))&&T(K,E,A[E]);else r({target:M,proto:!0,forced:c||D},A);return(!g||z)&&K[n]!==me&&T(K,n,me,{name:Y}),p[M]=me,A}},(R,i,t)=>{var r=t(91).IteratorPrototype,o=t(71),g=t(14),S=t(92),_=t(88),P=function(){return this};R.exports=function(y,m,I,u){var T=m+" Iterator";return y.prototype=o(r,{next:g(+!u,I)}),S(y,T,!1,!0),_[T]=P,y}},(R,i,t)=>{var r=t(10),o=t(23),g=t(71),S=t(82),_=t(49),P=t(35),y=t(37),m=P("iterator"),I=!1,u,T,F;[].keys&&(F=[].keys(),"next"in F?(T=S(S(F)),T!==Object.prototype&&(u=T)):I=!0);var p=u==null||r(function(){var k={};return u[m].call(k)!==k});p?u={}:y&&(u=g(u)),o(u[m])||_(u,m,function(){return this}),R.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:I}},(R,i,t)=>{var r=t(46).f,o=t(40),g=t(35),S=g("toStringTag");R.exports=function(_,P,y){_&&!y&&(_=_.prototype),_&&!o(_,S)&&r(_,S,{configurable:!0,value:P})}},(R,i,t)=>{var r=t(81),o=t(49),g=t(94);r||o(Object.prototype,"toString",g,{unsafe:!0})},(R,i,t)=>{var r=t(81),o=t(80);R.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},(R,i,t)=>{t(96)},(R,i,t)=>{var r=t(97),o=t(114);r("Map",function(g){return function(){return g(this,arguments.length?arguments[0]:void 0)}},o)},(R,i,t)=>{var r=t(6),o=t(7),g=t(17),S=t(69),_=t(49),P=t(98),y=t(105),m=t(111),I=t(23),u=t(22),T=t(10),F=t(112),p=t(92),k=t(113);R.exports=function(N,d,b){var c=N.indexOf("Map")!==-1,n=N.indexOf("Weak")!==-1,s=c?"set":"add",f=o[N],h=f&&f.prototype,C=f,L={},M=function(W){var D=g(h[W]);_(h,W,W=="add"?function(se){return D(this,se===0?0:se),this}:W=="delete"?function(K){return n&&!u(K)?!1:D(this,K===0?0:K)}:W=="get"?function(se){return n&&!u(se)?void 0:D(this,se===0?0:se)}:W=="has"?function(se){return n&&!u(se)?!1:D(this,se===0?0:se)}:function(se,me){return D(this,se===0?0:se,me),this})},Q=S(N,!I(f)||!(n||h.forEach&&!T(function(){new f().entries().next()})));if(Q)C=b.getConstructor(d,N,c,s),P.enable();else if(S(N,!0)){var X=new C,Y=X[s](n?{}:-0,1)!=X,q=T(function(){X.has(1)}),z=F(function(W){new f(W)}),U=!n&&T(function(){for(var W=new f,D=5;D--;)W[s](D,D);return!W.has(-0)});z||(C=d(function(W,D){m(W,h);var K=k(new f,W,C);return D!=null&&y(D,K[s],{that:K,AS_ENTRIES:c}),K}),C.prototype=h,h.constructor=C),(q||U)&&(M("delete"),M("has"),c&&M("get")),(U||Y)&&M(s),n&&h.clear&&delete h.clear}return L[N]=C,r({global:!0,constructor:!0,forced:C!=f},L),p(C,N),n||b.setStrong(C,N,c),C}},(R,i,t)=>{var r=t(6),o=t(17),g=t(56),S=t(22),_=t(40),P=t(46).f,y=t(59),m=t(99),I=t(102),u=t(42),T=t(104),F=!1,p=u("meta"),k=0,N=function(f){P(f,p,{value:{objectID:"O"+k++,weakData:{}}})},d=function(f,h){if(!S(f))return typeof f=="symbol"?f:(typeof f=="string"?"S":"P")+f;if(!_(f,p)){if(!I(f))return"F";if(!h)return"E";N(f)}return f[p].objectID},b=function(f,h){if(!_(f,p)){if(!I(f))return!0;if(!h)return!1;N(f)}return f[p].weakData},c=function(f){return T&&F&&I(f)&&!_(f,p)&&N(f),f},n=function(){s.enable=function(){},F=!0;var f=y.f,h=o([].splice),C={};C[p]=1,f(C).length&&(y.f=function(L){for(var M=f(L),Q=0,X=M.length;Q<X;Q++)if(M[Q]===p){h(M,Q,1);break}return M},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:m.f}))},s=R.exports={enable:n,fastKey:d,getWeakData:b,onFreeze:c};g[p]=!0},(R,i,t)=>{var r=t(18),o=t(15),g=t(59).f,S=t(100),_=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],P=function(y){try{return g(y)}catch{return S(_)}};R.exports.f=function(m){return _&&r(m)=="Window"?P(m):g(o(m))}},(R,i,t)=>{var r=t(62),o=t(65),g=t(101),S=Array,_=Math.max;R.exports=function(P,y,m){for(var I=o(P),u=r(y,I),T=r(m===void 0?I:m,I),F=S(_(T-u,0)),p=0;u<T;u++,p++)g(F,p,P[u]);return F.length=p,F}},(R,i,t)=>{var r=t(20),o=t(46),g=t(14);R.exports=function(S,_,P){var y=r(_);y in S?o.f(S,y,g(0,P)):S[y]=P}},(R,i,t)=>{var r=t(10),o=t(22),g=t(18),S=t(103),_=Object.isExtensible,P=r(function(){});R.exports=P||S?function(m){return!o(m)||S&&g(m)=="ArrayBuffer"?!1:_?_(m):!0}:_},(R,i,t)=>{var r=t(10);R.exports=r(function(){if(typeof ArrayBuffer=="function"){var o=new ArrayBuffer(8);Object.isExtensible(o)&&Object.defineProperty(o,"a",{value:8})}})},(R,i,t)=>{var r=t(10);R.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},(R,i,t)=>{var r=t(106),o=t(11),g=t(48),S=t(33),_=t(107),P=t(65),y=t(26),m=t(108),I=t(109),u=t(110),T=TypeError,F=function(k,N){this.stopped=k,this.result=N},p=F.prototype;R.exports=function(k,N,d){var b=d&&d.that,c=!!(d&&d.AS_ENTRIES),n=!!(d&&d.IS_RECORD),s=!!(d&&d.IS_ITERATOR),f=!!(d&&d.INTERRUPTED),h=r(N,b),C,L,M,Q,X,Y,q,z=function(W){return C&&u(C,"normal",W),new F(!0,W)},U=function(W){return c?(g(W),f?h(W[0],W[1],z):h(W[0],W[1])):f?h(W,z):h(W)};if(n)C=k.iterator;else if(s)C=k;else{if(L=I(k),!L)throw T(S(k)+" is not iterable");if(_(L)){for(M=0,Q=P(k);Q>M;M++)if(X=U(k[M]),X&&y(p,X))return X;return new F(!1)}C=m(k,L)}for(Y=n?k.next:C.next;!(q=o(Y,C)).done;){try{X=U(q.value)}catch(W){u(C,"throw",W)}if(typeof X=="object"&&X&&y(p,X))return X}return new F(!1)}},(R,i,t)=>{var r=t(17),o=t(32),g=t(12),S=r(r.bind);R.exports=function(_,P){return o(_),P===void 0?_:g?S(_,P):function(){return _.apply(P,arguments)}}},(R,i,t)=>{var r=t(35),o=t(88),g=r("iterator"),S=Array.prototype;R.exports=function(_){return _!==void 0&&(o.Array===_||S[g]===_)}},(R,i,t)=>{var r=t(11),o=t(32),g=t(48),S=t(33),_=t(109),P=TypeError;R.exports=function(y,m){var I=arguments.length<2?_(y):m;if(o(I))return g(r(I,y));throw P(S(y)+" is not iterable")}},(R,i,t)=>{var r=t(80),o=t(31),g=t(88),S=t(35),_=S("iterator");R.exports=function(P){if(P!=null)return o(P,_)||o(P,"@@iterator")||g[r(P)]}},(R,i,t)=>{var r=t(11),o=t(48),g=t(31);R.exports=function(S,_,P){var y,m;o(S);try{if(y=g(S,"return"),!y){if(_==="throw")throw P;return P}y=r(y,S)}catch(I){m=!0,y=I}if(_==="throw")throw P;if(m)throw y;return o(y),P}},(R,i,t)=>{var r=t(26),o=TypeError;R.exports=function(g,S){if(r(S,g))return g;throw o("Incorrect invocation")}},(R,i,t)=>{var r=t(35),o=r("iterator"),g=!1;try{var S=0,_={next:function(){return{done:!!S++}},return:function(){g=!0}};_[o]=function(){return this},Array.from(_,function(){throw 2})}catch{}R.exports=function(P,y){if(!y&&!g)return!1;var m=!1;try{var I={};I[o]=function(){return{next:function(){return{done:m=!0}}}},P(I)}catch{}return m}},(R,i,t)=>{var r=t(23),o=t(22),g=t(84);R.exports=function(S,_,P){var y,m;return g&&r(y=_.constructor)&&y!==P&&o(m=y.prototype)&&m!==P.prototype&&g(S,m),S}},(R,i,t)=>{var r=t(46).f,o=t(71),g=t(115),S=t(106),_=t(111),P=t(105),y=t(89),m=t(116),I=t(9),u=t(98).fastKey,T=t(53),F=T.set,p=T.getterFor;R.exports={getConstructor:function(k,N,d,b){var c=k(function(C,L){_(C,n),F(C,{type:N,index:o(null),first:void 0,last:void 0,size:0}),I||(C.size=0),L!=null&&P(L,C[b],{that:C,AS_ENTRIES:d})}),n=c.prototype,s=p(N),f=function(C,L,M){var Q=s(C),X=h(C,L),Y,q;return X?X.value=M:(Q.last=X={index:q=u(L,!0),key:L,value:M,previous:Y=Q.last,next:void 0,removed:!1},Q.first||(Q.first=X),Y&&(Y.next=X),I?Q.size++:C.size++,q!=="F"&&(Q.index[q]=X)),C},h=function(C,L){var M=s(C),Q=u(L),X;if(Q!=="F")return M.index[Q];for(X=M.first;X;X=X.next)if(X.key==L)return X};return g(n,{clear:function(){for(var L=this,M=s(L),Q=M.index,X=M.first;X;)X.removed=!0,X.previous&&(X.previous=X.previous.next=void 0),delete Q[X.index],X=X.next;M.first=M.last=void 0,I?M.size=0:L.size=0},delete:function(C){var L=this,M=s(L),Q=h(L,C);if(Q){var X=Q.next,Y=Q.previous;delete M.index[Q.index],Q.removed=!0,Y&&(Y.next=X),X&&(X.previous=Y),M.first==Q&&(M.first=X),M.last==Q&&(M.last=Y),I?M.size--:L.size--}return!!Q},forEach:function(L){for(var M=s(this),Q=S(L,arguments.length>1?arguments[1]:void 0),X;X=X?X.next:M.first;)for(Q(X.value,X.key,this);X&&X.removed;)X=X.previous},has:function(L){return!!h(this,L)}}),g(n,d?{get:function(L){var M=h(this,L);return M&&M.value},set:function(L,M){return f(this,L===0?0:L,M)}}:{add:function(L){return f(this,L=L===0?0:L,L)}}),I&&r(n,"size",{get:function(){return s(this).size}}),c},setStrong:function(k,N,d){var b=N+" Iterator",c=p(N),n=p(b);y(k,N,function(s,f){F(this,{type:b,target:s,state:c(s),kind:f,last:void 0})},function(){for(var s=n(this),f=s.kind,h=s.last;h&&h.removed;)h=h.previous;return!s.target||!(s.last=h=h?h.next:s.state.first)?(s.target=void 0,{value:void 0,done:!0}):f=="keys"?{value:h.key,done:!1}:f=="values"?{value:h.value,done:!1}:{value:[h.key,h.value],done:!1}},d?"entries":"values",!d,!0),m(N)}}},(R,i,t)=>{var r=t(49);R.exports=function(o,g,S){for(var _ in g)r(o,_,g[_],S);return o}},(R,i,t)=>{var r=t(25),o=t(46),g=t(35),S=t(9),_=g("species");R.exports=function(P){var y=r(P),m=o.f;S&&y&&!y[_]&&m(y,_,{configurable:!0,get:function(){return this}})}},(R,i,t)=>{t(118)},(R,i,t)=>{var r=t(97),o=t(114);r("Set",function(g){return function(){return g(this,arguments.length?arguments[0]:void 0)}},o)},(R,i,t)=>{var r=t(37),o=t(6),g=t(7),S=t(25),_=t(17),P=t(10),y=t(42),m=t(23),I=t(120),u=t(22),T=t(24),F=t(105),p=t(48),k=t(80),N=t(40),d=t(101),b=t(45),c=t(65),n=t(121),s=t(122),f=t(124),h=t(29),C=t(125),L=t(126),M=t(127),Q=g.Object,X=g.Date,Y=g.Error,q=g.EvalError,z=g.RangeError,U=g.ReferenceError,W=g.SyntaxError,D=g.TypeError,K=g.URIError,se=g.PerformanceMark,me=g.WebAssembly,Pe=me&&me.CompileError||Y,H=me&&me.LinkError||Y,A=me&&me.RuntimeError||Y,E=S("DOMException"),G=S("Set"),j=S("Map"),l=j.prototype,v=_(l.has),w=_(l.get),O=_(l.set),B=_(G.prototype.add),$=S("Object","keys"),J=_([].push),ee=_((!0).valueOf),ne=_(1 .valueOf),le=_("".valueOf),ie=_(X.prototype.getTime),ce=y("structuredClone"),he="DataCloneError",be="Transferring",_e=function(fe){return!P(function(){var Ce=new g.Set([7]),Le=fe(Ce),ue=fe(Q(7));return Le==Ce||!Le.has(7)||typeof ue!="object"||ue!=7})&&fe},we=function(fe,Ce){return!P(function(){var Le=new Ce,ue=fe({a:Le,b:Le});return!(ue&&ue.a===ue.b&&ue.a instanceof Ce&&ue.a.stack===Le.stack)})},xe=function(fe){return!P(function(){var Ce=fe(new g.AggregateError([1],ce,{cause:3}));return Ce.name!="AggregateError"||Ce.errors[0]!=1||Ce.message!=ce||Ce.cause!=3})},Ae=g.structuredClone,$e=r||!we(Ae,Y)||!we(Ae,E)||!xe(Ae),Xe=!Ae&&_e(function(fe){return new se(ce,{detail:fe}).detail}),Oe=_e(Ae)||Xe,Ee=function(fe){throw new E("Uncloneable type: "+fe,he)},re=function(fe,Ce){throw new E((Ce||"Cloning")+" of "+fe+" cannot be properly polyfilled in this engine",he)},ve=function(fe,Ce){if(T(fe)&&Ee("Symbol"),!u(fe))return fe;if(Ce){if(v(Ce,fe))return w(Ce,fe)}else Ce=new j;var Le=k(fe),ue=!1,Z,te,pe,ke,Ne,de,ae,ye,Te,Ie;switch(Le){case"Array":pe=[],ue=!0;break;case"Object":pe={},ue=!0;break;case"Map":pe=new j,ue=!0;break;case"Set":pe=new G,ue=!0;break;case"RegExp":pe=new RegExp(fe.source,s(fe));break;case"Error":switch(te=fe.name,te){case"AggregateError":pe=S("AggregateError")([]);break;case"EvalError":pe=q();break;case"RangeError":pe=z();break;case"ReferenceError":pe=U();break;case"SyntaxError":pe=W();break;case"TypeError":pe=D();break;case"URIError":pe=K();break;case"CompileError":pe=Pe();break;case"LinkError":pe=H();break;case"RuntimeError":pe=A();break;default:pe=Y()}ue=!0;break;case"DOMException":pe=new E(fe.message,fe.name),ue=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Z=g[Le],u(Z)||re(Le),pe=new Z(ve(fe.buffer,Ce),fe.byteOffset,Le==="DataView"?fe.byteLength:fe.length);break;case"DOMQuad":try{pe=new DOMQuad(ve(fe.p1,Ce),ve(fe.p2,Ce),ve(fe.p3,Ce),ve(fe.p4,Ce))}catch{Oe?pe=Oe(fe):re(Le)}break;case"FileList":if(Z=g.DataTransfer,I(Z)){for(ke=new Z,Ne=0,de=c(fe);Ne<de;Ne++)ke.items.add(ve(fe[Ne],Ce));pe=ke.files}else Oe?pe=Oe(fe):re(Le);break;case"ImageData":try{pe=new ImageData(ve(fe.data,Ce),fe.width,fe.height,{colorSpace:fe.colorSpace})}catch{Oe?pe=Oe(fe):re(Le)}break;default:if(Oe)pe=Oe(fe);else switch(Le){case"BigInt":pe=Q(fe.valueOf());break;case"Boolean":pe=Q(ee(fe));break;case"Number":pe=Q(ne(fe));break;case"String":pe=Q(le(fe));break;case"Date":pe=new X(ie(fe));break;case"ArrayBuffer":Z=g.DataView,!Z&&typeof fe.slice!="function"&&re(Le);try{if(typeof fe.slice=="function")pe=fe.slice(0);else for(de=fe.byteLength,pe=new ArrayBuffer(de),Te=new Z(fe),Ie=new Z(pe),Ne=0;Ne<de;Ne++)Ie.setUint8(Ne,Te.getUint8(Ne))}catch{throw new E("ArrayBuffer is detached",he)}break;case"SharedArrayBuffer":pe=fe;break;case"Blob":try{pe=fe.slice(0,fe.size,fe.type)}catch{re(Le)}break;case"DOMPoint":case"DOMPointReadOnly":Z=g[Le];try{pe=Z.fromPoint?Z.fromPoint(fe):new Z(fe.x,fe.y,fe.z,fe.w)}catch{re(Le)}break;case"DOMRect":case"DOMRectReadOnly":Z=g[Le];try{pe=Z.fromRect?Z.fromRect(fe):new Z(fe.x,fe.y,fe.width,fe.height)}catch{re(Le)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Z=g[Le];try{pe=Z.fromMatrix?Z.fromMatrix(fe):new Z(fe)}catch{re(Le)}break;case"AudioData":case"VideoFrame":m(fe.clone)||re(Le);try{pe=fe.clone()}catch{Ee(Le)}break;case"File":try{pe=new File([fe],fe.name,fe)}catch{re(Le)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":re(Le);default:Ee(Le)}}if(O(Ce,fe,pe),ue)switch(Le){case"Array":case"Object":for(ae=$(fe),Ne=0,de=c(ae);Ne<de;Ne++)ye=ae[Ne],d(pe,ye,ve(fe[ye],Ce));break;case"Map":fe.forEach(function(De,Be){O(pe,ve(Be,Ce),ve(De,Ce))});break;case"Set":fe.forEach(function(De){B(pe,ve(De,Ce))});break;case"Error":b(pe,"message",ve(fe.message,Ce)),N(fe,"cause")&&b(pe,"cause",ve(fe.cause,Ce)),te=="AggregateError"&&(pe.errors=ve(fe.errors,Ce));case"DOMException":f&&b(pe,"stack",ve(fe.stack,Ce))}return pe},Me=Ae&&!P(function(){if(L&&h>92||M&&h>94||C&&h>97)return!1;var fe=new ArrayBuffer(8),Ce=Ae(fe,{transfer:[fe]});return fe.byteLength!=0||Ce.byteLength!=8}),qe=function(fe,Ce){if(!u(fe))throw D("Transfer option cannot be converted to a sequence");var Le=[];F(fe,function(Te){J(Le,p(Te))});var ue=0,Z=c(Le),te,pe,ke,Ne,de,ae,ye;if(Me)for(Ne=Ae(Le,{transfer:Le});ue<Z;)O(Ce,Le[ue],Ne[ue++]);else for(;ue<Z;){if(te=Le[ue++],v(Ce,te))throw new E("Duplicate transferable",he);switch(pe=k(te),pe){case"ImageBitmap":ke=g.OffscreenCanvas,I(ke)||re(pe,be);try{ae=new ke(te.width,te.height),ye=ae.getContext("bitmaprenderer"),ye.transferFromImageBitmap(te),de=ae.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!m(te.clone)||!m(te.close))&&re(pe,be);try{de=te.clone(),te.close()}catch{}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":re(pe,be)}if(de===void 0)throw new E("This object cannot be transferred: "+pe,he);O(Ce,te,de)}};o({global:!0,enumerable:!0,sham:!Me,forced:$e},{structuredClone:function(Ce){var Le=n(arguments.length,1)>1&&arguments[1]!=null?p(arguments[1]):void 0,ue=Le?Le.transfer:void 0,Z;return ue!==void 0&&(Z=new j,qe(ue,Z)),ve(Ce,Z)}})},(R,i,t)=>{var r=t(17),o=t(10),g=t(23),S=t(80),_=t(25),P=t(52),y=function(){},m=[],I=_("Reflect","construct"),u=/^\s*(?:class|function)\b/,T=r(u.exec),F=!u.exec(y),p=function(d){if(!g(d))return!1;try{return I(y,m,d),!0}catch{return!1}},k=function(d){if(!g(d))return!1;switch(S(d)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return F||!!T(u,P(d))}catch{return!0}};k.sham=!0,R.exports=!I||o(function(){var N;return p(p.call)||!p(Object)||!p(function(){N=!0})||N})?k:p},R=>{var i=TypeError;R.exports=function(t,r){if(t<r)throw i("Not enough arguments");return t}},(R,i,t)=>{var r=t(11),o=t(40),g=t(26),S=t(123),_=RegExp.prototype;R.exports=function(P){var y=P.flags;return y===void 0&&!("flags"in _)&&!o(P,"flags")&&g(_,P)?r(S,P):y}},(R,i,t)=>{var r=t(48);R.exports=function(){var o=r(this),g="";return o.hasIndices&&(g+="d"),o.global&&(g+="g"),o.ignoreCase&&(g+="i"),o.multiline&&(g+="m"),o.dotAll&&(g+="s"),o.unicode&&(g+="u"),o.unicodeSets&&(g+="v"),o.sticky&&(g+="y"),g}},(R,i,t)=>{var r=t(10),o=t(14);R.exports=!r(function(){var g=Error("a");return"stack"in g?(Object.defineProperty(g,"stack",o(1,7)),g.stack!==7):!0})},(R,i,t)=>{var r=t(126),o=t(127);R.exports=!r&&!o&&typeof window=="object"&&typeof document=="object"},R=>{R.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(R,i,t)=>{var r=t(18),o=t(7);R.exports=r(o.process)=="process"},(R,i,t)=>{var r=t(7);R.exports=r},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(130),_display_utils=__w_pdfjs_require__(133),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(R,i){_checkPrivateRedeclaration(R,i),i.add(R)}function _classPrivateMethodGet(R,i,t){if(!i.has(R))throw new TypeError("attempted to get private field on non-instance");return t}function _classPrivateFieldInitSpec(R,i,t){_checkPrivateRedeclaration(R,i),i.set(R,t)}function _checkPrivateRedeclaration(R,i){if(i.has(R))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(R,i,t){var r=_classExtractFieldDescriptor(R,i,"set");return _classApplyDescriptorSet(R,r,t),t}function _classPrivateFieldGet(R,i){var t=_classExtractFieldDescriptor(R,i,"get");return _classApplyDescriptorGet(R,t)}function _classExtractFieldDescriptor(R,i,t){if(!i.has(R))throw new TypeError("attempted to "+t+" private field on non-instance");return i.get(R)}function _classStaticPrivateFieldSpecSet(R,i,t,r){return _classCheckPrivateStaticAccess(R,i),_classCheckPrivateStaticFieldDescriptor(t,"set"),_classApplyDescriptorSet(R,t,r),r}function _classApplyDescriptorSet(R,i,t){if(i.set)i.set.call(R,t);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=t}}function _classStaticPrivateFieldSpecGet(R,i,t){return _classCheckPrivateStaticAccess(R,i),_classCheckPrivateStaticFieldDescriptor(t,"get"),_classApplyDescriptorGet(R,t)}function _classCheckPrivateStaticFieldDescriptor(R,i){if(R===void 0)throw new TypeError("attempted to "+i+" private static field before its declaration")}function _classCheckPrivateStaticAccess(R,i){if(R!==i)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(R,i){return i.get?i.get.call(R):i.value}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:R,NodeCMapReaderFactory:i,NodeStandardFontDataFactory:t}=__w_pdfjs_require__(146);exports.DefaultCanvasFactory=DefaultCanvasFactory=R,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=i,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=t}let createPDFNetworkStream;function setPDFNetworkStreamFactory(R){createPDFNetworkStream=R}function getDocument(R){const i=new PDFDocumentLoadingTask;let t;if(typeof R=="string"||R instanceof URL)t={url:R};else if((0,_util.isArrayBuffer)(R))t={data:R};else if(R instanceof PDFDataRangeTransport)t={range:R};else{if(typeof R!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!R.url&&!R.data&&!R.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=R}const r=Object.create(null);let o=null,g=null;for(const _ in t){const P=t[_];switch(_){case"url":if(typeof window<"u")try{r[_]=new URL(P,window.location).href;continue}catch(y){(0,_util.warn)(`Cannot create valid URL: "${y}".`)}else if(typeof P=="string"||P instanceof URL){r[_]=P.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":o=P;continue;case"worker":g=P;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&P instanceof Buffer)r[_]=new Uint8Array(P);else{if(P instanceof Uint8Array)break;if(typeof P=="string")r[_]=(0,_util.stringToBytes)(P);else if(typeof P=="object"&&P!==null&&!isNaN(P.length))r[_]=new Uint8Array(P);else if((0,_util.isArrayBuffer)(P))r[_]=new Uint8Array(P);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}r[_]=P}if(r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=r.stopAtErrors!==!0,r.fontExtraProperties=r.fontExtraProperties===!0,r.pdfBug=r.pdfBug===!0,r.enableXfa=r.enableXfa===!0,(!Number.isInteger(r.rangeChunkSize)||r.rangeChunkSize<1)&&(r.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof r.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),(!Number.isInteger(r.maxImageSize)||r.maxImageSize<-1)&&(r.maxImageSize=-1),typeof r.cMapUrl!="string"&&(r.cMapUrl=null),typeof r.standardFontDataUrl!="string"&&(r.standardFontDataUrl=null),typeof r.useWorkerFetch!="boolean"&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof r.isEvalSupported!="boolean"&&(r.isEvalSupported=!0),typeof r.disableFontFace!="boolean"&&(r.disableFontFace=_is_node.isNodeJS),typeof r.useSystemFonts!="boolean"&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),(typeof r.ownerDocument!="object"||r.ownerDocument===null)&&(r.ownerDocument=globalThis.document),typeof r.disableRange!="boolean"&&(r.disableRange=!1),typeof r.disableStream!="boolean"&&(r.disableStream=!1),typeof r.disableAutoFetch!="boolean"&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!g){const _={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};g=_.port?_PDFWorker.fromPort(_):new _PDFWorker(_),i._worker=g}const S=i.docId;return g.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");const _=_fetchDocument(g,r,o,S),P=new Promise(function(y){let m;o?m=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},o):r.data||(m=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),y(m)});return Promise.all([_,P]).then(function(y){let[m,I]=y;if(i.destroyed)throw new Error("Loading aborted");const u=new _message_handler.MessageHandler(S,m,g.port),T=new WorkerTransport(u,i,I,r);i._transport=T,u.send("Ready",null)})}).catch(i._capability.reject),i}async function _fetchDocument(R,i,t,r){if(R.destroyed)throw new Error("Worker was destroyed");t&&(i.length=t.length,i.initialData=t.initialData,i.progressiveDone=t.progressiveDone,i.contentDispositionFilename=t.contentDispositionFilename);const o=await R.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.16.105",source:{data:i.data,url:i.url,password:i.password,disableAutoFetch:i.disableAutoFetch,rangeChunkSize:i.rangeChunkSize,length:i.length},maxImageSize:i.maxImageSize,disableFontFace:i.disableFontFace,docBaseUrl:i.docBaseUrl,ignoreErrors:i.ignoreErrors,isEvalSupported:i.isEvalSupported,fontExtraProperties:i.fontExtraProperties,enableXfa:i.enableXfa,useSystemFonts:i.useSystemFonts,cMapUrl:i.useWorkerFetch?i.cMapUrl:null,standardFontDataUrl:i.useWorkerFetch?i.standardFontDataUrl:null});if(i.data&&(i.data=null),R.destroyed)throw new Error("Worker was destroyed");return o}class PDFDocumentLoadingTask{constructor(){var i,t;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(i=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),t=i++,i)),t}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var i;this.destroyed=!0,await((i=this._transport)===null||i===void 0?void 0:i.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0};class PDFDataRangeTransport{constructor(i,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=i,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(i){this._rangeListeners.push(i)}addProgressListener(i){this._progressListeners.push(i)}addProgressiveReadListener(i){this._progressiveReadListeners.push(i)}addProgressiveDoneListener(i){this._progressiveDoneListeners.push(i)}onDataRange(i,t){for(const r of this._rangeListeners)r(i,t)}onDataProgress(i,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(i,t)})}onDataProgressiveRead(i){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(i)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const i of this._progressiveDoneListeners)i()})}transportReady(){this._readyCapability.resolve()}requestDataRange(i,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(i,t){this._pdfInfo=i,this._transport=t,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(i){return this._transport.getPage(i)}getPageIndex(i){return this._transport.getPageIndex(i)}getDestinations(){return this._transport.getDestinations()}getDestination(i){return this._transport.getDestination(i)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(i||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(i,t,r,o){let g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;this._pageIndex=i,this._pageInfo=t,this._ownerDocument=o,this._transport=r,this._stats=g?new _display_utils.StatTimer:null,this._pdfBug=g,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:i,rotation:t=this.rotate,offsetX:r=0,offsetY:o=0,dontFlip:g=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:i,rotation:t,offsetX:r,offsetY:o,dontFlip:g})}getAnnotations(){let{intent:i="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this._transport.getRenderingIntent(i);let r=this._annotationPromises.get(t.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,t.renderingIntent),this._annotationPromises.set(t.cacheKey,r),r=r.then(o=>{for(const g of o)g.titleObj!==void 0&&Object.defineProperty(g,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),g.titleObj.str}}),g.contentsObj!==void 0&&Object.defineProperty(g,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),g.contentsObj.str}});return o})),r}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var i;return((i=this._transport._htmlForXfa)===null||i===void 0?void 0:i.children[this._pageIndex])||null}render(i){var t,r,o;let{canvasContext:g,viewport:S,intent:_="display",annotationMode:P=_util.AnnotationMode.ENABLE,transform:y=null,imageLayer:m=null,canvasFactory:I=null,background:u=null,optionalContentConfigPromise:T=null,annotationCanvasMap:F=null,pageColors:p=null,printAnnotationStorage:k=null}=i;((t=arguments[0])===null||t===void 0?void 0:t.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&P===_util.AnnotationMode.ENABLE&&(P=_util.AnnotationMode.ENABLE_FORMS)),((r=arguments[0])===null||r===void 0?void 0:r.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&P===_util.AnnotationMode.ENABLE&&(P=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const N=this._transport.getRenderingIntent(_,P,k);this.pendingCleanup=!1,T||(T=this._transport.getOptionalContentConfig());let d=this._intentStates.get(N.cacheKey);d||(d=Object.create(null),this._intentStates.set(N.cacheKey,d)),d.streamReaderCancelTimeout&&(clearTimeout(d.streamReaderCancelTimeout),d.streamReaderCancelTimeout=null);const b=I||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),c=!!(N.renderingIntent&_util.RenderingIntentFlag.PRINT);d.displayReadyCapability||(d.displayReadyCapability=(0,_util.createPromiseCapability)(),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(N));const n=h=>{d.renderTasks.delete(s),(this.cleanupAfterRender||c)&&(this.pendingCleanup=!0),this._tryCleanup(),h?(s.capability.reject(h),this._abortOperatorList({intentState:d,reason:h instanceof Error?h:new Error(h)})):s.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},s=new InternalRenderTask({callback:n,params:{canvasContext:g,viewport:S,transform:y,imageLayer:m,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:F,operatorList:d.operatorList,pageIndex:this._pageIndex,canvasFactory:b,useRequestAnimationFrame:!c,pdfBug:this._pdfBug,pageColors:p});((o=d).renderTasks||(o.renderTasks=new Set)).add(s);const f=s.task;return Promise.all([d.displayReadyCapability.promise,T]).then(h=>{let[C,L]=h;if(this.pendingCleanup){n();return}this._stats&&this._stats.time("Rendering"),s.initializeGraphics({transparency:C,optionalContentConfig:L}),s.operatorListChanged()}).catch(n),f}getOperatorList(){let{intent:i="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function o(){S.operatorList.lastChunk&&(S.opListReadCapability.resolve(S.operatorList),S.renderTasks.delete(_))}const g=this._transport.getRenderingIntent(i,t,r,!0);let S=this._intentStates.get(g.cacheKey);S||(S=Object.create(null),this._intentStates.set(g.cacheKey,S));let _;if(!S.opListReadCapability){var P;_=Object.create(null),_.operatorListChanged=o,S.opListReadCapability=(0,_util.createPromiseCapability)(),((P=S).renderTasks||(P.renderTasks=new Set)).add(_),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(g)}return S.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems:i=!1,includeMarkedContent:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:i!==!0,includeMarkedContent:t===!0},{highWaterMark:r,size(o){return o.items.length}})}getTextContent(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const t=this.streamTextContent(i);return new Promise(function(r,o){function g(){S.read().then(function(P){let{value:y,done:m}=P;if(m){r(_);return}Object.assign(_.styles,y.styles),_.items.push(...y.items),g()},o)}const S=t.getReader(),_={items:[],styles:Object.create(null)};g()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const i=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)i.push(r.completed),r.cancel();this.objs.clear();for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(i)}cleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(i)}_tryCleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,i&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(i,t){const r=this._intentStates.get(t);r&&(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(i))}_renderPageChunk(i,t){for(let r=0,o=i.length;r<o;r++)t.operatorList.fnArray.push(i.fnArray[r]),t.operatorList.argsArray.push(i.argsArray[r]);t.operatorList.lastChunk=i.lastChunk,t.operatorList.separateAnnots=i.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();i.lastChunk&&this._tryCleanup()}_pumpOperatorList(i){let{renderingIntent:t,cacheKey:r,annotationStorageMap:o}=i;const S=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:r,annotationStorage:o}).getReader(),_=this._intentStates.get(r);_.streamReader=S;const P=()=>{S.read().then(y=>{let{value:m,done:I}=y;if(I){_.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,_),P())},y=>{if(_.streamReader=null,!this._transport.destroyed){if(_.operatorList){_.operatorList.lastChunk=!0;for(const m of _.renderTasks)m.operatorListChanged();this._tryCleanup()}if(_.displayReadyCapability)_.displayReadyCapability.reject(y);else if(_.opListReadCapability)_.opListReadCapability.reject(y);else throw y}})};P()}_abortOperatorList(i){let{intentState:t,reason:r,force:o=!1}=i;if(t.streamReader){if(!o){if(t.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:r,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[g,S]of this._intentStates)if(S===t){this._intentStates.delete(g);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(i,t){const r={data:structuredClone(i,t)};this._deferred.then(()=>{for(const o of this._listeners)o.call(this,r)})}addEventListener(i,t){this._listeners.push(t)}removeEventListener(i,t){const r=this._listeners.indexOf(t);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){var _document,_document$currentScri;const R=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;R&&(PDFWorkerUtil.fallbackWorkerSrc=R.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(R,i){let t;try{if(t=new URL(R),!t.origin||t.origin==="null")return!1}catch{return!1}const r=new URL(i,t);return t.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(R){const i=`importScripts("${R}");`;return URL.createObjectURL(new Blob([i]))}}class _PDFWorker{constructor(){let{name:R=null,port:i=null,verbosity:t=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(i&&_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).has(i))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=R,this.destroyed=!1,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,i){_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).set(i,this),this._initializeFromPort(i);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(R){this._port=R,this._messageHandler=new _message_handler.MessageHandler("main","worker",R),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:R}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,R)||(R=PDFWorkerUtil.createCDNWrapper(new URL(R,window.location).href));const i=new Worker(R),t=new _message_handler.MessageHandler("main","worker",i),r=()=>{i.removeEventListener("error",o),t.destroy(),i.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||r()};i.addEventListener("error",o),t.on("test",S=>{if(i.removeEventListener("error",o),this.destroyed){r();return}S?(this._messageHandler=t,this._port=i,this._webWorker=i,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),i.terminate())}),t.on("ready",S=>{if(i.removeEventListener("error",o),this.destroyed){r();return}try{g()}catch{this._setupFakeWorker()}});const g=()=>{const S=new Uint8Array;t.send("test",S,[S.buffer])};g();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(R=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const i=new LoopbackPort;this._port=i;const t=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(t+"_worker",t,i);R.setup(r,i);const o=new _message_handler.MessageHandler(t,t+"_worker",i);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(R=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${R.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(R){if(!(R!=null&&R.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).has(R.port)?_classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).get(R.port):new _PDFWorker(R)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var R;return((R=globalThis.pdfjsWorker)===null||R===void 0?void 0:R.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker;var _workerPorts={writable:!0,value:new WeakMap};_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(i,t,r,o){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=i,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,o.useWorkerFetch||(this.CMapReaderFactory=new o.CMapReaderFactory({baseUrl:o.cMapUrl,isCompressed:o.cMapPacked}),this.StandardFontDataFactory=new o.StandardFontDataFactory({baseUrl:o.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=_util.RenderingIntentFlag.DISPLAY,S=null;switch(i){case"any":g=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":g=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${i}`)}switch(t){case _util.AnnotationMode.DISABLE:g+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:g+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:g+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,S=(g&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return o&&(g+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:g,cacheKey:`${g}_${_annotation_storage.AnnotationStorage.getHash(S)}`,annotationStorageMap:S}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const i=[];for(const r of _classPrivateFieldGet(this,_pageCache).values())i.push(r._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return i.push(t),Promise.all(i).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:i,loadingTask:t}=this;i.on("GetReader",(r,o)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=g=>{this._lastProgress={loaded:g.loaded,total:g.total}},o.onPull=()=>{this._fullReader.read().then(function(g){let{value:S,done:_}=g;if(_){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(S),"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(S),1,[S])}).catch(g=>{o.error(g)})},o.onCancel=g=>{this._fullReader.cancel(g),o.ready.catch(S=>{if(!this.destroyed)throw S})}}),i.on("ReaderHeadersReady",r=>{const o=(0,_util.createPromiseCapability)(),g=this._fullReader;return g.headersReady.then(()=>{if(!g.isStreamingSupported||!g.isRangeSupported){if(this._lastProgress){var S;(S=t.onProgress)===null||S===void 0||S.call(t,this._lastProgress)}g.onProgress=_=>{var P;(P=t.onProgress)===null||P===void 0||P.call(t,{loaded:_.loaded,total:_.total})}}o.resolve({isStreamingSupported:g.isStreamingSupported,isRangeSupported:g.isRangeSupported,contentLength:g.contentLength})},o.reject),o.promise}),i.on("GetRangeReader",(r,o)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const g=this._networkStream.getRangeReader(r.begin,r.end);if(!g){o.close();return}o.onPull=()=>{g.read().then(function(S){let{value:_,done:P}=S;if(P){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(_),"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(_),1,[_])}).catch(S=>{o.error(S)})},o.onCancel=S=>{g.cancel(S),o.ready.catch(_=>{if(!this.destroyed)throw _})}}),i.on("GetDoc",r=>{let{pdfInfo:o}=r;this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(o,this))}),i.on("DocException",function(r){let o;switch(r.name){case"PasswordException":o=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":o=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(o)}),i.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const o=g=>{g instanceof Error?this._passwordCapability.reject(g):this._passwordCapability.resolve({password:g})};try{t.onPassword(o,r.code)}catch(g){this._passwordCapability.reject(g)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),i.on("DataLoaded",r=>{var o;(o=t.onProgress)===null||o===void 0||o.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),i.on("StartRenderPage",r=>{if(this.destroyed)return;_classPrivateFieldGet(this,_pageCache).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),i.on("commonobj",r=>{var o;let[g,S,_]=r;if(!this.destroyed&&!this.commonObjs.has(g))switch(S){case"Font":const P=this._params;if("error"in _){const I=_.error;(0,_util.warn)(`Error during font loading: ${I}`),this.commonObjs.resolve(g,I);break}let y=null;P.pdfBug&&(o=globalThis.FontInspector)!==null&&o!==void 0&&o.enabled&&(y={registerFont(I,u){globalThis.FontInspector.fontAdded(I,u)}});const m=new _font_loader.FontFaceObject(_,{isEvalSupported:P.isEvalSupported,disableFontFace:P.disableFontFace,ignoreErrors:P.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:y});this.fontLoader.bind(m).catch(I=>i.sendWithPromise("FontFallback",{id:g})).finally(()=>{!P.fontExtraProperties&&m.data&&(m.data=null),this.commonObjs.resolve(g,m)});break;case"FontPath":case"Image":this.commonObjs.resolve(g,_);break;default:throw new Error(`Got unknown common object type ${S}`)}}),i.on("obj",r=>{let[o,g,S,_]=r;if(this.destroyed)return;const P=_classPrivateFieldGet(this,_pageCache).get(g);if(!P.objs.has(o))switch(S){case"Image":P.objs.resolve(o,_);const m=8e6;if(_){let I;if(_.bitmap){const{bitmap:u,width:T,height:F}=_;I=T*F*4,P._bitmaps.add(u)}else{var y;I=((y=_.data)===null||y===void 0?void 0:y.length)||0}I>m&&(P.cleanupAfterRender=!0)}break;case"Pattern":P.objs.resolve(o,_);break;default:throw new Error(`Got unknown object type ${S}`)}}),i.on("DocProgress",r=>{var o;this.destroyed||(o=t.onProgress)===null||o===void 0||o.call(t,{loaded:r.loaded,total:r.total})}),i.on("DocStats",r=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}),i.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),i.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),i.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature(i){var t,r;let{featureId:o}=i;this.destroyed||(t=(r=this.loadingTask).onUnsupportedFeature)===null||t===void 0||t.call(r,o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(i){if(!Number.isInteger(i)||i<=0||i>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=i-1,r=_classPrivateFieldGet(this,_pagePromises).get(t);if(r)return r;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(g=>{if(this.destroyed)throw new Error("Transport destroyed");const S=new PDFPageProxy(t,g,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(t,S),S});return _classPrivateFieldGet(this,_pagePromises).set(t,o),o}getPageIndex(i){return typeof i!="object"||i===null||!Number.isInteger(i.num)||i.num<0||!Number.isInteger(i.gen)||i.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:i.num,gen:i.gen})}getAnnotations(i,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:i,intent:t})}saveDocument(){var i,t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(i=(t=this._fullReader)===null||t===void 0?void 0:t.filename)!==null&&i!==void 0?i:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(i){return typeof i!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:i})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(i){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:i})}getStructTree(i){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:i})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(i=>new _optional_content_config.OptionalContentConfig(i))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(i=>{var t,r,o,g;return{info:i[0],metadata:i[1]?new _metadata.Metadata(i[1]):null,contentDispositionFilename:(t=(r=this._fullReader)===null||r===void 0?void 0:r.filename)!==null&&t!==void 0?t:null,contentLength:(o=(g=this._fullReader)===null||g===void 0?void 0:g.contentLength)!==null&&o!==void 0?o:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const t of _classPrivateFieldGet(this,_pageCache).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),i||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const i=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:i.disableAutoFetch,enableXfa:i.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t){const o=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,i);return o.capability.promise.then(()=>t(o.data)),null}const r=_classPrivateFieldGet(this,_objs)[i];if(!(r!=null&&r.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${i}.`);return r.data}has(i){const t=_classPrivateFieldGet(this,_objs)[i];return t?.capability.settled||!1}resolve(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,i);r.data=t,r.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(R){const i=_classPrivateFieldGet(this,_objs)[R];return i||(_classPrivateFieldGet(this,_objs)[R]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(i){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,i),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:i}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!i)return!1;const{annotationCanvasMap:t}=_classPrivateFieldGet(this,_internalRenderTask);return i.form||i.canvas&&t?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(i){let{callback:t,params:r,objs:o,commonObjs:g,annotationCanvasMap:S,operatorList:_,pageIndex:P,canvasFactory:y,useRequestAnimationFrame:m=!1,pdfBug:I=!1,pageColors:u=null}=i;this.callback=t,this.params=r,this.objs=o,this.commonObjs=g,this.annotationCanvasMap=S,this.operatorListIdx=null,this.operatorList=_,this._pageIndex=P,this.canvasFactory=y,this._pdfBug=I,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(i){var t;let{transparency:r=!1,optionalContentConfig:o}=i;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&(t=globalThis.StepperManager)!==null&&t!==void 0&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:S,transform:_,imageLayer:P,background:y}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,P,o,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:_,viewport:S,transparency:r,background:y}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(i||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback())))}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var r=t(1),o=t(131),g=t(135);function S(c,n,s){T(c,n),n.set(c,s)}function _(c,n){var s=m(c,n,"get");return P(c,s)}function P(c,n){return n.get?n.get.call(c):n.value}function y(c,n,s){var f=m(c,n,"set");return I(c,f,s),s}function m(c,n,s){if(!n.has(c))throw new TypeError("attempted to "+s+" private field on non-instance");return n.get(c)}function I(c,n,s){if(n.set)n.set.call(c,s);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=s}}function u(c,n){T(c,n),n.add(c)}function T(c,n){if(n.has(c))throw new TypeError("Cannot initialize the same private elements twice on an object")}function F(c,n,s){if(!n.has(c))throw new TypeError("attempted to get private field on non-instance");return s}var p=new WeakSet;class k{constructor(){u(this,p),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(n,s){const f=this._storage.get(n);return f===void 0?s:Object.assign(s,f)}getRawValue(n){return this._storage.get(n)}remove(n){if(this._storage.delete(n),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const s of this._storage.values())if(s instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(n,s){const f=this._storage.get(n);let h=!1;if(f!==void 0)for(const[C,L]of Object.entries(s))f[C]!==L&&(h=!0,f[C]=L);else h=!0,this._storage.set(n,s);h&&F(this,p,N).call(this),s instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(s.constructor._type)}has(n){return this._storage.has(n)}getAll(){return this._storage.size>0?(0,r.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new b(this)}get serializable(){if(this._storage.size===0)return null;const n=new Map;for(const[s,f]of this._storage){const h=f instanceof o.AnnotationEditor?f.serialize():f;h&&n.set(s,h)}return n}static getHash(n){if(!n)return"";const s=new g.MurmurHash3_64;for(const[f,h]of n)s.update(`${f}:${JSON.stringify(h)}`);return s.hexdigest()}}i.AnnotationStorage=k;function N(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}var d=new WeakMap;class b extends k{constructor(n){super(),S(this,d,{writable:!0,value:null}),y(this,d,structuredClone(n.serializable))}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _(this,d)}}i.PrintAnnotationStorage=b},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var r=t(132),o=t(1);function g(c,n,s){return n in c?Object.defineProperty(c,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):c[n]=s,c}function S(c,n,s){_(c,n),n.set(c,s)}function _(c,n){if(n.has(c))throw new TypeError("Cannot initialize the same private elements twice on an object")}function P(c,n,s){var f=I(c,n,"set");return y(c,f,s),s}function y(c,n,s){if(n.set)n.set.call(c,s);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=s}}function m(c,n){var s=I(c,n,"get");return u(c,s)}function I(c,n,s){if(!n.has(c))throw new TypeError("attempted to "+s+" private field on non-instance");return n.get(c)}function u(c,n){return n.get?n.get.call(c):n.value}var T=new WeakMap,F=new WeakMap,p=new WeakMap,k=new WeakMap,N=new WeakMap,d=new WeakMap;class b{constructor(n){S(this,T,{writable:!0,value:this.focusin.bind(this)}),S(this,F,{writable:!0,value:this.focusout.bind(this)}),S(this,p,{writable:!0,value:!1}),S(this,k,{writable:!0,value:!1}),S(this,N,{writable:!0,value:!1}),S(this,d,{writable:!0,value:b._zIndex++}),this.constructor===b&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=n.parent,this.id=n.id,this.width=this.height=null,this.pageIndex=n.parent.pageIndex,this.name=n.name,this.div=null;const[s,f]=this.parent.viewportBaseDimensions;this.x=n.x/s,this.y=n.y/f,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=m(this,d)}focusin(n){m(this,p)?P(this,p,!1):this.parent.setSelected(this)}focusout(n){if(!this.isAttachedToDOM)return;const s=n.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(n.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(n){const s=this.parent.div.getBoundingClientRect();this.startX=n.clientX-s.x,this.startY=n.clientY-s.y,n.dataTransfer.setData("text/plain",this.id),n.dataTransfer.effectAllowed="move"}setAt(n,s,f,h){const[C,L]=this.parent.viewportBaseDimensions;[f,h]=this.screenToPageTranslation(f,h),this.x=(n+f)/C,this.y=(s+h)/L,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(n,s){const[f,h]=this.parent.viewportBaseDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x+=n/f,this.y+=s/h,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(n,s){const{rotation:f}=this.parent.viewport;switch(f){case 90:return[s,-n];case 180:return[-n,-s];case 270:return[-s,n];default:return[n,s]}}setDims(n,s){const[f,h]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*n/f}%`,this.div.style.height=`${100*s/h}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",m(this,T)),this.div.addEventListener("focusout",m(this,F));const[n,s]=this.getInitialTranslation();return this.translate(n,s),(0,r.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(n){const s=r.KeyboardManager.platform.isMac;if(n.button!==0||n.ctrlKey&&s){n.preventDefault();return}n.ctrlKey&&!s||n.shiftKey||n.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this),P(this,p,!0)}getRect(n,s){const[f,h]=this.parent.viewportBaseDimensions,[C,L]=this.parent.pageDimensions,M=C*n/f,Q=L*s/h,X=this.x*C,Y=this.y*L,q=this.width*C,z=this.height*L;switch(this.rotation){case 0:return[X+M,L-Y-Q-z,X+M+q,L-Y-Q];case 90:return[X+Q,L-Y+M,X+Q+z,L-Y+M+q];case 180:return[X-M-q,L-Y+Q,X-M,L-Y+Q+z];case 270:return[X-Q-z,L-Y-M-q,X-Q,L-Y-M];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(n,s){const[f,h,C,L]=n,M=C-f,Q=L-h;switch(this.rotation){case 0:return[f,s-L,M,Q];case 90:return[f,s-h,Q,M];case 180:return[C,s-h,M,Q];case 270:return[C,s-L,Q,M];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){P(this,N,!0)}disableEditMode(){P(this,N,!1)}isInEditMode(){return m(this,N)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var n;(n=this.div)===null||n===void 0||n.addEventListener("focusin",m(this,T))}serialize(){(0,o.unreachable)("An editor must be serializable")}static deserialize(n,s){const f=new this.prototype.constructor({parent:s,id:s.getNextId()});f.rotation=n.rotation;const[h,C]=s.pageDimensions,[L,M,Q,X]=f.getRectInCurrentCoords(n.rect,C);return f.x=L/h,f.y=M/C,f.width=Q/h,f.height=X/C,f}remove(){this.div.removeEventListener("focusin",m(this,T)),this.div.removeEventListener("focusout",m(this,F)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var n;(n=this.div)===null||n===void 0||n.classList.add("selectedEditor")}unselect(){var n;(n=this.div)===null||n===void 0||n.classList.remove("selectedEditor")}updateParams(n,s){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return m(this,k)}set isEditing(n){P(this,k,n),n?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}i.AnnotationEditor=b,g(b,"_colorManager",new r.ColorManager),g(b,"_zIndex",1)},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=p,i.opacityToHex=k;var r=t(1),o=t(133);function g(Ee,re,ve){return re in Ee?Object.defineProperty(Ee,re,{value:ve,enumerable:!0,configurable:!0,writable:!0}):Ee[re]=ve,Ee}function S(Ee,re){y(Ee,re),re.add(Ee)}function _(Ee,re,ve){if(!re.has(Ee))throw new TypeError("attempted to get private field on non-instance");return ve}function P(Ee,re,ve){y(Ee,re),re.set(Ee,ve)}function y(Ee,re){if(re.has(Ee))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(Ee,re,ve){var Me=T(Ee,re,"set");return I(Ee,Me,ve),ve}function I(Ee,re,ve){if(re.set)re.set.call(Ee,ve);else{if(!re.writable)throw new TypeError("attempted to set read only private field");re.value=ve}}function u(Ee,re){var ve=T(Ee,re,"get");return F(Ee,ve)}function T(Ee,re,ve){if(!re.has(Ee))throw new TypeError("attempted to "+ve+" private field on non-instance");return re.get(Ee)}function F(Ee,re){return re.get?re.get.call(Ee):re.value}function p(Ee,re,ve){for(const Me of ve)re.addEventListener(Me,Ee[Me].bind(Ee))}function k(Ee){return Math.round(Math.min(255,Math.max(1,255*Ee))).toString(16).padStart(2,"0")}var N=new WeakMap;class d{constructor(){P(this,N,{writable:!0,value:0})}getId(){var re,ve;return`${r.AnnotationEditorPrefix}${m(this,N,(re=u(this,N),ve=re++,re)),ve}`}}var b=new WeakMap,c=new WeakMap,n=new WeakMap,s=new WeakMap;class f{constructor(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;P(this,b,{writable:!0,value:[]}),P(this,c,{writable:!0,value:!1}),P(this,n,{writable:!0,value:void 0}),P(this,s,{writable:!0,value:-1}),m(this,n,re)}add(re){let{cmd:ve,undo:Me,mustExec:qe,type:fe=NaN,overwriteIfSameType:Ce=!1,keepUndo:Le=!1}=re;if(qe&&ve(),u(this,c))return;const ue={cmd:ve,undo:Me,type:fe};if(u(this,s)===-1){u(this,b).length>0&&(u(this,b).length=0),m(this,s,0),u(this,b).push(ue);return}if(Ce&&u(this,b)[u(this,s)].type===fe){Le&&(ue.undo=u(this,b)[u(this,s)].undo),u(this,b)[u(this,s)]=ue;return}const Z=u(this,s)+1;Z===u(this,n)?u(this,b).splice(0,1):(m(this,s,Z),Z<u(this,b).length&&u(this,b).splice(Z)),u(this,b).push(ue)}undo(){u(this,s)!==-1&&(m(this,c,!0),u(this,b)[u(this,s)].undo(),m(this,c,!1),m(this,s,u(this,s)-1))}redo(){u(this,s)<u(this,b).length-1&&(m(this,s,u(this,s)+1),m(this,c,!0),u(this,b)[u(this,s)].cmd(),m(this,c,!1))}hasSomethingToUndo(){return u(this,s)!==-1}hasSomethingToRedo(){return u(this,s)<u(this,b).length-1}destroy(){m(this,b,null)}}i.CommandManager=f;var h=new WeakSet;class C{constructor(re){S(this,h),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ve=C.platform.isMac;for(const[Me,qe]of re)for(const fe of Me){const Ce=fe.startsWith("mac+");ve&&Ce?(this.callbacks.set(fe.slice(4),qe),this.allKeys.add(fe.split("+").at(-1))):!ve&&!Ce&&(this.callbacks.set(fe,qe),this.allKeys.add(fe.split("+").at(-1)))}}static get platform(){const re=typeof navigator<"u"?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:re.includes("Win"),isMac:re.includes("Mac")})}exec(re,ve){if(!this.allKeys.has(ve.key))return;const Me=this.callbacks.get(_(this,h,L).call(this,ve));Me&&(Me.bind(re)(),ve.stopPropagation(),ve.preventDefault())}}i.KeyboardManager=C;function L(Ee){Ee.altKey&&this.buffer.push("alt"),Ee.ctrlKey&&this.buffer.push("ctrl"),Ee.metaKey&&this.buffer.push("meta"),Ee.shiftKey&&this.buffer.push("shift"),this.buffer.push(Ee.key);const re=this.buffer.join("+");return this.buffer.length=0,re}var M=new WeakMap;class Q{constructor(){P(this,M,{writable:!0,value:null})}copy(re){re&&(Array.isArray(re)?m(this,M,re.map(ve=>ve.serialize())):m(this,M,[re.serialize()]),m(this,M,u(this,M).filter(ve=>!!ve)),u(this,M).length===0&&m(this,M,null))}paste(){return u(this,M)}isEmpty(){return u(this,M)===null}destroy(){m(this,M,null)}}class X{get _colors(){const re=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(re),(0,r.shadow)(this,"_colors",re)}convert(re){const ve=(0,o.getRGB)(re);if(!window.matchMedia("(forced-colors: active)").matches)return ve;for(const[Me,qe]of this._colors)if(qe.every((fe,Ce)=>fe===ve[Ce]))return X._colorsMapping.get(Me);return ve}getHexCode(re){const ve=this._colors.get(re);return ve?r.Util.makeHexColor(...ve):re}}i.ColorManager=X,g(X,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Y=new WeakMap,q=new WeakMap,z=new WeakMap,U=new WeakMap,W=new WeakMap,D=new WeakMap,K=new WeakMap,se=new WeakMap,me=new WeakMap,Pe=new WeakMap,H=new WeakMap,A=new WeakMap,E=new WeakMap,G=new WeakMap,j=new WeakMap,l=new WeakMap,v=new WeakMap,w=new WeakSet,O=new WeakSet,B=new WeakSet,$=new WeakSet,J=new WeakSet,ee=new WeakSet,ne=new WeakSet,le=new WeakSet,ie=new WeakSet;class ce{constructor(re,ve){S(this,ie),S(this,le),S(this,ne),S(this,ee),S(this,J),S(this,$),S(this,B),S(this,O),S(this,w),P(this,Y,{writable:!0,value:null}),P(this,q,{writable:!0,value:new Map}),P(this,z,{writable:!0,value:new Map}),P(this,U,{writable:!0,value:new Q}),P(this,W,{writable:!0,value:new f}),P(this,D,{writable:!0,value:0}),P(this,K,{writable:!0,value:null}),P(this,se,{writable:!0,value:null}),P(this,me,{writable:!0,value:new d}),P(this,Pe,{writable:!0,value:!1}),P(this,H,{writable:!0,value:r.AnnotationEditorType.NONE}),P(this,A,{writable:!0,value:new Set}),P(this,E,{writable:!0,value:this.keydown.bind(this)}),P(this,G,{writable:!0,value:this.onEditingAction.bind(this)}),P(this,j,{writable:!0,value:this.onPageChanging.bind(this)}),P(this,l,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),P(this,v,{writable:!0,value:null}),m(this,v,re),m(this,se,ve),u(this,se)._on("editingaction",u(this,G)),u(this,se)._on("pagechanging",u(this,j))}destroy(){_(this,O,be).call(this),u(this,se)._off("editingaction",u(this,G)),u(this,se)._off("pagechanging",u(this,j));for(const re of u(this,z).values())re.destroy();u(this,z).clear(),u(this,q).clear(),m(this,Y,null),u(this,A).clear(),u(this,U).destroy(),u(this,W).destroy()}onPageChanging(re){let{pageNumber:ve}=re;m(this,D,ve-1)}focusMainContainer(){u(this,v).focus()}keydown(re){var ve;(ve=this.getActive())!==null&&ve!==void 0&&ve.shouldGetKeyboardEvents()||ce._keyboardManager.exec(this,re)}onEditingAction(re){["undo","redo","cut","copy","paste","delete","selectAll"].includes(re.name)&&this[re.name]()}setEditingState(re){re?(_(this,w,he).call(this),_(this,B,_e).call(this,{isEditing:u(this,H)!==r.AnnotationEditorType.NONE,isEmpty:_(this,le,Xe).call(this),hasSomethingToUndo:u(this,W).hasSomethingToUndo(),hasSomethingToRedo:u(this,W).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:u(this,U).isEmpty()})):(_(this,O,be).call(this),_(this,B,_e).call(this,{isEditing:!1}))}registerEditorTypes(re){m(this,K,re);for(const ve of u(this,K))_(this,$,we).call(this,ve.defaultPropertiesToUpdate)}getId(){return u(this,me).getId()}addLayer(re){u(this,z).set(re.pageIndex,re),u(this,Pe)?re.enable():re.disable()}removeLayer(re){u(this,z).delete(re.pageIndex)}updateMode(re){if(m(this,H,re),re===r.AnnotationEditorType.NONE)this.setEditingState(!1),_(this,ee,Ae).call(this);else{this.setEditingState(!0),_(this,J,xe).call(this);for(const ve of u(this,z).values())ve.updateMode(re)}}updateToolbar(re){re!==u(this,H)&&u(this,se).dispatch("switchannotationeditormode",{source:this,mode:re})}updateParams(re,ve){for(const Me of u(this,A))Me.updateParams(re,ve);for(const Me of u(this,K))Me.updateDefaultParams(re,ve)}getEditors(re){const ve=[];for(const Me of u(this,q).values())Me.pageIndex===re&&ve.push(Me);return ve}getEditor(re){return u(this,q).get(re)}addEditor(re){u(this,q).set(re.id,re)}removeEditor(re){u(this,q).delete(re.id),this.unselect(re)}setActiveEditor(re){u(this,Y)!==re&&(m(this,Y,re),re&&_(this,$,we).call(this,re.propertiesToUpdate))}toggleSelected(re){if(u(this,A).has(re)){u(this,A).delete(re),re.unselect(),_(this,B,_e).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,A).add(re),re.select(),_(this,$,we).call(this,re.propertiesToUpdate),_(this,B,_e).call(this,{hasSelectedEditor:!0})}setSelected(re){for(const ve of u(this,A))ve!==re&&ve.unselect();u(this,A).clear(),u(this,A).add(re),re.select(),_(this,$,we).call(this,re.propertiesToUpdate),_(this,B,_e).call(this,{hasSelectedEditor:!0})}isSelected(re){return u(this,A).has(re)}unselect(re){re.unselect(),u(this,A).delete(re),_(this,B,_e).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,A).size!==0}undo(){u(this,W).undo(),_(this,B,_e).call(this,{hasSomethingToUndo:u(this,W).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,le,Xe).call(this)})}redo(){u(this,W).redo(),_(this,B,_e).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,W).hasSomethingToRedo(),isEmpty:_(this,le,Xe).call(this)})}addCommands(re){u(this,W).add(re),_(this,B,_e).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,le,Xe).call(this)})}delete(){if(u(this,Y)&&u(this,Y).commitOrRemove(),!this.hasSelection)return;const re=[...u(this,A)],ve=()=>{for(const qe of re)qe.remove()},Me=()=>{for(const qe of re)_(this,ne,$e).call(this,qe)};this.addCommands({cmd:ve,undo:Me,mustExec:!0})}copy(){if(u(this,Y)&&u(this,Y).commitOrRemove(),this.hasSelection){const re=[];for(const ve of u(this,A))ve.isEmpty()||re.push(ve);if(re.length===0)return;u(this,U).copy(re),_(this,B,_e).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(u(this,U).isEmpty())return;this.unselectAll();const re=u(this,z).get(u(this,D)),ve=u(this,U).paste().map(fe=>re.deserialize(fe)),Me=()=>{for(const fe of ve)_(this,ne,$e).call(this,fe);_(this,ie,Oe).call(this,ve)},qe=()=>{for(const fe of ve)fe.remove()};this.addCommands({cmd:Me,undo:qe,mustExec:!0})}selectAll(){for(const re of u(this,A))re.commit();_(this,ie,Oe).call(this,u(this,q).values())}unselectAll(){if(u(this,Y)){u(this,Y).commitOrRemove();return}if(_(this,ie,Oe).size!==0){for(const re of u(this,A))re.unselect();u(this,A).clear(),_(this,B,_e).call(this,{hasSelectedEditor:!1})}}isActive(re){return u(this,Y)===re}getActive(){return u(this,Y)}getMode(){return u(this,H)}}i.AnnotationEditorUIManager=ce;function he(){u(this,v).addEventListener("keydown",u(this,E))}function be(){u(this,v).removeEventListener("keydown",u(this,E))}function _e(Ee){Object.entries(Ee).some(ve=>{let[Me,qe]=ve;return u(this,l)[Me]!==qe})&&u(this,se).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,l),Ee)})}function we(Ee){u(this,se).dispatch("annotationeditorparamschanged",{source:this,details:Ee})}function xe(){if(!u(this,Pe)){m(this,Pe,!0);for(const Ee of u(this,z).values())Ee.enable()}}function Ae(){if(this.unselectAll(),u(this,Pe)){m(this,Pe,!1);for(const Ee of u(this,z).values())Ee.disable()}}function $e(Ee){const re=u(this,z).get(Ee.pageIndex);re?re.addOrRebuild(Ee):this.addEditor(Ee)}function Xe(){if(u(this,q).size===0)return!0;if(u(this,q).size===1)for(const Ee of u(this,q).values())return Ee.isEmpty();return!1}function Oe(Ee){u(this,A).clear();for(const re of Ee)re.isEmpty()||(u(this,A).add(re),re.select());_(this,B,_e).call(this,{hasSelectedEditor:!0})}g(ce,"_keyboardManager",new C([[["ctrl+a","mac+meta+a"],ce.prototype.selectAll],[["ctrl+c","mac+meta+c"],ce.prototype.copy],[["ctrl+v","mac+meta+v"],ce.prototype.paste],[["ctrl+x","mac+meta+x"],ce.prototype.cut],[["ctrl+z","mac+meta+z"],ce.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ce.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ce.prototype.delete],[["Escape","mac+Escape"],ce.prototype.unselectAll]]))},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=i.AnnotationPrefix=void 0,i.deprecated=f,i.getColorValues=Q,i.getCurrentTransform=X,i.getCurrentTransformInverse=Y,i.getFilenameFromUrl=d,i.getPdfFilenameFromUrl=b,i.getRGB=M,i.getXfaPageViewport=L,i.isDataScheme=k,i.isPdfFile=N,i.isValidFetchUrl=n,i.loadScript=s;var r=t(134),o=t(1);function g(q,z,U){return z in q?Object.defineProperty(q,z,{value:U,enumerable:!0,configurable:!0,writable:!0}):q[z]=U,q}const S="http://www.w3.org/2000/svg",_="pdfjs_internal_id_";i.AnnotationPrefix=_;class P{}i.PixelsPerInch=P,g(P,"CSS",96),g(P,"PDF",72),g(P,"PDF_TO_CSS_UNITS",P.CSS/P.PDF);class y extends r.BaseCanvasFactory{constructor(){let{ownerDocument:z=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=z}_createCanvas(z,U){const W=this._document.createElement("canvas");return W.width=z,W.height=U,W}}i.DOMCanvasFactory=y;async function m(q){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n(q,document.baseURI)){const U=await fetch(q);if(!U.ok)throw new Error(U.statusText);return z?new Uint8Array(await U.arrayBuffer()):(0,o.stringToBytes)(await U.text())}return new Promise((U,W)=>{const D=new XMLHttpRequest;D.open("GET",q,!0),z&&(D.responseType="arraybuffer"),D.onreadystatechange=()=>{if(D.readyState===XMLHttpRequest.DONE){if(D.status===200||D.status===0){let K;if(z&&D.response?K=new Uint8Array(D.response):!z&&D.responseText&&(K=(0,o.stringToBytes)(D.responseText)),K){U(K);return}}W(new Error(D.statusText))}},D.send(null)})}class I extends r.BaseCMapReaderFactory{_fetchData(z,U){return m(z,this.isCompressed).then(W=>({cMapData:W,compressionType:U}))}}i.DOMCMapReaderFactory=I;class u extends r.BaseStandardFontDataFactory{_fetchData(z){return m(z,!0)}}i.DOMStandardFontDataFactory=u;class T extends r.BaseSVGFactory{_createSVG(z){return document.createElementNS(S,z)}}i.DOMSVGFactory=T;class F{constructor(z){let{viewBox:U,scale:W,rotation:D,offsetX:K=0,offsetY:se=0,dontFlip:me=!1}=z;this.viewBox=U,this.scale=W,this.rotation=D,this.offsetX=K,this.offsetY=se;const Pe=(U[2]+U[0])/2,H=(U[3]+U[1])/2;let A,E,G,j;switch(D%=360,D<0&&(D+=360),D){case 180:A=-1,E=0,G=0,j=1;break;case 90:A=0,E=1,G=1,j=0;break;case 270:A=0,E=-1,G=-1,j=0;break;case 0:A=1,E=0,G=0,j=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}me&&(G=-G,j=-j);let l,v,w,O;A===0?(l=Math.abs(H-U[1])*W+K,v=Math.abs(Pe-U[0])*W+se,w=Math.abs(U[3]-U[1])*W,O=Math.abs(U[2]-U[0])*W):(l=Math.abs(Pe-U[0])*W+K,v=Math.abs(H-U[1])*W+se,w=Math.abs(U[2]-U[0])*W,O=Math.abs(U[3]-U[1])*W),this.transform=[A*W,E*W,G*W,j*W,l-A*W*Pe-G*W*H,v-E*W*Pe-j*W*H],this.width=w,this.height=O}clone(){let{scale:z=this.scale,rotation:U=this.rotation,offsetX:W=this.offsetX,offsetY:D=this.offsetY,dontFlip:K=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new F({viewBox:this.viewBox.slice(),scale:z,rotation:U,offsetX:W,offsetY:D,dontFlip:K})}convertToViewportPoint(z,U){return o.Util.applyTransform([z,U],this.transform)}convertToViewportRectangle(z){const U=o.Util.applyTransform([z[0],z[1]],this.transform),W=o.Util.applyTransform([z[2],z[3]],this.transform);return[U[0],U[1],W[0],W[1]]}convertToPdfPoint(z,U){return o.Util.applyInverseTransform([z,U],this.transform)}}i.PageViewport=F;class p extends o.BaseException{constructor(z,U){super(z,"RenderingCancelledException"),this.type=U}}i.RenderingCancelledException=p;function k(q){const z=q.length;let U=0;for(;U<z&&q[U].trim()==="";)U++;return q.substring(U,U+5).toLowerCase()==="data:"}function N(q){return typeof q=="string"&&/\.pdf$/i.test(q)}function d(q){const z=q.indexOf("#"),U=q.indexOf("?"),W=Math.min(z>0?z:q.length,U>0?U:q.length);return q.substring(q.lastIndexOf("/",W)+1,W)}function b(q){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof q!="string")return z;if(k(q))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),z;const U=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,W=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,D=U.exec(q);let K=W.exec(D[1])||W.exec(D[2])||W.exec(D[3]);if(K&&(K=K[0],K.includes("%")))try{K=W.exec(decodeURIComponent(K))[0]}catch{}return K||z}class c{constructor(){this.started=Object.create(null),this.times=[]}time(z){z in this.started&&(0,o.warn)(`Timer is already running for ${z}`),this.started[z]=Date.now()}timeEnd(z){z in this.started||(0,o.warn)(`Timer has not been started for ${z}`),this.times.push({name:z,start:this.started[z],end:Date.now()}),delete this.started[z]}toString(){const z=[];let U=0;for(const W of this.times){const D=W.name;D.length>U&&(U=D.length)}for(const W of this.times){const D=W.end-W.start;z.push(`${W.name.padEnd(U)} ${D}ms
`)}return z.join("")}}i.StatTimer=c;function n(q,z){try{const{protocol:U}=z?new URL(q,z):new URL(q);return U==="http:"||U==="https:"}catch{return!1}}function s(q){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((U,W)=>{const D=document.createElement("script");D.src=q,D.onload=function(K){z&&D.remove(),U(K)},D.onerror=function(){W(new Error(`Cannot load script at: ${D.src}`))},(document.head||document.documentElement).append(D)})}function f(q){console.log("Deprecated API usage: "+q)}let h;class C{static toDateObject(z){if(!z||typeof z!="string")return null;h||(h=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const U=h.exec(z);if(!U)return null;const W=parseInt(U[1],10);let D=parseInt(U[2],10);D=D>=1&&D<=12?D-1:0;let K=parseInt(U[3],10);K=K>=1&&K<=31?K:1;let se=parseInt(U[4],10);se=se>=0&&se<=23?se:0;let me=parseInt(U[5],10);me=me>=0&&me<=59?me:0;let Pe=parseInt(U[6],10);Pe=Pe>=0&&Pe<=59?Pe:0;const H=U[7]||"Z";let A=parseInt(U[8],10);A=A>=0&&A<=23?A:0;let E=parseInt(U[9],10)||0;return E=E>=0&&E<=59?E:0,H==="-"?(se+=A,me+=E):H==="+"&&(se-=A,me-=E),new Date(Date.UTC(W,D,K,se,me,Pe))}}i.PDFDateString=C;function L(q,z){let{scale:U=1,rotation:W=0}=z;const{width:D,height:K}=q.attributes.style,se=[0,0,parseInt(D),parseInt(K)];return new F({viewBox:se,scale:U,rotation:W})}function M(q){if(q.startsWith("#")){const z=parseInt(q.slice(1),16);return[(z&16711680)>>16,(z&65280)>>8,z&255]}return q.startsWith("rgb(")?q.slice(4,-1).split(",").map(z=>parseInt(z)):q.startsWith("rgba(")?q.slice(5,-1).split(",").map(z=>parseInt(z)).slice(0,3):((0,o.warn)(`Not a valid color format: "${q}"`),[0,0,0])}function Q(q){const z=document.createElement("span");z.style.visibility="hidden",document.body.append(z);for(const U of q.keys()){z.style.color=U;const W=window.getComputedStyle(z).color;q.set(U,M(W))}z.remove()}function X(q){const{a:z,b:U,c:W,d:D,e:K,f:se}=q.getTransform();return[z,U,W,D,K,se]}function Y(q){const{a:z,b:U,c:W,d:D,e:K,f:se}=q.getTransform().invertSelf();return[z,U,W,D,K,se]}},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var r=t(1);class o{constructor(){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,m){if(y<=0||m<=0)throw new Error("Invalid canvas size");const I=this._createCanvas(y,m);return{canvas:I,context:I.getContext("2d")}}reset(y,m,I){if(!y.canvas)throw new Error("Canvas is not specified");if(m<=0||I<=0)throw new Error("Invalid canvas size");y.canvas.width=m,y.canvas.height=I}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,m){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=o;class g{constructor(y){let{baseUrl:m=null,isCompressed:I=!1}=y;this.constructor===g&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=I}async fetch(y){let{name:m}=y;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");const I=this.baseUrl+m+(this.isCompressed?".bcmap":""),u=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(I,u).catch(T=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(y,m){(0,r.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=g;class S{constructor(y){let{baseUrl:m=null}=y;this.constructor===S&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}async fetch(y){let{filename:m}=y;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${m}`;return this._fetchData(I).catch(u=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(y){(0,r.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=S;class _{constructor(){this.constructor===_&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,m){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(y<=0||m<=0)throw new Error("Invalid SVG dimensions");const u=this._createSVG("svg:svg");return u.setAttribute("version","1.1"),I||(u.setAttribute("width",`${y}px`),u.setAttribute("height",`${m}px`)),u.setAttribute("preserveAspectRatio","none"),u.setAttribute("viewBox",`0 0 ${y} ${m}`),u}createElement(y){if(typeof y!="string")throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,r.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=_},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var r=t(1);const o=3285377520,g=4294901760,S=65535;class _{constructor(y){this.h1=y?y&4294967295:o,this.h2=y?y&4294967295:o}update(y){let m,I;if(typeof y=="string"){m=new Uint8Array(y.length*2),I=0;for(let f=0,h=y.length;f<h;f++){const C=y.charCodeAt(f);C<=255?m[I++]=C:(m[I++]=C>>>8,m[I++]=C&255)}}else if((0,r.isArrayBuffer)(y))m=y.slice(),I=m.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const u=I>>2,T=I-u*4,F=new Uint32Array(m.buffer,0,u);let p=0,k=0,N=this.h1,d=this.h2;const b=3432918353,c=461845907,n=b&S,s=c&S;for(let f=0;f<u;f++)f&1?(p=F[f],p=p*b&g|p*n&S,p=p<<15|p>>>17,p=p*c&g|p*s&S,N^=p,N=N<<13|N>>>19,N=N*5+3864292196):(k=F[f],k=k*b&g|k*n&S,k=k<<15|k>>>17,k=k*c&g|k*s&S,d^=k,d=d<<13|d>>>19,d=d*5+3864292196);switch(p=0,T){case 3:p^=m[u*4+2]<<16;case 2:p^=m[u*4+1]<<8;case 1:p^=m[u*4],p=p*b&g|p*n&S,p=p<<15|p>>>17,p=p*c&g|p*s&S,u&1?N^=p:d^=p}this.h1=N,this.h2=d}hexdigest(){let y=this.h1,m=this.h2;y^=m>>>1,y=y*3981806797&g|y*36045&S,m=m*4283543511&g|((m<<16|y>>>16)*2950163797&g)>>>16,y^=m>>>1,y=y*444984403&g|y*60499&S,m=m*3301882366&g|((m<<16|y>>>16)*3120437893&g)>>>16,y^=m>>>1;const I=(y>>>0).toString(16),u=(m>>>0).toString(16);return I.padStart(8,"0")+u.padStart(8,"0")}}i.MurmurHash3_64=_},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var r=t(1);class o{constructor(P){let{docId:y,onUnsupportedFeature:m,ownerDocument:I=globalThis.document,styleElement:u=null}=P;this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=y,this._onUnsupportedFeature=m,this._document=I,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(P){this.nativeFontFaces.push(P),this._document.fonts.add(P)}insertRule(P){let y=this.styleElement;y||(y=this.styleElement=this._document.createElement("style"),y.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(y));const m=y.sheet;m.insertRule(P,m.cssRules.length)}clear(){for(const P of this.nativeFontFaces)this._document.fonts.delete(P);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(P){if(P.attached||P.missingFile)return;if(P.attached=!0,this.isFontLoadingAPISupported){const m=P.createNativeFontFace();if(m){this.addNativeFontFace(m);try{await m.loaded}catch(I){throw this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${m.family}': '${I}'.`),P.disableFontFace=!0,I}}return}const y=P.createFontFaceRule();if(y){if(this.insertRule(y),this.isSyncFontLoadingSupported)return;await new Promise(m=>{const I=this._queueLoadingCallback(m);this._prepareFontLoadEvent([y],[P],I)})}}_queueLoadingCallback(P){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var P;const y=!!((P=this._document)!==null&&P!==void 0&&P.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",y)}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(P,y,m){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let g;i.FontLoader=g,i.FontLoader=g=class extends o{constructor(P){super(P),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let P=!1;if(typeof navigator>"u")P=!0;else{const y=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);y?.[1]>=14&&(P=!0)}return(0,r.shadow)(this,"isSyncFontLoadingSupported",P)}_queueLoadingCallback(P){function y(){for((0,r.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;m.requests.length>0&&m.requests[0].done;){const u=m.requests.shift();setTimeout(u.callback,0)}}const m=this.loadingContext,I={id:`pdfjs-font-loading-${m.nextRequestId++}`,done:!1,complete:y,callback:P};return m.requests.push(I),I}get _loadTestFont(){const P=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,r.shadow)(this,"_loadTestFont",P())}_prepareFontLoadEvent(P,y,m){function I(X,Y){return X.charCodeAt(Y)<<24|X.charCodeAt(Y+1)<<16|X.charCodeAt(Y+2)<<8|X.charCodeAt(Y+3)&255}function u(X,Y,q,z){const U=X.substring(0,Y),W=X.substring(Y+q);return U+z+W}let T,F;const p=this._document.createElement("canvas");p.width=1,p.height=1;const k=p.getContext("2d");let N=0;function d(X,Y){if(N++,N>30){(0,r.warn)("Load test font never loaded."),Y();return}if(k.font="30px "+X,k.fillText(".",0,20),k.getImageData(0,0,1,1).data[3]>0){Y();return}setTimeout(d.bind(null,X,Y))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=u(c,976,b.length,b);const s=16,f=1482184792;let h=I(c,s);for(T=0,F=b.length-3;T<F;T+=4)h=h-f+I(b,T)|0;T<b.length&&(h=h-f+I(b+"XXX",T)|0),c=u(c,s,4,(0,r.string32)(h));const C=`url(data:font/opentype;base64,${btoa(c)});`,L=`@font-face {font-family:"${b}";src:${C}}`;this.insertRule(L);const M=[];for(const X of y)M.push(X.loadedName);M.push(b);const Q=this._document.createElement("div");Q.style.visibility="hidden",Q.style.width=Q.style.height="10px",Q.style.position="absolute",Q.style.top=Q.style.left="0px";for(const X of M){const Y=this._document.createElement("span");Y.textContent="Hi",Y.style.fontFamily=X,Q.append(Y)}this._document.body.append(Q),d(b,()=>{Q.remove(),m.complete()})}};class S{constructor(P,y){let{isEvalSupported:m=!0,disableFontFace:I=!1,ignoreErrors:u=!1,onUnsupportedFeature:T,fontRegistry:F=null}=y;this.compiledGlyphs=Object.create(null);for(const p in P)this[p]=P[p];this.isEvalSupported=m!==!1,this.disableFontFace=I===!0,this.ignoreErrors=u===!0,this._onUnsupportedFeature=T,this.fontRegistry=F}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let P;if(!this.cssFontInfo)P=new FontFace(this.loadedName,this.data,{});else{const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),P=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}return this.fontRegistry&&this.fontRegistry.registerFont(this),P}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const P=(0,r.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(P)});`;let m;if(!this.cssFontInfo)m=`@font-face {font-family:"${this.loadedName}";src:${y}}`;else{let I=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(I+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),m=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${I}src:${y}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,y),m}getPathGenerator(P,y){if(this.compiledGlyphs[y]!==void 0)return this.compiledGlyphs[y];let m;try{m=P.get(this.loadedName+"_path_"+y)}catch(I){if(!this.ignoreErrors)throw I;return this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[y]=function(u,T){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const I=[];for(const u of m){const T=u.args!==void 0?u.args.join(","):"";I.push("c.",u.cmd,"(",T,`);
`)}return this.compiledGlyphs[y]=new Function("c","size",I.join(""))}return this.compiledGlyphs[y]=function(I,u){for(const T of m)T.cmd==="scale"&&(T.args=[u,-u]),I[T.cmd].apply(I,T.args)}}}i.FontFaceObject=S},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var r=t(133),o=t(1),g=t(138),S=t(139),_=t(3);function P(H,A){y(H,A),A.add(H)}function y(H,A){if(A.has(H))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(H,A,E){if(!A.has(H))throw new TypeError("attempted to get private field on non-instance");return E}const I=16,u=100,T=4096,F=15,p=10,k=_.isNodeJS&&typeof Path2D>"u"?-1:1e3,N=16;function d(H,A){if(H._removeMirroring)throw new Error("Context is already forwarding operations.");H.__originalSave=H.save,H.__originalRestore=H.restore,H.__originalRotate=H.rotate,H.__originalScale=H.scale,H.__originalTranslate=H.translate,H.__originalTransform=H.transform,H.__originalSetTransform=H.setTransform,H.__originalResetTransform=H.resetTransform,H.__originalClip=H.clip,H.__originalMoveTo=H.moveTo,H.__originalLineTo=H.lineTo,H.__originalBezierCurveTo=H.bezierCurveTo,H.__originalRect=H.rect,H.__originalClosePath=H.closePath,H.__originalBeginPath=H.beginPath,H._removeMirroring=()=>{H.save=H.__originalSave,H.restore=H.__originalRestore,H.rotate=H.__originalRotate,H.scale=H.__originalScale,H.translate=H.__originalTranslate,H.transform=H.__originalTransform,H.setTransform=H.__originalSetTransform,H.resetTransform=H.__originalResetTransform,H.clip=H.__originalClip,H.moveTo=H.__originalMoveTo,H.lineTo=H.__originalLineTo,H.bezierCurveTo=H.__originalBezierCurveTo,H.rect=H.__originalRect,H.closePath=H.__originalClosePath,H.beginPath=H.__originalBeginPath,delete H._removeMirroring},H.save=function(){A.save(),this.__originalSave()},H.restore=function(){A.restore(),this.__originalRestore()},H.translate=function(G,j){A.translate(G,j),this.__originalTranslate(G,j)},H.scale=function(G,j){A.scale(G,j),this.__originalScale(G,j)},H.transform=function(G,j,l,v,w,O){A.transform(G,j,l,v,w,O),this.__originalTransform(G,j,l,v,w,O)},H.setTransform=function(G,j,l,v,w,O){A.setTransform(G,j,l,v,w,O),this.__originalSetTransform(G,j,l,v,w,O)},H.resetTransform=function(){A.resetTransform(),this.__originalResetTransform()},H.rotate=function(G){A.rotate(G),this.__originalRotate(G)},H.clip=function(G){A.clip(G),this.__originalClip(G)},H.moveTo=function(E,G){A.moveTo(E,G),this.__originalMoveTo(E,G)},H.lineTo=function(E,G){A.lineTo(E,G),this.__originalLineTo(E,G)},H.bezierCurveTo=function(E,G,j,l,v,w){A.bezierCurveTo(E,G,j,l,v,w),this.__originalBezierCurveTo(E,G,j,l,v,w)},H.rect=function(E,G,j,l){A.rect(E,G,j,l),this.__originalRect(E,G,j,l)},H.closePath=function(){A.closePath(),this.__originalClosePath()},H.beginPath=function(){A.beginPath(),this.__originalBeginPath()}}class b{constructor(A){this.canvasFactory=A,this.cache=Object.create(null)}getCanvas(A,E,G){let j;return this.cache[A]!==void 0?(j=this.cache[A],this.canvasFactory.reset(j,E,G)):(j=this.canvasFactory.create(E,G),this.cache[A]=j),j}delete(A){delete this.cache[A]}clear(){for(const A in this.cache){const E=this.cache[A];this.canvasFactory.destroy(E),delete this.cache[A]}}}function c(H,A,E,G,j,l,v,w,O,B){const[$,J,ee,ne,le,ie]=(0,r.getCurrentTransform)(H);if(J===0&&ee===0){const be=v*$+le,_e=Math.round(be),we=w*ne+ie,xe=Math.round(we),Ae=(v+O)*$+le,$e=Math.abs(Math.round(Ae)-_e)||1,Xe=(w+B)*ne+ie,Oe=Math.abs(Math.round(Xe)-xe)||1;return H.setTransform(Math.sign($),0,0,Math.sign(ne),_e,xe),H.drawImage(A,E,G,j,l,0,0,$e,Oe),H.setTransform($,J,ee,ne,le,ie),[$e,Oe]}if($===0&&ne===0){const be=w*ee+le,_e=Math.round(be),we=v*J+ie,xe=Math.round(we),Ae=(w+B)*ee+le,$e=Math.abs(Math.round(Ae)-_e)||1,Xe=(v+O)*J+ie,Oe=Math.abs(Math.round(Xe)-xe)||1;return H.setTransform(0,Math.sign(J),Math.sign(ee),0,_e,xe),H.drawImage(A,E,G,j,l,0,0,Oe,$e),H.setTransform($,J,ee,ne,le,ie),[Oe,$e]}H.drawImage(A,E,G,j,l,v,w,O,B);const ce=Math.hypot($,J),he=Math.hypot(ee,ne);return[ce*O,he*B]}function n(H){const{width:A,height:E}=H;if(A>k||E>k)return null;const G=1e3,j=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=A+1;let v=new Uint8Array(l*(E+1)),w,O,B;const $=A+7&-8;let J=new Uint8Array($*E),ee=0;for(const he of H.data){let be=128;for(;be>0;)J[ee++]=he&be?0:255,be>>=1}let ne=0;for(ee=0,J[ee]!==0&&(v[0]=1,++ne),O=1;O<A;O++)J[ee]!==J[ee+1]&&(v[O]=J[ee]?2:1,++ne),ee++;for(J[ee]!==0&&(v[O]=2,++ne),w=1;w<E;w++){ee=w*$,B=w*l,J[ee-$]!==J[ee]&&(v[B]=J[ee]?1:8,++ne);let he=(J[ee]?4:0)+(J[ee-$]?8:0);for(O=1;O<A;O++)he=(he>>2)+(J[ee+1]?4:0)+(J[ee-$+1]?8:0),j[he]&&(v[B+O]=j[he],++ne),ee++;if(J[ee-$]!==J[ee]&&(v[B+O]=J[ee]?2:4,++ne),ne>G)return null}for(ee=$*(E-1),B=w*l,J[ee]!==0&&(v[B]=8,++ne),O=1;O<A;O++)J[ee]!==J[ee+1]&&(v[B+O]=J[ee]?4:8,++ne),ee++;if(J[ee]!==0&&(v[B+O]=4,++ne),ne>G)return null;const le=new Int32Array([0,l,-1,0,-l,0,0,0,1]),ie=new Path2D;for(w=0;ne&&w<=E;w++){let he=w*l;const be=he+A;for(;he<be&&!v[he];)he++;if(he===be)continue;ie.moveTo(he%l,w);const _e=he;let we=v[he];do{const xe=le[we];do he+=xe;while(!v[he]);const Ae=v[he];Ae!==5&&Ae!==10?(we=Ae,v[he]=0):(we=Ae&51*we>>4,v[he]&=we>>2|we<<2),ie.lineTo(he%l,he/l|0),v[he]||--ne}while(_e!==he);--w}return J=null,v=null,function(he){he.save(),he.scale(1/A,-1/E),he.translate(0,-E),he.fill(ie),he.beginPath(),he.restore()}}class s{constructor(A,E){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,A,E])}clone(){const A=Object.create(this);return A.clipBox=this.clipBox.slice(),A}setCurrentPoint(A,E){this.x=A,this.y=E}updatePathMinMax(A,E,G){[E,G]=o.Util.applyTransform([E,G],A),this.minX=Math.min(this.minX,E),this.minY=Math.min(this.minY,G),this.maxX=Math.max(this.maxX,E),this.maxY=Math.max(this.maxY,G)}updateRectMinMax(A,E){const G=o.Util.applyTransform(E,A),j=o.Util.applyTransform(E.slice(2),A);this.minX=Math.min(this.minX,G[0],j[0]),this.minY=Math.min(this.minY,G[1],j[1]),this.maxX=Math.max(this.maxX,G[0],j[0]),this.maxY=Math.max(this.maxY,G[1],j[1])}updateScalingPathMinMax(A,E){o.Util.scaleMinMax(A,E),this.minX=Math.min(this.minX,E[0]),this.maxX=Math.max(this.maxX,E[1]),this.minY=Math.min(this.minY,E[2]),this.maxY=Math.max(this.maxY,E[3])}updateCurvePathMinMax(A,E,G,j,l,v,w,O,B,$){const J=o.Util.bezierBoundingBox(E,G,j,l,v,w,O,B);if($){$[0]=Math.min($[0],J[0],J[2]),$[1]=Math.max($[1],J[0],J[2]),$[2]=Math.min($[2],J[1],J[3]),$[3]=Math.max($[3],J[1],J[3]);return}this.updateRectMinMax(A,J)}getPathBoundingBox(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.PathType.FILL,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const G=[this.minX,this.minY,this.maxX,this.maxY];if(A===g.PathType.STROKE){E||(0,o.unreachable)("Stroke bounding box must include transform.");const j=o.Util.singularValueDecompose2dScale(E),l=j[0]*this.lineWidth/2,v=j[1]*this.lineWidth/2;G[0]-=l,G[1]-=v,G[2]+=l,G[3]+=v}return G}updateClipFromPath(){const A=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(A||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(A){this.clipBox=A,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.PathType.FILL,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return o.Util.intersect(this.clipBox,this.getPathBoundingBox(A,E))}}function f(H,A){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData<"u"&&A instanceof ImageData){H.putImageData(A,0,0);return}const G=A.height,j=A.width,l=G%N,v=(G-l)/N,w=l===0?v:v+1,O=H.createImageData(j,N);let B=0,$;const J=A.data,ee=O.data;let ne,le,ie,ce,he,be,_e,we;if(E)switch(E.length){case 1:he=E[0],be=E[0],_e=E[0],we=E[0];break;case 4:he=E[0],be=E[1],_e=E[2],we=E[3];break}if(A.kind===o.ImageKind.GRAYSCALE_1BPP){const xe=J.byteLength,Ae=new Uint32Array(ee.buffer,0,ee.byteLength>>2),$e=Ae.length,Xe=j+7>>3;let Oe=4294967295,Ee=o.FeatureTest.isLittleEndian?4278190080:255;for(we&&we[0]===255&&we[255]===0&&([Oe,Ee]=[Ee,Oe]),ne=0;ne<w;ne++){for(ie=ne<v?N:l,$=0,le=0;le<ie;le++){const re=xe-B;let ve=0;const Me=re>Xe?j:re*8-7,qe=Me&-8;let fe=0,Ce=0;for(;ve<qe;ve+=8)Ce=J[B++],Ae[$++]=Ce&128?Oe:Ee,Ae[$++]=Ce&64?Oe:Ee,Ae[$++]=Ce&32?Oe:Ee,Ae[$++]=Ce&16?Oe:Ee,Ae[$++]=Ce&8?Oe:Ee,Ae[$++]=Ce&4?Oe:Ee,Ae[$++]=Ce&2?Oe:Ee,Ae[$++]=Ce&1?Oe:Ee;for(;ve<Me;ve++)fe===0&&(Ce=J[B++],fe=128),Ae[$++]=Ce&fe?Oe:Ee,fe>>=1}for(;$<$e;)Ae[$++]=0;H.putImageData(O,0,ne*N)}}else if(A.kind===o.ImageKind.RGBA_32BPP){const xe=!!(he||be||_e);for(le=0,ce=j*N*4,ne=0;ne<v;ne++){if(ee.set(J.subarray(B,B+ce)),B+=ce,xe)for(let Ae=0;Ae<ce;Ae+=4)he&&(ee[Ae+0]=he[ee[Ae+0]]),be&&(ee[Ae+1]=be[ee[Ae+1]]),_e&&(ee[Ae+2]=_e[ee[Ae+2]]);H.putImageData(O,0,le),le+=N}if(ne<w){if(ce=j*l*4,ee.set(J.subarray(B,B+ce)),xe)for(let Ae=0;Ae<ce;Ae+=4)he&&(ee[Ae+0]=he[ee[Ae+0]]),be&&(ee[Ae+1]=be[ee[Ae+1]]),_e&&(ee[Ae+2]=_e[ee[Ae+2]]);H.putImageData(O,0,le)}}else if(A.kind===o.ImageKind.RGB_24BPP){const xe=!!(he||be||_e);for(ie=N,ce=j*ie,ne=0;ne<w;ne++){for(ne>=v&&(ie=l,ce=j*ie),$=0,le=ce;le--;)ee[$++]=J[B++],ee[$++]=J[B++],ee[$++]=J[B++],ee[$++]=255;if(xe)for(let Ae=0;Ae<$;Ae+=4)he&&(ee[Ae+0]=he[ee[Ae+0]]),be&&(ee[Ae+1]=be[ee[Ae+1]]),_e&&(ee[Ae+2]=_e[ee[Ae+2]]);H.putImageData(O,0,ne*N)}}else throw new Error(`bad image kind: ${A.kind}`)}function h(H,A){if(A.bitmap){H.drawImage(A.bitmap,0,0);return}const E=A.height,G=A.width,j=E%N,l=(E-j)/N,v=j===0?l:l+1,w=H.createImageData(G,N);let O=0;const B=A.data,$=w.data;for(let J=0;J<v;J++){const ee=J<l?N:j;({srcPos:O}=(0,S.applyMaskImageData)({src:B,srcPos:O,dest:$,width:G,height:ee})),H.putImageData(w,0,J*N)}}function C(H,A){const E=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let G=0,j=E.length;G<j;G++){const l=E[G];H[l]!==void 0&&(A[l]=H[l])}H.setLineDash!==void 0&&(A.setLineDash(H.getLineDash()),A.lineDashOffset=H.lineDashOffset)}function L(H,A){H.strokeStyle=H.fillStyle=A||"#000000",H.fillRule="nonzero",H.globalAlpha=1,H.lineWidth=1,H.lineCap="butt",H.lineJoin="miter",H.miterLimit=10,H.globalCompositeOperation="source-over",H.font="10px sans-serif",H.setLineDash!==void 0&&(H.setLineDash([]),H.lineDashOffset=0)}function M(H,A,E,G){const j=H.length;for(let l=3;l<j;l+=4){const v=H[l];if(v===0)H[l-3]=A,H[l-2]=E,H[l-1]=G;else if(v<255){const w=255-v;H[l-3]=H[l-3]*v+A*w>>8,H[l-2]=H[l-2]*v+E*w>>8,H[l-1]=H[l-1]*v+G*w>>8}}}function Q(H,A,E){const G=H.length,j=1/255;for(let l=3;l<G;l+=4){const v=E?E[H[l]]:H[l];A[l]=A[l]*v*j|0}}function X(H,A,E){const G=H.length;for(let j=3;j<G;j+=4){const l=H[j-3]*77+H[j-2]*152+H[j-1]*28;A[j]=E?A[j]*E[l>>8]>>8:A[j]*l>>16}}function Y(H,A,E,G,j,l,v,w,O,B,$){const J=!!l,ee=J?l[0]:0,ne=J?l[1]:0,le=J?l[2]:0;let ie;j==="Luminosity"?ie=X:ie=Q;const he=Math.min(G,Math.ceil(1048576/E));for(let be=0;be<G;be+=he){const _e=Math.min(he,G-be),we=H.getImageData(w-B,be+(O-$),E,_e),xe=A.getImageData(w,be+O,E,_e);J&&M(we.data,ee,ne,le),ie(we.data,xe.data,v),A.putImageData(xe,w,be+O)}}function q(H,A,E,G){const j=G[0],l=G[1],v=G[2]-j,w=G[3]-l;v===0||w===0||(Y(A.context,E,v,w,A.subtype,A.backdrop,A.transferMap,j,l,A.offsetX,A.offsetY),H.save(),H.globalAlpha=1,H.globalCompositeOperation="source-over",H.setTransform(1,0,0,1,0,0),H.drawImage(E.canvas,0,0),H.restore())}function z(H,A){const E=o.Util.singularValueDecompose2dScale(H);E[0]=Math.fround(E[0]),E[1]=Math.fround(E[1]);const G=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return A!==void 0?A:E[0]<=G||E[1]<=G}const U=["butt","round","square"],W=["miter","round","bevel"],D={},K={};var se=new WeakSet;class me{constructor(A,E,G,j,l,v,w,O){P(this,se),this.ctx=A,this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=E,this.objs=G,this.canvasFactory=j,this.imageLayer=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=v,this.cachedCanvases=new b(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=w,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=O?.background||null,this.foregroundColor=O?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(A){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof A=="string"?A.startsWith("g_")?this.commonObjs.get(A):this.objs.get(A):E}beginDrawing(A){let{transform:E,viewport:G,transparency:j=!1,background:l=null}=A;const v=this.ctx.canvas.width,w=this.ctx.canvas.height,O=l||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const B=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const $=this.backgroundColor=this.ctx.fillStyle;let J=!0,ee=O;if(this.ctx.fillStyle=O,ee=this.ctx.fillStyle,J=typeof ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ee),B==="#000000"&&$==="#ffffff"||B===$||!J)this.foregroundColor=this.backgroundColor=null;else{const[ne,le,ie]=(0,r.getRGB)(ee),ce=be=>(be/=255,be<=.03928?be/12.92:((be+.055)/1.055)**2.4),he=Math.round(.2126*ce(ne)+.7152*ce(le)+.0722*ce(ie));this.selectColor=(be,_e,we)=>{const xe=.2126*ce(be)+.7152*ce(_e)+.0722*ce(we);return Math.round(xe)===he?$:B}}}if(this.ctx.fillStyle=this.backgroundColor||O,this.ctx.fillRect(0,0,v,w),this.ctx.restore(),j){const B=this.cachedCanvases.getCanvas("transparent",v,w);this.compositeCtx=this.ctx,this.transparentCanvas=B.canvas,this.ctx=B.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),L(this.ctx,this.foregroundColor),E&&(this.ctx.transform(...E),this.outputScaleX=E[0],this.outputScaleY=E[0]),this.ctx.transform(...G.transform),this.viewportScale=G.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx),this.imageLayer&&((0,r.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(A,E,G,j){const l=A.argsArray,v=A.fnArray;let w=E||0;const O=l.length;if(O===w)return w;const B=O-w>p&&typeof G=="function",$=B?Date.now()+F:0;let J=0;const ee=this.commonObjs,ne=this.objs;let le;for(;;){if(j!==void 0&&w===j.nextBreakPoint)return j.breakIt(w,G),w;if(le=v[w],le!==o.OPS.dependency)this[le].apply(this,l[w]);else for(const ie of l[w]){const ce=ie.startsWith("g_")?ee:ne;if(!ce.has(ie))return ce.get(ie,G),w}if(w++,w===O)return w;if(B&&++J>p){if(Date.now()>$)return G(),w;J=0}}}endDrawing(){m(this,se,Pe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const A of this._cachedBitmapsMap.values()){for(const E of A.values())typeof HTMLCanvasElement<"u"&&E instanceof HTMLCanvasElement&&(E.width=E.height=0);A.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(A,E){const G=A.width,j=A.height;let l=Math.max(Math.hypot(E[0],E[1]),1),v=Math.max(Math.hypot(E[2],E[3]),1),w=G,O=j,B="prescale1",$,J;for(;l>2&&w>1||v>2&&O>1;){let ee=w,ne=O;l>2&&w>1&&(ee=Math.ceil(w/2),l/=w/ee),v>2&&O>1&&(ne=Math.ceil(O/2),v/=O/ne),$=this.cachedCanvases.getCanvas(B,ee,ne),J=$.context,J.clearRect(0,0,ee,ne),J.drawImage(A,0,0,w,O,0,0,ee,ne),A=$.canvas,w=ee,O=ne,B=B==="prescale1"?"prescale2":"prescale1"}return{img:A,paintWidth:w,paintHeight:O}}_createMaskCanvas(A){const E=this.ctx,{width:G,height:j}=A,l=this.current.fillColor,v=this.current.patternFill,w=(0,r.getCurrentTransform)(E);let O,B,$,J;if((A.bitmap||A.data)&&A.count>1){const $e=A.bitmap||A.data.buffer,Xe=w.slice(0,4);B=JSON.stringify(v?Xe:[Xe,l]),O=this._cachedBitmapsMap.get($e),O||(O=new Map,this._cachedBitmapsMap.set($e,O));const Oe=O.get(B);if(Oe&&!v){const Ee=Math.round(Math.min(w[0],w[2])+w[4]),re=Math.round(Math.min(w[1],w[3])+w[5]);return{canvas:Oe,offsetX:Ee,offsetY:re}}$=Oe}$||(J=this.cachedCanvases.getCanvas("maskCanvas",G,j),h(J.context,A));let ee=o.Util.transform(w,[1/G,0,0,-1/j,0,0]);ee=o.Util.transform(ee,[1,0,0,1,0,-j]);const ne=o.Util.applyTransform([0,0],ee),le=o.Util.applyTransform([G,j],ee),ie=o.Util.normalizeRect([ne[0],ne[1],le[0],le[1]]),ce=Math.round(ie[2]-ie[0])||1,he=Math.round(ie[3]-ie[1])||1,be=this.cachedCanvases.getCanvas("fillCanvas",ce,he),_e=be.context,we=Math.min(ne[0],le[0]),xe=Math.min(ne[1],le[1]);_e.translate(-we,-xe),_e.transform(...ee),$||($=this._scaleImage(J.canvas,(0,r.getCurrentTransformInverse)(_e)),$=$.img,O&&v&&O.set(B,$)),_e.imageSmoothingEnabled=z((0,r.getCurrentTransform)(_e),A.interpolate),c(_e,$,0,0,$.width,$.height,0,0,G,j),_e.globalCompositeOperation="source-in";const Ae=o.Util.transform((0,r.getCurrentTransformInverse)(_e),[1,0,0,1,-we,-xe]);return _e.fillStyle=v?l.getPattern(E,this,Ae,g.PathType.FILL):l,_e.fillRect(0,0,G,j),O&&!v&&(this.cachedCanvases.delete("fillCanvas"),O.set(B,be.canvas)),{canvas:be.canvas,offsetX:Math.round(we),offsetY:Math.round(xe)}}setLineWidth(A){A!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=A,this.ctx.lineWidth=A}setLineCap(A){this.ctx.lineCap=U[A]}setLineJoin(A){this.ctx.lineJoin=W[A]}setMiterLimit(A){this.ctx.miterLimit=A}setDash(A,E){const G=this.ctx;G.setLineDash!==void 0&&(G.setLineDash(A),G.lineDashOffset=E)}setRenderingIntent(A){}setFlatness(A){}setGState(A){for(let E=0,G=A.length;E<G;E++){const j=A[E],l=j[0],v=j[1];switch(l){case"LW":this.setLineWidth(v);break;case"LC":this.setLineCap(v);break;case"LJ":this.setLineJoin(v);break;case"ML":this.setMiterLimit(v);break;case"D":this.setDash(v[0],v[1]);break;case"RI":this.setRenderingIntent(v);break;case"FL":this.setFlatness(v);break;case"Font":this.setFont(v[0],v[1]);break;case"CA":this.current.strokeAlpha=j[1];break;case"ca":this.current.fillAlpha=j[1],this.ctx.globalAlpha=j[1];break;case"BM":this.ctx.globalCompositeOperation=v;break;case"SMask":this.current.activeSMask=v?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=v}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const A=this.inSMaskMode;this.current.activeSMask&&!A?this.beginSMaskMode():!this.current.activeSMask&&A&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const A=this.ctx.canvas.width,E=this.ctx.canvas.height,G="smaskGroupAt"+this.groupLevel,j=this.cachedCanvases.getCanvas(G,A,E);this.suspendedCtx=this.ctx,this.ctx=j.context;const l=this.ctx;l.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),C(this.suspendedCtx,l),d(l,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),C(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(A){if(!this.current.activeSMask)return;A?(A[0]=Math.floor(A[0]),A[1]=Math.floor(A[1]),A[2]=Math.ceil(A[2]),A[3]=Math.ceil(A[3])):A=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const E=this.current.activeSMask,G=this.suspendedCtx;q(G,E,this.ctx,A),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(C(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const A=this.current;this.stateStack.push(A),this.current=A.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),C(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(A,E,G,j,l,v){this.ctx.transform(A,E,G,j,l,v),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(A,E,G){const j=this.ctx,l=this.current;let v=l.x,w=l.y,O,B;const $=(0,r.getCurrentTransform)(j),J=$[0]===0&&$[3]===0||$[1]===0&&$[2]===0,ee=J?G.slice(0):null;for(let ne=0,le=0,ie=A.length;ne<ie;ne++)switch(A[ne]|0){case o.OPS.rectangle:v=E[le++],w=E[le++];const ce=E[le++],he=E[le++],be=v+ce,_e=w+he;j.moveTo(v,w),ce===0||he===0?j.lineTo(be,_e):(j.lineTo(be,w),j.lineTo(be,_e),j.lineTo(v,_e)),J||l.updateRectMinMax($,[v,w,be,_e]),j.closePath();break;case o.OPS.moveTo:v=E[le++],w=E[le++],j.moveTo(v,w),J||l.updatePathMinMax($,v,w);break;case o.OPS.lineTo:v=E[le++],w=E[le++],j.lineTo(v,w),J||l.updatePathMinMax($,v,w);break;case o.OPS.curveTo:O=v,B=w,v=E[le+4],w=E[le+5],j.bezierCurveTo(E[le],E[le+1],E[le+2],E[le+3],v,w),l.updateCurvePathMinMax($,O,B,E[le],E[le+1],E[le+2],E[le+3],v,w,ee),le+=6;break;case o.OPS.curveTo2:O=v,B=w,j.bezierCurveTo(v,w,E[le],E[le+1],E[le+2],E[le+3]),l.updateCurvePathMinMax($,O,B,v,w,E[le],E[le+1],E[le+2],E[le+3],ee),v=E[le+2],w=E[le+3],le+=4;break;case o.OPS.curveTo3:O=v,B=w,v=E[le+2],w=E[le+3],j.bezierCurveTo(E[le],E[le+1],v,w,v,w),l.updateCurvePathMinMax($,O,B,E[le],E[le+1],v,w,v,w,ee),le+=4;break;case o.OPS.closePath:j.closePath();break}J&&l.updateScalingPathMinMax($,ee),l.setCurrentPoint(v,w)}closePath(){this.ctx.closePath()}stroke(A){A=typeof A<"u"?A:!0;const E=this.ctx,G=this.current.strokeColor;E.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof G=="object"&&G!==null&&G!==void 0&&G.getPattern?(E.save(),E.strokeStyle=G.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),g.PathType.STROKE),this.rescaleAndStroke(!1),E.restore()):this.rescaleAndStroke(!0)),A&&this.consumePath(this.current.getClippedPathBoundingBox()),E.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(A){A=typeof A<"u"?A:!0;const E=this.ctx,G=this.current.fillColor,j=this.current.patternFill;let l=!1;j&&(E.save(),E.fillStyle=G.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),g.PathType.FILL),l=!0);const v=this.current.getClippedPathBoundingBox();this.contentVisible&&v!==null&&(this.pendingEOFill?(E.fill("evenodd"),this.pendingEOFill=!1):E.fill()),l&&E.restore(),A&&this.consumePath(v)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=D}eoClip(){this.pendingClip=K}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const A=this.pendingTextPaths,E=this.ctx;if(A===void 0){E.beginPath();return}E.save(),E.beginPath();for(const G of A)E.setTransform(...G.transform),E.translate(G.x,G.y),G.addToPath(E,G.fontSize);E.restore(),E.clip(),E.beginPath(),delete this.pendingTextPaths}setCharSpacing(A){this.current.charSpacing=A}setWordSpacing(A){this.current.wordSpacing=A}setHScale(A){this.current.textHScale=A/100}setLeading(A){this.current.leading=-A}setFont(A,E){const G=this.commonObjs.get(A),j=this.current;if(!G)throw new Error(`Can't find font for ${A}`);if(j.fontMatrix=G.fontMatrix||o.FONT_IDENTITY_MATRIX,(j.fontMatrix[0]===0||j.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+A),E<0?(E=-E,j.fontDirection=-1):j.fontDirection=1,this.current.font=G,this.current.fontSize=E,G.isType3Font)return;const l=G.loadedName||"sans-serif";let v="normal";G.black?v="900":G.bold&&(v="bold");const w=G.italic?"italic":"normal",O=`"${l}", ${G.fallbackName}`;let B=E;E<I?B=I:E>u&&(B=u),this.current.fontSizeScale=E/B,this.ctx.font=`${w} ${v} ${B}px ${O}`}setTextRenderingMode(A){this.current.textRenderingMode=A}setTextRise(A){this.current.textRise=A}moveText(A,E){this.current.x=this.current.lineX+=A,this.current.y=this.current.lineY+=E}setLeadingMoveText(A,E){this.setLeading(-E),this.moveText(A,E)}setTextMatrix(A,E,G,j,l,v){this.current.textMatrix=[A,E,G,j,l,v],this.current.textMatrixScale=Math.hypot(A,E),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(A,E,G,j){const l=this.ctx,v=this.current,w=v.font,O=v.textRenderingMode,B=v.fontSize/v.fontSizeScale,$=O&o.TextRenderingMode.FILL_STROKE_MASK,J=!!(O&o.TextRenderingMode.ADD_TO_PATH_FLAG),ee=v.patternFill&&!w.missingFile;let ne;(w.disableFontFace||J||ee)&&(ne=w.getPathGenerator(this.commonObjs,A)),w.disableFontFace||ee?(l.save(),l.translate(E,G),l.beginPath(),ne(l,B),j&&l.setTransform(...j),($===o.TextRenderingMode.FILL||$===o.TextRenderingMode.FILL_STROKE)&&l.fill(),($===o.TextRenderingMode.STROKE||$===o.TextRenderingMode.FILL_STROKE)&&l.stroke(),l.restore()):(($===o.TextRenderingMode.FILL||$===o.TextRenderingMode.FILL_STROKE)&&l.fillText(A,E,G),($===o.TextRenderingMode.STROKE||$===o.TextRenderingMode.FILL_STROKE)&&l.strokeText(A,E,G)),J&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(l),x:E,y:G,fontSize:B,addToPath:ne})}get isFontSubpixelAAEnabled(){const{context:A}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);A.scale(1.5,1),A.fillText("I",0,10);const E=A.getImageData(0,0,10,10).data;let G=!1;for(let j=3;j<E.length;j+=4)if(E[j]>0&&E[j]<255){G=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",G)}showText(A){const E=this.current,G=E.font;if(G.isType3Font)return this.showType3Text(A);const j=E.fontSize;if(j===0)return;const l=this.ctx,v=E.fontSizeScale,w=E.charSpacing,O=E.wordSpacing,B=E.fontDirection,$=E.textHScale*B,J=A.length,ee=G.vertical,ne=ee?1:-1,le=G.defaultVMetrics,ie=j*E.fontMatrix[0],ce=E.textRenderingMode===o.TextRenderingMode.FILL&&!G.disableFontFace&&!E.patternFill;l.save(),l.transform(...E.textMatrix),l.translate(E.x,E.y+E.textRise),B>0?l.scale($,-1):l.scale($,1);let he;if(E.patternFill){l.save();const Ae=E.fillColor.getPattern(l,this,(0,r.getCurrentTransformInverse)(l),g.PathType.FILL);he=(0,r.getCurrentTransform)(l),l.restore(),l.fillStyle=Ae}let be=E.lineWidth;const _e=E.textMatrixScale;if(_e===0||be===0){const Ae=E.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(Ae===o.TextRenderingMode.STROKE||Ae===o.TextRenderingMode.FILL_STROKE)&&(be=this.getSinglePixelWidth())}else be/=_e;v!==1&&(l.scale(v,v),be/=v),l.lineWidth=be;let we=0,xe;for(xe=0;xe<J;++xe){const Ae=A[xe];if(typeof Ae=="number"){we+=ne*Ae*j/1e3;continue}let $e=!1;const Xe=(Ae.isSpace?O:0)+w,Oe=Ae.fontChar,Ee=Ae.accent;let re,ve,Me=Ae.width;if(ee){const fe=Ae.vmetric||le,Ce=-(Ae.vmetric?fe[1]:Me*.5)*ie,Le=fe[2]*ie;Me=fe?-fe[0]:Me,re=Ce/v,ve=(we+Le)/v}else re=we/v,ve=0;if(G.remeasure&&Me>0){const fe=l.measureText(Oe).width*1e3/j*v;if(Me<fe&&this.isFontSubpixelAAEnabled){const Ce=Me/fe;$e=!0,l.save(),l.scale(Ce,1),re/=Ce}else Me!==fe&&(re+=(Me-fe)/2e3*j/v)}if(this.contentVisible&&(Ae.isInFont||G.missingFile)){if(ce&&!Ee)l.fillText(Oe,re,ve);else if(this.paintChar(Oe,re,ve,he),Ee){const fe=re+j*Ee.offset.x/v,Ce=ve-j*Ee.offset.y/v;this.paintChar(Ee.fontChar,fe,Ce,he)}}let qe;ee?qe=Me*ie-Xe*B:qe=Me*ie+Xe*B,we+=qe,$e&&l.restore()}ee?E.y-=we:E.x+=we*$,l.restore(),this.compose()}showType3Text(A){const E=this.ctx,G=this.current,j=G.font,l=G.fontSize,v=G.fontDirection,w=j.vertical?1:-1,O=G.charSpacing,B=G.wordSpacing,$=G.textHScale*v,J=G.fontMatrix||o.FONT_IDENTITY_MATRIX,ee=A.length,ne=G.textRenderingMode===o.TextRenderingMode.INVISIBLE;let le,ie,ce,he;if(!(ne||l===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,E.save(),E.transform(...G.textMatrix),E.translate(G.x,G.y),E.scale($,v),le=0;le<ee;++le){if(ie=A[le],typeof ie=="number"){he=w*ie*l/1e3,this.ctx.translate(he,0),G.x+=he*$;continue}const be=(ie.isSpace?B:0)+O,_e=j.charProcOperatorList[ie.operatorListId];if(!_e){(0,o.warn)(`Type3 character "${ie.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ie,this.save(),E.scale(l,l),E.transform(...J),this.executeOperatorList(_e),this.restore()),ce=o.Util.applyTransform([ie.width,0],J)[0]*l+be,E.translate(ce,0),G.x+=ce*$}E.restore(),this.processingType3=null}}setCharWidth(A,E){}setCharWidthAndBounds(A,E,G,j,l,v){this.ctx.rect(G,j,l-G,v-j),this.ctx.clip(),this.endPath()}getColorN_Pattern(A){let E;if(A[0]==="TilingPattern"){const G=A[1],j=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),l={createCanvasGraphics:v=>new me(v,this.commonObjs,this.objs,this.canvasFactory)};E=new g.TilingPattern(A,G,this.ctx,l,j)}else E=this._getPattern(A[1],A[2]);return E}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(A,E,G){var j;const l=((j=this.selectColor)===null||j===void 0?void 0:j.call(this,A,E,G))||o.Util.makeHexColor(A,E,G);this.ctx.strokeStyle=l,this.current.strokeColor=l}setFillRGBColor(A,E,G){var j;const l=((j=this.selectColor)===null||j===void 0?void 0:j.call(this,A,E,G))||o.Util.makeHexColor(A,E,G);this.ctx.fillStyle=l,this.current.fillColor=l,this.current.patternFill=!1}_getPattern(A){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,G;return this.cachedPatterns.has(A)?G=this.cachedPatterns.get(A):(G=(0,g.getShadingPattern)(this.objs.get(A)),this.cachedPatterns.set(A,G)),E&&(G.matrix=E),G}shadingFill(A){if(!this.contentVisible)return;const E=this.ctx;this.save();const G=this._getPattern(A);E.fillStyle=G.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),g.PathType.SHADING);const j=(0,r.getCurrentTransformInverse)(E);if(j){const l=E.canvas,v=l.width,w=l.height,O=o.Util.applyTransform([0,0],j),B=o.Util.applyTransform([0,w],j),$=o.Util.applyTransform([v,0],j),J=o.Util.applyTransform([v,w],j),ee=Math.min(O[0],B[0],$[0],J[0]),ne=Math.min(O[1],B[1],$[1],J[1]),le=Math.max(O[0],B[0],$[0],J[0]),ie=Math.max(O[1],B[1],$[1],J[1]);this.ctx.fillRect(ee,ne,le-ee,ie-ne)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(A,E){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(A)&&A.length===6&&this.transform(...A),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),E)){const G=E[2]-E[0],j=E[3]-E[1];this.ctx.rect(E[0],E[1],G,j),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),E),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(A){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const E=this.ctx;A.isolated||(0,o.info)("TODO: Support non-isolated groups."),A.knockout&&(0,o.warn)("Knockout groups not supported.");const G=(0,r.getCurrentTransform)(E);if(A.matrix&&E.transform(...A.matrix),!A.bbox)throw new Error("Bounding box is required.");let j=o.Util.getAxialAlignedBoundingBox(A.bbox,(0,r.getCurrentTransform)(E));const l=[0,0,E.canvas.width,E.canvas.height];j=o.Util.intersect(j,l)||[0,0,0,0];const v=Math.floor(j[0]),w=Math.floor(j[1]);let O=Math.max(Math.ceil(j[2])-v,1),B=Math.max(Math.ceil(j[3])-w,1),$=1,J=1;O>T&&($=O/T,O=T),B>T&&(J=B/T,B=T),this.current.startNewPathAndClipBox([0,0,O,B]);let ee="groupAt"+this.groupLevel;A.smask&&(ee+="_smask_"+this.smaskCounter++%2);const ne=this.cachedCanvases.getCanvas(ee,O,B),le=ne.context;le.scale(1/$,1/J),le.translate(-v,-w),le.transform(...G),A.smask?this.smaskStack.push({canvas:ne.canvas,context:le,offsetX:v,offsetY:w,scaleX:$,scaleY:J,subtype:A.smask.subtype,backdrop:A.smask.backdrop,transferMap:A.smask.transferMap||null,startTransformInverse:null}):(E.setTransform(1,0,0,1,0,0),E.translate(v,w),E.scale($,J),E.save()),C(E,le),this.ctx=le,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(E),this.groupLevel++}endGroup(A){if(!this.contentVisible)return;this.groupLevel--;const E=this.ctx,G=this.groupStack.pop();if(this.ctx=G,this.ctx.imageSmoothingEnabled=!1,A.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const j=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...j);const l=o.Util.getAxialAlignedBoundingBox([0,0,E.canvas.width,E.canvas.height],j);this.ctx.drawImage(E.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(A,E,G,j,l){if(m(this,se,Pe).call(this),L(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(E)&&E.length===4){const v=E[2]-E[0],w=E[3]-E[1];if(l&&this.annotationCanvasMap){G=G.slice(),G[4]-=E[0],G[5]-=E[1],E=E.slice(),E[0]=E[1]=0,E[2]=v,E[3]=w;const[O,B]=o.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:$}=this,J=Math.ceil(v*this.outputScaleX*$),ee=Math.ceil(w*this.outputScaleY*$);this.annotationCanvas=this.canvasFactory.create(J,ee);const{canvas:ne,context:le}=this.annotationCanvas;this.annotationCanvasMap.set(A,ne),this.annotationCanvas.savedCtx=this.ctx,this.ctx=le,this.ctx.setTransform(O,0,0,-B,0,w*B),L(this.ctx,this.foregroundColor)}else L(this.ctx,this.foregroundColor),this.ctx.rect(E[0],E[1],v,w),this.ctx.clip(),this.endPath()}this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...G),this.transform(...j)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(A){if(!this.contentVisible)return;const E=A.count;A=this.getObject(A.data,A),A.count=E;const G=this.ctx,j=this.processingType3;if(j&&(j.compiled===void 0&&(j.compiled=n(A)),j.compiled)){j.compiled(G);return}const l=this._createMaskCanvas(A),v=l.canvas;G.save(),G.setTransform(1,0,0,1,0,0),G.drawImage(v,l.offsetX,l.offsetY),G.restore(),this.compose()}paintImageMaskXObjectRepeat(A,E){let G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4?arguments[4]:void 0,v=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;A=this.getObject(A.data,A);const w=this.ctx;w.save();const O=(0,r.getCurrentTransform)(w);w.transform(E,G,j,l,0,0);const B=this._createMaskCanvas(A);w.setTransform(1,0,0,1,0,0);for(let $=0,J=v.length;$<J;$+=2){const ee=o.Util.transform(O,[E,G,j,l,v[$],v[$+1]]),[ne,le]=o.Util.applyTransform([0,0],ee);w.drawImage(B.canvas,ne,le)}w.restore(),this.compose()}paintImageMaskXObjectGroup(A){if(!this.contentVisible)return;const E=this.ctx,G=this.current.fillColor,j=this.current.patternFill;for(const l of A){const{data:v,width:w,height:O,transform:B}=l,$=this.cachedCanvases.getCanvas("maskCanvas",w,O),J=$.context;J.save();const ee=this.getObject(v,l);h(J,ee),J.globalCompositeOperation="source-in",J.fillStyle=j?G.getPattern(J,this,(0,r.getCurrentTransformInverse)(E),g.PathType.FILL):G,J.fillRect(0,0,w,O),J.restore(),E.save(),E.transform(...B),E.scale(1,-1),c(E,$.canvas,0,0,w,O,0,-1,1,1),E.restore()}this.compose()}paintImageXObject(A){if(!this.contentVisible)return;const E=this.getObject(A);if(!E){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(E)}paintImageXObjectRepeat(A,E,G,j){if(!this.contentVisible)return;const l=this.getObject(A);if(!l){(0,o.warn)("Dependent image isn't ready yet");return}const v=l.width,w=l.height,O=[];for(let B=0,$=j.length;B<$;B+=2)O.push({transform:[E,0,0,G,j[B],j[B+1]],x:0,y:0,w:v,h:w});this.paintInlineImageXObjectGroup(l,O)}paintInlineImageXObject(A){if(!this.contentVisible)return;const E=A.width,G=A.height,j=this.ctx;this.save(),j.scale(1/E,-1/G);let l;if(typeof HTMLElement=="function"&&A instanceof HTMLElement||!A.data)l=A;else{const B=this.cachedCanvases.getCanvas("inlineImage",E,G),$=B.context;f($,A,this.current.transferMaps),l=B.canvas}const v=this._scaleImage(l,(0,r.getCurrentTransformInverse)(j));j.imageSmoothingEnabled=z((0,r.getCurrentTransform)(j),A.interpolate);const[w,O]=c(j,v.img,0,0,v.paintWidth,v.paintHeight,0,-G,E,G);if(this.imageLayer){const[B,$]=o.Util.applyTransform([0,-G],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:A,left:B,top:$,width:w,height:O})}this.compose(),this.restore()}paintInlineImageXObjectGroup(A,E){if(!this.contentVisible)return;const G=this.ctx,j=A.width,l=A.height,v=this.cachedCanvases.getCanvas("inlineImage",j,l),w=v.context;f(w,A,this.current.transferMaps);for(const O of E){if(G.save(),G.transform(...O.transform),G.scale(1,-1),c(G,v.canvas,O.x,O.y,O.w,O.h,0,-1,1,1),this.imageLayer){const[B,$]=o.Util.applyTransform([O.x,O.y],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:A,left:B,top:$,width:j,height:l})}G.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(A){}markPointProps(A,E){}beginMarkedContent(A){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(A,E){A==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(E)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(A){const E=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(A);const G=this.ctx;this.pendingClip&&(E||(this.pendingClip===K?G.clip("evenodd"):G.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),G.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const A=(0,r.getCurrentTransform)(this.ctx);if(A[1]===0&&A[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(A[0]),Math.abs(A[3]));else{const E=Math.abs(A[0]*A[3]-A[2]*A[1]),G=Math.hypot(A[0],A[2]),j=Math.hypot(A[1],A[3]);this._cachedGetSinglePixelWidth=Math.max(G,j)/E}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:A}=this.current,E=(0,r.getCurrentTransform)(this.ctx);let G,j;if(E[1]===0&&E[2]===0){const l=Math.abs(E[0]),v=Math.abs(E[3]);if(A===0)G=1/l,j=1/v;else{const w=l*A,O=v*A;G=w<1?1/w:1,j=O<1?1/O:1}}else{const l=Math.abs(E[0]*E[3]-E[2]*E[1]),v=Math.hypot(E[0],E[1]),w=Math.hypot(E[2],E[3]);if(A===0)G=w/l,j=v/l;else{const O=A*l;G=w>O?w/O:1,j=v>O?v/O:1}}this._cachedScaleForStroking=[G,j]}return this._cachedScaleForStroking}rescaleAndStroke(A){const{ctx:E}=this,{lineWidth:G}=this.current,[j,l]=this.getScaleForStroking();if(E.lineWidth=G||1,j===1&&l===1){E.stroke();return}let v,w,O;A&&(v=(0,r.getCurrentTransform)(E),w=E.getLineDash().slice(),O=E.lineDashOffset),E.scale(j,l);const B=Math.max(j,l);E.setLineDash(E.getLineDash().map($=>$/B)),E.lineDashOffset/=B,E.stroke(),A&&(E.setTransform(...v),E.setLineDash(w),E.lineDashOffset=O)}isContentVisible(){for(let A=this.markedContentStack.length-1;A>=0;A--)if(!this.markedContentStack[A].visible)return!1;return!0}}i.CanvasGraphics=me;function Pe(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(const H in o.OPS)me.prototype[H]!==void 0&&(me.prototype[o.OPS[H]]=me.prototype[H])},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=F;var r=t(1),o=t(133),g=t(3);const S={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=S;function _(N,d){if(!d||g.isNodeJS)return;const b=d[2]-d[0],c=d[3]-d[1],n=new Path2D;n.rect(d[0],d[1],b,c),N.clip(n)}class P{constructor(){this.constructor===P&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class y extends P{constructor(d){super(),this._type=d[1],this._bbox=d[2],this._colorStops=d[3],this._p0=d[4],this._p1=d[5],this._r0=d[6],this._r1=d[7],this.matrix=null}_createGradient(d){let b;this._type==="axial"?b=d.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(b=d.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const c of this._colorStops)b.addColorStop(c[0],c[1]);return b}getPattern(d,b,c,n){let s;if(n===S.STROKE||n===S.FILL){const f=b.current.getClippedPathBoundingBox(n,(0,o.getCurrentTransform)(d))||[0,0,0,0],h=Math.ceil(f[2]-f[0])||1,C=Math.ceil(f[3]-f[1])||1,L=b.cachedCanvases.getCanvas("pattern",h,C,!0),M=L.context;M.clearRect(0,0,M.canvas.width,M.canvas.height),M.beginPath(),M.rect(0,0,M.canvas.width,M.canvas.height),M.translate(-f[0],-f[1]),c=r.Util.transform(c,[1,0,0,1,f[0],f[1]]),M.transform(...b.baseTransform),this.matrix&&M.transform(...this.matrix),_(M,this._bbox),M.fillStyle=this._createGradient(M),M.fill(),s=d.createPattern(L.canvas,"no-repeat");const Q=new DOMMatrix(c);try{s.setTransform(Q)}catch(X){(0,r.warn)(`RadialAxialShadingPattern.getPattern: "${X?.message}".`)}}else _(d,this._bbox),s=this._createGradient(d);return s}}function m(N,d,b,c,n,s,f,h){const C=d.coords,L=d.colors,M=N.data,Q=N.width*4;let X;C[b+1]>C[c+1]&&(X=b,b=c,c=X,X=s,s=f,f=X),C[c+1]>C[n+1]&&(X=c,c=n,n=X,X=f,f=h,h=X),C[b+1]>C[c+1]&&(X=b,b=c,c=X,X=s,s=f,f=X);const Y=(C[b]+d.offsetX)*d.scaleX,q=(C[b+1]+d.offsetY)*d.scaleY,z=(C[c]+d.offsetX)*d.scaleX,U=(C[c+1]+d.offsetY)*d.scaleY,W=(C[n]+d.offsetX)*d.scaleX,D=(C[n+1]+d.offsetY)*d.scaleY;if(q>=D)return;const K=L[s],se=L[s+1],me=L[s+2],Pe=L[f],H=L[f+1],A=L[f+2],E=L[h],G=L[h+1],j=L[h+2],l=Math.round(q),v=Math.round(D);let w,O,B,$,J,ee,ne,le;for(let ie=l;ie<=v;ie++){if(ie<U){let we;ie<q?we=0:we=(q-ie)/(q-U),w=Y-(Y-z)*we,O=K-(K-Pe)*we,B=se-(se-H)*we,$=me-(me-A)*we}else{let we;ie>D?we=1:U===D?we=0:we=(U-ie)/(U-D),w=z-(z-W)*we,O=Pe-(Pe-E)*we,B=H-(H-G)*we,$=A-(A-j)*we}let ce;ie<q?ce=0:ie>D?ce=1:ce=(q-ie)/(q-D),J=Y-(Y-W)*ce,ee=K-(K-E)*ce,ne=se-(se-G)*ce,le=me-(me-j)*ce;const he=Math.round(Math.min(w,J)),be=Math.round(Math.max(w,J));let _e=Q*ie+he*4;for(let we=he;we<=be;we++)ce=(w-we)/(w-J),ce<0?ce=0:ce>1&&(ce=1),M[_e++]=O-(O-ee)*ce|0,M[_e++]=B-(B-ne)*ce|0,M[_e++]=$-($-le)*ce|0,M[_e++]=255}}function I(N,d,b){const c=d.coords,n=d.colors;let s,f;switch(d.type){case"lattice":const h=d.verticesPerRow,C=Math.floor(c.length/h)-1,L=h-1;for(s=0;s<C;s++){let M=s*h;for(let Q=0;Q<L;Q++,M++)m(N,b,c[M],c[M+1],c[M+h],n[M],n[M+1],n[M+h]),m(N,b,c[M+h+1],c[M+1],c[M+h],n[M+h+1],n[M+1],n[M+h])}break;case"triangles":for(s=0,f=c.length;s<f;s+=3)m(N,b,c[s],c[s+1],c[s+2],n[s],n[s+1],n[s+2]);break;default:throw new Error("illegal figure")}}class u extends P{constructor(d){super(),this._coords=d[2],this._colors=d[3],this._figures=d[4],this._bounds=d[5],this._bbox=d[7],this._background=d[8],this.matrix=null}_createMeshCanvas(d,b,c){const h=Math.floor(this._bounds[0]),C=Math.floor(this._bounds[1]),L=Math.ceil(this._bounds[2])-h,M=Math.ceil(this._bounds[3])-C,Q=Math.min(Math.ceil(Math.abs(L*d[0]*1.1)),3e3),X=Math.min(Math.ceil(Math.abs(M*d[1]*1.1)),3e3),Y=L/Q,q=M/X,z={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-C,scaleX:1/Y,scaleY:1/q},U=Q+2*2,W=X+2*2,D=c.getCanvas("mesh",U,W,!1),K=D.context,se=K.createImageData(Q,X);if(b){const Pe=se.data;for(let H=0,A=Pe.length;H<A;H+=4)Pe[H]=b[0],Pe[H+1]=b[1],Pe[H+2]=b[2],Pe[H+3]=255}for(const Pe of this._figures)I(se,Pe,z);return K.putImageData(se,2,2),{canvas:D.canvas,offsetX:h-2*Y,offsetY:C-2*q,scaleX:Y,scaleY:q}}getPattern(d,b,c,n){_(d,this._bbox);let s;if(n===S.SHADING)s=r.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(d));else if(s=r.Util.singularValueDecompose2dScale(b.baseTransform),this.matrix){const h=r.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*h[0],s[1]*h[1]]}const f=this._createMeshCanvas(s,n===S.SHADING?null:this._background,b.cachedCanvases);return n!==S.SHADING&&(d.setTransform(...b.baseTransform),this.matrix&&d.transform(...this.matrix)),d.translate(f.offsetX,f.offsetY),d.scale(f.scaleX,f.scaleY),d.createPattern(f.canvas,"no-repeat")}}class T extends P{getPattern(){return"hotpink"}}function F(N){switch(N[0]){case"RadialAxial":return new y(N);case"Mesh":return new u(N);case"Dummy":return new T}throw new Error(`Unknown IR type: ${N[0]}`)}const p={COLORED:1,UNCOLORED:2};class k{static get MAX_PATTERN_SIZE(){return(0,r.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(d,b,c,n,s){this.operatorList=d[2],this.matrix=d[3]||[1,0,0,1,0,0],this.bbox=d[4],this.xstep=d[5],this.ystep=d[6],this.paintType=d[7],this.tilingType=d[8],this.color=b,this.ctx=c,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(d){const b=this.operatorList,c=this.bbox,n=this.xstep,s=this.ystep,f=this.paintType,h=this.tilingType,C=this.color,L=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+h);const M=c[0],Q=c[1],X=c[2],Y=c[3],q=r.Util.singularValueDecompose2dScale(this.matrix),z=r.Util.singularValueDecompose2dScale(this.baseTransform),U=[q[0]*z[0],q[1]*z[1]],W=this.getSizeAndScale(n,this.ctx.canvas.width,U[0]),D=this.getSizeAndScale(s,this.ctx.canvas.height,U[1]),K=d.cachedCanvases.getCanvas("pattern",W.size,D.size,!0),se=K.context,me=L.createCanvasGraphics(se);me.groupLevel=d.groupLevel,this.setFillAndStrokeStyleToContext(me,f,C);let Pe=M,H=Q,A=X,E=Y;return M<0&&(Pe=0,A+=Math.abs(M)),Q<0&&(H=0,E+=Math.abs(Q)),se.translate(-(W.scale*Pe),-(D.scale*H)),me.transform(W.scale,0,0,D.scale,0,0),se.save(),this.clipBbox(me,Pe,H,A,E),me.baseTransform=(0,o.getCurrentTransform)(me.ctx),me.executeOperatorList(b),me.endDrawing(),{canvas:K.canvas,scaleX:W.scale,scaleY:D.scale,offsetX:Pe,offsetY:H}}getSizeAndScale(d,b,c){d=Math.abs(d);const n=Math.max(k.MAX_PATTERN_SIZE,b);let s=Math.ceil(d*c);return s>=n?s=n:c=s/d,{scale:c,size:s}}clipBbox(d,b,c,n,s){const f=n-b,h=s-c;d.ctx.rect(b,c,f,h),d.current.updateRectMinMax((0,o.getCurrentTransform)(d.ctx),[b,c,n,s]),d.clip(),d.endPath()}setFillAndStrokeStyleToContext(d,b,c){const n=d.ctx,s=d.current;switch(b){case p.COLORED:const f=this.ctx;n.fillStyle=f.fillStyle,n.strokeStyle=f.strokeStyle,s.fillColor=f.fillStyle,s.strokeColor=f.strokeStyle;break;case p.UNCOLORED:const h=r.Util.makeHexColor(c[0],c[1],c[2]);n.fillStyle=h,n.strokeStyle=h,s.fillColor=h,s.strokeColor=h;break;default:throw new r.FormatError(`Unsupported paint type: ${b}`)}}getPattern(d,b,c,n){let s=c;n!==S.SHADING&&(s=r.Util.transform(s,b.baseTransform),this.matrix&&(s=r.Util.transform(s,this.matrix)));const f=this.createPatternCanvas(b);let h=new DOMMatrix(s);h=h.translate(f.offsetX,f.offsetY),h=h.scale(1/f.scaleX,1/f.scaleY);const C=d.createPattern(f.canvas,"repeat");try{C.setTransform(h)}catch(L){(0,r.warn)(`TilingPattern.getPattern: "${L?.message}".`)}return C}}i.TilingPattern=k},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.applyMaskImageData=o;var r=t(1);function o(g){let{src:S,srcPos:_=0,dest:P,destPos:y=0,width:m,height:I,inverseDecode:u=!1}=g;const T=r.FeatureTest.isLittleEndian?4278190080:255,[F,p]=u?[0,T]:[T,0],k=m>>3,N=m&7,d=S.length;P=new Uint32Array(P.buffer);for(let b=0;b<I;b++){for(const n=_+k;_<n;_++){const s=_<d?S[_]:255;P[y++]=s&128?p:F,P[y++]=s&64?p:F,P[y++]=s&32?p:F,P[y++]=s&16?p:F,P[y++]=s&8?p:F,P[y++]=s&4?p:F,P[y++]=s&2?p:F,P[y++]=s&1?p:F}if(N===0)continue;const c=_<d?S[_++]:255;for(let n=0;n<N;n++)P[y++]=c&1<<7-n?p:F}return{srcPos:_,destPos:y}}},(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const t=Object.create(null);i.GlobalWorkerOptions=t,t.workerPort=t.workerPort===void 0?null:t.workerPort,t.workerSrc=t.workerSrc===void 0?"":t.workerSrc},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var r=t(1);const o={UNKNOWN:0,DATA:1,ERROR:2},g={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S(P){switch(P instanceof Error||typeof P=="object"&&P!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),P.name){case"AbortException":return new r.AbortException(P.message);case"MissingPDFException":return new r.MissingPDFException(P.message);case"PasswordException":return new r.PasswordException(P.message,P.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(P.message,P.status);case"UnknownErrorException":return new r.UnknownErrorException(P.message,P.details);default:return new r.UnknownErrorException(P.message,P.toString())}}class _{constructor(y,m,I){this.sourceName=y,this.targetName=m,this.comObj=I,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=u=>{const T=u.data;if(T.targetName!==this.sourceName)return;if(T.stream){this._processStreamMessage(T);return}if(T.callback){const p=T.callbackId,k=this.callbackCapabilities[p];if(!k)throw new Error(`Cannot resolve callback ${p}`);if(delete this.callbackCapabilities[p],T.callback===o.DATA)k.resolve(T.data);else if(T.callback===o.ERROR)k.reject(S(T.reason));else throw new Error("Unexpected callback case");return}const F=this.actionHandler[T.action];if(!F)throw new Error(`Unknown action from worker: ${T.action}`);if(T.callbackId){const p=this.sourceName,k=T.sourceName;new Promise(function(N){N(F(T.data))}).then(function(N){I.postMessage({sourceName:p,targetName:k,callback:o.DATA,callbackId:T.callbackId,data:N})},function(N){I.postMessage({sourceName:p,targetName:k,callback:o.ERROR,callbackId:T.callbackId,reason:S(N)})});return}if(T.streamId){this._createStreamSink(T);return}F(T.data)},I.addEventListener("message",this._onComObjOnMessage)}on(y,m){const I=this.actionHandler;if(I[y])throw new Error(`There is already an actionName called "${y}"`);I[y]=m}send(y,m,I){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:m},I)}sendWithPromise(y,m,I){const u=this.callbackId++,T=(0,r.createPromiseCapability)();this.callbackCapabilities[u]=T;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:u,data:m},I)}catch(F){T.reject(F)}return T.promise}sendWithStream(y,m,I,u){const T=this.streamId++,F=this.sourceName,p=this.targetName,k=this.comObj;return new ReadableStream({start:N=>{const d=(0,r.createPromiseCapability)();return this.streamControllers[T]={controller:N,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},k.postMessage({sourceName:F,targetName:p,action:y,streamId:T,data:m,desiredSize:N.desiredSize},u),d.promise},pull:N=>{const d=(0,r.createPromiseCapability)();return this.streamControllers[T].pullCall=d,k.postMessage({sourceName:F,targetName:p,stream:g.PULL,streamId:T,desiredSize:N.desiredSize}),d.promise},cancel:N=>{(0,r.assert)(N instanceof Error,"cancel must have a valid reason");const d=(0,r.createPromiseCapability)();return this.streamControllers[T].cancelCall=d,this.streamControllers[T].isClosed=!0,k.postMessage({sourceName:F,targetName:p,stream:g.CANCEL,streamId:T,reason:S(N)}),d.promise}},I)}_createStreamSink(y){const m=y.streamId,I=this.sourceName,u=y.sourceName,T=this.comObj,F=this,p=this.actionHandler[y.action],k={enqueue(N){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,b=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const c=this.desiredSize;this.desiredSize-=d,c>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),T.postMessage({sourceName:I,targetName:u,stream:g.ENQUEUE,streamId:m,chunk:N},b)},close(){this.isCancelled||(this.isCancelled=!0,T.postMessage({sourceName:I,targetName:u,stream:g.CLOSE,streamId:m}),delete F.streamSinks[m])},error(N){(0,r.assert)(N instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,T.postMessage({sourceName:I,targetName:u,stream:g.ERROR,streamId:m,reason:S(N)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};k.sinkCapability.resolve(),k.ready=k.sinkCapability.promise,this.streamSinks[m]=k,new Promise(function(N){N(p(y.data,k))}).then(function(){T.postMessage({sourceName:I,targetName:u,stream:g.START_COMPLETE,streamId:m,success:!0})},function(N){T.postMessage({sourceName:I,targetName:u,stream:g.START_COMPLETE,streamId:m,reason:S(N)})})}_processStreamMessage(y){const m=y.streamId,I=this.sourceName,u=y.sourceName,T=this.comObj,F=this.streamControllers[m],p=this.streamSinks[m];switch(y.stream){case g.START_COMPLETE:y.success?F.startCall.resolve():F.startCall.reject(S(y.reason));break;case g.PULL_COMPLETE:y.success?F.pullCall.resolve():F.pullCall.reject(S(y.reason));break;case g.PULL:if(!p){T.postMessage({sourceName:I,targetName:u,stream:g.PULL_COMPLETE,streamId:m,success:!0});break}p.desiredSize<=0&&y.desiredSize>0&&p.sinkCapability.resolve(),p.desiredSize=y.desiredSize,new Promise(function(k){k(p.onPull&&p.onPull())}).then(function(){T.postMessage({sourceName:I,targetName:u,stream:g.PULL_COMPLETE,streamId:m,success:!0})},function(k){T.postMessage({sourceName:I,targetName:u,stream:g.PULL_COMPLETE,streamId:m,reason:S(k)})});break;case g.ENQUEUE:if((0,r.assert)(F,"enqueue should have stream controller"),F.isClosed)break;F.controller.enqueue(y.chunk);break;case g.CLOSE:if((0,r.assert)(F,"close should have stream controller"),F.isClosed)break;F.isClosed=!0,F.controller.close(),this._deleteStreamController(F,m);break;case g.ERROR:(0,r.assert)(F,"error should have stream controller"),F.controller.error(S(y.reason)),this._deleteStreamController(F,m);break;case g.CANCEL_COMPLETE:y.success?F.cancelCall.resolve():F.cancelCall.reject(S(y.reason)),this._deleteStreamController(F,m);break;case g.CANCEL:if(!p)break;new Promise(function(k){k(p.onCancel&&p.onCancel(S(y.reason)))}).then(function(){T.postMessage({sourceName:I,targetName:u,stream:g.CANCEL_COMPLETE,streamId:m,success:!0})},function(k){T.postMessage({sourceName:I,targetName:u,stream:g.CANCEL_COMPLETE,streamId:m,reason:S(k)})}),p.sinkCapability.reject(S(y.reason)),p.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(y,m){await Promise.allSettled([y.startCall&&y.startCall.promise,y.pullCall&&y.pullCall.promise,y.cancelCall&&y.cancelCall.promise]),delete this.streamControllers[m]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}i.MessageHandler=_},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var r=t(1);function o(F,p,k){g(F,p),p.set(F,k)}function g(F,p){if(p.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")}function S(F,p){var k=y(F,p,"get");return _(F,k)}function _(F,p){return p.get?p.get.call(F):p.value}function P(F,p,k){var N=y(F,p,"set");return m(F,N,k),k}function y(F,p,k){if(!p.has(F))throw new TypeError("attempted to "+k+" private field on non-instance");return p.get(F)}function m(F,p,k){if(p.set)p.set.call(F,k);else{if(!p.writable)throw new TypeError("attempted to set read only private field");p.value=k}}var I=new WeakMap,u=new WeakMap;class T{constructor(p){let{parsedData:k,rawData:N}=p;o(this,I,{writable:!0,value:void 0}),o(this,u,{writable:!0,value:void 0}),P(this,I,k),P(this,u,N)}getRaw(){return S(this,u)}get(p){var k;return(k=S(this,I).get(p))!==null&&k!==void 0?k:null}getAll(){return(0,r.objectFromMap)(S(this,I))}has(p){return S(this,I).has(p)}}i.Metadata=T},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var r=t(1);function o(f,h){_(f,h),h.add(f)}function g(f,h,C){if(!h.has(f))throw new TypeError("attempted to get private field on non-instance");return C}function S(f,h,C){_(f,h),h.set(f,C)}function _(f,h){if(h.has(f))throw new TypeError("Cannot initialize the same private elements twice on an object")}function P(f,h,C){var L=I(f,h,"set");return y(f,L,C),C}function y(f,h,C){if(h.set)h.set.call(f,C);else{if(!h.writable)throw new TypeError("attempted to set read only private field");h.value=C}}function m(f,h){var C=I(f,h,"get");return u(f,C)}function I(f,h,C){if(!h.has(f))throw new TypeError("attempted to "+C+" private field on non-instance");return h.get(f)}function u(f,h){return h.get?h.get.call(f):h.value}const T=Symbol("INTERNAL");var F=new WeakMap;class p{constructor(h,C){S(this,F,{writable:!0,value:!0}),this.name=h,this.intent=C}get visible(){return m(this,F)}_setVisible(h,C){h!==T&&(0,r.unreachable)("Internal method `_setVisible` called."),P(this,F,C)}}var k=new WeakMap,N=new WeakMap,d=new WeakMap,b=new WeakMap,c=new WeakSet;class n{constructor(h){if(o(this,c),S(this,k,{writable:!0,value:!0}),S(this,N,{writable:!0,value:new Map}),S(this,d,{writable:!0,value:null}),S(this,b,{writable:!0,value:null}),this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,P(this,b,h.order);for(const C of h.groups)m(this,N).set(C.id,new p(C.name,C.intent));if(h.baseState==="OFF")for(const C of m(this,N).values())C._setVisible(T,!1);for(const C of h.on)m(this,N).get(C)._setVisible(T,!0);for(const C of h.off)m(this,N).get(C)._setVisible(T,!1);P(this,d,new Map);for(const[C,L]of m(this,N))m(this,d).set(C,L.visible)}}isVisible(h){if(m(this,N).size===0)return!0;if(!h)return(0,r.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return m(this,N).has(h.id)?m(this,N).get(h.id).visible:((0,r.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return g(this,c,s).call(this,h.expression);if(!h.policy||h.policy==="AnyOn"){for(const C of h.ids){if(!m(this,N).has(C))return(0,r.warn)(`Optional content group not found: ${C}`),!0;if(m(this,N).get(C).visible)return!0}return!1}else if(h.policy==="AllOn"){for(const C of h.ids){if(!m(this,N).has(C))return(0,r.warn)(`Optional content group not found: ${C}`),!0;if(!m(this,N).get(C).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(const C of h.ids){if(!m(this,N).has(C))return(0,r.warn)(`Optional content group not found: ${C}`),!0;if(!m(this,N).get(C).visible)return!0}return!1}else if(h.policy==="AllOff"){for(const C of h.ids){if(!m(this,N).has(C))return(0,r.warn)(`Optional content group not found: ${C}`),!0;if(m(this,N).get(C).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,r.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!m(this,N).has(h)){(0,r.warn)(`Optional content group not found: ${h}`);return}m(this,N).get(h)._setVisible(T,!!C),P(this,k,null)}get hasInitialVisibility(){if(m(this,k)!==null)return m(this,k);for(const[h,C]of m(this,N)){const L=m(this,d).get(h);if(C.visible!==L)return P(this,k,!1)}return P(this,k,!0)}getOrder(){return m(this,N).size?m(this,b)?m(this,b).slice():[...m(this,N).keys()]:null}getGroups(){return m(this,N).size>0?(0,r.objectFromMap)(m(this,N)):null}getGroup(h){return m(this,N).get(h)||null}}i.OptionalContentConfig=n;function s(f){const h=f.length;if(h<2)return!0;const C=f[0];for(let L=1;L<h;L++){const M=f[L];let Q;if(Array.isArray(M))Q=g(this,c,s).call(this,M);else if(m(this,N).has(M))Q=m(this,N).get(M).visible;else return(0,r.warn)(`Optional content group not found: ${M}`),!0;switch(C){case"And":if(!Q)return!1;break;case"Or":if(Q)return!0;break;case"Not":return!Q;default:return!0}}return C==="And"}},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var r=t(1),o=t(133);class g{constructor(y,m){(0,r.assert)(m,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=y.progressiveDone||!1,this._contentDispositionFilename=y.contentDispositionFilename||null;const I=y.initialData;if(I?.length>0){const u=new Uint8Array(I).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=m,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._contentLength=y.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((u,T)=>{this._onReceiveData({begin:u,chunk:T})}),this._pdfDataRangeTransport.addProgressListener((u,T)=>{this._onProgress({loaded:u,total:T})}),this._pdfDataRangeTransport.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(y){const m=new Uint8Array(y.chunk).buffer;if(y.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(m):this._queuedChunks.push(m);else{const I=this._rangeReaders.some(function(u){return u._begin!==y.begin?!1:(u._enqueue(m),!0)});(0,r.assert)(I,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var y,m;return(y=(m=this._fullRequestReader)===null||m===void 0?void 0:m._loaded)!==null&&y!==void 0?y:0}_onProgress(y){if(y.total===void 0){const m=this._rangeReaders[0];m!=null&&m.onProgress&&m.onProgress({loaded:y.loaded})}else{const m=this._fullRequestReader;m!=null&&m.onProgress&&m.onProgress({loaded:y.loaded,total:y.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(y){const m=this._rangeReaders.indexOf(y);m>=0&&this._rangeReaders.splice(m,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const y=this._queuedChunks;return this._queuedChunks=null,new S(this,y,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(y,m){if(m<=this._progressiveDataLength)return null;const I=new _(this,y,m);return this._pdfDataRangeTransport.requestDataRange(y,m),this._rangeReaders.push(I),I}cancelAllRequests(y){this._fullRequestReader&&this._fullRequestReader.cancel(y);for(const m of this._rangeReaders.slice(0))m.cancel(y);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=g;class S{constructor(y,m){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=y,this._done=I||!1,this._filename=(0,o.isPdfFile)(u)?u:null,this._queuedChunks=m||[],this._loaded=0;for(const T of this._queuedChunks)this._loaded+=T.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=(0,r.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _{constructor(y,m,I){this._stream=y,this._begin=m,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(this._requests.length===0)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const y=(0,r.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class t{static textContent(o){const g=[],S={items:g,styles:Object.create(null)};function _(P){var y;if(!P)return;let m=null;const I=P.name;if(I==="#text")m=P.value;else if(t.shouldBuildText(I))P!=null&&(y=P.attributes)!==null&&y!==void 0&&y.textContent?m=P.attributes.textContent:P.value&&(m=P.value);else return;if(m!==null&&g.push({str:m}),!!P.children)for(const u of P.children)_(u)}return _(o),S}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}i.XfaText=t},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var r=t(134);const o=function(P){return new Promise((y,m)=>{require$$7.readFile(P,(u,T)=>{if(u||!T){m(new Error(u));return}y(new Uint8Array(T))})})};class g extends r.BaseCanvasFactory{_createCanvas(y,m){return require$$7.createCanvas(y,m)}}i.NodeCanvasFactory=g;class S extends r.BaseCMapReaderFactory{_fetchData(y,m){return o(y).then(I=>({cMapData:I,compressionType:m}))}}i.NodeCMapReaderFactory=S;class _ extends r.BaseStandardFontDataFactory{_fetchData(y){return o(y)}}i.NodeStandardFontDataFactory=_},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var r=t(132),o=t(1),g=t(148),S=t(149);function _(W,D){m(W,D),D.add(W)}function P(W,D,K){return D in W?Object.defineProperty(W,D,{value:K,enumerable:!0,configurable:!0,writable:!0}):W[D]=K,W}function y(W,D,K){m(W,D),D.set(W,K)}function m(W,D){if(D.has(W))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(W,D,K){if(!D.has(W))throw new TypeError("attempted to get private field on non-instance");return K}function u(W,D){var K=p(W,D,"get");return T(W,K)}function T(W,D){return D.get?D.get.call(W):D.value}function F(W,D,K){var se=p(W,D,"set");return k(W,se,K),K}function p(W,D,K){if(!D.has(W))throw new TypeError("attempted to "+K+" private field on non-instance");return D.get(W)}function k(W,D,K){if(D.set)D.set.call(W,K);else{if(!D.writable)throw new TypeError("attempted to set read only private field");D.value=K}}var N=new WeakMap,d=new WeakMap,b=new WeakMap,c=new WeakMap,n=new WeakMap,s=new WeakMap,f=new WeakMap,h=new WeakMap,C=new WeakSet,L=new WeakSet,M=new WeakSet,Q=new WeakSet;class X{constructor(D){_(this,Q),_(this,M),_(this,L),_(this,C),y(this,N,{writable:!0,value:void 0}),y(this,d,{writable:!0,value:!1}),y(this,b,{writable:!0,value:this.pointerup.bind(this)}),y(this,c,{writable:!0,value:this.pointerdown.bind(this)}),y(this,n,{writable:!0,value:new Map}),y(this,s,{writable:!0,value:!1}),y(this,f,{writable:!0,value:!1}),y(this,h,{writable:!0,value:void 0}),X._initialized||(X._initialized=!0,g.FreeTextEditor.initialize(D.l10n),S.InkEditor.initialize(D.l10n),D.uiManager.registerEditorTypes([g.FreeTextEditor,S.InkEditor])),F(this,h,D.uiManager),this.annotationStorage=D.annotationStorage,this.pageIndex=D.pageIndex,this.div=D.div,F(this,N,D.accessibilityManager),u(this,h).addLayer(this)}updateToolbar(D){u(this,h).updateToolbar(D)}updateMode(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u(this,h).getMode();I(this,Q,U).call(this),D===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),u(this,h).unselectAll()}addInkEditorIfNeeded(D){if(!D&&u(this,h).getMode()!==o.AnnotationEditorType.INK)return;if(!D){for(const se of u(this,n).values())if(se.isEmpty()){se.setInBackground();return}}I(this,M,z).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(D){u(this,h).setEditingState(D)}addCommands(D){u(this,h).addCommands(D)}enable(){this.div.style.pointerEvents="auto";for(const D of u(this,n).values())D.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const D of u(this,n).values())D.disableEditing()}setActiveEditor(D){u(this,h).getActive()!==D&&u(this,h).setActiveEditor(D)}enableClick(){this.div.addEventListener("pointerdown",u(this,c)),this.div.addEventListener("pointerup",u(this,b))}disableClick(){this.div.removeEventListener("pointerdown",u(this,c)),this.div.removeEventListener("pointerup",u(this,b))}attach(D){u(this,n).set(D.id,D)}detach(D){var K;u(this,n).delete(D.id),(K=u(this,N))===null||K===void 0||K.removePointerInTextLayer(D.contentDiv)}remove(D){u(this,h).removeEditor(D),this.detach(D),this.annotationStorage.remove(D.id),D.div.style.display="none",setTimeout(()=>{D.div.style.display="",D.div.remove(),D.isAttachedToDOM=!1,document.activeElement===document.body&&u(this,h).focusMainContainer()},0),u(this,f)||this.addInkEditorIfNeeded(!1)}add(D){if(I(this,C,Y).call(this,D),u(this,h).addEditor(D),this.attach(D),!D.isAttachedToDOM){const K=D.render();this.div.append(K),D.isAttachedToDOM=!0}this.moveEditorInDOM(D),D.onceAdded(),this.addToAnnotationStorage(D)}moveEditorInDOM(D){var K;(K=u(this,N))===null||K===void 0||K.moveElementInDOM(this.div,D.div,D.contentDiv,!0)}addToAnnotationStorage(D){!D.isEmpty()&&!this.annotationStorage.has(D.id)&&this.annotationStorage.setValue(D.id,D)}addOrRebuild(D){D.needsToBeRebuilt()?D.rebuild():this.add(D)}addANewEditor(D){const K=()=>{this.addOrRebuild(D)},se=()=>{D.remove()};this.addCommands({cmd:K,undo:se,mustExec:!0})}addUndoableEditor(D){const K=()=>{this.addOrRebuild(D)},se=()=>{D.remove()};this.addCommands({cmd:K,undo:se,mustExec:!1})}getNextId(){return u(this,h).getId()}deserialize(D){switch(D.annotationType){case o.AnnotationEditorType.FREETEXT:return g.FreeTextEditor.deserialize(D,this);case o.AnnotationEditorType.INK:return S.InkEditor.deserialize(D,this)}return null}setSelected(D){u(this,h).setSelected(D)}toggleSelected(D){u(this,h).toggleSelected(D)}isSelected(D){return u(this,h).isSelected(D)}unselect(D){u(this,h).unselect(D)}pointerup(D){const K=r.KeyboardManager.platform.isMac;if(!(D.button!==0||D.ctrlKey&&K)&&D.target===this.div&&u(this,s)){if(F(this,s,!1),!u(this,d)){F(this,d,!0);return}I(this,M,z).call(this,D)}}pointerdown(D){const K=r.KeyboardManager.platform.isMac;if(D.button!==0||D.ctrlKey&&K||D.target!==this.div)return;F(this,s,!0);const se=u(this,h).getActive();F(this,d,!se||se.isEmpty())}drop(D){const K=D.dataTransfer.getData("text/plain"),se=u(this,h).getEditor(K);if(!se)return;D.preventDefault(),D.dataTransfer.dropEffect="move",I(this,C,Y).call(this,se);const me=this.div.getBoundingClientRect(),Pe=D.clientX-me.x,H=D.clientY-me.y;se.translate(Pe-se.startX,H-se.startY),this.moveEditorInDOM(se),se.div.focus()}dragover(D){D.preventDefault()}destroy(){var D;((D=u(this,h).getActive())===null||D===void 0?void 0:D.parent)===this&&u(this,h).setActiveEditor(null);for(const se of u(this,n).values()){var K;(K=u(this,N))===null||K===void 0||K.removePointerInTextLayer(se.contentDiv),se.isAttachedToDOM=!1,se.div.remove(),se.parent=null}this.div=null,u(this,n).clear(),u(this,h).removeLayer(this)}render(D){this.viewport=D.viewport,(0,r.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const K of u(this,h).getEditors(this.pageIndex))this.add(K);this.updateMode()}update(D){this.viewport=D.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[D,K,se,me]=this.viewport.viewBox,Pe=se-D,H=me-K;return[Pe,H]}get viewportBaseDimensions(){const{width:D,height:K,rotation:se}=this.viewport;return se%180===0?[D,K]:[K,D]}setDimensions(){const{width:D,height:K,rotation:se}=this.viewport,me=se%180!==0,Pe=Math.floor(D)+"px",H=Math.floor(K)+"px";this.div.style.width=me?H:Pe,this.div.style.height=me?Pe:H,this.div.setAttribute("data-main-rotation",se)}}i.AnnotationEditorLayer=X;function Y(W){var D;W.parent!==this&&(this.attach(W),W.pageIndex=this.pageIndex,(D=W.parent)===null||D===void 0||D.detach(W),W.parent=this,W.div&&W.isAttachedToDOM&&(W.div.remove(),this.div.append(W.div)))}function q(W){switch(u(this,h).getMode()){case o.AnnotationEditorType.FREETEXT:return new g.FreeTextEditor(W);case o.AnnotationEditorType.INK:return new S.InkEditor(W)}return null}function z(W){const D=this.getNextId(),K=I(this,L,q).call(this,{parent:this,id:D,x:W.offsetX,y:W.offsetY});return K&&this.add(K),K}function U(){F(this,f,!0);for(const W of u(this,n).values())W.isEmpty()&&W.remove();F(this,f,!1)}P(X,"_initialized",!1)},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var r=t(1),o=t(132),g=t(131);function S(z,U){y(z,U),U.add(z)}function _(z,U,W){return U in z?Object.defineProperty(z,U,{value:W,enumerable:!0,configurable:!0,writable:!0}):z[U]=W,z}function P(z,U,W){y(z,U),U.set(z,W)}function y(z,U){if(U.has(z))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(z,U){var W=F(z,U,"get");return I(z,W)}function I(z,U){return U.get?U.get.call(z):U.value}function u(z,U,W){if(!U.has(z))throw new TypeError("attempted to get private field on non-instance");return W}function T(z,U,W){var D=F(z,U,"set");return p(z,D,W),W}function F(z,U,W){if(!U.has(z))throw new TypeError("attempted to "+W+" private field on non-instance");return U.get(z)}function p(z,U,W){if(U.set)U.set.call(z,W);else{if(!U.writable)throw new TypeError("attempted to set read only private field");U.value=W}}var k=new WeakMap,N=new WeakMap,d=new WeakMap,b=new WeakMap,c=new WeakMap,n=new WeakMap,s=new WeakMap,f=new WeakSet,h=new WeakSet,C=new WeakSet,L=new WeakSet;class M extends g.AnnotationEditor{constructor(U){super({...U,name:"freeTextEditor"}),S(this,L),S(this,C),S(this,h),S(this,f),P(this,k,{writable:!0,value:this.editorDivBlur.bind(this)}),P(this,N,{writable:!0,value:this.editorDivFocus.bind(this)}),P(this,d,{writable:!0,value:this.editorDivKeydown.bind(this)}),P(this,b,{writable:!0,value:void 0}),P(this,c,{writable:!0,value:""}),P(this,n,{writable:!0,value:!1}),P(this,s,{writable:!0,value:void 0}),T(this,b,U.color||M._defaultColor||g.AnnotationEditor._defaultLineColor),T(this,s,U.fontSize||M._defaultFontSize)}static initialize(U){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(D=>[D,U.get(D)]));const W=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(W.getPropertyValue("--freetext-padding"))}static updateDefaultParams(U,W){switch(U){case r.AnnotationEditorParamsType.FREETEXT_SIZE:M._defaultFontSize=W;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:M._defaultColor=W;break}}updateParams(U,W){switch(U){case r.AnnotationEditorParamsType.FREETEXT_SIZE:u(this,f,Q).call(this,W);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:u(this,h,X).call(this,W);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,M._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,M._defaultColor||g.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,m(this,s)],[r.AnnotationEditorParamsType.FREETEXT_COLOR,m(this,b)]]}getInitialTranslation(){return[-M._internalPadding*this.parent.scaleFactor,-(M._internalPadding+m(this,s))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",m(this,d)),this.editorDiv.addEventListener("focus",m(this,N)),this.editorDiv.addEventListener("blur",m(this,k)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",m(this,d)),this.editorDiv.removeEventListener("focus",m(this,N)),this.editorDiv.removeEventListener("blur",m(this,k)),this.div.focus(),this.isEditing=!1)}focusin(U){super.focusin(U),U.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),m(this,n)||(T(this,n,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),T(this,c,u(this,C,Y).call(this).trimEnd()),u(this,L,q).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(U){this.enableEditMode(),this.editorDiv.focus()}keydown(U){U.target===this.div&&U.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(U){M._keyboardManager.exec(this,U)}editorDivFocus(U){this.isEditing=!0}editorDivBlur(U){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let U,W;this.width&&(U=this.x,W=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),M._l10nPromise.get("editor_free_text_aria_label").then(K=>{var se;return(se=this.editorDiv)===null||se===void 0?void 0:se.setAttribute("aria-label",K)}),M._l10nPromise.get("free_text_default_content").then(K=>{var se;return(se=this.editorDiv)===null||se===void 0?void 0:se.setAttribute("default-content",K)}),this.editorDiv.contentEditable=!0;const{style:D}=this.editorDiv;if(D.fontSize=`calc(${m(this,s)}px * var(--scale-factor))`,D.color=m(this,b),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[K,se]=this.parent.viewportBaseDimensions;this.setAt(U*K,W*se,this.width*K,this.height*se);for(const me of m(this,c).split(`
`)){const Pe=document.createElement("div");Pe.append(me?document.createTextNode(me):document.createElement("br")),this.editorDiv.append(Pe)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(U,W){const D=super.deserialize(U,W);return T(D,s,U.fontSize),T(D,b,r.Util.makeHexColor(...U.color)),T(D,c,U.value),D}serialize(){if(this.isEmpty())return null;const U=M._internalPadding*this.parent.scaleFactor,W=this.getRect(U,U),D=g.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:r.AnnotationEditorType.FREETEXT,color:D,fontSize:m(this,s),value:m(this,c),pageIndex:this.parent.pageIndex,rect:W,rotation:this.rotation}}}i.FreeTextEditor=M;function Q(z){const U=D=>{this.editorDiv.style.fontSize=`calc(${D}px * var(--scale-factor))`,this.translate(0,-(D-m(this,s))*this.parent.scaleFactor),T(this,s,D),u(this,L,q).call(this)},W=m(this,s);this.parent.addCommands({cmd:()=>{U(z)},undo:()=>{U(W)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function X(z){const U=m(this,b);this.parent.addCommands({cmd:()=>{T(this,b,z),this.editorDiv.style.color=z},undo:()=>{T(this,b,U),this.editorDiv.style.color=U},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Y(){const z=this.editorDiv.getElementsByTagName("div");if(z.length===0)return this.editorDiv.innerText;const U=[];for(let W=0,D=z.length;W<D;W++){const se=z[W].firstChild;se?.nodeName==="#text"?U.push(se.data):U.push("")}return U.join(`
`)}function q(){const[z,U]=this.parent.viewportBaseDimensions,W=this.div.getBoundingClientRect();this.width=W.width/z,this.height=W.height/U}_(M,"_freeTextDefaultContent",""),_(M,"_l10nPromise",void 0),_(M,"_internalPadding",0),_(M,"_defaultColor",null),_(M,"_defaultFontSize",10),_(M,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],M.prototype.commitOrRemove]])),_(M,"_type","freetext")},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0,Object.defineProperty(i,"fitCurve",{enumerable:!0,get:function(){return g.fitCurve}});var r=t(1),o=t(131),g=t(150),S=t(132);function _(de,ae){m(de,ae),ae.add(de)}function P(de,ae,ye){return ae in de?Object.defineProperty(de,ae,{value:ye,enumerable:!0,configurable:!0,writable:!0}):de[ae]=ye,de}function y(de,ae,ye){m(de,ae),ae.set(de,ye)}function m(de,ae){if(ae.has(de))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(de,ae,ye){return u(de,ae),ye}function u(de,ae){if(de!==ae)throw new TypeError("Private static access of wrong provenance")}function T(de,ae,ye){var Te=k(de,ae,"set");return F(de,Te,ye),ye}function F(de,ae,ye){if(ae.set)ae.set.call(de,ye);else{if(!ae.writable)throw new TypeError("attempted to set read only private field");ae.value=ye}}function p(de,ae){var ye=k(de,ae,"get");return N(de,ye)}function k(de,ae,ye){if(!ae.has(de))throw new TypeError("attempted to "+ye+" private field on non-instance");return ae.get(de)}function N(de,ae){return ae.get?ae.get.call(de):ae.value}function d(de,ae,ye){if(!ae.has(de))throw new TypeError("attempted to get private field on non-instance");return ye}const b=16;var c=new WeakMap,n=new WeakMap,s=new WeakMap,f=new WeakMap,h=new WeakMap,C=new WeakMap,L=new WeakMap,M=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakMap,q=new WeakMap,z=new WeakMap,U=new WeakMap,W=new WeakSet,D=new WeakSet,K=new WeakSet,se=new WeakSet,me=new WeakSet,Pe=new WeakSet,H=new WeakSet,A=new WeakSet,E=new WeakSet,G=new WeakSet,j=new WeakSet,l=new WeakSet,v=new WeakSet,w=new WeakSet,O=new WeakSet,B=new WeakSet,$=new WeakSet,J=new WeakSet,ee=new WeakSet,ne=new WeakSet,le=new WeakSet,ie=new WeakSet;class ce extends o.AnnotationEditor{constructor(ae){super({...ae,name:"inkEditor"}),_(this,ie),_(this,le),_(this,ne),_(this,ee),_(this,J),_(this,$),_(this,B),_(this,O),_(this,w),_(this,v),_(this,l),_(this,j),_(this,G),_(this,E),_(this,A),_(this,H),_(this,Pe),_(this,me),_(this,se),_(this,K),_(this,D),_(this,W),y(this,c,{writable:!0,value:0}),y(this,n,{writable:!0,value:0}),y(this,s,{writable:!0,value:0}),y(this,f,{writable:!0,value:this.canvasPointermove.bind(this)}),y(this,h,{writable:!0,value:this.canvasPointerleave.bind(this)}),y(this,C,{writable:!0,value:this.canvasPointerup.bind(this)}),y(this,L,{writable:!0,value:this.canvasPointerdown.bind(this)}),y(this,M,{writable:!0,value:!1}),y(this,Q,{writable:!0,value:!1}),y(this,X,{writable:!0,value:null}),y(this,Y,{writable:!0,value:null}),y(this,q,{writable:!0,value:0}),y(this,z,{writable:!0,value:0}),y(this,U,{writable:!0,value:null}),this.color=ae.color||null,this.thickness=ae.thickness||null,this.opacity=ae.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ae){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(ye=>[ye,ae.get(ye)]))}static updateDefaultParams(ae,ye){switch(ae){case r.AnnotationEditorParamsType.INK_THICKNESS:ce._defaultThickness=ye;break;case r.AnnotationEditorParamsType.INK_COLOR:ce._defaultColor=ye;break;case r.AnnotationEditorParamsType.INK_OPACITY:ce._defaultOpacity=ye/100;break}}updateParams(ae,ye){switch(ae){case r.AnnotationEditorParamsType.INK_THICKNESS:d(this,W,he).call(this,ye);break;case r.AnnotationEditorParamsType.INK_COLOR:d(this,D,be).call(this,ye);break;case r.AnnotationEditorParamsType.INK_OPACITY:d(this,K,_e).call(this,ye);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,ce._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,ce._defaultColor||o.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(ce._defaultOpacity*100)]]}get propertiesToUpdate(){var ae;return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ce._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||ce._defaultColor||o.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((ae=this.opacity)!==null&&ae!==void 0?ae:ce._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(d(this,j,re).call(this),d(this,l,ve).call(this)),this.isAttachedToDOM||(this.parent.add(this),d(this,v,Me).call(this)),d(this,le,ke).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,p(this,Y).disconnect(),T(this,Y,null),super.remove())}enableEditMode(){p(this,M)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",p(this,L)),this.canvas.addEventListener("pointerup",p(this,C)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",p(this,L)),this.canvas.removeEventListener("pointerup",p(this,C)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){p(this,M)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),T(this,M,!0),this.div.classList.add("disabled"),d(this,le,ke).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(ae){super.focusin(ae),this.enableEditMode()}canvasPointerdown(ae){ae.button!==0||!this.isInEditMode()||p(this,M)||(this.setInForeground(),ae.type!=="mouse"&&this.div.focus(),ae.stopPropagation(),this.canvas.addEventListener("pointerleave",p(this,h)),this.canvas.addEventListener("pointermove",p(this,f)),d(this,Pe,Ae).call(this,ae.offsetX,ae.offsetY))}canvasPointermove(ae){ae.stopPropagation(),d(this,H,$e).call(this,ae.offsetX,ae.offsetY)}canvasPointerup(ae){ae.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(ae.stopPropagation(),d(this,G,Ee).call(this,ae),this.setInBackground())}canvasPointerleave(ae){d(this,G,Ee).call(this,ae),this.setInBackground()}render(){if(this.div)return this.div;let ae,ye;this.width&&(ae=this.x,ye=this.y),super.render(),ce._l10nPromise.get("editor_ink_aria_label").then(We=>{var Fe;return(Fe=this.div)===null||Fe===void 0?void 0:Fe.setAttribute("aria-label",We)});const[Te,Ie,De,Be]=d(this,se,we).call(this);if(this.setAt(Te,Ie,0,0),this.setDims(De,Be),d(this,j,re).call(this),this.width){const[We,Fe]=this.parent.viewportBaseDimensions;this.setAt(ae*We,ye*Fe,this.width*We,this.height*Fe),T(this,Q,!0),d(this,v,Me).call(this),this.setDims(this.width*We,this.height*Fe),d(this,E,Oe).call(this),d(this,ie,Ne).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return d(this,l,ve).call(this),this.div}setDimensions(ae,ye){const Te=Math.round(ae),Ie=Math.round(ye);if(p(this,q)===Te&&p(this,z)===Ie)return;T(this,q,Te),T(this,z,Ie),this.canvas.style.visibility="hidden",p(this,c)&&Math.abs(p(this,c)-ae/ye)>.01&&(ye=Math.ceil(ae/p(this,c)),this.setDims(ae,ye));const[De,Be]=this.parent.viewportBaseDimensions;this.width=ae/De,this.height=ye/Be,p(this,M)&&d(this,w,qe).call(this,ae,ye),d(this,v,Me).call(this),d(this,E,Oe).call(this),this.canvas.style.visibility="visible"}static deserialize(ae,ye){const Te=super.deserialize(ae,ye);Te.thickness=ae.thickness,Te.color=r.Util.makeHexColor(...ae.color),Te.opacity=ae.opacity;const[Ie,De]=ye.pageDimensions,Be=Te.width*Ie,We=Te.height*De,Fe=ye.scaleFactor,Ve=ae.thickness/2;T(Te,c,Be/We),T(Te,M,!0),T(Te,q,Math.round(Be)),T(Te,z,Math.round(We));for(const{bezier:ze}of ae.paths){const Qe=[];Te.paths.push(Qe);let nt=Fe*(ze[0]-Ve),Je=Fe*(We-ze[1]-Ve);for(let Ze=2,mt=ze.length;Ze<mt;Ze+=6){const yt=Fe*(ze[Ze]-Ve),Ot=Fe*(We-ze[Ze+1]-Ve),Ct=Fe*(ze[Ze+2]-Ve),vt=Fe*(We-ze[Ze+3]-Ve),Tt=Fe*(ze[Ze+4]-Ve),dt=Fe*(We-ze[Ze+5]-Ve);Qe.push([[nt,Je],[yt,Ot],[Ct,vt],[Tt,dt]]),nt=Tt,Je=dt}const at=I(this,ce,Ce).call(this,Qe);Te.bezierPath2D.push(at)}const et=d(Te,ee,te).call(Te);return T(Te,s,Math.max(b,et[2]-et[0])),T(Te,n,Math.max(b,et[3]-et[1])),d(Te,w,qe).call(Te,Be,We),Te}serialize(){if(this.isEmpty())return null;const ae=this.getRect(0,0),ye=this.rotation%180===0?ae[3]-ae[1]:ae[2]-ae[0],Te=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:Te,thickness:this.thickness,opacity:this.opacity,paths:d(this,B,Le).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,ye),pageIndex:this.parent.pageIndex,rect:ae,rotation:this.rotation}}}i.InkEditor=ce;function he(de){const ae=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=de,d(this,le,ke).call(this)},undo:()=>{this.thickness=ae,d(this,le,ke).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function be(de){const ae=this.color;this.parent.addCommands({cmd:()=>{this.color=de,d(this,E,Oe).call(this)},undo:()=>{this.color=ae,d(this,E,Oe).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _e(de){de/=100;const ae=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=de,d(this,E,Oe).call(this)},undo:()=>{this.opacity=ae,d(this,E,Oe).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function we(){const{width:de,height:ae,rotation:ye}=this.parent.viewport;switch(ye){case 90:return[0,de,de,ae];case 180:return[de,ae,de,ae];case 270:return[ae,0,de,ae];default:return[0,0,de,ae]}}function xe(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,S.opacityToHex)(this.opacity)}`}function Ae(de,ae){if(this.isEditing=!0,!p(this,Q)){var ye;T(this,Q,!0),d(this,v,Me).call(this),this.thickness||(this.thickness=ce._defaultThickness),this.color||(this.color=ce._defaultColor||o.AnnotationEditor._defaultLineColor),(ye=this.opacity)!==null&&ye!==void 0||(this.opacity=ce._defaultOpacity)}this.currentPath.push([de,ae]),T(this,X,null),d(this,me,xe).call(this),this.ctx.beginPath(),this.ctx.moveTo(de,ae),T(this,U,()=>{p(this,U)&&(p(this,X)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):d(this,E,Oe).call(this),this.ctx.lineTo(...p(this,X)),T(this,X,null),this.ctx.stroke()),window.requestAnimationFrame(p(this,U)))}),window.requestAnimationFrame(p(this,U))}function $e(de,ae){const[ye,Te]=this.currentPath.at(-1);de===ye&&ae===Te||(this.currentPath.push([de,ae]),T(this,X,[de,ae]))}function Xe(de,ae){this.ctx.closePath(),T(this,U,null),de=Math.min(Math.max(de,0),this.canvas.width),ae=Math.min(Math.max(ae,0),this.canvas.height);const[ye,Te]=this.currentPath.at(-1);(de!==ye||ae!==Te)&&this.currentPath.push([de,ae]);let Ie;if(this.currentPath.length!==1)Ie=(0,g.fitCurve)(this.currentPath,30,null);else{const Fe=[de,ae];Ie=[[Fe,Fe.slice(),Fe.slice(),Fe]]}const De=I(ce,ce,Ce).call(ce,Ie);this.currentPath.length=0;const Be=()=>{this.paths.push(Ie),this.bezierPath2D.push(De),this.rebuild()},We=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(d(this,j,re).call(this),d(this,l,ve).call(this)),d(this,le,ke).call(this))};this.parent.addCommands({cmd:Be,undo:We,mustExec:!0})}function Oe(){if(this.isEmpty()){d(this,O,fe).call(this);return}d(this,me,xe).call(this);const{canvas:de,ctx:ae}=this;ae.setTransform(1,0,0,1,0,0),ae.clearRect(0,0,de.width,de.height),d(this,O,fe).call(this);for(const ye of this.bezierPath2D)ae.stroke(ye)}function Ee(de){d(this,A,Xe).call(this,de.offsetX,de.offsetY),this.canvas.removeEventListener("pointerleave",p(this,h)),this.canvas.removeEventListener("pointermove",p(this,f)),this.parent.addToAnnotationStorage(this)}function re(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ce._l10nPromise.get("editor_ink_canvas_aria_label").then(de=>{var ae;return(ae=this.canvas)===null||ae===void 0?void 0:ae.setAttribute("aria-label",de)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function ve(){T(this,Y,new ResizeObserver(de=>{const ae=de[0].contentRect;ae.width&&ae.height&&this.setDimensions(ae.width,ae.height)})),p(this,Y).observe(this.div)}function Me(){if(!p(this,Q))return;const[de,ae]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*de),this.canvas.height=Math.ceil(this.height*ae),d(this,O,fe).call(this)}function qe(de,ae){const ye=d(this,ne,pe).call(this),Te=(de-ye)/p(this,s),Ie=(ae-ye)/p(this,n);this.scaleFactor=Math.min(Te,Ie)}function fe(){const de=d(this,ne,pe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+de,this.translationY*this.scaleFactor+de)}function Ce(de){const ae=new Path2D;for(let ye=0,Te=de.length;ye<Te;ye++){const[Ie,De,Be,We]=de[ye];ye===0&&ae.moveTo(...Ie),ae.bezierCurveTo(De[0],De[1],Be[0],Be[1],We[0],We[1])}return ae}function Le(de,ae,ye,Te){const De=[],Be=this.thickness/2;let We,Fe;for(const Ve of this.paths){We=[],Fe=[];for(let et=0,ze=Ve.length;et<ze;et++){const[Qe,nt,Je,at]=Ve[et],Ze=de*(Qe[0]+ae)+Be,mt=Te-de*(Qe[1]+ye)-Be,yt=de*(nt[0]+ae)+Be,Ot=Te-de*(nt[1]+ye)-Be,Ct=de*(Je[0]+ae)+Be,vt=Te-de*(Je[1]+ye)-Be,Tt=de*(at[0]+ae)+Be,dt=Te-de*(at[1]+ye)-Be;et===0&&(We.push(Ze,mt),Fe.push(Ze,mt)),We.push(yt,Ot,Ct,vt,Tt,dt),d(this,$,ue).call(this,Ze,mt,yt,Ot,Ct,vt,Tt,dt,4,Fe)}De.push({bezier:We,points:Fe})}return De}function ue(de,ae,ye,Te,Ie,De,Be,We,Fe,Ve){if(d(this,J,Z).call(this,de,ae,ye,Te,Ie,De,Be,We)){Ve.push(Be,We);return}for(let et=1;et<Fe-1;et++){const ze=et/Fe,Qe=1-ze;let nt=ze*de+Qe*ye,Je=ze*ae+Qe*Te,at=ze*ye+Qe*Ie,Ze=ze*Te+Qe*De;const mt=ze*Ie+Qe*Be,yt=ze*De+Qe*We;nt=ze*nt+Qe*at,Je=ze*Je+Qe*Ze,at=ze*at+Qe*mt,Ze=ze*Ze+Qe*yt,nt=ze*nt+Qe*at,Je=ze*Je+Qe*Ze,Ve.push(nt,Je)}Ve.push(Be,We)}function Z(de,ae,ye,Te,Ie,De,Be,We){const Ve=(3*ye-2*de-Be)**2,et=(3*Te-2*ae-We)**2,ze=(3*Ie-de-2*Be)**2,Qe=(3*De-ae-2*We)**2;return Math.max(Ve,ze)+Math.max(et,Qe)<=10}function te(){let de=1/0,ae=-1/0,ye=1/0,Te=-1/0;for(const Ie of this.paths)for(const[De,Be,We,Fe]of Ie){const Ve=r.Util.bezierBoundingBox(...De,...Be,...We,...Fe);de=Math.min(de,Ve[0]),ye=Math.min(ye,Ve[1]),ae=Math.max(ae,Ve[2]),Te=Math.max(Te,Ve[3])}return[de,ye,ae,Te]}function pe(){return p(this,M)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function ke(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!p(this,M)){d(this,E,Oe).call(this);return}const ae=d(this,ee,te).call(this),ye=d(this,ne,pe).call(this);T(this,s,Math.max(b,ae[2]-ae[0])),T(this,n,Math.max(b,ae[3]-ae[1]));const Te=Math.ceil(ye+p(this,s)*this.scaleFactor),Ie=Math.ceil(ye+p(this,n)*this.scaleFactor),[De,Be]=this.parent.viewportBaseDimensions;this.width=Te/De,this.height=Ie/Be,T(this,c,Te/Ie),d(this,ie,Ne).call(this);const We=this.translationX,Fe=this.translationY;this.translationX=-ae[0],this.translationY=-ae[1],d(this,v,Me).call(this),d(this,E,Oe).call(this),T(this,q,Te),T(this,z,Ie),this.setDims(Te,Ie);const Ve=de?ye/this.scaleFactor/2:0;this.translate(We-this.translationX-Ve,Fe-this.translationY-Ve)}function Ne(){const{style:de}=this.div;p(this,c)>=1?(de.minHeight=`${b}px`,de.minWidth=`${Math.round(p(this,c)*b)}px`):(de.minWidth=`${b}px`,de.minHeight=`${Math.round(b/p(this,c))}px`)}P(ce,"_defaultColor",null),P(ce,"_defaultOpacity",1),P(ce,"_defaultThickness",1),P(ce,"_l10nPromise",void 0),P(ce,"_type","ink")},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.fitCurve=void 0;const r=t(151);i.fitCurve=r},R=>{function i(F,p,k){if(!Array.isArray(F))throw new TypeError("First argument should be an array");if(F.forEach(c=>{if(!Array.isArray(c)||c.some(n=>typeof n!="number")||c.length!==F[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),F=F.filter((c,n)=>n===0||!c.every((s,f)=>s===F[n-1][f])),F.length<2)return[];const N=F.length,d=I(F[1],F[0]),b=I(F[N-2],F[N-1]);return t(F,d,b,p,k)}function t(F,p,k,N,d){var c,n,s,f,h,C,L,M,Q,X,Y,q,z;if(F.length===2)return q=u.vectorLen(u.subtract(F[0],F[1]))/3,c=[F[0],u.addArrays(F[0],u.mulItems(p,q)),u.addArrays(F[1],u.mulItems(k,q)),F[1]],[c];if(n=_(F),[c,f,C]=r(F,n,n,p,k,d),f===0||f<N)return[c];if(f<N*N)for(s=n,h=f,L=C,z=0;z<20;z++){if(s=g(c,F,s),[c,f,C]=r(F,n,s,p,k,d),f<N)return[c];if(C===L){let U=f/h;if(U>.9999&&U<1.0001)break}h=f,L=C}return Y=[],M=u.subtract(F[C-1],F[C+1]),M.every(U=>U===0)&&(M=u.subtract(F[C-1],F[C]),[M[0],M[1]]=[-M[1],M[0]]),Q=u.normalize(M),X=u.mulItems(Q,-1),Y=Y.concat(t(F.slice(0,C+1),p,Q,N,d)),Y=Y.concat(t(F.slice(C),X,k,N,d)),Y}function r(F,p,k,N,d,b){var c,n,s;return c=o(F,k,N,d),[n,s]=P(F,c,p),b&&b({bez:c,points:F,params:p,maxErr:n,maxPoint:s}),[c,n,s]}function o(F,p,k,N){var d,b,c,n,s,f,h,C,L,M,Q,X,Y,q,z,U,W,D=F[0],K=F[F.length-1];for(d=[D,null,null,K],b=u.zeros_Xx2x2(p.length),Y=0,q=p.length;Y<q;Y++)U=p[Y],W=1-U,c=b[Y],c[0]=u.mulItems(k,3*U*(W*W)),c[1]=u.mulItems(N,3*W*(U*U));for(n=[[0,0],[0,0]],s=[0,0],Y=0,q=F.length;Y<q;Y++)U=p[Y],c=b[Y],n[0][0]+=u.dot(c[0],c[0]),n[0][1]+=u.dot(c[0],c[1]),n[1][0]+=u.dot(c[0],c[1]),n[1][1]+=u.dot(c[1],c[1]),z=u.subtract(F[Y],T.q([D,D,K,K],U)),s[0]+=u.dot(c[0],z),s[1]+=u.dot(c[1],z);return f=n[0][0]*n[1][1]-n[1][0]*n[0][1],h=n[0][0]*s[1]-n[1][0]*s[0],C=s[0]*n[1][1]-s[1]*n[0][1],L=f===0?0:C/f,M=f===0?0:h/f,X=u.vectorLen(u.subtract(D,K)),Q=1e-6*X,L<Q||M<Q?(d[1]=u.addArrays(D,u.mulItems(k,X/3)),d[2]=u.addArrays(K,u.mulItems(N,X/3))):(d[1]=u.addArrays(D,u.mulItems(k,L)),d[2]=u.addArrays(K,u.mulItems(N,M))),d}function g(F,p,k){return k.map((N,d)=>S(F,p[d],N))}function S(F,p,k){var N=u.subtract(T.q(F,k),p),d=T.qprime(F,k),b=u.mulMatrix(N,d),c=u.sum(u.squareItems(d))+2*u.mulMatrix(N,T.qprimeprime(F,k));return c===0?k:k-b/c}function _(F){var p=[],k,N,d;return F.forEach((b,c)=>{k=c?N+u.vectorLen(u.subtract(b,d)):0,p.push(k),N=k,d=b}),p=p.map(b=>b/N),p}function P(F,p,k){var N,d,b,c,n,s,f,h;d=0,b=Math.floor(F.length/2);const C=y(p,10);for(n=0,s=F.length;n<s;n++)f=F[n],h=m(p,k[n],C,10),c=u.subtract(T.q(p,h),f),N=c[0]*c[0]+c[1]*c[1],N>d&&(d=N,b=n);return[d,b]}var y=function(F,p){for(var k,N=[0],d=F[0],b=0,c=1;c<=p;c++)k=T.q(F,c/p),b+=u.vectorLen(u.subtract(k,d)),N.push(b),d=k;return N=N.map(n=>n/b),N};function m(F,p,k,N){if(p<0)return 0;if(p>1)return 1;for(var d,b,c,n,s,f=1;f<=N;f++)if(p<=k[f]){n=(f-1)/N,c=f/N,b=k[f-1],d=k[f],s=(p-b)/(d-b)*(c-n)+n;break}return s}function I(F,p){return u.normalize(u.subtract(F,p))}class u{static zeros_Xx2x2(p){for(var k=[];p--;)k.push([0,0]);return k}static mulItems(p,k){return p.map(N=>N*k)}static mulMatrix(p,k){return p.reduce((N,d,b)=>N+d*k[b],0)}static subtract(p,k){return p.map((N,d)=>N-k[d])}static addArrays(p,k){return p.map((N,d)=>N+k[d])}static addItems(p,k){return p.map(N=>N+k)}static sum(p){return p.reduce((k,N)=>k+N)}static dot(p,k){return u.mulMatrix(p,k)}static vectorLen(p){return Math.hypot(...p)}static divItems(p,k){return p.map(N=>N/k)}static squareItems(p){return p.map(k=>k*k)}static normalize(p){return this.divItems(p,this.vectorLen(p))}}class T{static q(p,k){var N=1-k,d=u.mulItems(p[0],N*N*N),b=u.mulItems(p[1],3*N*N*k),c=u.mulItems(p[2],3*N*k*k),n=u.mulItems(p[3],k*k*k);return u.addArrays(u.addArrays(d,b),u.addArrays(c,n))}static qprime(p,k){var N=1-k,d=u.mulItems(u.subtract(p[1],p[0]),3*N*N),b=u.mulItems(u.subtract(p[2],p[1]),6*N*k),c=u.mulItems(u.subtract(p[3],p[2]),3*k*k);return u.addArrays(u.addArrays(d,b),c)}static qprimeprime(p,k){return u.addArrays(u.mulItems(u.addArrays(u.subtract(p[2],u.mulItems(p[1],2)),p[0]),6*(1-k)),u.mulItems(u.addArrays(u.subtract(p[3],u.mulItems(p[2],2)),p[1]),6*k))}}R.exports=i,R.exports.fitCubic=t,R.exports.createTangent=I},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationLayer=void 0;var r=t(1),o=t(133),g=t(130),S=t(153),_=t(154);function P(j,l,v){return y(j,l),v}function y(j,l){if(j!==l)throw new TypeError("Private static access of wrong provenance")}const m=1e3,I=9,u=new WeakSet;function T(j){return{width:j[2]-j[0],height:j[3]-j[1]}}class F{static create(l){switch(l.data.annotationType){case r.AnnotationType.LINK:return new k(l);case r.AnnotationType.TEXT:return new N(l);case r.AnnotationType.WIDGET:switch(l.data.fieldType){case"Tx":return new b(l);case"Btn":return l.data.radioButton?new n(l):l.data.checkBox?new c(l):new s(l);case"Ch":return new f(l)}return new d(l);case r.AnnotationType.POPUP:return new h(l);case r.AnnotationType.FREETEXT:return new L(l);case r.AnnotationType.LINE:return new M(l);case r.AnnotationType.SQUARE:return new Q(l);case r.AnnotationType.CIRCLE:return new X(l);case r.AnnotationType.POLYLINE:return new Y(l);case r.AnnotationType.CARET:return new z(l);case r.AnnotationType.INK:return new U(l);case r.AnnotationType.POLYGON:return new q(l);case r.AnnotationType.HIGHLIGHT:return new W(l);case r.AnnotationType.UNDERLINE:return new D(l);case r.AnnotationType.SQUIGGLY:return new K(l);case r.AnnotationType.STRIKEOUT:return new se(l);case r.AnnotationType.STAMP:return new me(l);case r.AnnotationType.FILEATTACHMENT:return new Pe(l);default:return new p(l)}}}class p{constructor(l){let{isRenderable:v=!1,ignoreBorder:w=!1,createQuadrilaterals:O=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=v,this.data=l.data,this.layer=l.layer,this.page=l.page,this.viewport=l.viewport,this.linkService=l.linkService,this.downloadManager=l.downloadManager,this.imageResourcesPath=l.imageResourcesPath,this.renderForms=l.renderForms,this.svgFactory=l.svgFactory,this.annotationStorage=l.annotationStorage,this.enableScripting=l.enableScripting,this.hasJSActions=l.hasJSActions,this._fieldObjects=l.fieldObjects,this._mouseState=l.mouseState,v&&(this.container=this._createContainer(w)),O&&(this.quadrilaterals=this._createQuadrilaterals(w))}_createContainer(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const v=this.data,w=this.page,O=this.viewport,B=document.createElement("section"),{width:$,height:J}=T(v.rect),[ee,ne,le,ie]=O.viewBox,ce=le-ee,he=ie-ne;B.setAttribute("data-annotation-id",v.id);const be=r.Util.normalizeRect([v.rect[0],w.view[3]-v.rect[1]+w.view[1],v.rect[2],w.view[3]-v.rect[3]+w.view[1]]);if(!l&&v.borderStyle.width>0){B.style.borderWidth=`${v.borderStyle.width}px`;const we=v.borderStyle.horizontalCornerRadius,xe=v.borderStyle.verticalCornerRadius;if(we>0||xe>0){const $e=`calc(${we}px * var(--scale-factor)) / calc(${xe}px * var(--scale-factor))`;B.style.borderRadius=$e}else if(this instanceof n){const $e=`calc(${$}px * var(--scale-factor)) / calc(${J}px * var(--scale-factor))`;B.style.borderRadius=$e}switch(v.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:B.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:B.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:B.style.borderBottomStyle="solid";break}const Ae=v.borderColor||null;Ae?B.style.borderColor=r.Util.makeHexColor(Ae[0]|0,Ae[1]|0,Ae[2]|0):B.style.borderWidth=0}B.style.left=`${100*(be[0]-ee)/ce}%`,B.style.top=`${100*(be[1]-ne)/he}%`;const{rotation:_e}=v;return v.hasOwnCanvas||_e===0?(B.style.width=`${100*$/ce}%`,B.style.height=`${100*J/he}%`):this.setRotation(_e,B),B}setRotation(l){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;const[w,O,B,$]=this.viewport.viewBox,J=B-w,ee=$-O,{width:ne,height:le}=T(this.data.rect);let ie,ce;l%180===0?(ie=100*ne/J,ce=100*le/ee):(ie=100*le/J,ce=100*ne/ee),v.style.width=`${ie}%`,v.style.height=`${ce}%`,v.setAttribute("data-main-rotation",(360-l)%360)}get _commonActions(){const l=(v,w,O)=>{const B=O.detail[v];O.target.style[w]=S.ColorConverters[`${B[0]}_HTML`](B.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:v=>{const w=v.detail.display%2===1;this.container.style.visibility=w?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:w,print:v.detail.display===0||v.detail.display===3})},print:v=>{this.annotationStorage.setValue(this.data.id,{print:v.detail.print})},hidden:v=>{this.container.style.visibility=v.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:v.detail.hidden})},focus:v=>{setTimeout(()=>v.target.focus({preventScroll:!1}),0)},userName:v=>{v.target.title=v.detail.userName},readonly:v=>{v.detail.readonly?v.target.setAttribute("readonly",""):v.target.removeAttribute("readonly")},required:v=>{this._setRequired(v.target,v.detail.required)},bgColor:v=>{l("bgColor","backgroundColor",v)},fillColor:v=>{l("fillColor","backgroundColor",v)},fgColor:v=>{l("fgColor","color",v)},textColor:v=>{l("textColor","color",v)},borderColor:v=>{l("borderColor","borderColor",v)},strokeColor:v=>{l("strokeColor","borderColor",v)},rotation:v=>{const w=v.detail.rotation;this.setRotation(w),this.annotationStorage.setValue(this.data.id,{rotation:w})}})}_dispatchEventFromSandbox(l,v){const w=this._commonActions;for(const O of Object.keys(v.detail)){const B=l[O]||w[O];B&&B(v)}}_setDefaultPropertiesFromJS(l){if(!this.enableScripting)return;const v=this.annotationStorage.getRawValue(this.data.id);if(!v)return;const w=this._commonActions;for(const[O,B]of Object.entries(v)){const $=w[O];if($){const J={detail:{[O]:B},target:l};$(J),delete v[O]}}}_createQuadrilaterals(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;const v=[],w=this.data.rect;for(const O of this.data.quadPoints)this.data.rect=[O[2].x,O[2].y,O[1].x,O[1].y],v.push(this._createContainer(l));return this.data.rect=w,v}_createPopup(l,v){let w=this.container;this.quadrilaterals&&(l=l||this.quadrilaterals,w=this.quadrilaterals[0]),l||(l=document.createElement("div"),l.className="popupTriggerArea",w.append(l));const B=new C({container:w,trigger:l,color:v.color,titleObj:v.titleObj,modificationDate:v.modificationDate,contentsObj:v.contentsObj,richText:v.richText,hideWrapper:!0}).render();B.style.left="100%",w.append(B)}_renderQuadrilaterals(l){for(const v of this.quadrilaterals)v.className=l;return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(l){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const w=[];if(this._fieldObjects){const O=this._fieldObjects[l];if(O)for(const{page:B,id:$,exportValues:J}of O){if(B===-1||$===v)continue;const ee=typeof J=="string"?J:null,ne=document.querySelector(`[data-element-id="${$}"]`);if(ne&&!u.has(ne)){(0,r.warn)(`_getElementsByName - element not allowed: ${$}`);continue}w.push({id:$,exportValue:ee,domElement:ne})}return w}for(const O of document.getElementsByName(l)){const{id:B,exportValue:$}=O;B!==v&&u.has(O)&&w.push({id:B,exportValue:$,domElement:O})}return w}static get platform(){const l=typeof navigator<"u"?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:l.includes("Win"),isMac:l.includes("Mac")})}}class k extends p{constructor(l){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(l,{isRenderable:!0,ignoreBorder:!!(v!=null&&v.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:v}=this,w=document.createElement("a");w.setAttribute("data-element-id",l.id);let O=!1;return l.url?(v.addLinkAttributes(w,l.url,l.newWindow),O=!0):l.action?(this._bindNamedAction(w,l.action),O=!0):l.dest?(this._bindLink(w,l.dest),O=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(w,l),O=!0),l.resetForm?(this._bindResetFormAction(w,l.resetForm),O=!0):this.isTooltipOnly&&!O&&(this._bindLink(w,""),O=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((B,$)=>{const J=$===0?w:w.cloneNode();return B.append(J),B}):(this.container.className="linkAnnotation",O&&this.container.append(w),this.container)}_bindLink(l,v){l.href=this.linkService.getDestinationHash(v),l.onclick=()=>(v&&this.linkService.goToDestination(v),!1),(v||v==="")&&(l.className="internalLink")}_bindNamedAction(l,v){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(v),!1),l.className="internalLink"}_bindJSAction(l,v){l.href=this.linkService.getAnchorUrl("");const w=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const O of Object.keys(v.actions)){const B=w.get(O);B&&(l[B]=()=>{var $;return($=this.linkService.eventBus)===null||$===void 0||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v.id,name:O}}),!1})}l.onclick||(l.onclick=()=>!1),l.className="internalLink"}_bindResetFormAction(l,v){const w=l.onclick;if(w||(l.href=this.linkService.getAnchorUrl("")),l.className="internalLink",!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),w||(l.onclick=()=>!1);return}l.onclick=()=>{w&&w();const{fields:O,refs:B,include:$}=v,J=[];if(O.length!==0||B.length!==0){const ie=new Set(B);for(const ce of O){const he=this._fieldObjects[ce]||[];for(const{id:be}of he)ie.add(be)}for(const ce of Object.values(this._fieldObjects))for(const he of ce)ie.has(he.id)===$&&J.push(he)}else for(const ie of Object.values(this._fieldObjects))J.push(...ie);const ee=this.annotationStorage,ne=[];for(const ie of J){const{id:ce}=ie;switch(ne.push(ce),ie.type){case"text":{const be=ie.defaultValue||"";ee.setValue(ce,{value:be});break}case"checkbox":case"radiobutton":{const be=ie.defaultValue===ie.exportValues;ee.setValue(ce,{value:be});break}case"combobox":case"listbox":{const be=ie.defaultValue||"";ee.setValue(ce,{value:be});break}default:continue}const he=document.querySelector(`[data-element-id="${ce}"]`);if(he){if(!u.has(he)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${ce}`);continue}}else continue;he.dispatchEvent(new Event("resetform"))}if(this.enableScripting){var le;(le=this.linkService.eventBus)===null||le===void 0||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ne,name:"ResetForm"}})}return!1}}}class N extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B})}render(){this.container.className="textAnnotation";const l=document.createElement("img");return l.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",l.alt="[{{type}} Annotation]",l.dataset.l10nId="text_annotation_type",l.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(l,this.data),this.container.append(l),this.container}}class d extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(l){const{isWin:v,isMac:w}=p.platform;return v&&l.ctrlKey||w&&l.metaKey}_setEventListener(l,v,w,O){v.includes("mouse")?l.addEventListener(v,B=>{var $;($=this.linkService.eventBus)===null||$===void 0||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:O(B),shift:B.shiftKey,modifier:this._getKeyModifier(B)}})}):l.addEventListener(v,B=>{var $;($=this.linkService.eventBus)===null||$===void 0||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:O(B)}})})}_setEventListeners(l,v,w){for(const[B,$]of v){var O;($==="Action"||(O=this.data.actions)!==null&&O!==void 0&&O[$])&&this._setEventListener(l,B,$,w)}}_setBackgroundColor(l){const v=this.data.backgroundColor||null;l.style.backgroundColor=v===null?"transparent":r.Util.makeHexColor(v[0],v[1],v[2])}_setTextStyle(l){const v=["left","center","right"],{fontColor:w}=this.data.defaultAppearanceData,O=this.data.defaultAppearanceData.fontSize||I,B=l.style;let $;if(this.data.multiLine){const J=Math.abs(this.data.rect[3]-this.data.rect[1]),ee=Math.round(J/(r.LINE_FACTOR*O))||1,ne=J/ee;$=Math.min(O,Math.round(ne/r.LINE_FACTOR))}else{const J=Math.abs(this.data.rect[3]-this.data.rect[1]);$=Math.min(O,Math.round(J/r.LINE_FACTOR))}B.fontSize=`calc(${$}px * var(--scale-factor))`,B.color=r.Util.makeHexColor(w[0],w[1],w[2]),this.data.textAlignment!==null&&(B.textAlign=v[this.data.textAlignment])}_setRequired(l,v){v?l.setAttribute("required",!0):l.removeAttribute("required"),l.setAttribute("aria-required",v)}}class b extends d{constructor(l){const v=l.renderForms||!l.data.hasAppearance&&!!l.data.fieldValue;super(l,{isRenderable:v})}setPropertyOnSiblings(l,v,w,O){const B=this.annotationStorage;for(const $ of this._getElementsByName(l.name,l.id))$.domElement&&($.domElement[v]=w),B.setValue($.id,{[O]:w})}render(){const l=this.annotationStorage,v=this.data.id;this.container.className="textWidgetAnnotation";let w=null;if(this.renderForms){const B=l.getValue(v,{value:this.data.fieldValue});let $=B.formattedValue||B.value||"";const J=l.getValue(v,{charLimit:this.data.maxLen}).charLimit;J&&$.length>J&&($=$.slice(0,J));const ee={userValue:$,formattedValue:null,valueOnFocus:""};this.data.multiLine?(w=document.createElement("textarea"),w.textContent=$,this.data.doNotScroll&&(w.style.overflowY="hidden")):(w=document.createElement("input"),w.type="text",w.setAttribute("value",$),this.data.doNotScroll&&(w.style.overflowX="hidden")),u.add(w),w.setAttribute("data-element-id",v),w.disabled=this.data.readOnly,w.name=this.data.fieldName,w.tabIndex=m,this._setRequired(w,this.data.required),J&&(w.maxLength=J),w.addEventListener("input",le=>{l.setValue(v,{value:le.target.value}),this.setPropertyOnSiblings(w,"value",le.target.value,"value")}),w.addEventListener("resetform",le=>{var ie;const ce=(ie=this.data.defaultFieldValue)!==null&&ie!==void 0?ie:"";w.value=ee.userValue=ce,ee.formattedValue=null});let ne=le=>{const{formattedValue:ie}=ee;ie!=null&&(le.target.value=ie),le.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var O;w.addEventListener("focus",ie=>{ee.userValue&&(ie.target.value=ee.userValue),ee.valueOnFocus=ie.target.value}),w.addEventListener("updatefromsandbox",ie=>{const ce={value(he){var be;ee.userValue=(be=he.detail.value)!==null&&be!==void 0?be:"",l.setValue(v,{value:ee.userValue.toString()}),he.target.value=ee.userValue},formattedValue(he){const{formattedValue:be}=he.detail;ee.formattedValue=be,be!=null&&he.target!==document.activeElement&&(he.target.value=be),l.setValue(v,{formattedValue:be})},selRange(he){he.target.setSelectionRange(...he.detail.selRange)},charLimit:he=>{var be;const{charLimit:_e}=he.detail,{target:we}=he;if(_e===0){we.removeAttribute("maxLength");return}we.setAttribute("maxLength",_e);let xe=ee.userValue;!xe||xe.length<=_e||(xe=xe.slice(0,_e),we.value=ee.userValue=xe,l.setValue(v,{value:xe}),(be=this.linkService.eventBus)===null||be===void 0||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:xe,willCommit:!0,commitKey:1,selStart:we.selectionStart,selEnd:we.selectionEnd}}))}};this._dispatchEventFromSandbox(ce,ie)}),w.addEventListener("keydown",ie=>{var ce;let he=-1;if(ie.key==="Escape"?he=0:ie.key==="Enter"?he=2:ie.key==="Tab"&&(he=3),he===-1)return;const{value:be}=ie.target;ee.valueOnFocus!==be&&(ee.userValue=be,(ce=this.linkService.eventBus)===null||ce===void 0||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:be,willCommit:!0,commitKey:he,selStart:ie.target.selectionStart,selEnd:ie.target.selectionEnd}}))});const le=ne;ne=null,w.addEventListener("blur",ie=>{const{value:ce}=ie.target;if(ee.userValue=ce,this._mouseState.isDown&&ee.valueOnFocus!==ce){var he;(he=this.linkService.eventBus)===null||he===void 0||he.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:ce,willCommit:!0,commitKey:1,selStart:ie.target.selectionStart,selEnd:ie.target.selectionEnd}})}le(ie)}),(O=this.data.actions)!==null&&O!==void 0&&O.Keystroke&&w.addEventListener("beforeinput",ie=>{var ce;const{data:he,target:be}=ie,{value:_e,selectionStart:we,selectionEnd:xe}=be;let Ae=we,$e=xe;switch(ie.inputType){case"deleteWordBackward":{const Xe=_e.substring(0,we).match(/\w*[^\w]*$/);Xe&&(Ae-=Xe[0].length);break}case"deleteWordForward":{const Xe=_e.substring(we).match(/^[^\w]*\w*/);Xe&&($e+=Xe[0].length);break}case"deleteContentBackward":we===xe&&(Ae-=1);break;case"deleteContentForward":we===xe&&($e+=1);break}ie.preventDefault(),(ce=this.linkService.eventBus)===null||ce===void 0||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:_e,change:he||"",willCommit:!1,selStart:Ae,selEnd:$e}})}),this._setEventListeners(w,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ie=>ie.target.value)}if(ne&&w.addEventListener("blur",ne),this.data.comb){const ie=(this.data.rect[2]-this.data.rect[0])/J;w.classList.add("comb"),w.style.letterSpacing=`calc(${ie}px * var(--scale-factor) - 1ch)`}}else w=document.createElement("div"),w.textContent=this.data.fieldValue,w.style.verticalAlign="middle",w.style.display="table-cell";return this._setTextStyle(w),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class c extends d{constructor(l){super(l,{isRenderable:l.renderForms})}render(){const l=this.annotationStorage,v=this.data,w=v.id;let O=l.getValue(w,{value:v.exportValue===v.fieldValue}).value;typeof O=="string"&&(O=O!=="Off",l.setValue(w,{value:O})),this.container.className="buttonWidgetAnnotation checkBox";const B=document.createElement("input");return u.add(B),B.setAttribute("data-element-id",w),B.disabled=v.readOnly,this._setRequired(B,this.data.required),B.type="checkbox",B.name=v.fieldName,O&&B.setAttribute("checked",!0),B.setAttribute("exportValue",v.exportValue),B.tabIndex=m,B.addEventListener("change",$=>{const{name:J,checked:ee}=$.target;for(const ne of this._getElementsByName(J,w)){const le=ee&&ne.exportValue===v.exportValue;ne.domElement&&(ne.domElement.checked=le),l.setValue(ne.id,{value:le})}l.setValue(w,{value:ee})}),B.addEventListener("resetform",$=>{const J=v.defaultFieldValue||"Off";$.target.checked=J===v.exportValue}),this.enableScripting&&this.hasJSActions&&(B.addEventListener("updatefromsandbox",$=>{const J={value(ee){ee.target.checked=ee.detail.value!=="Off",l.setValue(w,{value:ee.target.checked})}};this._dispatchEventFromSandbox(J,$)}),this._setEventListeners(B,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class n extends d{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const l=this.annotationStorage,v=this.data,w=v.id;let O=l.getValue(w,{value:v.fieldValue===v.buttonValue}).value;typeof O=="string"&&(O=O!==v.buttonValue,l.setValue(w,{value:O}));const B=document.createElement("input");if(u.add(B),B.setAttribute("data-element-id",w),B.disabled=v.readOnly,this._setRequired(B,this.data.required),B.type="radio",B.name=v.fieldName,O&&B.setAttribute("checked",!0),B.tabIndex=m,B.addEventListener("change",$=>{const{name:J,checked:ee}=$.target;for(const ne of this._getElementsByName(J,w))l.setValue(ne.id,{value:!1});l.setValue(w,{value:ee})}),B.addEventListener("resetform",$=>{const J=v.defaultFieldValue;$.target.checked=J!=null&&J===v.buttonValue}),this.enableScripting&&this.hasJSActions){const $=v.buttonValue;B.addEventListener("updatefromsandbox",J=>{const ee={value:ne=>{const le=$===ne.detail.value;for(const ie of this._getElementsByName(ne.target.name)){const ce=le&&ie.id===w;ie.domElement&&(ie.domElement.checked=ce),l.setValue(ie.id,{value:ce})}}};this._dispatchEventFromSandbox(ee,J)}),this._setEventListeners(B,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)}return this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class s extends k{constructor(l){super(l,{ignoreBorder:l.data.hasAppearance})}render(){const l=super.render();l.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(l.title=this.data.alternativeText);const v=l.lastChild;return this.enableScripting&&this.hasJSActions&&v&&(this._setDefaultPropertiesFromJS(v),v.addEventListener("updatefromsandbox",w=>{this._dispatchEventFromSandbox({},w)})),l}}class f extends d{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const l=this.annotationStorage,v=this.data.id,w=l.getValue(v,{value:this.data.fieldValue}),O=document.createElement("select");u.add(O),O.setAttribute("data-element-id",v),O.disabled=this.data.readOnly,this._setRequired(O,this.data.required),O.name=this.data.fieldName,O.tabIndex=m;let B=this.data.combo&&this.data.options.length>0;this.data.combo||(O.size=this.data.options.length,this.data.multiSelect&&(O.multiple=!0)),O.addEventListener("resetform",ne=>{const le=this.data.defaultFieldValue;for(const ie of O.options)ie.selected=ie.value===le});for(const ne of this.data.options){const le=document.createElement("option");le.textContent=ne.displayValue,le.value=ne.exportValue,w.value.includes(ne.exportValue)&&(le.setAttribute("selected",!0),B=!1),O.append(le)}let $=null;if(B){const ne=document.createElement("option");ne.value=" ",ne.setAttribute("hidden",!0),ne.setAttribute("selected",!0),O.prepend(ne),$=()=>{ne.remove(),O.removeEventListener("input",$),$=null},O.addEventListener("input",$)}const J=(ne,le)=>{const ie=le?"value":"textContent",ce=ne.target.options;return ne.target.multiple?Array.prototype.filter.call(ce,he=>he.selected).map(he=>he[ie]):ce.selectedIndex===-1?null:ce[ce.selectedIndex][ie]},ee=ne=>{const le=ne.target.options;return Array.prototype.map.call(le,ie=>({displayValue:ie.textContent,exportValue:ie.value}))};return this.enableScripting&&this.hasJSActions?(O.addEventListener("updatefromsandbox",ne=>{const le={value(ie){var ce;(ce=$)===null||ce===void 0||ce();const he=ie.detail.value,be=new Set(Array.isArray(he)?he:[he]);for(const _e of O.options)_e.selected=be.has(_e.value);l.setValue(v,{value:J(ie,!0)})},multipleSelection(ie){O.multiple=!0},remove(ie){const ce=O.options,he=ie.detail.remove;ce[he].selected=!1,O.remove(he),ce.length>0&&Array.prototype.findIndex.call(ce,_e=>_e.selected)===-1&&(ce[0].selected=!0),l.setValue(v,{value:J(ie,!0),items:ee(ie)})},clear(ie){for(;O.length!==0;)O.remove(0);l.setValue(v,{value:null,items:[]})},insert(ie){const{index:ce,displayValue:he,exportValue:be}=ie.detail.insert,_e=O.children[ce],we=document.createElement("option");we.textContent=he,we.value=be,_e?_e.before(we):O.append(we),l.setValue(v,{value:J(ie,!0),items:ee(ie)})},items(ie){const{items:ce}=ie.detail;for(;O.length!==0;)O.remove(0);for(const he of ce){const{displayValue:be,exportValue:_e}=he,we=document.createElement("option");we.textContent=be,we.value=_e,O.append(we)}O.options.length>0&&(O.options[0].selected=!0),l.setValue(v,{value:J(ie,!0),items:ee(ie)})},indices(ie){const ce=new Set(ie.detail.indices);for(const he of ie.target.options)he.selected=ce.has(he.index);l.setValue(v,{value:J(ie,!0)})},editable(ie){ie.target.disabled=!ie.detail.editable}};this._dispatchEventFromSandbox(le,ne)}),O.addEventListener("input",ne=>{var le;const ie=J(ne,!0),ce=J(ne,!1);l.setValue(v,{value:ie}),(le=this.linkService.eventBus)===null||le===void 0||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:ce,changeEx:ie,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(O,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],ne=>ne.target.checked)):O.addEventListener("input",function(ne){l.setValue(v,{value:J(ne,!0)})}),this.data.combo&&this._setTextStyle(O),this._setBackgroundColor(O),this._setDefaultPropertiesFromJS(O),this.container.append(O),this.container}}class h extends p{constructor(l){var v,w,O;const B=!!((v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B})}render(){const l=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",l.includes(this.data.parentType))return this.container;const v=`[data-annotation-id="${this.data.parentId}"]`,w=this.layer.querySelectorAll(v);if(w.length===0)return this.container;const O=new C({container:this.container,trigger:Array.from(w),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),B=this.page,$=r.Util.normalizeRect([this.data.parentRect[0],B.view[3]-this.data.parentRect[1]+B.view[1],this.data.parentRect[2],B.view[3]-this.data.parentRect[3]+B.view[1]]),J=$[0]+this.data.parentRect[2]-this.data.parentRect[0],ee=$[1],[ne,le,ie,ce]=this.viewport.viewBox,he=ie-ne,be=ce-le;return this.container.style.left=`${100*(J-ne)/he}%`,this.container.style.top=`${100*(ee-le)/be}%`,this.container.append(O.render()),this.container}}class C{constructor(l){this.container=l.container,this.trigger=l.trigger,this.color=l.color,this.titleObj=l.titleObj,this.modificationDate=l.modificationDate,this.contentsObj=l.contentsObj,this.richText=l.richText,this.hideWrapper=l.hideWrapper||!1,this.pinned=!1}render(){var l,v;const O=document.createElement("div");O.className="popupWrapper",this.hideElement=this.hideWrapper?O:this.container,this.hideElement.hidden=!0;const B=document.createElement("div");B.className="popup";const $=this.color;if($){const ne=.7*(255-$[0])+$[0],le=.7*(255-$[1])+$[1],ie=.7*(255-$[2])+$[2];B.style.backgroundColor=r.Util.makeHexColor(ne|0,le|0,ie|0)}const J=document.createElement("h1");J.dir=this.titleObj.dir,J.textContent=this.titleObj.str,B.append(J);const ee=o.PDFDateString.toDateObject(this.modificationDate);if(ee){const ne=document.createElement("span");ne.className="popupDate",ne.textContent="{{date}}, {{time}}",ne.dataset.l10nId="annotation_date_string",ne.dataset.l10nArgs=JSON.stringify({date:ee.toLocaleDateString(),time:ee.toLocaleTimeString()}),B.append(ne)}if((l=this.richText)!==null&&l!==void 0&&l.str&&(!((v=this.contentsObj)!==null&&v!==void 0&&v.str)||this.contentsObj.str===this.richText.str))_.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:B}),B.lastChild.className="richText popupContent";else{const ne=this._formatContents(this.contentsObj);B.append(ne)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ne of this.trigger)ne.addEventListener("click",this._toggle.bind(this)),ne.addEventListener("mouseover",this._show.bind(this,!1)),ne.addEventListener("mouseout",this._hide.bind(this,!1));return B.addEventListener("click",this._hide.bind(this,!0)),O.append(B),O}_formatContents(l){let{str:v,dir:w}=l;const O=document.createElement("p");O.className="popupContent",O.dir=w;const B=v.split(/(?:\r\n?|\n)/);for(let $=0,J=B.length;$<J;++$){const ee=B[$];O.append(document.createTextNode(ee)),$<J-1&&O.append(document.createElement("br"))}return O}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class L extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0}),this.textContent=l.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const l=document.createElement("div");l.className="annotationTextContent",l.setAttribute("role","comment");for(const v of this.textContent){const w=document.createElement("span");w.textContent=v,l.append(w)}this.container.append(l)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const l=this.data,{width:v,height:w}=T(l.rect),O=this.svgFactory.create(v,w,!0),B=this.svgFactory.createElement("svg:line");return B.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),B.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),B.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),B.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),B.setAttribute("stroke-width",l.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),O.append(B),this.container.append(O),this._createPopup(B,l),this.container}}class Q extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const l=this.data,{width:v,height:w}=T(l.rect),O=this.svgFactory.create(v,w,!0),B=l.borderStyle.width,$=this.svgFactory.createElement("svg:rect");return $.setAttribute("x",B/2),$.setAttribute("y",B/2),$.setAttribute("width",v-B),$.setAttribute("height",w-B),$.setAttribute("stroke-width",B||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),O.append($),this.container.append(O),this._createPopup($,l),this.container}}class X extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const l=this.data,{width:v,height:w}=T(l.rect),O=this.svgFactory.create(v,w,!0),B=l.borderStyle.width,$=this.svgFactory.createElement("svg:ellipse");return $.setAttribute("cx",v/2),$.setAttribute("cy",w/2),$.setAttribute("rx",v/2-B/2),$.setAttribute("ry",w/2-B/2),$.setAttribute("stroke-width",B||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),O.append($),this.container.append(O),this._createPopup($,l),this.container}}class Y extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:v,height:w}=T(l.rect),O=this.svgFactory.create(v,w,!0);let B=[];for(const J of l.vertices){const ee=J.x-l.rect[0],ne=l.rect[3]-J.y;B.push(ee+","+ne)}B=B.join(" ");const $=this.svgFactory.createElement(this.svgElementName);return $.setAttribute("points",B),$.setAttribute("stroke-width",l.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),O.append($),this.container.append(O),this._createPopup($,l),this.container}}class q extends Y{constructor(l){super(l),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class z extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class U extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:v,height:w}=T(l.rect),O=this.svgFactory.create(v,w,!0);for(const B of l.inkLists){let $=[];for(const ee of B){const ne=ee.x-l.rect[0],le=l.rect[3]-ee.y;$.push(`${ne},${le}`)}$=$.join(" ");const J=this.svgFactory.createElement(this.svgElementName);J.setAttribute("points",$),J.setAttribute("stroke-width",l.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),this._createPopup(J,l),O.append(J)}return this.container.append(O),this.container}}class W extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class D extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class K extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class se extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class me extends p{constructor(l){var v,w,O;const B=!!(l.data.hasPopup||(v=l.data.titleObj)!==null&&v!==void 0&&v.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(O=l.data.richText)!==null&&O!==void 0&&O.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Pe extends p{constructor(l){var v;super(l,{isRenderable:!0});const{filename:w,content:O}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(w),this.content=O,(v=this.linkService.eventBus)===null||v===void 0||v.dispatch("fileattachmentannotation",{source:this,filename:w,content:O})}render(){var l,v;this.container.className="fileAttachmentAnnotation";const w=document.createElement("div");return w.className="popupTriggerArea",w.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((l=this.data.titleObj)!==null&&l!==void 0&&l.str||(v=this.data.contentsObj)!==null&&v!==void 0&&v.str||this.data.richText)&&this._createPopup(w,this.data),this.container.append(w),this.container}_download(){var l;(l=this.downloadManager)===null||l===void 0||l.openOrDownloadData(this.container,this.content,this.filename)}}class H{static render(l){const{annotations:v,div:w,viewport:O,accessibilityManager:B}=l;P(this,H,E).call(this,w,O);let $=0;for(const J of v){if(J.annotationType!==r.AnnotationType.POPUP){const{width:ne,height:le}=T(J.rect);if(ne<=0||le<=0)continue}const ee=F.create({data:J,layer:w,page:l.page,viewport:O,linkService:l.linkService,downloadManager:l.downloadManager,imageResourcesPath:l.imageResourcesPath||"",renderForms:l.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:l.annotationStorage||new g.AnnotationStorage,enableScripting:l.enableScripting,hasJSActions:l.hasJSActions,fieldObjects:l.fieldObjects,mouseState:l.mouseState||{isDown:!1}});if(ee.isRenderable){const ne=ee.render();if(J.hidden&&(ne.style.visibility="hidden"),Array.isArray(ne))for(const le of ne)le.style.zIndex=$++,P(H,H,A).call(H,le,J.id,w,B);else ne.style.zIndex=$++,ee instanceof h?w.prepend(ne):P(H,H,A).call(H,ne,J.id,w,B)}}P(this,H,G).call(this,w,l.annotationCanvasMap)}static update(l){const{annotationCanvasMap:v,div:w,viewport:O}=l;P(this,H,E).call(this,w,O),P(this,H,G).call(this,w,v),w.hidden=!1}}i.AnnotationLayer=H;function A(j,l,v,w){const O=j.firstChild||j;O.id=`${o.AnnotationPrefix}${l}`,v.append(j),w?.moveElementInDOM(v,j,O,!1)}function E(j,l){let{width:v,height:w,rotation:O}=l;const{style:B}=j,$=O%180!==0,J=Math.floor(v)+"px",ee=Math.floor(w)+"px";B.width=$?ee:J,B.height=$?J:ee,j.setAttribute("data-main-rotation",O)}function G(j,l){if(l){for(const[v,w]of l){const O=j.querySelector(`[data-annotation-id="${v}"]`);if(!O)continue;const{firstChild:B}=O;B?B.nodeName==="CANVAS"?B.replaceWith(w):B.before(w):O.append(w)}l.clear()}}},(R,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function t(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}class r{static CMYK_G(g){let[S,_,P,y]=g;return["G",1-Math.min(1,.3*S+.59*P+.11*_+y)]}static G_CMYK(g){let[S]=g;return["CMYK",0,0,0,1-S]}static G_RGB(g){let[S]=g;return["RGB",S,S,S]}static G_HTML(g){let[S]=g;const _=t(S);return`#${_}${_}${_}`}static RGB_G(g){let[S,_,P]=g;return["G",.3*S+.59*_+.11*P]}static RGB_HTML(g){let[S,_,P]=g;const y=t(S),m=t(_),I=t(P);return`#${y}${m}${I}`}static T_HTML(){return"#00000000"}static CMYK_RGB(g){let[S,_,P,y]=g;return["RGB",1-Math.min(1,S+y),1-Math.min(1,P+y),1-Math.min(1,_+y)]}static CMYK_HTML(g){const S=this.CMYK_RGB(g).slice(1);return this.RGB_HTML(S)}static RGB_CMYK(g){let[S,_,P]=g;const y=1-S,m=1-_,I=1-P,u=Math.min(y,m,I);return["CMYK",y,m,I,u]}}i.ColorConverters=r},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var r=t(145);class o{static setupStorage(S,_,P,y,m){const I=y.getValue(_,{value:null});switch(P.name){case"textarea":if(I.value!==null&&(S.textContent=I.value),m==="print")break;S.addEventListener("input",u=>{y.setValue(_,{value:u.target.value})});break;case"input":if(P.attributes.type==="radio"||P.attributes.type==="checkbox"){if(I.value===P.attributes.xfaOn?S.setAttribute("checked",!0):I.value===P.attributes.xfaOff&&S.removeAttribute("checked"),m==="print")break;S.addEventListener("change",u=>{y.setValue(_,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&S.setAttribute("value",I.value),m==="print")break;S.addEventListener("input",u=>{y.setValue(_,{value:u.target.value})})}break;case"select":if(I.value!==null)for(const u of P.children)u.attributes.value===I.value&&(u.attributes.selected=!0);S.addEventListener("input",u=>{const T=u.target.options,F=T.selectedIndex===-1?"":T[T.selectedIndex].value;y.setValue(_,{value:F})});break}}static setAttributes(S){let{html:_,element:P,storage:y=null,intent:m,linkService:I}=S;const{attributes:u}=P,T=_ instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${m}`);for(const[F,p]of Object.entries(u))if(p!=null)switch(F){case"class":p.length&&_.setAttribute(F,p.join(" "));break;case"dataId":break;case"id":_.setAttribute("data-element-id",p);break;case"style":Object.assign(_.style,p);break;case"textContent":_.textContent=p;break;default:(!T||F!=="href"&&F!=="newWindow")&&_.setAttribute(F,p)}T&&I.addLinkAttributes(_,u.href,u.newWindow),y&&u.dataId&&this.setupStorage(_,u.dataId,P,y)}static render(S){const _=S.annotationStorage,P=S.linkService,y=S.xfaHtml,m=S.intent||"display",I=document.createElement(y.name);y.attributes&&this.setAttributes({html:I,element:y,intent:m,linkService:P});const u=[[y,-1,I]],T=S.div;if(T.append(I),S.viewport){const k=`matrix(${S.viewport.transform.join(",")})`;T.style.transform=k}m!=="richText"&&T.setAttribute("class","xfaLayer xfaFont");const F=[];for(;u.length>0;){var p;const[k,N,d]=u.at(-1);if(N+1===k.children.length){u.pop();continue}const b=k.children[++u.at(-1)[1]];if(b===null)continue;const{name:c}=b;if(c==="#text"){const s=document.createTextNode(b.value);F.push(s),d.append(s);continue}let n;if(b!=null&&(p=b.attributes)!==null&&p!==void 0&&p.xmlns?n=document.createElementNS(b.attributes.xmlns,c):n=document.createElement(c),d.append(n),b.attributes&&this.setAttributes({html:n,element:b,storage:_,intent:m,linkService:P}),b.children&&b.children.length>0)u.push([b,-1,n]);else if(b.value){const s=document.createTextNode(b.value);r.XfaText.shouldBuildText(c)&&F.push(s),n.append(s)}}for(const k of T.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))k.setAttribute("readOnly",!0);return{textDivs:F}}static update(S){const _=`matrix(${S.viewport.transform.join(",")})`;S.div.style.transform=_,S.div.hidden=!1}}i.XfaLayer=o},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=d;var r=t(1),o=t(133);const g=1e5,S=30,_=.8,P=new Map,y=/^\s+$/g;function m(b,c){const n=P.get(b);if(n)return n;c.save(),c.font=`${S}px ${b}`;const s=c.measureText("");let f=s.fontBoundingBoxAscent,h=Math.abs(s.fontBoundingBoxDescent);if(f){c.restore();const L=f/(f+h);return P.set(b,L),L}c.strokeStyle="red",c.clearRect(0,0,S,S),c.strokeText("g",0,0);let C=c.getImageData(0,0,S,S).data;h=0;for(let L=C.length-1-3;L>=0;L-=4)if(C[L]>0){h=Math.ceil(L/4/S);break}c.clearRect(0,0,S,S),c.strokeText("A",0,S),C=c.getImageData(0,0,S,S).data,f=0;for(let L=0,M=C.length;L<M;L+=4)if(C[L]>0){f=S-Math.floor(L/4/S);break}if(c.restore(),f){const L=f/(f+h);return P.set(b,L),L}return P.set(b,_),_}function I(b,c,n,s){const f=document.createElement("span"),h=b._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:c.str!=="",hasEOL:c.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:c.str!=="",hasEOL:c.hasEOL,fontSize:0};b._textDivs.push(f);const C=r.Util.transform(b._viewport.transform,c.transform);let L=Math.atan2(C[1],C[0]);const M=n[c.fontName];M.vertical&&(L+=Math.PI/2);const Q=Math.hypot(C[2],C[3]),X=Q*m(M.fontFamily,s);let Y,q;L===0?(Y=C[4],q=C[5]-X):(Y=C[4]+X*Math.sin(L),q=C[5]-X*Math.cos(L)),f.style.left=`${Y}px`,f.style.top=`${q}px`,f.style.fontSize=`${Q}px`,f.style.fontFamily=M.fontFamily,h.fontSize=Q,f.setAttribute("role","presentation"),f.textContent=c.str,f.dir=c.dir,b._fontInspectorEnabled&&(f.dataset.fontName=c.fontName),L!==0&&(h.angle=L*(180/Math.PI));let z=!1;if(c.str.length>1||b._enhanceTextSelection&&y.test(c.str))z=!0;else if(c.str!==" "&&c.transform[0]!==c.transform[3]){const U=Math.abs(c.transform[0]),W=Math.abs(c.transform[3]);U!==W&&Math.max(U,W)/Math.min(U,W)>1.5&&(z=!0)}if(z&&(M.vertical?h.canvasWidth=c.height*b._viewport.scale:h.canvasWidth=c.width*b._viewport.scale),b._textDivProperties.set(f,h),b._textContentStream&&b._layoutText(f),b._enhanceTextSelection&&h.hasText){let U=1,W=0;L!==0&&(U=Math.cos(L),W=Math.sin(L));const D=(M.vertical?c.height:c.width)*b._viewport.scale,K=Q;let se,me;L!==0?(se=[U,W,-W,U,Y,q],me=r.Util.getAxialAlignedBoundingBox([0,0,D,K],se)):me=[Y,q,Y+D,q+K],b._bounds.push({left:me[0],top:me[1],right:me[2],bottom:me[3],div:f,size:[D,K],m:se})}}function u(b){if(b._canceled)return;const c=b._textDivs,n=b._capability,s=c.length;if(s>g){b._renderingDone=!0,n.resolve();return}if(!b._textContentStream)for(let f=0;f<s;f++)b._layoutText(c[f]);b._renderingDone=!0,n.resolve()}function T(b,c,n){let s=0;for(let f=0;f<n;f++){const h=b[c++];h>0&&(s=s?Math.min(h,s):h)}return s}function F(b){const c=b._bounds,n=b._viewport,s=p(n.width,n.height,c);for(let f=0;f<s.length;f++){const h=c[f].div,C=b._textDivProperties.get(h);if(C.angle===0){C.paddingLeft=c[f].left-s[f].left,C.paddingTop=c[f].top-s[f].top,C.paddingRight=s[f].right-c[f].right,C.paddingBottom=s[f].bottom-c[f].bottom,b._textDivProperties.set(h,C);continue}const L=s[f],M=c[f],Q=M.m,X=Q[0],Y=Q[1],q=[[0,0],[0,M.size[1]],[M.size[0],0],M.size],z=new Float64Array(64);for(let W=0,D=q.length;W<D;W++){const K=r.Util.applyTransform(q[W],Q);z[W+0]=X&&(L.left-K[0])/X,z[W+4]=Y&&(L.top-K[1])/Y,z[W+8]=X&&(L.right-K[0])/X,z[W+12]=Y&&(L.bottom-K[1])/Y,z[W+16]=Y&&(L.left-K[0])/-Y,z[W+20]=X&&(L.top-K[1])/X,z[W+24]=Y&&(L.right-K[0])/-Y,z[W+28]=X&&(L.bottom-K[1])/X,z[W+32]=X&&(L.left-K[0])/-X,z[W+36]=Y&&(L.top-K[1])/-Y,z[W+40]=X&&(L.right-K[0])/-X,z[W+44]=Y&&(L.bottom-K[1])/-Y,z[W+48]=Y&&(L.left-K[0])/Y,z[W+52]=X&&(L.top-K[1])/-X,z[W+56]=Y&&(L.right-K[0])/Y,z[W+60]=X&&(L.bottom-K[1])/-X}const U=1+Math.min(Math.abs(X),Math.abs(Y));C.paddingLeft=T(z,32,16)/U,C.paddingTop=T(z,48,16)/U,C.paddingRight=T(z,0,16)/U,C.paddingBottom=T(z,16,16)/U,b._textDivProperties.set(h,C)}}function p(b,c,n){const s=n.map(function(h,C){return{x1:h.left,y1:h.top,x2:h.right,y2:h.bottom,index:C,x1New:void 0,x2New:void 0}});k(b,s);const f=new Array(n.length);for(const h of s){const C=h.index;f[C]={left:h.x1New,top:0,right:h.x2New,bottom:0}}n.map(function(h,C){const L=f[C],M=s[C];M.x1=h.top,M.y1=b-L.right,M.x2=h.bottom,M.y2=b-L.left,M.index=C,M.x1New=void 0,M.x2New=void 0}),k(c,s);for(const h of s){const C=h.index;f[C].top=h.x1New,f[C].bottom=h.x2New}return f}function k(b,c){c.sort(function(f,h){return f.x1-h.x1||f.index-h.index});const s=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const f of c){let h=0;for(;h<s.length&&s[h].end<=f.y1;)h++;let C=s.length-1;for(;C>=0&&s[C].start>=f.y2;)C--;let L,M,Q,X,Y=-1/0;for(Q=h;Q<=C;Q++){L=s[Q],M=L.boundary;let U;M.x2>f.x1?U=M.index>f.index?M.x1New:f.x1:M.x2New===void 0?U=(M.x2+f.x1)/2:U=M.x2New,U>Y&&(Y=U)}for(f.x1New=Y,Q=h;Q<=C;Q++)L=s[Q],M=L.boundary,M.x2New===void 0?M.x2>f.x1?M.index>f.index&&(M.x2New=M.x2):M.x2New=Y:M.x2New>Y&&(M.x2New=Math.max(Y,M.x2));const q=[];let z=null;for(Q=h;Q<=C;Q++){L=s[Q],M=L.boundary;const U=M.x2>f.x2?M:f;z===U?q.at(-1).end=L.end:(q.push({start:L.start,end:L.end,boundary:U}),z=U)}for(s[h].start<f.y1&&(q[0].start=f.y1,q.unshift({start:s[h].start,end:f.y1,boundary:s[h].boundary})),f.y2<s[C].end&&(q.at(-1).end=f.y2,q.push({start:f.y2,end:s[C].end,boundary:s[C].boundary})),Q=h;Q<=C;Q++){if(L=s[Q],M=L.boundary,M.x2New!==void 0)continue;let U=!1;for(X=h-1;!U&&X>=0&&s[X].start>=M.y1;X--)U=s[X].boundary===M;for(X=C+1;!U&&X<s.length&&s[X].end<=M.y2;X++)U=s[X].boundary===M;for(X=0;!U&&X<q.length;X++)U=q[X].boundary===M;U||(M.x2New=Y)}Array.prototype.splice.apply(s,[h,C-h+1,...q])}for(const f of s){const h=f.boundary;h.x2New===void 0&&(h.x2New=Math.max(b,h.x2))}}class N{constructor(c){var n;let{textContent:s,textContentStream:f,container:h,viewport:C,textDivs:L,textContentItemsStr:M,enhanceTextSelection:Q}=c;Q&&(0,o.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=s,this._textContentStream=f,this._container=h,this._document=h.ownerDocument,this._viewport=C,this._textDivs=L||[],this._textContentItemsStr=M||[],this._enhanceTextSelection=!!Q,this._fontInspectorEnabled=!!((n=globalThis.FontInspector)!==null&&n!==void 0&&n.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(c,n){for(let s=0,f=c.length;s<f;s++){if(c[s].str===void 0){if(c[s].type==="beginMarkedContentProps"||c[s].type==="beginMarkedContent"){const h=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),c[s].id!==null&&this._container.setAttribute("id",`${c[s].id}`),h.append(this._container)}else c[s].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(c[s].str),I(this,c[s],n,this._layoutTextCtx)}}_layoutText(c){const n=this._textDivProperties.get(c);let s="";if(n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=c.style,{fontSize:h}=n;(h!==this._layoutTextLastFontSize||f!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${h*this._devicePixelRatio}px ${f}`,this._layoutTextLastFontSize=h,this._layoutTextLastFontFamily=f);const{width:C}=this._layoutTextCtx.measureText(c.textContent);if(C>0){const L=this._devicePixelRatio*n.canvasWidth/C;this._enhanceTextSelection&&(n.scale=L),s=`scaleX(${L})`}}if(n.angle!==0&&(s=`rotate(${n.angle}deg) ${s}`),s.length>0&&(this._enhanceTextSelection&&(n.originalTransform=s),c.style.transform=s),n.hasText&&this._container.append(c),n.hasEOL){const f=document.createElement("br");f.setAttribute("role","presentation"),this._container.append(f)}}_render(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const n=(0,r.createPromiseCapability)();let s=Object.create(null);const f=this._document.createElement("canvas");if(f.height=f.width=S,this._layoutTextCtx=f.getContext("2d",{alpha:!1}),this._textContent){const h=this._textContent.items,C=this._textContent.styles;this._processItems(h,C),n.resolve()}else if(this._textContentStream){const h=()=>{this._reader.read().then(C=>{let{value:L,done:M}=C;if(M){n.resolve();return}Object.assign(s,L.styles),this._processItems(L.items,s),h()},n.reject)};this._reader=this._textContentStream.getReader(),h()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');n.promise.then(()=>{s=null,c?this._renderTimer=setTimeout(()=>{u(this),this._renderTimer=null},c):u(this)},this._capability.reject)}expandTextDivs(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(F(this),this._bounds=null);const n=[],s=[];for(let f=0,h=this._textDivs.length;f<h;f++){const C=this._textDivs[f],L=this._textDivProperties.get(C);L.hasText&&(c?(n.length=0,s.length=0,L.originalTransform&&n.push(L.originalTransform),L.paddingTop>0?(s.push(`${L.paddingTop}px`),n.push(`translateY(${-L.paddingTop}px)`)):s.push(0),L.paddingRight>0?s.push(`${L.paddingRight/L.scale}px`):s.push(0),L.paddingBottom>0?s.push(`${L.paddingBottom}px`):s.push(0),L.paddingLeft>0?(s.push(`${L.paddingLeft/L.scale}px`),n.push(`translateX(${-L.paddingLeft/L.scale}px)`)):s.push(0),C.style.padding=s.join(" "),n.length&&(C.style.transform=n.join(" "))):(C.style.padding=null,C.style.transform=L.originalTransform))}}}i.TextLayerRenderTask=N;function d(b){const c=new N({textContent:b.textContent,textContentStream:b.textContentStream,container:b.container,viewport:b.viewport,textDivs:b.textDivs,textContentItemsStr:b.textContentItemsStr,enhanceTextSelection:b.enhanceTextSelection});return c._render(b.timeout),c}},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var r=t(133),o=t(1),g=t(3);let S=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};i.SVGGraphics=S;{let p=function(n){let s=[];const f=[];for(const h of n){if(h.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),f.push(s),s=s.at(-1).items;continue}h.fn==="restore"?s=f.pop():s.push(h)}return s},k=function(n){if(Number.isInteger(n))return n.toString();const s=n.toFixed(10);let f=s.length-1;if(s[f]!=="0")return s;do f--;while(s[f]==="0");return s.substring(0,s[f]==="."?f:f+1)},N=function(n){if(n[4]===0&&n[5]===0){if(n[1]===0&&n[2]===0)return n[0]===1&&n[3]===1?"":`scale(${k(n[0])} ${k(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const s=Math.acos(n[0])*180/Math.PI;return`rotate(${k(s)})`}}else if(n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1)return`translate(${k(n[4])} ${k(n[5])})`;return`matrix(${k(n[0])} ${k(n[1])} ${k(n[2])} ${k(n[3])} ${k(n[4])} ${k(n[5])})`};const _={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},P="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",m=["butt","round","square"],I=["miter","round","bevel"],u=function(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob<"u"&&!f)return URL.createObjectURL(new Blob([n],{type:s}));const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C=`data:${s};base64,`;for(let L=0,M=n.length;L<M;L+=3){const Q=n[L]&255,X=n[L+1]&255,Y=n[L+2]&255,q=Q>>2,z=(Q&3)<<4|X>>4,U=L+1<M?(X&15)<<2|Y>>6:64,W=L+2<M?Y&63:64;C+=h[q]+h[z]+h[U]+h[W]}return C},T=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,f=new Int32Array(256);for(let Y=0;Y<256;Y++){let q=Y;for(let z=0;z<8;z++)q&1?q=3988292384^q>>1&2147483647:q=q>>1&2147483647;f[Y]=q}function h(Y,q,z){let U=-1;for(let W=q;W<z;W++){const D=(U^Y[W])&255,K=f[D];U=U>>>8^K}return U^-1}function C(Y,q,z,U){let W=U;const D=q.length;z[W]=D>>24&255,z[W+1]=D>>16&255,z[W+2]=D>>8&255,z[W+3]=D&255,W+=4,z[W]=Y.charCodeAt(0)&255,z[W+1]=Y.charCodeAt(1)&255,z[W+2]=Y.charCodeAt(2)&255,z[W+3]=Y.charCodeAt(3)&255,W+=4,z.set(q,W),W+=q.length;const K=h(z,U+4,W);z[W]=K>>24&255,z[W+1]=K>>16&255,z[W+2]=K>>8&255,z[W+3]=K&255}function L(Y,q,z){let U=1,W=0;for(let D=q;D<z;++D)U=(U+(Y[D]&255))%65521,W=(W+U)%65521;return W<<16|U}function M(Y){if(!g.isNodeJS)return Q(Y);try{let q;parseInt(process.versions.node)>=8?q=Y:q=Buffer.from(Y);const z=require$$7.deflateSync(q,{level:9});return z instanceof Uint8Array?z:new Uint8Array(z)}catch(q){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+q)}return Q(Y)}function Q(Y){let q=Y.length;const z=65535,U=Math.ceil(q/z),W=new Uint8Array(2+q+U*5+4);let D=0;W[D++]=120,W[D++]=156;let K=0;for(;q>z;)W[D++]=0,W[D++]=255,W[D++]=255,W[D++]=0,W[D++]=0,W.set(Y.subarray(K,K+z),D),D+=z,K+=z,q-=z;W[D++]=1,W[D++]=q&255,W[D++]=q>>8&255,W[D++]=~q&65535&255,W[D++]=(~q&65535)>>8&255,W.set(Y.subarray(K),D),D+=Y.length-K;const se=L(Y,0,Y.length);return W[D++]=se>>24&255,W[D++]=se>>16&255,W[D++]=se>>8&255,W[D++]=se&255,W}function X(Y,q,z,U){const W=Y.width,D=Y.height;let K,se,me;const Pe=Y.data;switch(q){case o.ImageKind.GRAYSCALE_1BPP:se=0,K=1,me=W+7>>3;break;case o.ImageKind.RGB_24BPP:se=2,K=8,me=W*3;break;case o.ImageKind.RGBA_32BPP:se=6,K=8,me=W*4;break;default:throw new Error("invalid format")}const H=new Uint8Array((1+me)*D);let A=0,E=0;for(let O=0;O<D;++O)H[A++]=0,H.set(Pe.subarray(E,E+me),A),E+=me,A+=me;if(q===o.ImageKind.GRAYSCALE_1BPP&&U){A=0;for(let O=0;O<D;O++){A++;for(let B=0;B<me;B++)H[A++]^=255}}const G=new Uint8Array([W>>24&255,W>>16&255,W>>8&255,W&255,D>>24&255,D>>16&255,D>>8&255,D&255,K,se,0,0,0]),j=M(H),l=n.length+s*3+G.length+j.length,v=new Uint8Array(l);let w=0;return v.set(n,w),w+=n.length,C("IHDR",G,v,w),w+=s+G.length,C("IDATA",j,v,w),w+=s+j.length,C("IEND",new Uint8Array(0),v,w),u(v,"image/png",z)}return function(q,z,U){const W=q.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:q.kind;return X(q,W,z,U)}}();class F{constructor(){this.fontSizeScale=1,this.fontWeight=_.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=_.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,f){this.x=s,this.y=f}}let d=0,b=0,c=0;i.SVGGraphics=S=class{constructor(n,s){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new F,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!f,this._operatorIdMapping=[];for(const h in o.OPS)this._operatorIdMapping[o.OPS[h]]=h}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const s=n.fnArray,f=n.argsArray;for(let h=0,C=s.length;h<C;h++)if(s[h]===o.OPS.dependency)for(const L of f[h]){const M=L.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(X=>{M.get(L,X)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(n,s,f,h,C,L){const M=[n,s,f,h,C,L];this.transformMatrix=o.Util.transform(this.transformMatrix,M),this.tgrp=null}getSVG(n,s){this.viewport=s;const f=this._initialize(s);return this.loadDependencies(n).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),f))}convertOpList(n){const s=this._operatorIdMapping,f=n.argsArray,h=n.fnArray,C=[];for(let L=0,M=h.length;L<M;L++){const Q=h[L];C.push({fnId:Q,fn:s[Q],args:f[L]})}return p(C)}executeOpTree(n){for(const s of n){const f=s.fn,h=s.fnId,C=s.args;switch(h|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(C);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(C[0],C[1]);break;case o.OPS.setFont:this.setFont(C);break;case o.OPS.showText:this.showText(C[0]);break;case o.OPS.showSpacedText:this.showText(C[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(C[0],C[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(C[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(C[0]);break;case o.OPS.setHScale:this.setHScale(C[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(C[0],C[1],C[2],C[3],C[4],C[5]);break;case o.OPS.setTextRise:this.setTextRise(C[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(C[0]);break;case o.OPS.setLineWidth:this.setLineWidth(C[0]);break;case o.OPS.setLineJoin:this.setLineJoin(C[0]);break;case o.OPS.setLineCap:this.setLineCap(C[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(C[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(C[0],C[1],C[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(C[0],C[1],C[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(C);break;case o.OPS.setFillColorN:this.setFillColorN(C);break;case o.OPS.shadingFill:this.shadingFill(C[0]);break;case o.OPS.setDash:this.setDash(C[0],C[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(C[0]);break;case o.OPS.setFlatness:this.setFlatness(C[0]);break;case o.OPS.setGState:this.setGState(C[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(C[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(C[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(C[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(C[0],C[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(C[0],C[1],C[2],C[3],C[4],C[5]);break;case o.OPS.constructPath:this.constructPath(C[0],C[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,o.warn)(`Unimplemented operator ${f}`);break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,s,f,h,C,L){const M=this.current;M.textMatrix=M.lineMatrix=[n,s,f,h,C,L],M.textMatrixScale=Math.hypot(n,s),M.x=M.lineX=0,M.y=M.lineY=0,M.xcoords=[],M.ycoords=[],M.tspan=this.svgFactory.createElement("svg:tspan"),M.tspan.setAttributeNS(null,"font-family",M.fontFamily),M.tspan.setAttributeNS(null,"font-size",`${k(M.fontSize)}px`),M.tspan.setAttributeNS(null,"y",k(-M.y)),M.txtElement=this.svgFactory.createElement("svg:text"),M.txtElement.append(M.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=o.IDENTITY_MATRIX,n.lineMatrix=o.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,s){const f=this.current;f.x=f.lineX+=n,f.y=f.lineY+=s,f.xcoords=[],f.ycoords=[],f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${k(f.fontSize)}px`),f.tspan.setAttributeNS(null,"y",k(-f.y))}showText(n){const s=this.current,f=s.font,h=s.fontSize;if(h===0)return;const C=s.fontSizeScale,L=s.charSpacing,M=s.wordSpacing,Q=s.fontDirection,X=s.textHScale*Q,Y=f.vertical,q=Y?1:-1,z=f.defaultVMetrics,U=h*s.fontMatrix[0];let W=0;for(const se of n){if(se===null){W+=Q*M;continue}else if(typeof se=="number"){W+=q*se*h/1e3;continue}const me=(se.isSpace?M:0)+L,Pe=se.fontChar;let H,A,E=se.width;if(Y){let j;const l=se.vmetric||z;j=se.vmetric?l[1]:E*.5,j=-j*U;const v=l[2]*U;E=l?-l[0]:E,H=j/C,A=(W+v)/C}else H=W/C,A=0;(se.isInFont||f.missingFile)&&(s.xcoords.push(s.x+H),Y&&s.ycoords.push(-s.y+A),s.tspan.textContent+=Pe);let G;Y?G=E*U-me*Q:G=E*U+me*Q,W+=G}s.tspan.setAttributeNS(null,"x",s.xcoords.map(k).join(" ")),Y?s.tspan.setAttributeNS(null,"y",s.ycoords.map(k).join(" ")):s.tspan.setAttributeNS(null,"y",k(-s.y)),Y?s.y-=W:s.x+=W*X,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${k(s.fontSize)}px`),s.fontStyle!==_.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==_.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const D=s.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(D===o.TextRenderingMode.FILL||D===o.TextRenderingMode.FILL_STROKE?(s.fillColor!==_.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),D===o.TextRenderingMode.STROKE||D===o.TextRenderingMode.FILL_STROKE){const se=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,se)}let K=s.textMatrix;s.textRise!==0&&(K=K.slice(),K[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${N(K)} scale(${k(X)}, -1)`),s.txtElement.setAttributeNS(P,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(n,s){this.setLeading(-s),this.moveText(n,s)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=u(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${s}); }
`}setFont(n){const s=this.current,f=this.commonObjs.get(n[0]);let h=n[1];s.font=f,this.embedFonts&&!f.missingFile&&!this.embeddedFonts[f.loadedName]&&(this.addFontStyle(f),this.embeddedFonts[f.loadedName]=f),s.fontMatrix=f.fontMatrix||o.FONT_IDENTITY_MATRIX;let C="normal";f.black?C="900":f.bold&&(C="bold");const L=f.italic?"italic":"normal";h<0?(h=-h,s.fontDirection=-1):s.fontDirection=1,s.fontSize=h,s.fontFamily=f.loadedName,s.fontWeight=C,s.fontStyle=L,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",k(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var n;const s=this.current;s.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&(n=s.txtElement)!==null&&n!==void 0&&n.hasChildNodes()&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=m[n]}setLineJoin(n){this.current.lineJoin=I[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,s,f){this.current.strokeColor=o.Util.makeHexColor(n,s,f)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,s,f){this.current.fillColor=o.Util.makeHexColor(n,s,f),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const s=this.viewport.width,f=this.viewport.height,h=o.Util.inverseTransform(this.transformMatrix),C=o.Util.applyTransform([0,0],h),L=o.Util.applyTransform([0,f],h),M=o.Util.applyTransform([s,0],h),Q=o.Util.applyTransform([s,f],h),X=Math.min(C[0],L[0],M[0],Q[0]),Y=Math.min(C[1],L[1],M[1],Q[1]),q=Math.max(C[0],L[0],M[0],Q[0]),z=Math.max(C[1],L[1],M[1],Q[1]),U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x",X),U.setAttributeNS(null,"y",Y),U.setAttributeNS(null,"width",q-X),U.setAttributeNS(null,"height",z-Y),U.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&U.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(U)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const s=n[1],f=n[2],h=n[3]||o.IDENTITY_MATRIX,[C,L,M,Q]=n[4],X=n[5],Y=n[6],q=n[7],z=`shading${c++}`,[U,W,D,K]=o.Util.normalizeRect([...o.Util.applyTransform([C,L],h),...o.Util.applyTransform([M,Q],h)]),[se,me]=o.Util.singularValueDecompose2dScale(h),Pe=X*se,H=Y*me,A=this.svgFactory.createElement("svg:pattern");A.setAttributeNS(null,"id",z),A.setAttributeNS(null,"patternUnits","userSpaceOnUse"),A.setAttributeNS(null,"width",Pe),A.setAttributeNS(null,"height",H),A.setAttributeNS(null,"x",`${U}`),A.setAttributeNS(null,"y",`${W}`);const E=this.svg,G=this.transformMatrix,j=this.current.fillColor,l=this.current.strokeColor,v=this.svgFactory.create(D-U,K-W);if(this.svg=v,this.transformMatrix=h,q===2){const w=o.Util.makeHexColor(...s);this.current.fillColor=w,this.current.strokeColor=w}return this.executeOpTree(this.convertOpList(f)),this.svg=E,this.transformMatrix=G,this.current.fillColor=j,this.current.strokeColor=l,A.append(v.childNodes[0]),this.defs.append(A),`url(#${z})`}_makeShadingPattern(n){switch(typeof n=="string"&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const s=`shading${c++}`,f=n[3];let h;switch(n[1]){case"axial":const C=n[4],L=n[5];h=this.svgFactory.createElement("svg:linearGradient"),h.setAttributeNS(null,"id",s),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"x1",C[0]),h.setAttributeNS(null,"y1",C[1]),h.setAttributeNS(null,"x2",L[0]),h.setAttributeNS(null,"y2",L[1]);break;case"radial":const M=n[4],Q=n[5],X=n[6],Y=n[7];h=this.svgFactory.createElement("svg:radialGradient"),h.setAttributeNS(null,"id",s),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"cx",Q[0]),h.setAttributeNS(null,"cy",Q[1]),h.setAttributeNS(null,"r",Y),h.setAttributeNS(null,"fx",M[0]),h.setAttributeNS(null,"fy",M[1]),h.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const C of f){const L=this.svgFactory.createElement("svg:stop");L.setAttributeNS(null,"offset",C[0]),L.setAttributeNS(null,"stop-color",C[1]),h.append(L)}return this.defs.append(h),`url(#${s})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,s){this.current.dashArray=n,this.current.dashPhase=s}constructPath(n,s){const f=this.current;let h=f.x,C=f.y,L=[],M=0;for(const Q of n)switch(Q|0){case o.OPS.rectangle:h=s[M++],C=s[M++];const X=s[M++],Y=s[M++],q=h+X,z=C+Y;L.push("M",k(h),k(C),"L",k(q),k(C),"L",k(q),k(z),"L",k(h),k(z),"Z");break;case o.OPS.moveTo:h=s[M++],C=s[M++],L.push("M",k(h),k(C));break;case o.OPS.lineTo:h=s[M++],C=s[M++],L.push("L",k(h),k(C));break;case o.OPS.curveTo:h=s[M+4],C=s[M+5],L.push("C",k(s[M]),k(s[M+1]),k(s[M+2]),k(s[M+3]),k(h),k(C)),M+=6;break;case o.OPS.curveTo2:L.push("C",k(h),k(C),k(s[M]),k(s[M+1]),k(s[M+2]),k(s[M+3])),h=s[M+2],C=s[M+3],M+=4;break;case o.OPS.curveTo3:h=s[M+2],C=s[M+3],L.push("C",k(s[M]),k(s[M+1]),k(h),k(C),k(h),k(C)),M+=4;break;case o.OPS.closePath:L.push("Z");break}L=L.join(" "),f.path&&n.length>0&&n[0]!==o.OPS.rectangle&&n[0]!==o.OPS.moveTo?L=f.path.getAttributeNS(null,"d")+L:(f.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(f.path)),f.path.setAttributeNS(null,"d",L),f.path.setAttributeNS(null,"fill","none"),f.element=f.path,f.setCurrentPoint(h,C)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const s=`clippath${d++}`,f=this.svgFactory.createElement("svg:clipPath");f.setAttributeNS(null,"id",s),f.setAttributeNS(null,"transform",N(this.transformMatrix));const h=n.element.cloneNode(!0);if(this.pendingClip==="evenodd"?h.setAttributeNS(null,"clip-rule","evenodd"):h.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,f.append(h),this.defs.append(f),n.activeClipUrl){n.clipGroup=null;for(const C of this.extraStack)C.clipGroup=null;f.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const s=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",s)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[s,f]of n)switch(s){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f);break;case"CA":this.setStrokeAlpha(f);break;case"ca":this.setFillAlpha(f);break;default:(0,o.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const f=this.current;let h=f.dashArray;s!==1&&h.length>0&&(h=h.map(function(C){return s*C})),n.setAttributeNS(null,"stroke",f.strokeColor),n.setAttributeNS(null,"stroke-opacity",f.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",k(f.miterLimit)),n.setAttributeNS(null,"stroke-linecap",f.lineCap),n.setAttributeNS(null,"stroke-linejoin",f.lineJoin),n.setAttributeNS(null,"stroke-width",k(s*f.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",h.map(k).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",k(s*f.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(n)}paintImageXObject(n){const s=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);if(!s){(0,o.warn)(`Dependent image with object ID ${n} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(n,s){const f=n.width,h=n.height,C=T(n,this.forceDataSchema,!!s),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y","0"),L.setAttributeNS(null,"width",k(f)),L.setAttributeNS(null,"height",k(h)),this.current.element=L,this.clip("nonzero");const M=this.svgFactory.createElement("svg:image");M.setAttributeNS(y,"xlink:href",C),M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y",k(-h)),M.setAttributeNS(null,"width",k(f)+"px"),M.setAttributeNS(null,"height",k(h)+"px"),M.setAttributeNS(null,"transform",`scale(${k(1/f)} ${k(-1/h)})`),s?s.append(M):this._ensureTransformGroup().append(M)}paintImageMaskXObject(n){const s=this.current,f=n.width,h=n.height,C=s.fillColor;s.maskId=`mask${b++}`;const L=this.svgFactory.createElement("svg:mask");L.setAttributeNS(null,"id",s.maskId);const M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width",k(f)),M.setAttributeNS(null,"height",k(h)),M.setAttributeNS(null,"fill",C),M.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.append(L),this._ensureTransformGroup().append(M),this.paintInlineImageXObject(n,L)}paintFormXObjectBegin(n,s){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),s){const f=s[2]-s[0],h=s[3]-s[1],C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",s[0]),C.setAttributeNS(null,"y",s[1]),C.setAttributeNS(null,"width",k(f)),C.setAttributeNS(null,"height",k(h)),this.current.element=C,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const s=this.svgFactory.create(n.width,n.height),f=this.svgFactory.createElement("svg:defs");s.append(f),this.defs=f;const h=this.svgFactory.createElement("svg:g");return h.setAttributeNS(null,"transform",N(n.transform)),s.append(h),this.svg=h,s}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",N(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var r=t(1),o=t(158);const g=require$$7,S=require$$7,_=require$$7,P=require$$7,y=/^file:\/\/\/[a-zA-Z]:\//;function m(b){const c=P.parse(b);return c.protocol==="file:"||c.host?c:/^[a-z]:[/\\]/i.test(b)?P.parse(`file:///${b}`):(c.host||(c.protocol="file:"),c)}class I{constructor(c){this.source=c,this.url=m(c.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&c.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var c,n;return(c=(n=this._fullRequestReader)===null||n===void 0?void 0:n._loaded)!==null&&c!==void 0?c:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new N(this):new p(this),this._fullRequestReader}getRangeReader(c,n){if(n<=this._progressiveDataLength)return null;const s=this.isFsUrl?new d(this,c,n):new k(this,c,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(c){this._fullRequestReader&&this._fullRequestReader.cancel(c);for(const n of this._rangeRequestReaders.slice(0))n.cancel(c)}}i.PDFNodeStream=I;class u{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=c.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=c.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class T{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)();const n=c.source;this._isStreamingSupported=!n.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=c.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function F(b,c){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:c}}class p extends u{constructor(c){super(c);const n=s=>{if(s.statusCode===404){const L=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=L,this._headersCapability.reject(L);return}this._headersCapability.resolve(),this._setReadableStream(s);const f=L=>this._readableStream.headers[L.toLowerCase()],{allowRangeRequests:h,suggestedLength:C}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:c.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=C||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(f)};this._request=null,this._url.protocol==="http:"?this._request=S.request(F(this._url,c.httpHeaders),n):this._request=_.request(F(this._url,c.httpHeaders),n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class k extends T{constructor(c,n,s){super(c),this._httpHeaders={};for(const h in c.httpHeaders){const C=c.httpHeaders[h];typeof C>"u"||(this._httpHeaders[h]=C)}this._httpHeaders.Range=`bytes=${n}-${s-1}`;const f=h=>{if(h.statusCode===404){const C=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C;return}this._setReadableStream(h)};this._request=null,this._url.protocol==="http:"?this._request=S.request(F(this._url,this._httpHeaders),f):this._request=_.request(F(this._url,this._httpHeaders),f),this._request.on("error",h=>{this._storedError=h}),this._request.end()}}class N extends u{constructor(c){super(c);let n=decodeURIComponent(this._url.path);y.test(this._url.href)&&(n=n.replace(/^\//,"")),g.lstat(n,(s,f)=>{if(s){s.code==="ENOENT"&&(s=new r.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=f.size,this._setReadableStream(g.createReadStream(n)),this._headersCapability.resolve()})}}class d extends T{constructor(c,n,s){super(c);let f=decodeURIComponent(this._url.path);y.test(this._url.href)&&(f=f.replace(/^\//,"")),this._setReadableStream(g.createReadStream(f,{start:n,end:s-1}))}}},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=P,i.extractFilenameFromHeader=_,i.validateRangeRequestCapabilities=S,i.validateResponseStatus=y;var r=t(1),o=t(159),g=t(133);function S(m){let{getResponseHeader:I,isHttp:u,rangeChunkSize:T,disableRange:F}=m;const p={allowRangeRequests:!1,suggestedLength:void 0},k=parseInt(I("Content-Length"),10);return!Number.isInteger(k)||(p.suggestedLength=k,k<=2*T)||F||!u||I("Accept-Ranges")!=="bytes"||(I("Content-Encoding")||"identity")!=="identity"||(p.allowRangeRequests=!0),p}function _(m){const I=m("Content-Disposition");if(I){let u=(0,o.getFilenameFromContentDispositionHeader)(I);if(u.includes("%"))try{u=decodeURIComponent(u)}catch{}if((0,g.isPdfFile)(u))return u}return null}function P(m,I){return m===404||m===0&&I.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+I+'".'):new r.UnexpectedResponseException(`Unexpected server response (${m}) while retrieving PDF "${I}".`,m)}function y(m){return m===200||m===206}},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=o;var r=t(1);function o(g){let S=!0,_=P("filename\\*","i").exec(g);if(_){_=_[1];let p=u(_);return p=unescape(p),p=T(p),p=F(p),m(p)}if(_=I(g),_){const p=F(_);return m(p)}if(_=P("filename","i").exec(g),_){_=_[1];let p=u(_);return p=F(p),m(p)}function P(p,k){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',k)}function y(p,k){if(p){if(!/^[\x00-\xFF]+$/.test(k))return k;try{const N=new TextDecoder(p,{fatal:!0}),d=(0,r.stringToBytes)(k);k=N.decode(d),S=!1}catch{}}return k}function m(p){return S&&/[\x80-\xff]/.test(p)&&(p=y("utf-8",p),S&&(p=y("iso-8859-1",p))),p}function I(p){const k=[];let N;const d=P("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(N=d.exec(p))!==null;){let[,c,n,s]=N;if(c=parseInt(c,10),c in k){if(c===0)break;continue}k[c]=[n,s]}const b=[];for(let c=0;c<k.length&&c in k;++c){let[n,s]=k[c];s=u(s),n&&(s=unescape(s),c===0&&(s=T(s))),b.push(s)}return b.join("")}function u(p){if(p.startsWith('"')){const k=p.slice(1).split('\\"');for(let N=0;N<k.length;++N){const d=k[N].indexOf('"');d!==-1&&(k[N]=k[N].slice(0,d),k.length=N+1),k[N]=k[N].replace(/\\(.)/g,"$1")}p=k.join('"')}return p}function T(p){const k=p.indexOf("'");if(k===-1)return p;const N=p.slice(0,k),b=p.slice(k+1).replace(/^[^']*'/,"");return y(N,b)}function F(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(k,N,d,b){if(d==="q"||d==="Q")return b=b.replace(/_/g," "),b=b.replace(/=([0-9a-fA-F]{2})/g,function(c,n){return String.fromCharCode(parseInt(n,16))}),y(N,b);try{b=atob(b)}catch{}return y(N,b)})}return""}},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var r=t(1),o=t(158);const g=200,S=206;function _(u){const T=u.response;return typeof T!="string"?T:(0,r.stringToBytes)(T).buffer}class P{constructor(T){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=T,this.isHttp=/^https?:/i.test(T),this.httpHeaders=this.isHttp&&F.httpHeaders||Object.create(null),this.withCredentials=F.withCredentials||!1,this.getXhr=F.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(T,F,p){const k={begin:T,end:F};for(const N in p)k[N]=p[N];return this.request(k)}requestFull(T){return this.request(T)}request(T){const F=this.getXhr(),p=this.currXhrId++,k=this.pendingRequests[p]={xhr:F};F.open("GET",this.url),F.withCredentials=this.withCredentials;for(const N in this.httpHeaders){const d=this.httpHeaders[N];typeof d>"u"||F.setRequestHeader(N,d)}return this.isHttp&&"begin"in T&&"end"in T?(F.setRequestHeader("Range",`bytes=${T.begin}-${T.end-1}`),k.expectedStatus=S):k.expectedStatus=g,F.responseType="arraybuffer",T.onError&&(F.onerror=function(N){T.onError(F.status)}),F.onreadystatechange=this.onStateChange.bind(this,p),F.onprogress=this.onProgress.bind(this,p),k.onHeadersReceived=T.onHeadersReceived,k.onDone=T.onDone,k.onError=T.onError,k.onProgress=T.onProgress,F.send(null),p}onProgress(T,F){var p;const k=this.pendingRequests[T];k&&((p=k.onProgress)===null||p===void 0||p.call(k,F))}onStateChange(T,F){const p=this.pendingRequests[T];if(!p)return;const k=p.xhr;if(k.readyState>=2&&p.onHeadersReceived&&(p.onHeadersReceived(),delete p.onHeadersReceived),k.readyState!==4||!(T in this.pendingRequests))return;if(delete this.pendingRequests[T],k.status===0&&this.isHttp){var N;(N=p.onError)===null||N===void 0||N.call(p,k.status);return}const d=k.status||g;if(!(d===g&&p.expectedStatus===S)&&d!==p.expectedStatus){var c;(c=p.onError)===null||c===void 0||c.call(p,k.status);return}const n=_(k);if(d===S){const f=k.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p.onDone({begin:parseInt(h[1],10),chunk:n})}else if(n)p.onDone({begin:0,chunk:n});else{var s;(s=p.onError)===null||s===void 0||s.call(p,k.status)}}getRequestXhr(T){return this.pendingRequests[T].xhr}isPendingRequest(T){return T in this.pendingRequests}abortRequest(T){const F=this.pendingRequests[T].xhr;delete this.pendingRequests[T],F.abort()}}class y{constructor(T){this._source=T,this._manager=new P(T.url,{httpHeaders:T.httpHeaders,withCredentials:T.withCredentials}),this._rangeChunkSize=T.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(T){const F=this._rangeRequestReaders.indexOf(T);F>=0&&this._rangeRequestReaders.splice(F,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(T,F){const p=new I(this._manager,T,F);return p.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(p),p}cancelAllRequests(T){var F;(F=this._fullRequestReader)===null||F===void 0||F.cancel(T);for(const p of this._rangeRequestReaders.slice(0))p.cancel(T)}}i.PDFNetworkStream=y;class m{constructor(T,F){this._manager=T;const p={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=F.url,this._fullRequestId=T.requestFull(p),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=F.disableRange||!1,this._contentLength=F.length,this._rangeChunkSize=F.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const T=this._fullRequestId,F=this._manager.getRequestXhr(T),p=d=>F.getResponseHeader(d),{allowRangeRequests:k,suggestedLength:N}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});k&&(this._isRangeSupported=!0),this._contentLength=N||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(p),this._isRangeSupported&&this._manager.abortRequest(T),this._headersReceivedCapability.resolve()}_onDone(T){if(T&&(this._requests.length>0?this._requests.shift().resolve({value:T.chunk,done:!1}):this._cachedChunks.push(T.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(T){this._storedError=(0,o.createResponseStatusError)(T,this._url),this._headersReceivedCapability.reject(this._storedError);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(T){var F;(F=this.onProgress)===null||F===void 0||F.call(this,{loaded:T.loaded,total:T.lengthComputable?T.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=(0,r.createPromiseCapability)();return this._requests.push(T),T.promise}cancel(T){this._done=!0,this._headersReceivedCapability.reject(T);for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(T,F,p){this._manager=T;const k={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=T.url,this._requestId=T.requestRange(F,p,k),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var T;(T=this.onClosed)===null||T===void 0||T.call(this,this)}_onDone(T){const F=T.chunk;this._requests.length>0?this._requests.shift().resolve({value:F,done:!1}):this._queuedChunk=F,this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(T){this._storedError=(0,o.createResponseStatusError)(T,this._url);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(T){if(!this.isStreamingSupported){var F;(F=this.onProgress)===null||F===void 0||F.call(this,{loaded:T.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const F=this._queuedChunk;return this._queuedChunk=null,{value:F,done:!1}}if(this._done)return{value:void 0,done:!0};const T=(0,r.createPromiseCapability)();return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(R,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var r=t(1),o=t(158);function g(m,I,u){return{method:"GET",headers:m,signal:u.signal,mode:"cors",credentials:I?"include":"same-origin",redirect:"follow"}}function S(m){const I=new Headers;for(const u in m){const T=m[u];typeof T>"u"||I.append(u,T)}return I}class _{constructor(I){this.source=I,this.isHttp=/^https?:/i.test(I.url),this.httpHeaders=this.isHttp&&I.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var I,u;return(I=(u=this._fullRequestReader)===null||u===void 0?void 0:u._loaded)!==null&&I!==void 0?I:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P(this),this._fullRequestReader}getRangeReader(I,u){if(u<=this._progressiveDataLength)return null;const T=new y(this,I,u);return this._rangeRequestReaders.push(T),T}cancelAllRequests(I){this._fullRequestReader&&this._fullRequestReader.cancel(I);for(const u of this._rangeRequestReaders.slice(0))u.cancel(I)}}i.PDFFetchStream=_;class P{constructor(I){this._stream=I,this._reader=null,this._loaded=0,this._filename=null;const u=I.source;this._withCredentials=u.withCredentials||!1,this._contentLength=u.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._headers=S(this._stream.httpHeaders);const T=u.url;fetch(T,g(this._headers,this._withCredentials,this._abortController)).then(F=>{if(!(0,o.validateResponseStatus)(F.status))throw(0,o.createResponseStatusError)(F.status,T);this._reader=F.body.getReader(),this._headersCapability.resolve();const p=d=>F.headers.get(d),{allowRangeRequests:k,suggestedLength:N}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=N||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:I,done:u}=await this._reader.read();return u?{value:I,done:u}:(this._loaded+=I.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(I).buffer,done:!1})}cancel(I){this._reader&&this._reader.cancel(I),this._abortController.abort()}}class y{constructor(I,u,T){this._stream=I,this._reader=null,this._loaded=0;const F=I.source;this._withCredentials=F.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!F.disableStream,this._abortController=new AbortController,this._headers=S(this._stream.httpHeaders),this._headers.append("Range",`bytes=${u}-${T-1}`);const p=F.url;fetch(p,g(this._headers,this._withCredentials,this._abortController)).then(k=>{if(!(0,o.validateResponseStatus)(k.status))throw(0,o.createResponseStatusError)(k.status,p);this._readCapability.resolve(),this._reader=k.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:I,done:u}=await this._reader.read();return u?{value:I,done:u}:(this._loaded+=I.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(I).buffer,done:!1})}cancel(I){this._reader&&this._reader.cancel(I),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(R){var i=__webpack_module_cache__[R];if(i!==void 0)return i.exports;var t=__webpack_module_cache__[R]={exports:{}};return __webpack_modules__[R](t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=>{var R=__webpack_exports__;Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(R,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(R,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(R,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return g.AnnotationEditorUIManager}}),Object.defineProperty(R,"AnnotationLayer",{enumerable:!0,get:function(){return S.AnnotationLayer}}),Object.defineProperty(R,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(R,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(R,"GlobalWorkerOptions",{enumerable:!0,get:function(){return _.GlobalWorkerOptions}}),Object.defineProperty(R,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(R,"LoopbackPort",{enumerable:!0,get:function(){return t.LoopbackPort}}),Object.defineProperty(R,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(R,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(R,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(R,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(R,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(R,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(R,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(R,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(R,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(R,"SVGGraphics",{enumerable:!0,get:function(){return m.SVGGraphics}}),Object.defineProperty(R,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return i.UNSUPPORTED_FEATURES}}),Object.defineProperty(R,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(R,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(R,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(R,"XfaLayer",{enumerable:!0,get:function(){return I.XfaLayer}}),Object.defineProperty(R,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(R,"createPromiseCapability",{enumerable:!0,get:function(){return i.createPromiseCapability}}),Object.defineProperty(R,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(R,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(R,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(R,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(R,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(R,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(R,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(R,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(R,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(R,"version",{enumerable:!0,get:function(){return t.version}});var i=__w_pdfjs_require__(1),t=__w_pdfjs_require__(129),r=__w_pdfjs_require__(133),o=__w_pdfjs_require__(147),g=__w_pdfjs_require__(132),S=__w_pdfjs_require__(152),_=__w_pdfjs_require__(140),P=__w_pdfjs_require__(3),y=__w_pdfjs_require__(155),m=__w_pdfjs_require__(156),I=__w_pdfjs_require__(154);if(P.isNodeJS){const{PDFNodeStream:u}=__w_pdfjs_require__(157);(0,t.setPDFNetworkStreamFactory)(T=>new u(T))}else{const{PDFNetworkStream:u}=__w_pdfjs_require__(160),{PDFFetchStream:T}=__w_pdfjs_require__(161);(0,t.setPDFNetworkStreamFactory)(F=>(0,r.isValidFetchUrl)(F.url)?new T(F):new u(F))}})(),__webpack_exports__})())})(pdf);pdfExports.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js";showPdf();async function showPdf(){const R=document.querySelector("[data-resume-container]"),i=R?.dataset.resumeUrl;if(!i)return;if(pdfobjectExports.supportsPDFs){pdfobjectExports.embed(i,R);return}t();try{(await pdfExports.getDocument(i).promise).getPage(1).then(function(P){const y=R.clientWidth/P.getViewport({scale:1}).width,m=P.getViewport({scale:y}),I=window.devicePixelRatio||1,u=g();if(!u)return;const T=u.getContext("2d");if(!T)return;u.width=Math.floor(m.width*I),u.height=Math.floor(m.height*I),u.style.width=Math.floor(m.width)+"px",u.style.height=Math.floor(m.height)+"px";const F=[I,0,0,I,0,0];return P.render({canvasContext:T,transform:F,viewport:m}).promise}),r(),o()}catch(_){throw r(),_}function t(){const _=S();_?.classList.remove("hidden"),_?.classList.add("flex")}function r(){S()?.remove(),document.querySelector("main")?.classList.remove("flex-1")}function o(){g()?.classList.remove("hidden")}function g(){return document.querySelector("[data-resume-canvas]")}function S(){return document.querySelector("[data-resume-loading]")}}
