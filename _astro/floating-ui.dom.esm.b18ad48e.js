function H(t){return t.split("-")[0]}function z(t){return t.split("-")[1]}function $(t){return["top","bottom"].includes(H(t))?"x":"y"}function J(t){return t==="y"?"height":"width"}function tt(t,e,n){let{reference:i,floating:o}=t;const s=i.x+i.width/2-o.width/2,c=i.y+i.height/2-o.height/2,r=$(e),l=J(r),a=i[l]/2-o[l]/2,g=H(e),f=r==="x";let u;switch(g){case"top":u={x:s,y:i.y-o.height};break;case"bottom":u={x:s,y:i.y+i.height};break;case"right":u={x:i.x+i.width,y:c};break;case"left":u={x:i.x-o.width,y:c};break;default:u={x:i.x,y:i.y}}switch(z(e)){case"start":u[r]-=a*(n&&f?-1:1);break;case"end":u[r]+=a*(n&&f?-1:1);break}return u}const xt=async(t,e,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:c}=n,r=s.filter(Boolean),l=await(c.isRTL==null?void 0:c.isRTL(e));let a=await c.getElementRects({reference:t,floating:e,strategy:o}),{x:g,y:f}=tt(a,i,l),u=i,d={},m=0;for(let p=0;p<r.length;p++){const{name:w,fn:y}=r[p],{x:v,y:x,data:b,reset:h}=await y({x:g,y:f,initialPlacement:i,placement:u,strategy:o,middlewareData:d,rects:a,platform:c,elements:{reference:t,floating:e}});if(g=v??g,f=x??f,d={...d,[w]:{...d[w],...b}},h&&m<=50){m++,typeof h=="object"&&(h.placement&&(u=h.placement),h.rects&&(a=h.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:o}):h.rects),{x:g,y:f}=tt(a,u,l)),p=-1;continue}}return{x:g,y:f,placement:u,strategy:o,middlewareData:d}};function wt(t){return{top:0,right:0,bottom:0,left:0,...t}}function lt(t){return typeof t!="number"?wt(t):{top:t,right:t,bottom:t,left:t}}function Y(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function at(t,e){var n;e===void 0&&(e={});const{x:i,y:o,platform:s,rects:c,elements:r,strategy:l}=t,{boundary:a="clippingAncestors",rootBoundary:g="viewport",elementContext:f="floating",altBoundary:u=!1,padding:d=0}=e,m=lt(d),w=r[u?f==="floating"?"reference":"floating":f],y=Y(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(r.floating)),boundary:a,rootBoundary:g,strategy:l})),v=f==="floating"?{...c.floating,x:i,y:o}:c.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(r.floating)),b=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},h=Y(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:x,strategy:l}):v);return{top:(y.top-h.top+m.top)/b.y,bottom:(h.bottom-y.bottom+m.bottom)/b.y,left:(y.left-h.left+m.left)/b.x,right:(h.right-y.right+m.right)/b.x}}const yt=Math.min,bt=Math.max;function q(t,e,n){return bt(t,yt(e,n))}const Mt=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:i=0}=t??{},{x:o,y:s,placement:c,rects:r,platform:l}=e;if(n==null)return{};const a=lt(i),g={x:o,y:s},f=$(c),u=z(c),d=J(f),m=await l.getDimensions(n),p=f==="y"?"top":"left",w=f==="y"?"bottom":"right",y=r.reference[d]+r.reference[f]-g[f]-r.floating[d],v=g[f]-r.reference[f],x=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let b=x?f==="y"?x.clientHeight||0:x.clientWidth||0:0;b===0&&(b=r.floating[d]);const h=y/2-v/2,S=a[p],D=b-m[d]-a[w],O=b/2-m[d]/2+h,A=q(S,O,D),_=(u==="start"?a[p]:a[w])>0&&O!==A&&r.reference[d]<=r.floating[d]?O<S?S-O:D-O:0;return{[f]:g[f]-_,data:{[f]:A,centerOffset:O-A}}}}),vt={left:"right",right:"left",bottom:"top",top:"bottom"};function I(t){return t.replace(/left|right|bottom|top/g,e=>vt[e])}function At(t,e,n){n===void 0&&(n=!1);const i=z(t),o=$(t),s=J(o);let c=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(c=I(c)),{main:c,cross:I(c)}}const Ct={start:"end",end:"start"};function et(t){return t.replace(/start|end/g,e=>Ct[e])}function Rt(t){const e=I(t);return[et(t),e,et(e)]}const Ht=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:o,rects:s,initialPlacement:c,platform:r,elements:l}=e,{mainAxis:a=!0,crossAxis:g=!0,fallbackPlacements:f,fallbackStrategy:u="bestFit",flipAlignment:d=!0,...m}=t,p=H(i),y=f||(p===c||!d?[I(c)]:Rt(c)),v=[c,...y],x=await at(e,m),b=[];let h=((n=o.flip)==null?void 0:n.overflows)||[];if(a&&b.push(x[p]),g){const{main:A,cross:V}=At(i,s,await(r.isRTL==null?void 0:r.isRTL(l.floating)));b.push(x[A],x[V])}if(h=[...h,{placement:i,overflows:b}],!b.every(A=>A<=0)){var S,D;const A=((S=(D=o.flip)==null?void 0:D.index)!=null?S:0)+1,V=v[A];if(V)return{data:{index:A,overflows:h},reset:{placement:V}};let B="bottom";switch(u){case"bestFit":{var O;const _=(O=h.map(j=>[j,j.overflows.filter(F=>F>0).reduce((F,pt)=>F+pt,0)]).sort((j,F)=>j[1]-F[1])[0])==null?void 0:O[0].placement;_&&(B=_);break}case"initialPlacement":B=c;break}if(i!==B)return{reset:{placement:B}}}return{}}}};async function Ot(t,e){const{placement:n,platform:i,elements:o}=t,s=await(i.isRTL==null?void 0:i.isRTL(o.floating)),c=H(n),r=z(n),l=$(n)==="x",a=["left","top"].includes(c)?-1:1,g=s&&l?-1:1,f=typeof e=="function"?e(t):e;let{mainAxis:u,crossAxis:d,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return r&&typeof m=="number"&&(d=r==="end"?m*-1:m),l?{x:d*g,y:u*a}:{x:u*a,y:d*g}}const $t=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,o=await Ot(e,t);return{x:n+o.x,y:i+o.y,data:o}}}};function Pt(t){return t==="x"?"y":"x"}const _t=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:o}=e,{mainAxis:s=!0,crossAxis:c=!1,limiter:r={fn:w=>{let{x:y,y:v}=w;return{x:y,y:v}}},...l}=t,a={x:n,y:i},g=await at(e,l),f=$(H(o)),u=Pt(f);let d=a[f],m=a[u];if(s){const w=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=d+g[w],x=d-g[y];d=q(v,d,x)}if(c){const w=u==="y"?"top":"left",y=u==="y"?"bottom":"right",v=m+g[w],x=m-g[y];m=q(v,m,x)}const p=r.fn({...e,[f]:d,[u]:m});return{...p,data:{x:p.x-n,y:p.y-i}}}}};function T(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function C(t){return T(t).getComputedStyle(t)}function E(t){return ut(t)?(t.nodeName||"").toLowerCase():""}let X;function ft(){if(X)return X;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(X=t.brands.map(e=>e.brand+"/"+e.version).join(" "),X):navigator.userAgent}function R(t){return t instanceof T(t).HTMLElement}function P(t){return t instanceof T(t).Element}function ut(t){return t instanceof T(t).Node}function nt(t){if(typeof ShadowRoot>"u")return!1;const e=T(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function K(t){const{overflow:e,overflowX:n,overflowY:i,display:o}=C(t);return/auto|scroll|overlay|hidden/.test(e+i+n)&&!["inline","contents"].includes(o)}function Tt(t){return["table","td","th"].includes(E(t))}function Q(t){const e=/firefox/i.test(ft()),n=C(t),i=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||(i?i!=="none":!1)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)||["transform","perspective"].some(o=>n.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const s=n.contain;return s!=null?s.includes(o):!1})}function dt(){return!/^((?!chrome|android).)*safari/i.test(ft())}function Z(t){return["html","body","#document"].includes(E(t))}const ot=Math.min,N=Math.max,it=Math.round,G={x:1,y:1};function W(t){const e=!P(t)&&t.contextElement?t.contextElement:P(t)?t:null;if(!e)return G;const n=e.getBoundingClientRect(),i=C(e);if(i.boxSizing!=="border-box")return R(e)?{x:e.offsetWidth>0&&it(n.width)/e.offsetWidth||1,y:e.offsetHeight>0&&it(n.height)/e.offsetHeight||1}:G;let o=n.width/parseFloat(i.width),s=n.height/parseFloat(i.height);return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}function k(t,e,n,i){var o,s,c,r;e===void 0&&(e=!1),n===void 0&&(n=!1);const l=t.getBoundingClientRect();let a=G;e&&(i?P(i)&&(a=W(i)):a=W(t));const g=P(t)?T(t):window,f=!dt()&&n,u=(l.left+(f&&(o=(s=g.visualViewport)==null?void 0:s.offsetLeft)!=null?o:0))/a.x,d=(l.top+(f&&(c=(r=g.visualViewport)==null?void 0:r.offsetTop)!=null?c:0))/a.y,m=l.width/a.x,p=l.height/a.y;return{width:m,height:p,top:d,right:u+m,bottom:d+p,left:u,x:u,y:d}}function L(t){return((ut(t)?t.ownerDocument:t.document)||window.document).documentElement}function U(t){return P(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function gt(t){return k(L(t)).left+U(t).scrollLeft}function Et(t,e,n){const i=R(e),o=L(e),s=k(t,!0,n==="fixed",e);let c={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(i||!i&&n!=="fixed")if((E(e)!=="body"||K(o))&&(c=U(e)),R(e)){const l=k(e,!0);r.x=l.x+e.clientLeft,r.y=l.y+e.clientTop}else o&&(r.x=gt(o));return{x:s.left+c.scrollLeft-r.x,y:s.top+c.scrollTop-r.y,width:s.width,height:s.height}}function M(t){if(E(t)==="html")return t;const e=t.assignedSlot||t.parentNode||(nt(t)?t.host:null)||L(t);return nt(e)?e.host:e}function st(t){return!R(t)||C(t).position==="fixed"?null:t.offsetParent}function Lt(t){let e=M(t);for(;R(e)&&!Z(e);){if(Q(e))return e;e=M(e)}return null}function rt(t){const e=T(t);let n=st(t);for(;n&&Tt(n)&&C(n).position==="static";)n=st(n);return n&&(E(n)==="html"||E(n)==="body"&&C(n).position==="static"&&!Q(n))?e:n||Lt(t)||e}function St(t){if(R(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=k(t);return{width:e.width,height:e.height}}function kt(t){let{rect:e,offsetParent:n,strategy:i}=t;const o=R(n),s=L(n);if(n===s)return e;let c={scrollLeft:0,scrollTop:0},r={x:1,y:1};const l={x:0,y:0};if((o||!o&&i!=="fixed")&&((E(n)!=="body"||K(s))&&(c=U(n)),R(n))){const a=k(n);r=W(n),l.x=a.x+n.clientLeft,l.y=a.y+n.clientTop}return{width:e.width*r.x,height:e.height*r.y,x:e.x*r.x-c.scrollLeft*r.x+l.x,y:e.y*r.y-c.scrollTop*r.y+l.y}}function Dt(t,e){const n=T(t),i=L(t),o=n.visualViewport;let s=i.clientWidth,c=i.clientHeight,r=0,l=0;if(o){s=o.width,c=o.height;const a=dt();(a||!a&&e==="fixed")&&(r=o.offsetLeft,l=o.offsetTop)}return{width:s,height:c,x:r,y:l}}function Vt(t){var e;const n=L(t),i=U(t),o=(e=t.ownerDocument)==null?void 0:e.body,s=N(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=N(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let r=-i.scrollLeft+gt(t);const l=-i.scrollTop;return C(o||n).direction==="rtl"&&(r+=N(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:c,x:r,y:l}}function mt(t){const e=M(t);return Z(e)?t.ownerDocument.body:R(e)&&K(e)?e:mt(e)}function ht(t,e){var n;e===void 0&&(e=[]);const i=mt(t),o=i===((n=t.ownerDocument)==null?void 0:n.body),s=T(i);return o?e.concat(s,s.visualViewport||[],K(i)?i:[]):e.concat(i,ht(i))}function Bt(t,e){const n=k(t,!0,e==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,s=R(t)?W(t):{x:1,y:1},c=t.clientWidth*s.x,r=t.clientHeight*s.y,l=o*s.x,a=i*s.y;return{top:a,left:l,right:l+c,bottom:a+r,x:l,y:a,width:c,height:r}}function ct(t,e,n){return e==="viewport"?Y(Dt(t,n)):P(e)?Bt(e,n):Y(Vt(L(t)))}function Ft(t,e){const n=e.get(t);if(n)return n;let i=ht(t).filter(r=>P(r)&&E(r)!=="body"),o=null;const s=C(t).position==="fixed";let c=s?M(t):t;for(;P(c)&&!Z(c);){const r=C(c),l=Q(c);(s?!l&&!o:!l&&r.position==="static"&&!!o&&["absolute","fixed"].includes(o.position))?i=i.filter(g=>g!==c):o=r,c=M(c)}return e.set(t,i),i}function Nt(t){let{element:e,boundary:n,rootBoundary:i,strategy:o}=t;const c=[...n==="clippingAncestors"?Ft(e,this._c):[].concat(n),i],r=c[0],l=c.reduce((a,g)=>{const f=ct(e,g,o);return a.top=N(f.top,a.top),a.right=ot(f.right,a.right),a.bottom=ot(f.bottom,a.bottom),a.left=N(f.left,a.left),a},ct(e,r,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}const Wt={getClippingRect:Nt,convertOffsetParentRelativeRectToViewportRelativeRect:kt,isElement:P,getDimensions:St,getOffsetParent:rt,getDocumentElement:L,getScale:W,async getElementRects(t){let{reference:e,floating:n,strategy:i}=t;const o=this.getOffsetParent||rt,s=this.getDimensions;return{reference:Et(e,await o(n),i),floating:{x:0,y:0,...await s(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>C(t).direction==="rtl"},jt=(t,e,n)=>{const i=new Map,o={platform:Wt,...n},s={...o.platform,_c:i};return xt(t,e,{...o,platform:s})};export{Mt as a,jt as c,Ht as f,$t as o,_t as s};
