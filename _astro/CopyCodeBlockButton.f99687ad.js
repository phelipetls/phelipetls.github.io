import{r as e}from"./index.c0d9332e.js";import{r as N}from"./index.772d13e4.js";import{c as k,I as $}from"./createLucideIcon.e05d58c0.js";import{k as B,a as D,D as I,u as L}from"./floating-ui.dom.browser.min.b9202534.js";import{j as o,c as a}from"./jsx-runtime.a3ab6fc0.js";const S=k("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),A=k("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);function _(j){const{code:T,className:v,successTooltipText:C,errorTooltipText:i,...E}=j,d=e.useRef(null),p=e.useRef(null),u=e.useRef(null),[l,c]=e.useState(null),r=l!==null,s=l===i,[x,R]=e.useState(null);return e.useEffect(()=>{R(document.body)},[]),e.useEffect(()=>{const t=p.current;if(!t)return;(async()=>{if(!r)return;const f=d.current,n=u.current;if(!f||!n)return;const{x:b,y:w,middlewareData:y}=await B(f,t,{placement:"top",middleware:[D({padding:8}),I(8),L({element:n})]}),h=y.arrow?.x,g=y.arrow?.y;t.style.left=b!=null?`${b}px`:"",t.style.top=w!=null?`${w}px`:"",t.style.animation="tooltip-animation 1.5s forwards",n.style.left=h!=null?`${h}px`:"",n.style.top=g!=null?`${g}px`:"",n.style.bottom="-4px"})();const m=()=>{c(null)};return t?.addEventListener("animationend",m),()=>{t?.removeEventListener("animationend",m)}},[r]),o.jsxs($,{variant:"rounded",ref:d,className:a([r?s?"border-warn":"border-green-500":"",v]),onClick:async()=>{try{await navigator.clipboard.writeText(T),c(C)}catch{c(i)}},...E,children:[r?o.jsx("span",{className:a("[&_svg]:stroke-current",s?"text-warn":"text-green-500"),children:o.jsx(S,{})}):o.jsx("span",{className:"text-[var(--code-fg)]",children:o.jsx(A,{})}),x&&r&&N.createPortal(o.jsxs("div",{ref:p,role:"tooltip",className:a("dark pointer-events-none absolute rounded border bg-background px-2 text-on-background",s?"border-warn":"border-green-500"),children:[l,o.jsx("div",{ref:u,className:a("absolute h-[8px] w-[8px] rotate-45 border-b border-r bg-background",s?"border-warn":"border-green-500")})]}),x)]})}export{_ as C};
