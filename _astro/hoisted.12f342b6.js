import"./hoisted.a8b55151.js";const it=document.querySelector("[data-blog-post-container]"),H=document.querySelector("[data-toggle-toc]"),tt=document.querySelector("[data-blog-post-toc-container]"),ut=localStorage.getItem("__preferred_toc_state");ut!==null&&(ut==="open"?xt():bt());function xt(){it?.setAttribute("data-toc","open"),localStorage.setItem("__preferred_toc_state","open"),H.setAttribute("aria-label",H.dataset.closedTocLabel??"")}function bt(){it?.setAttribute("data-toc","closed"),localStorage.setItem("__preferred_toc_state","closed"),H.setAttribute("aria-label",H.dataset.openTocLabel??"")}H?.addEventListener("click",()=>{it.dataset.toc==="open"?(bt(),tt?.addEventListener("transitionend",()=>{tt.classList.add("invisible")},{once:!0})):(xt(),tt?.classList.remove("invisible"))});function J(t){return t.split("-")[1]}function wt(t){return t==="y"?"height":"width"}function B(t){return t.split("-")[0]}function rt(t){return["top","bottom"].includes(B(t))?"x":"y"}function dt(t,e,o){let{reference:n,floating:l}=t;const r=n.x+n.width/2-l.width/2,i=n.y+n.height/2-l.height/2,c=rt(e),f=wt(c),s=n[f]/2-l[f]/2,u=c==="x";let a;switch(B(e)){case"top":a={x:r,y:n.y-l.height};break;case"bottom":a={x:r,y:n.y+n.height};break;case"right":a={x:n.x+n.width,y:i};break;case"left":a={x:n.x-l.width,y:i};break;default:a={x:n.x,y:n.y}}switch(J(e)){case"start":a[c]-=s*(o&&u?-1:1);break;case"end":a[c]+=s*(o&&u?-1:1)}return a}const It=async(t,e,o)=>{const{placement:n="bottom",strategy:l="absolute",middleware:r=[],platform:i}=o,c=r.filter(Boolean),f=await(i.isRTL==null?void 0:i.isRTL(e));let s=await i.getElementRects({reference:t,floating:e,strategy:l}),{x:u,y:a}=dt(s,n,f),g=n,p={},h=0;for(let d=0;d<c.length;d++){const{name:y,fn:m}=c[d],{x,y:b,data:A,reset:L}=await m({x:u,y:a,initialPlacement:n,placement:g,strategy:l,middlewareData:p,rects:s,platform:i,elements:{reference:t,floating:e}});u=x??u,a=b??a,p={...p,[y]:{...p[y],...A}},L&&h<=50&&(h++,typeof L=="object"&&(L.placement&&(g=L.placement),L.rects&&(s=L.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:l}):L.rects),{x:u,y:a}=dt(s,g,f)),d=-1)}return{x:u,y:a,placement:g,strategy:l,middlewareData:p}};function Bt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Y(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function _t(t,e){var o;e===void 0&&(e={});const{x:n,y:l,platform:r,rects:i,elements:c,strategy:f}=t,{boundary:s="clippingAncestors",rootBoundary:u="viewport",elementContext:a="floating",altBoundary:g=!1,padding:p=0}=e,h=Bt(p),d=c[g?a==="floating"?"reference":"floating":a],y=Y(await r.getClippingRect({element:(o=await(r.isElement==null?void 0:r.isElement(d)))==null||o?d:d.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:s,rootBoundary:u,strategy:f})),m=a==="floating"?{...i.floating,x:n,y:l}:i.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),b=await(r.isElement==null?void 0:r.isElement(x))&&await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1},A=Y(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:x,strategy:f}):m);return{top:(y.top-A.top+h.top)/b.y,bottom:(A.bottom-y.bottom+h.bottom)/b.y,left:(y.left-A.left+h.left)/b.x,right:(A.right-y.right+h.right)/b.x}}const Ot=["top","right","bottom","left"];Ot.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Ft={left:"right",right:"left",bottom:"top",top:"bottom"};function z(t){return t.replace(/left|right|bottom|top/g,e=>Ft[e])}function Vt(t,e,o){o===void 0&&(o=!1);const n=J(t),l=rt(t),r=wt(l);let i=l==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(i=z(i)),{main:i,cross:z(i)}}const Wt={start:"end",end:"start"};function et(t){return t.replace(/start|end/g,e=>Wt[e])}const qt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;const{placement:n,middlewareData:l,rects:r,initialPlacement:i,platform:c,elements:f}=e,{mainAxis:s=!0,crossAxis:u=!0,fallbackPlacements:a,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:h=!0,...d}=t,y=B(n),m=B(i)===i,x=await(c.isRTL==null?void 0:c.isRTL(f.floating)),b=a||(m||!h?[z(i)]:function(v){const S=z(v);return[et(v),S,et(S)]}(i));a||p==="none"||b.push(...function(v,S,I,$){const C=J(v);let T=function(V,Z,$t){const at=["left","right"],ft=["right","left"],kt=["top","bottom"],Dt=["bottom","top"];switch(V){case"top":case"bottom":return $t?Z?ft:at:Z?at:ft;case"left":case"right":return Z?kt:Dt;default:return[]}}(B(v),I==="start",$);return C&&(T=T.map(V=>V+"-"+C),S&&(T=T.concat(T.map(et)))),T}(i,h,p,x));const A=[i,...b],L=await _t(e,d),j=[];let F=((o=l.flip)==null?void 0:o.overflows)||[];if(s&&j.push(L[y]),u){const{main:v,cross:S}=Vt(n,r,x);j.push(L[v],L[S])}if(F=[...F,{placement:n,overflows:j}],!j.every(v=>v<=0)){var lt,ct;const v=(((lt=l.flip)==null?void 0:lt.index)||0)+1,S=A[v];if(S)return{data:{index:v,overflows:F},reset:{placement:S}};let I=(ct=F.filter($=>$.overflows[0]<=0).sort(($,C)=>$.overflows[1]-C.overflows[1])[0])==null?void 0:ct.placement;if(!I)switch(g){case"bestFit":{var st;const $=(st=F.map(C=>[C.placement,C.overflows.filter(T=>T>0).reduce((T,V)=>T+V,0)]).sort((C,T)=>C[1]-T[1])[0])==null?void 0:st[0];$&&(I=$);break}case"initialPlacement":I=i}if(n!==I)return{reset:{placement:I}}}return{}}}},Ht=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,l=await async function(r,i){const{placement:c,platform:f,elements:s}=r,u=await(f.isRTL==null?void 0:f.isRTL(s.floating)),a=B(c),g=J(c),p=rt(c)==="x",h=["left","top"].includes(a)?-1:1,d=u&&p?-1:1,y=typeof i=="function"?i(r):i;let{mainAxis:m,crossAxis:x,alignmentAxis:b}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return g&&typeof b=="number"&&(x=g==="end"?-1*b:b),p?{x:x*d,y:m*h}:{x:m*h,y:x*d}}(e,t);return{x:o+l.x,y:n+l.y,data:l}}}};function w(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function R(t){return w(t).getComputedStyle(t)}function vt(t){return t instanceof w(t).Node}function D(t){return vt(t)?(t.nodeName||"").toLowerCase():""}let X;function Tt(){if(X)return X;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(X=t.brands.map(e=>e.brand+"/"+e.version).join(" "),X):navigator.userAgent}function E(t){return t instanceof w(t).HTMLElement}function P(t){return t instanceof w(t).Element}function pt(t){return typeof ShadowRoot>"u"?!1:t instanceof w(t).ShadowRoot||t instanceof ShadowRoot}function M(t){const{overflow:e,overflowX:o,overflowY:n,display:l}=R(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(l)}function Mt(t){return["table","td","th"].includes(D(t))}function nt(t){const e=/firefox/i.test(Tt()),o=R(t),n=o.backdropFilter||o.WebkitBackdropFilter;return o.transform!=="none"||o.perspective!=="none"||!!n&&n!=="none"||e&&o.willChange==="filter"||e&&!!o.filter&&o.filter!=="none"||["transform","perspective"].some(l=>o.willChange.includes(l))||["paint","layout","strict","content"].some(l=>{const r=o.contain;return r!=null&&r.includes(l)})}function ot(){return/^((?!chrome|android).)*safari/i.test(Tt())}function K(t){return["html","body","#document"].includes(D(t))}const gt=Math.min,q=Math.max,G=Math.round;function At(t){const e=R(t);let o=parseFloat(e.width),n=parseFloat(e.height);const l=E(t),r=l?t.offsetWidth:o,i=l?t.offsetHeight:n,c=G(o)!==r||G(n)!==i;return c&&(o=r,n=i),{width:o,height:n,fallback:c}}function Lt(t){return P(t)?t:t.contextElement}const Rt={x:1,y:1};function _(t){const e=Lt(t);if(!E(e))return Rt;const o=e.getBoundingClientRect(),{width:n,height:l,fallback:r}=At(e);let i=(r?G(o.width):o.width)/n,c=(r?G(o.height):o.height)/l;return i&&Number.isFinite(i)||(i=1),c&&Number.isFinite(c)||(c=1),{x:i,y:c}}function N(t,e,o,n){var l,r;e===void 0&&(e=!1),o===void 0&&(o=!1);const i=t.getBoundingClientRect(),c=Lt(t);let f=Rt;e&&(n?P(n)&&(f=_(n)):f=_(t));const s=c?w(c):window,u=ot()&&o;let a=(i.left+(u&&((l=s.visualViewport)==null?void 0:l.offsetLeft)||0))/f.x,g=(i.top+(u&&((r=s.visualViewport)==null?void 0:r.offsetTop)||0))/f.y,p=i.width/f.x,h=i.height/f.y;if(c){const d=w(c),y=n&&P(n)?w(n):n;let m=d.frameElement;for(;m&&n&&y!==d;){const x=_(m),b=m.getBoundingClientRect(),A=getComputedStyle(m);b.x+=(m.clientLeft+parseFloat(A.paddingLeft))*x.x,b.y+=(m.clientTop+parseFloat(A.paddingTop))*x.y,a*=x.x,g*=x.y,p*=x.x,h*=x.y,a+=b.x,g+=b.y,m=w(m).frameElement}}return Y({width:p,height:h,x:a,y:g})}function k(t){return((vt(t)?t.ownerDocument:t.document)||window.document).documentElement}function Q(t){return P(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Et(t){return N(k(t)).left+Q(t).scrollLeft}function O(t){if(D(t)==="html")return t;const e=t.assignedSlot||t.parentNode||pt(t)&&t.host||k(t);return pt(e)?e.host:e}function St(t){const e=O(t);return K(e)?e.ownerDocument.body:E(e)&&M(e)?e:St(e)}function Ct(t,e){var o;e===void 0&&(e=[]);const n=St(t),l=n===((o=t.ownerDocument)==null?void 0:o.body),r=w(n);return l?e.concat(r,r.visualViewport||[],M(n)?n:[]):e.concat(n,Ct(n))}function mt(t,e,o){let n;if(e==="viewport")n=function(i,c){const f=w(i),s=k(i),u=f.visualViewport;let a=s.clientWidth,g=s.clientHeight,p=0,h=0;if(u){a=u.width,g=u.height;const d=ot();(!d||d&&c==="fixed")&&(p=u.offsetLeft,h=u.offsetTop)}return{width:a,height:g,x:p,y:h}}(t,o);else if(e==="document")n=function(i){const c=k(i),f=Q(i),s=i.ownerDocument.body,u=q(c.scrollWidth,c.clientWidth,s.scrollWidth,s.clientWidth),a=q(c.scrollHeight,c.clientHeight,s.scrollHeight,s.clientHeight);let g=-f.scrollLeft+Et(i);const p=-f.scrollTop;return R(s).direction==="rtl"&&(g+=q(c.clientWidth,s.clientWidth)-u),{width:u,height:a,x:g,y:p}}(k(t));else if(P(e))n=function(i,c){const f=N(i,!0,c==="fixed"),s=f.top+i.clientTop,u=f.left+i.clientLeft,a=E(i)?_(i):{x:1,y:1};return{width:i.clientWidth*a.x,height:i.clientHeight*a.y,x:u*a.x,y:s*a.y}}(e,o);else{const i={...e};if(ot()){var l,r;const c=w(t);i.x-=((l=c.visualViewport)==null?void 0:l.offsetLeft)||0,i.y-=((r=c.visualViewport)==null?void 0:r.offsetTop)||0}n=i}return Y(n)}function Pt(t,e){const o=O(t);return!(o===e||!P(o)||K(o))&&(R(o).position==="fixed"||Pt(o,e))}function ht(t,e){return E(t)&&R(t).position!=="fixed"?e?e(t):t.offsetParent:null}function yt(t,e){const o=w(t);if(!E(t))return o;let n=ht(t,e);for(;n&&Mt(n)&&R(n).position==="static";)n=ht(n,e);return n&&(D(n)==="html"||D(n)==="body"&&R(n).position==="static"&&!nt(n))?o:n||function(l){let r=O(l);for(;E(r)&&!K(r);){if(nt(r))return r;r=O(r)}return null}(t)||o}function Nt(t,e,o){const n=E(e),l=k(e),r=N(t,!0,o==="fixed",e);let i={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(n||!n&&o!=="fixed")if((D(e)!=="body"||M(l))&&(i=Q(e)),E(e)){const f=N(e,!0);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else l&&(c.x=Et(l));return{x:r.left+i.scrollLeft-c.x,y:r.top+i.scrollTop-c.y,width:r.width,height:r.height}}const jt={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:l}=t;const r=o==="clippingAncestors"?function(s,u){const a=u.get(s);if(a)return a;let g=Ct(s).filter(y=>P(y)&&D(y)!=="body"),p=null;const h=R(s).position==="fixed";let d=h?O(s):s;for(;P(d)&&!K(d);){const y=R(d),m=nt(d);m||y.position!=="fixed"||(p=null),(h?!m&&!p:!m&&y.position==="static"&&p&&["absolute","fixed"].includes(p.position)||M(d)&&!m&&Pt(s,d))?g=g.filter(x=>x!==d):p=y,d=O(d)}return u.set(s,g),g}(e,this._c):[].concat(o),i=[...r,n],c=i[0],f=i.reduce((s,u)=>{const a=mt(e,u,l);return s.top=q(a.top,s.top),s.right=gt(a.right,s.right),s.bottom=gt(a.bottom,s.bottom),s.left=q(a.left,s.left),s},mt(e,c,l));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const l=E(o),r=k(o);if(o===r)return e;let i={scrollLeft:0,scrollTop:0},c={x:1,y:1};const f={x:0,y:0};if((l||!l&&n!=="fixed")&&((D(o)!=="body"||M(r))&&(i=Q(o)),E(o))){const s=N(o);c=_(o),f.x=s.x+o.clientLeft,f.y=s.y+o.clientTop}return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-i.scrollLeft*c.x+f.x,y:e.y*c.y-i.scrollTop*c.y+f.y}},isElement:P,getDimensions:function(t){return At(t)},getOffsetParent:yt,getDocumentElement:k,getScale:_,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const l=this.getOffsetParent||yt,r=this.getDimensions;return{reference:Nt(e,await l(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>R(t).direction==="rtl"},Xt=(t,e,o)=>{const n=new Map,l={platform:jt,...o},r={...l.platform,_c:n};return It(t,e,{...l,platform:r})};for(const t of document.querySelectorAll("[data-codeblock] pre.twoslash data-lsp"))t.addEventListener("mouseover",async e=>{if(!e.target)return;const o=document.createElement("div"),n=e.target;o.setAttribute("role","tooltip");const l="twoslash-lsp-tooltip";o.setAttribute("id",l),n.setAttribute("aria-describedby",l);const{x:r,y:i}=await Xt(n,o,{placement:"bottom-start",middleware:[Ht(8),qt()]});Object.assign(o.style,{left:`${r}px`,top:`${i}px`});const c=n.getAttribute("lsp");o.textContent=c,o.classList.add("font-mono","absolute","bg-gray-700","text-white","text-left","p-2","text-sm","whitespace-pre-wrap"),document.body.append(o),n.addEventListener("mouseout",()=>{o.remove(),n.removeAttribute("aria-describedby")},{once:!0})});const U=document.querySelector("nav[data-toc-wrapper] ol"),W=U?.closest("[data-toc-wrapper]"),Yt=document.querySelector("[data-blog-post]"),zt=U?.querySelector("li");function Gt(t){t.setAttribute("data-active","")}function Jt(t){t.removeAttribute("data-active")}function Kt(){U?.querySelectorAll("li").forEach(Jt)}function Qt(t){const e=t.getAttribute("id"),o=U?.querySelector(`li a[href="#${e}"]`);return o?o.closest("li"):null}const Ut=new IntersectionObserver(t=>{t.forEach(e=>{if(!W)return null;const o=e.target;if(e.isIntersecting){const n=Qt(o);if(!n)return null;Kt(),Gt(n);const l=W.getBoundingClientRect(),r=n.getBoundingClientRect();if(n===zt){W.scrollTop=0;return}if(l.top>r.top){W.scrollTop-=l.top-r.top;return}r.bottom>l.bottom&&(W.scrollTop+=r.bottom-l.bottom)}})},{threshold:1}),Zt=Yt.querySelectorAll("h2, h3, h4, h4, h6");for(const t of Zt)Ut.observe(t);
