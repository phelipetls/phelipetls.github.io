function z(t){return t.split("-")[1]}function dt(t){return t==="y"?"height":"width"}function V(t){return t.split("-")[0]}function tt(t){return["top","bottom"].includes(V(t))?"x":"y"}function lt(t,e,o){let{reference:n,floating:c}=t;const r=n.x+n.width/2-c.width/2,i=n.y+n.height/2-c.height/2,l=tt(e),f=dt(l),s=n[f]/2-c[f]/2,u=l==="x";let a;switch(V(e)){case"top":a={x:r,y:n.y-c.height};break;case"bottom":a={x:r,y:n.y+n.height};break;case"right":a={x:n.x+n.width,y:i};break;case"left":a={x:n.x-c.width,y:i};break;default:a={x:n.x,y:n.y}}switch(z(e)){case"start":a[l]-=s*(o&&u?-1:1);break;case"end":a[l]+=s*(o&&u?-1:1)}return a}const At=async(t,e,o)=>{const{placement:n="bottom",strategy:c="absolute",middleware:r=[],platform:i}=o,l=r.filter(Boolean),f=await(i.isRTL==null?void 0:i.isRTL(e));let s=await i.getElementRects({reference:t,floating:e,strategy:c}),{x:u,y:a}=lt(s,n,f),m=n,p={},h=0;for(let d=0;d<l.length;d++){const{name:x,fn:g}=l[d],{x:y,y:w,data:L,reset:T}=await g({x:u,y:a,initialPlacement:n,placement:m,strategy:c,middlewareData:p,rects:s,platform:i,elements:{reference:t,floating:e}});u=y??u,a=w??a,p={...p,[x]:{...p[x],...L}},T&&h<=50&&(h++,typeof T=="object"&&(T.placement&&(m=T.placement),T.rects&&(s=T.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:c}):T.rects),{x:u,y:a}=lt(s,m,f)),d=-1)}return{x:u,y:a,placement:m,strategy:c,middlewareData:p}};function Et(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function _(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Dt(t,e){var o;e===void 0&&(e={});const{x:n,y:c,platform:r,rects:i,elements:l,strategy:f}=t,{boundary:s="clippingAncestors",rootBoundary:u="viewport",elementContext:a="floating",altBoundary:m=!1,padding:p=0}=e,h=Et(p),d=l[m?a==="floating"?"reference":"floating":a],x=_(await r.getClippingRect({element:(o=await(r.isElement==null?void 0:r.isElement(d)))==null||o?d:d.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:s,rootBoundary:u,strategy:f})),g=a==="floating"?{...i.floating,x:n,y:c}:i.reference,y=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),w=await(r.isElement==null?void 0:r.isElement(y))&&await(r.getScale==null?void 0:r.getScale(y))||{x:1,y:1},L=_(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:y,strategy:f}):g);return{top:(x.top-L.top+h.top)/w.y,bottom:(L.bottom-x.bottom+h.bottom)/w.y,left:(x.left-L.left+h.left)/w.x,right:(L.right-x.right+h.right)/w.x}}const kt=["top","right","bottom","left"];kt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const $t={left:"right",right:"left",bottom:"top",top:"bottom"};function q(t){return t.replace(/left|right|bottom|top/g,e=>$t[e])}function Pt(t,e,o){o===void 0&&(o=!1);const n=z(t),c=tt(t),r=dt(c);let i=c==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(i=q(i)),{main:i,cross:q(i)}}const Ct={start:"end",end:"start"};function Q(t){return t.replace(/start|end/g,e=>Ct[e])}const St=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;const{placement:n,middlewareData:c,rects:r,initialPlacement:i,platform:l,elements:f}=e,{mainAxis:s=!0,crossAxis:u=!0,fallbackPlacements:a,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:h=!0,...d}=t,x=V(n),g=V(i)===i,y=await(l.isRTL==null?void 0:l.isRTL(f.floating)),w=a||(g||!h?[q(i)]:function(v){const D=q(v);return[Q(v),D,Q(D)]}(i));a||p==="none"||w.push(...function(v,D,F,P){const k=z(v);let R=function(B,K,Rt){const it=["left","right"],rt=["right","left"],Lt=["top","bottom"],Tt=["bottom","top"];switch(B){case"top":case"bottom":return Rt?K?rt:it:K?it:rt;case"left":case"right":return K?Lt:Tt;default:return[]}}(V(v),F==="start",P);return k&&(R=R.map(B=>B+"-"+k),D&&(R=R.concat(R.map(Q)))),R}(i,h,p,y));const L=[i,...w],T=await Dt(e,d),X=[];let H=((o=c.flip)==null?void 0:o.overflows)||[];if(s&&X.push(T[x]),u){const{main:v,cross:D}=Pt(n,r,y);X.push(T[v],T[D])}if(H=[...H,{placement:n,overflows:X}],!X.every(v=>v<=0)){var et,nt;const v=(((et=c.flip)==null?void 0:et.index)||0)+1,D=L[v];if(D)return{data:{index:v,overflows:H},reset:{placement:D}};let F=(nt=H.filter(P=>P.overflows[0]<=0).sort((P,k)=>P.overflows[1]-k.overflows[1])[0])==null?void 0:nt.placement;if(!F)switch(m){case"bestFit":{var ot;const P=(ot=H.map(k=>[k.placement,k.overflows.filter(R=>R>0).reduce((R,B)=>R+B,0)]).sort((k,R)=>k[1]-R[1])[0])==null?void 0:ot[0];P&&(F=P);break}case"initialPlacement":F=i}if(n!==F)return{reset:{placement:F}}}return{}}}},Ft=function(t){return{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,c=await async function(r,i){const{placement:l,platform:f,elements:s}=r,u=await(f.isRTL==null?void 0:f.isRTL(s.floating)),a=V(l),m=z(l),p=tt(l)==="x",h=["left","top"].includes(a)?-1:1,d=u&&p?-1:1,x=i;let{mainAxis:g,crossAxis:y,alignmentAxis:w}={mainAxis:x,crossAxis:0,alignmentAxis:null};return m&&typeof w=="number"&&(y=m==="end"?-1*w:w),p?{x:y*d,y:g*h}:{x:g*h,y:y*d}}(e,t);return{x:o+c.x,y:n+c.y,data:c}}}};function b(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function A(t){return b(t).getComputedStyle(t)}function pt(t){return t instanceof b(t).Node}function S(t){return pt(t)?(t.nodeName||"").toLowerCase():""}let Y;function mt(){if(Y)return Y;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Y=t.brands.map(e=>e.brand+"/"+e.version).join(" "),Y):navigator.userAgent}function E(t){return t instanceof b(t).HTMLElement}function $(t){return t instanceof b(t).Element}function ct(t){return typeof ShadowRoot>"u"?!1:t instanceof b(t).ShadowRoot||t instanceof ShadowRoot}function N(t){const{overflow:e,overflowX:o,overflowY:n,display:c}=A(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(c)}function Vt(t){return["table","td","th"].includes(S(t))}function U(t){const e=/firefox/i.test(mt()),o=A(t),n=o.backdropFilter||o.WebkitBackdropFilter;return o.transform!=="none"||o.perspective!=="none"||!!n&&n!=="none"||e&&o.willChange==="filter"||e&&!!o.filter&&o.filter!=="none"||["transform","perspective"].some(c=>o.willChange.includes(c))||["paint","layout","strict","content"].some(c=>{const r=o.contain;return r!=null&&r.includes(c)})}function Z(){return/^((?!chrome|android).)*safari/i.test(mt())}function G(t){return["html","body","#document"].includes(S(t))}const st=Math.min,M=Math.max,I=Math.round;function gt(t){const e=A(t);let o=parseFloat(e.width),n=parseFloat(e.height);const c=E(t),r=c?t.offsetWidth:o,i=c?t.offsetHeight:n,l=I(o)!==r||I(n)!==i;return l&&(o=r,n=i),{width:o,height:n,fallback:l}}function ht(t){return $(t)?t:t.contextElement}const yt={x:1,y:1};function W(t){const e=ht(t);if(!E(e))return yt;const o=e.getBoundingClientRect(),{width:n,height:c,fallback:r}=gt(e);let i=(r?I(o.width):o.width)/n,l=(r?I(o.height):o.height)/c;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}function j(t,e,o,n){var c,r;e===void 0&&(e=!1),o===void 0&&(o=!1);const i=t.getBoundingClientRect(),l=ht(t);let f=yt;e&&(n?$(n)&&(f=W(n)):f=W(t));const s=l?b(l):window,u=Z()&&o;let a=(i.left+(u&&((c=s.visualViewport)==null?void 0:c.offsetLeft)||0))/f.x,m=(i.top+(u&&((r=s.visualViewport)==null?void 0:r.offsetTop)||0))/f.y,p=i.width/f.x,h=i.height/f.y;if(l){const d=b(l),x=n&&$(n)?b(n):n;let g=d.frameElement;for(;g&&n&&x!==d;){const y=W(g),w=g.getBoundingClientRect(),L=getComputedStyle(g);w.x+=(g.clientLeft+parseFloat(L.paddingLeft))*y.x,w.y+=(g.clientTop+parseFloat(L.paddingTop))*y.y,a*=y.x,m*=y.y,p*=y.x,h*=y.y,a+=w.x,m+=w.y,g=b(g).frameElement}}return _({width:p,height:h,x:a,y:m})}function C(t){return((pt(t)?t.ownerDocument:t.document)||window.document).documentElement}function J(t){return $(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function xt(t){return j(C(t)).left+J(t).scrollLeft}function O(t){if(S(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ct(t)&&t.host||C(t);return ct(e)?e.host:e}function wt(t){const e=O(t);return G(e)?e.ownerDocument.body:E(e)&&N(e)?e:wt(e)}function bt(t,e){var o;e===void 0&&(e=[]);const n=wt(t),c=n===((o=t.ownerDocument)==null?void 0:o.body),r=b(n);return c?e.concat(r,r.visualViewport||[],N(n)?n:[]):e.concat(n,bt(n))}function at(t,e,o){let n;if(e==="viewport")n=function(i,l){const f=b(i),s=C(i),u=f.visualViewport;let a=s.clientWidth,m=s.clientHeight,p=0,h=0;if(u){a=u.width,m=u.height;const d=Z();(!d||d&&l==="fixed")&&(p=u.offsetLeft,h=u.offsetTop)}return{width:a,height:m,x:p,y:h}}(t,o);else if(e==="document")n=function(i){const l=C(i),f=J(i),s=i.ownerDocument.body,u=M(l.scrollWidth,l.clientWidth,s.scrollWidth,s.clientWidth),a=M(l.scrollHeight,l.clientHeight,s.scrollHeight,s.clientHeight);let m=-f.scrollLeft+xt(i);const p=-f.scrollTop;return A(s).direction==="rtl"&&(m+=M(l.clientWidth,s.clientWidth)-u),{width:u,height:a,x:m,y:p}}(C(t));else if($(e))n=function(i,l){const f=j(i,!0,l==="fixed"),s=f.top+i.clientTop,u=f.left+i.clientLeft,a=E(i)?W(i):{x:1,y:1};return{width:i.clientWidth*a.x,height:i.clientHeight*a.y,x:u*a.x,y:s*a.y}}(e,o);else{const i={...e};if(Z()){var c,r;const l=b(t);i.x-=((c=l.visualViewport)==null?void 0:c.offsetLeft)||0,i.y-=((r=l.visualViewport)==null?void 0:r.offsetTop)||0}n=i}return _(n)}function vt(t,e){const o=O(t);return!(o===e||!$(o)||G(o))&&(A(o).position==="fixed"||vt(o,e))}function ft(t,e){return E(t)&&A(t).position!=="fixed"?e?e(t):t.offsetParent:null}function ut(t,e){const o=b(t);if(!E(t))return o;let n=ft(t,e);for(;n&&Vt(n)&&A(n).position==="static";)n=ft(n,e);return n&&(S(n)==="html"||S(n)==="body"&&A(n).position==="static"&&!U(n))?o:n||function(c){let r=O(c);for(;E(r)&&!G(r);){if(U(r))return r;r=O(r)}return null}(t)||o}function Wt(t,e,o){const n=E(e),c=C(e),r=j(t,!0,o==="fixed",e);let i={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(n||!n&&o!=="fixed")if((S(e)!=="body"||N(c))&&(i=J(e)),E(e)){const f=j(e,!0);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else c&&(l.x=xt(c));return{x:r.left+i.scrollLeft-l.x,y:r.top+i.scrollTop-l.y,width:r.width,height:r.height}}const Ot={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:c}=t;const r=o==="clippingAncestors"?function(s,u){const a=u.get(s);if(a)return a;let m=bt(s).filter(x=>$(x)&&S(x)!=="body"),p=null;const h=A(s).position==="fixed";let d=h?O(s):s;for(;$(d)&&!G(d);){const x=A(d),g=U(d);g||x.position!=="fixed"||(p=null),(h?!g&&!p:!g&&x.position==="static"&&p&&["absolute","fixed"].includes(p.position)||N(d)&&!g&&vt(s,d))?m=m.filter(y=>y!==d):p=x,d=O(d)}return u.set(s,m),m}(e,this._c):[].concat(o),i=[...r,n],l=i[0],f=i.reduce((s,u)=>{const a=at(e,u,c);return s.top=M(a.top,s.top),s.right=st(a.right,s.right),s.bottom=st(a.bottom,s.bottom),s.left=M(a.left,s.left),s},at(e,l,c));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const c=E(o),r=C(o);if(o===r)return e;let i={scrollLeft:0,scrollTop:0},l={x:1,y:1};const f={x:0,y:0};if((c||!c&&n!=="fixed")&&((S(o)!=="body"||N(r))&&(i=J(o)),E(o))){const s=j(o);l=W(o),f.x=s.x+o.clientLeft,f.y=s.y+o.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-i.scrollLeft*l.x+f.x,y:e.y*l.y-i.scrollTop*l.y+f.y}},isElement:$,getDimensions:function(t){return gt(t)},getOffsetParent:ut,getDocumentElement:C,getScale:W,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const c=this.getOffsetParent||ut,r=this.getDimensions;return{reference:Wt(e,await c(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>A(t).direction==="rtl"},Ht=(t,e,o)=>{const n=new Map,c={platform:Ot,...o},r={...c.platform,_c:n};return At(t,e,{...c,platform:r})};for(const t of document.querySelectorAll("[data-codeblock] pre.twoslash data-lsp"))t.addEventListener("mouseover",async e=>{if(!e.target)return;const o=document.createElement("div"),n=e.target;o.setAttribute("role","tooltip");const c="twoslash-lsp-tooltip";o.setAttribute("id",c),n.setAttribute("aria-describedby",c);const{x:r,y:i}=await Ht(n,o,{placement:"bottom-start",middleware:[Ft(8),St()]});Object.assign(o.style,{left:`${r}px`,top:`${i}px`});const l=n.getAttribute("lsp");o.textContent=l,o.classList.add("font-mono","absolute","bg-gray-700","text-white","text-left","p-2","text-sm","whitespace-pre-wrap"),document.body.append(o),n.addEventListener("mouseout",()=>{o.remove(),n.removeAttribute("aria-describedby")},{once:!0})});
