function z(t){return t.split("-")[1]}function rt(t){return t==="y"?"height":"width"}function B(t){return t.split("-")[0]}function G(t){return["top","bottom"].includes(B(t))?"x":"y"}function st(t,e,o){let{reference:n,floating:c}=t;const r=n.x+n.width/2-c.width/2,i=n.y+n.height/2-c.height/2,l=G(e),f=rt(l),a=n[f]/2-c[f]/2,u=l==="x";let s;switch(B(e)){case"top":s={x:r,y:n.y-c.height};break;case"bottom":s={x:r,y:n.y+n.height};break;case"right":s={x:n.x+n.width,y:i};break;case"left":s={x:n.x-c.width,y:i};break;default:s={x:n.x,y:n.y}}switch(z(e)){case"start":s[l]-=a*(o&&u?-1:1);break;case"end":s[l]+=a*(o&&u?-1:1)}return s}const $t=async(t,e,o)=>{const{placement:n="bottom",strategy:c="absolute",middleware:r=[],platform:i}=o,l=r.filter(Boolean),f=await(i.isRTL==null?void 0:i.isRTL(e));let a=await i.getElementRects({reference:t,floating:e,strategy:c}),{x:u,y:s}=st(a,n,f),d=n,m={},g=0;for(let p=0;p<l.length;p++){const{name:h,fn:y}=l[p],{x,y:w,data:R,reset:b}=await y({x:u,y:s,initialPlacement:n,placement:d,strategy:c,middlewareData:m,rects:a,platform:i,elements:{reference:t,floating:e}});u=x??u,s=w??s,m={...m,[h]:{...m[h],...R}},b&&g<=50&&(g++,typeof b=="object"&&(b.placement&&(d=b.placement),b.rects&&(a=b.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:c}):b.rects),{x:u,y:s}=st(a,d,f)),p=-1)}return{x:u,y:s,placement:d,strategy:c,middlewareData:m}};function pt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function J(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function gt(t,e){var o;e===void 0&&(e={});const{x:n,y:c,platform:r,rects:i,elements:l,strategy:f}=t,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:s="floating",altBoundary:d=!1,padding:m=0}=e,g=pt(m),p=l[d?s==="floating"?"reference":"floating":s],h=J(await r.getClippingRect({element:(o=await(r.isElement==null?void 0:r.isElement(p)))==null||o?p:p.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:a,rootBoundary:u,strategy:f})),y=s==="floating"?{...i.floating,x:n,y:c}:i.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),w=await(r.isElement==null?void 0:r.isElement(x))&&await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1},R=J(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:f}):y);return{top:(h.top-R.top+g.top)/w.y,bottom:(R.bottom-h.bottom+g.bottom)/w.y,left:(h.left-R.left+g.left)/w.x,right:(R.right-h.right+g.right)/w.x}}const Pt=Math.min,kt=Math.max;function nt(t,e,o){return kt(t,Pt(e,o))}const Mt=t=>({name:"arrow",options:t,async fn(e){const{element:o,padding:n=0}=t||{},{x:c,y:r,placement:i,rects:l,platform:f,elements:a}=e;if(o==null)return{};const u=pt(n),s={x:c,y:r},d=G(i),m=rt(d),g=await f.getDimensions(o),p=d==="y",h=p?"top":"left",y=p?"bottom":"right",x=p?"clientHeight":"clientWidth",w=l.reference[m]+l.reference[d]-s[d]-l.floating[m],R=s[d]-l.reference[d],b=await(f.getOffsetParent==null?void 0:f.getOffsetParent(o));let P=b?b[x]:0;P&&await(f.isElement==null?void 0:f.isElement(b))||(P=a.floating[x]||l.floating[m]);const F=w/2-R/2,H=u[h],j=P-g[m]-u[y],$=P/2-g[m]/2+F,v=nt(H,$,j),A=z(i)!=null&&$!=v&&l.reference[m]/2-($<H?u[h]:u[y])-g[m]/2<0;return{[d]:s[d]-(A?$<H?H-$:j-$:0),data:{[d]:v,centerOffset:$-v}}}}),Ct=["top","right","bottom","left"];Ct.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Ot={left:"right",right:"left",bottom:"top",top:"bottom"};function K(t){return t.replace(/left|right|bottom|top/g,e=>Ot[e])}function St(t,e,o){o===void 0&&(o=!1);const n=z(t),c=G(t),r=rt(c);let i=c==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(i=K(i)),{main:i,cross:K(i)}}const Wt={start:"end",end:"start"};function et(t){return t.replace(/start|end/g,e=>Wt[e])}const Nt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;const{placement:n,middlewareData:c,rects:r,initialPlacement:i,platform:l,elements:f}=e,{mainAxis:a=!0,crossAxis:u=!0,fallbackPlacements:s,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...p}=t,h=B(n),y=B(i)===i,x=await(l.isRTL==null?void 0:l.isRTL(f.floating)),w=s||(y||!g?[K(i)]:function(v){const A=K(v);return[et(v),A,et(A)]}(i));s||m==="none"||w.push(...function(v,A,V,O){const k=z(v);let T=function(X,tt,At){const lt=["left","right"],ct=["right","left"],Et=["top","bottom"],Dt=["bottom","top"];switch(X){case"top":case"bottom":return At?tt?ct:lt:tt?lt:ct;case"left":case"right":return tt?Et:Dt;default:return[]}}(B(v),V==="start",O);return k&&(T=T.map(X=>X+"-"+k),A&&(T=T.concat(T.map(et)))),T}(i,g,m,x));const R=[i,...w],b=await gt(e,p),P=[];let F=((o=c.flip)==null?void 0:o.overflows)||[];if(a&&P.push(b[h]),u){const{main:v,cross:A}=St(n,r,x);P.push(b[v],b[A])}if(F=[...F,{placement:n,overflows:P}],!P.every(v=>v<=0)){var H,j;const v=(((H=c.flip)==null?void 0:H.index)||0)+1,A=R[v];if(A)return{data:{index:v,overflows:F},reset:{placement:A}};let V=(j=F.filter(O=>O.overflows[0]<=0).sort((O,k)=>O.overflows[1]-k.overflows[1])[0])==null?void 0:j.placement;if(!V)switch(d){case"bestFit":{var $;const O=($=F.map(k=>[k.placement,k.overflows.filter(T=>T>0).reduce((T,X)=>T+X,0)]).sort((k,T)=>k[1]-T[1])[0])==null?void 0:$[0];O&&(V=O);break}case"initialPlacement":V=i}if(n!==V)return{reset:{placement:V}}}return{}}}},jt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,c=await async function(r,i){const{placement:l,platform:f,elements:a}=r,u=await(f.isRTL==null?void 0:f.isRTL(a.floating)),s=B(l),d=z(l),m=G(l)==="x",g=["left","top"].includes(s)?-1:1,p=u&&m?-1:1,h=typeof i=="function"?i(r):i;let{mainAxis:y,crossAxis:x,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return d&&typeof w=="number"&&(x=d==="end"?-1*w:w),m?{x:x*p,y:y*g}:{x:y*g,y:x*p}}(e,t);return{x:o+c.x,y:n+c.y,data:c}}}};function Ft(t){return t==="x"?"y":"x"}const Xt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:o,y:n,placement:c}=e,{mainAxis:r=!0,crossAxis:i=!1,limiter:l={fn:h=>{let{x:y,y:x}=h;return{x:y,y:x}}},...f}=t,a={x:o,y:n},u=await gt(e,f),s=G(B(c)),d=Ft(s);let m=a[s],g=a[d];if(r){const h=s==="y"?"bottom":"right";m=nt(m+u[s==="y"?"top":"left"],m,m-u[h])}if(i){const h=d==="y"?"bottom":"right";g=nt(g+u[d==="y"?"top":"left"],g,g-u[h])}const p=l.fn({...e,[s]:m,[d]:g});return{...p,data:{x:p.x-o,y:p.y-n}}}}};function L(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function E(t){return L(t).getComputedStyle(t)}function ht(t){return t instanceof L(t).Node}function W(t){return ht(t)?(t.nodeName||"").toLowerCase():""}let I;function yt(){if(I)return I;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(I=t.brands.map(e=>e.brand+"/"+e.version).join(" "),I):navigator.userAgent}function D(t){return t instanceof L(t).HTMLElement}function C(t){return t instanceof L(t).Element}function at(t){return typeof ShadowRoot>"u"?!1:t instanceof L(t).ShadowRoot||t instanceof ShadowRoot}function _(t){const{overflow:e,overflowX:o,overflowY:n,display:c}=E(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(c)}function Ht(t){return["table","td","th"].includes(W(t))}function ot(t){const e=/firefox/i.test(yt()),o=E(t),n=o.backdropFilter||o.WebkitBackdropFilter;return o.transform!=="none"||o.perspective!=="none"||!!n&&n!=="none"||e&&o.willChange==="filter"||e&&!!o.filter&&o.filter!=="none"||["transform","perspective"].some(c=>o.willChange.includes(c))||["paint","layout","strict","content"].some(c=>{const r=o.contain;return r!=null&&r.includes(c)})}function it(){return/^((?!chrome|android).)*safari/i.test(yt())}function U(t){return["html","body","#document"].includes(W(t))}const ft=Math.min,Y=Math.max,Q=Math.round;function xt(t){const e=E(t);let o=parseFloat(e.width),n=parseFloat(e.height);const c=D(t),r=c?t.offsetWidth:o,i=c?t.offsetHeight:n,l=Q(o)!==r||Q(n)!==i;return l&&(o=r,n=i),{width:o,height:n,fallback:l}}function wt(t){return C(t)?t:t.contextElement}const vt={x:1,y:1};function M(t){const e=wt(t);if(!D(e))return vt;const o=e.getBoundingClientRect(),{width:n,height:c,fallback:r}=xt(e);let i=(r?Q(o.width):o.width)/n,l=(r?Q(o.height):o.height)/c;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}function q(t,e,o,n){var c,r;e===void 0&&(e=!1),o===void 0&&(o=!1);const i=t.getBoundingClientRect(),l=wt(t);let f=vt;e&&(n?C(n)&&(f=M(n)):f=M(t));const a=l?L(l):window,u=it()&&o;let s=(i.left+(u&&((c=a.visualViewport)==null?void 0:c.offsetLeft)||0))/f.x,d=(i.top+(u&&((r=a.visualViewport)==null?void 0:r.offsetTop)||0))/f.y,m=i.width/f.x,g=i.height/f.y;if(l){const p=L(l),h=n&&C(n)?L(n):n;let y=p.frameElement;for(;y&&n&&h!==p;){const x=M(y),w=y.getBoundingClientRect(),R=getComputedStyle(y);w.x+=(y.clientLeft+parseFloat(R.paddingLeft))*x.x,w.y+=(y.clientTop+parseFloat(R.paddingTop))*x.y,s*=x.x,d*=x.y,m*=x.x,g*=x.y,s+=w.x,d+=w.y,y=L(y).frameElement}}return J({width:m,height:g,x:s,y:d})}function S(t){return((ht(t)?t.ownerDocument:t.document)||window.document).documentElement}function Z(t){return C(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function bt(t){return q(S(t)).left+Z(t).scrollLeft}function N(t){if(W(t)==="html")return t;const e=t.assignedSlot||t.parentNode||at(t)&&t.host||S(t);return at(e)?e.host:e}function Rt(t){const e=N(t);return U(e)?e.ownerDocument.body:D(e)&&_(e)?e:Rt(e)}function Lt(t,e){var o;e===void 0&&(e=[]);const n=Rt(t),c=n===((o=t.ownerDocument)==null?void 0:o.body),r=L(n);return c?e.concat(r,r.visualViewport||[],_(n)?n:[]):e.concat(n,Lt(n))}function ut(t,e,o){let n;if(e==="viewport")n=function(i,l){const f=L(i),a=S(i),u=f.visualViewport;let s=a.clientWidth,d=a.clientHeight,m=0,g=0;if(u){s=u.width,d=u.height;const p=it();(!p||p&&l==="fixed")&&(m=u.offsetLeft,g=u.offsetTop)}return{width:s,height:d,x:m,y:g}}(t,o);else if(e==="document")n=function(i){const l=S(i),f=Z(i),a=i.ownerDocument.body,u=Y(l.scrollWidth,l.clientWidth,a.scrollWidth,a.clientWidth),s=Y(l.scrollHeight,l.clientHeight,a.scrollHeight,a.clientHeight);let d=-f.scrollLeft+bt(i);const m=-f.scrollTop;return E(a).direction==="rtl"&&(d+=Y(l.clientWidth,a.clientWidth)-u),{width:u,height:s,x:d,y:m}}(S(t));else if(C(e))n=function(i,l){const f=q(i,!0,l==="fixed"),a=f.top+i.clientTop,u=f.left+i.clientLeft,s=D(i)?M(i):{x:1,y:1};return{width:i.clientWidth*s.x,height:i.clientHeight*s.y,x:u*s.x,y:a*s.y}}(e,o);else{const i={...e};if(it()){var c,r;const l=L(t);i.x-=((c=l.visualViewport)==null?void 0:c.offsetLeft)||0,i.y-=((r=l.visualViewport)==null?void 0:r.offsetTop)||0}n=i}return J(n)}function Tt(t,e){const o=N(t);return!(o===e||!C(o)||U(o))&&(E(o).position==="fixed"||Tt(o,e))}function dt(t,e){return D(t)&&E(t).position!=="fixed"?e?e(t):t.offsetParent:null}function mt(t,e){const o=L(t);if(!D(t))return o;let n=dt(t,e);for(;n&&Ht(n)&&E(n).position==="static";)n=dt(n,e);return n&&(W(n)==="html"||W(n)==="body"&&E(n).position==="static"&&!ot(n))?o:n||function(c){let r=N(c);for(;D(r)&&!U(r);){if(ot(r))return r;r=N(r)}return null}(t)||o}function Vt(t,e,o){const n=D(e),c=S(e),r=q(t,!0,o==="fixed",e);let i={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(n||!n&&o!=="fixed")if((W(e)!=="body"||_(c))&&(i=Z(e)),D(e)){const f=q(e,!0);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else c&&(l.x=bt(c));return{x:r.left+i.scrollLeft-l.x,y:r.top+i.scrollTop-l.y,width:r.width,height:r.height}}const Bt={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:c}=t;const r=o==="clippingAncestors"?function(a,u){const s=u.get(a);if(s)return s;let d=Lt(a).filter(h=>C(h)&&W(h)!=="body"),m=null;const g=E(a).position==="fixed";let p=g?N(a):a;for(;C(p)&&!U(p);){const h=E(p),y=ot(p);y||h.position!=="fixed"||(m=null),(g?!y&&!m:!y&&h.position==="static"&&m&&["absolute","fixed"].includes(m.position)||_(p)&&!y&&Tt(a,p))?d=d.filter(x=>x!==p):m=h,p=N(p)}return u.set(a,d),d}(e,this._c):[].concat(o),i=[...r,n],l=i[0],f=i.reduce((a,u)=>{const s=ut(e,u,c);return a.top=Y(s.top,a.top),a.right=ft(s.right,a.right),a.bottom=ft(s.bottom,a.bottom),a.left=Y(s.left,a.left),a},ut(e,l,c));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const c=D(o),r=S(o);if(o===r)return e;let i={scrollLeft:0,scrollTop:0},l={x:1,y:1};const f={x:0,y:0};if((c||!c&&n!=="fixed")&&((W(o)!=="body"||_(r))&&(i=Z(o)),D(o))){const a=q(o);l=M(o),f.x=a.x+o.clientLeft,f.y=a.y+o.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-i.scrollLeft*l.x+f.x,y:e.y*l.y-i.scrollTop*l.y+f.y}},isElement:C,getDimensions:function(t){return xt(t)},getOffsetParent:mt,getDocumentElement:S,getScale:M,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const c=this.getOffsetParent||mt,r=this.getDimensions;return{reference:Vt(e,await c(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>E(t).direction==="rtl"},Yt=(t,e,o)=>{const n=new Map,c={platform:Bt,...o},r={...c.platform,_c:n};return $t(t,e,{...c,platform:r})};export{jt as D,Xt as a,Nt as b,Yt as k,Mt as u};
