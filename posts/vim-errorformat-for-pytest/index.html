<!DOCTYPE html>
<html class="h-full min-h-0 text-base sm:text-lg selection:bg-primary selection:text-on-primary scroll-smooth scroll-pt-nav-height sm:scroll-pt-0" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="deploy-date" content="2023-04-22">
    <meta name="author" content="Phelipe Teles">
    <meta name="color-scheme" content="dark light">

    <title>A Vim errorformat for pytest - Phelipe Teles | Phelipe Teles</title>



<link rel="canonical" href="https://phelipetls.github.io/posts/vim-errorformat-for-pytest/">

<meta name="description" content="I really like Vim’s :h errorformat feature, but only when I manage to get it
right. Until then, I’m sure it will frustrate me more than once. It’s very
awkward to write one if the program’s output you’re trying to capture is not
trivial (e.g., LaTeX).">

<meta name="robots" content="index, follow">

<meta property="og:title" content="A Vim errorformat for pytest">
<meta property="og:type" content="article">
<meta property="og:image" content="/posts/vim-errorformat-for-pytest/image.png">
<meta property="og:url" content="https://phelipetls.github.io/posts/vim-errorformat-for-pytest/">


<meta property="article:published_time" content="2020-10-07T00:00:00Z">


<meta property="article:author" content="Phelipe Teles">

<meta property="article:tag" content="python"><meta property="article:tag" content="vim">
<meta name="twitter:card" content="summary_large_image">



<meta content="/posts/vim-errorformat-for-pytest/image.png" name="twitter:image">

    

    
    <meta name="publish-date" content="2020-10-07">
    <meta name="keywords" content="python, vim"><meta name="description" content="I really like Vim’s :h errorformat feature, but only when I manage to get it
right. Until then, I’m sure it will frustrate me more than once. It’s very
awkward to write one if the program’s output you’re trying to capture is not
trivial (e.g., LaTeX).">

    <style id="sandpack">--sxs{--sxs:1 sp-k-eyOShd sp-k-iOHdLQ}@media{@keyframes sp-k-eyOShd{0%{opacity:0}100%{opacity:1}}@keyframes sp-k-iOHdLQ{0%{transform:rotateX(-25.5deg) rotateY(45deg)}100%{transform:rotateX(-25.5deg) rotateY(405deg)}}}--sxs{--sxs:2 sp-c-gMfcns sp-c-bxeRRt sp-c-hfoyCM sp-c-fWymNx sp-c-euXojQ sp-c-bpmgvy sp-c-PJLV}@media{.sp-c-gMfcns svg{margin:auto}.sp-c-bxeRRt{-webkit-appearance:none;appearance:none;outline:none;display:flex;align-items:center;font-size:inherit;font-family:inherit;background-color:transparent;transition:color var(--sp-transitions-default), background var(--sp-transitions-default);cursor:pointer;color:var(--sp-colors-clickable);border:0;text-decoration:none}.sp-c-bxeRRt:disabled{color:var(--sp-colors-disabled)}.sp-c-bxeRRt:hover:not(:disabled,[data-active='true']){color:var(--sp-colors-hover)}.sp-c-bxeRRt[data-active="true"]{color:var(--sp-colors-accent)}.sp-c-bxeRRt svg{min-width:var(--sp-space-4);width:var(--sp-space-4);height:var(--sp-space-4)}.sp-c-bxeRRt.sp-c-gMfcns{padding:var(--sp-space-1);height:var(--sp-space-7);display:flex}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:not(:has(span)){width:var(--sp-space-7)}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:has(svg + span){padding-right:var(--sp-space-3);padding-left:var(--sp-space-2);gap:var(--sp-space-1)}.sp-c-hfoyCM{padding:0 var(--sp-space-1) 0 var(--sp-space-1);border-radius:var(--sp-border-radius);margin-left:var(--sp-space-1);width:var(--sp-space-5);visibility:hidden}.sp-c-hfoyCM svg{width:var(--sp-space-3);height:var(--sp-space-3);display:block;position:relative;top:1px}.sp-c-fWymNx{margin:0;display:block;font-family:var(--sp-font-mono);font-size:var(--sp-font-size);color:var(--sp-syntax-color-plain);line-height:var(--sp-font-lineHeight)}.sp-c-euXojQ{display:flex;flex-direction:column;width:100%;position:relative;background-color:var(--sp-colors-surface1);gap:1px}.sp-c-euXojQ:has(.sp-stack){background-color:var(--sp-colors-surface2)}.sp-c-bpmgvy{transform:translate(-4px, 9px) scale(0.13, 0.13)}.sp-c-bpmgvy *{position:absolute;width:96px;height:96px}}--sxs{--sxs:3 sp-c-PJLV-kCOVwI-status-pass sp-c-PJLV-kEzYsr-status-fail sp-c-PJLV-gHAhSA-status-skip sp-c-PJLV-jgnHyR-status-title sp-c-PJLV-iCgxLS-status-run sp-c-PJLV-bnDZSy-status-pass sp-c-PJLV-eYuGwt-status-fail}@media{.sp-c-PJLV-kCOVwI-status-pass{color:var(--test-pass)}.sp-c-PJLV-kEzYsr-status-fail{color:var(--test-fail)}.sp-c-PJLV-gHAhSA-status-skip{color:var(--test-skip)}.sp-c-PJLV-jgnHyR-status-title{color:var(--test-title)}.sp-c-PJLV-iCgxLS-status-run{background:var(--test-run);color:var(--sp-colors-surface1)}.sp-c-PJLV-bnDZSy-status-pass{background:var(--test-pass);color:var(--sp-colors-surface1)}.sp-c-PJLV-eYuGwt-status-fail{background:var(--test-fail);color:var(--sp-colors-surface1)}}</style>
  
  <link rel="stylesheet" href="/_astro/_id_.90ba0a05.css" />
<link rel="stylesheet" href="/_astro/_id_.aac35682.css" /><script type="module" src="/_astro/hoisted.8f1e5039.js"></script></head>

  <body data-preload class="relative flex h-full flex-col bg-background font-sans text-on-background">
    <script>
  // @ts-check
  const storedThemeChoice = window.localStorage.getItem('__theme') ?? 'system'

  window.__setTheme = setTheme
  // prettier-ignore
  window.__setTheme(/** @type {ThemeChoice} */ (storedThemeChoice))

  /**
   * @type {(themeChoice: ThemeChoice) => void}
   */
  function setTheme(themeChoice) {
    let theme = themeChoice

    if (themeChoice === 'system') {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    document.body.classList.toggle('dark', theme === 'dark')

    window.localStorage.setItem('__theme', themeChoice)

    document.body.dispatchEvent(
      new CustomEvent('newTheme', {
        detail: {
          themeChoice,
          theme,
        },
      })
    )
  }

  window.addEventListener('storage', function (e) {
    const newTheme = e.newValue
    if (newTheme && newTheme && e.key === '__theme') {
      // prettier-ignore
      window.__setTheme(/** @type {ThemeChoice} */ (newTheme))
    }
  })

  window.addEventListener('load', function () {
    document.body.removeAttribute('data-preload')
  })
</script>

    <div class="w-full">
  <div class="pt-nav-height sm:hidden">
    <div class="fixed top-0 left-0 z-30 flex w-screen justify-between rounded-none border-b border-divider bg-background/90 py-4 px-horizontal-padding backdrop-blur">
  <div class="flex flex-row items-center gap-2 overflow-hidden">
    <a class="border-0" href="/posts/" data-testid="parent-page-link" aria-label="Go back to previous page">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
        </a>

    <h2 class="m-0 truncate font-sans font-normal">A Vim errorformat for pytest - Phelipe Teles</h2>
  </div>

  <button data-a11y-dialog-show="sidenav" class="btn btn-icon" data-testid="open-sidenav" aria-label="Open navigation sidebar">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="6" x2="20" y2="6"></line><line x1="4" y1="18" x2="20" y2="18"></line></svg>
  </button>
</div>
  </div>

  <div class="hidden h-full w-full sm:block">
    <div class="flex h-full w-full items-center justify-between bg-background pr-horizontal-padding">
  <div class="mx-auto py-3 flex h-full w-full max-w-content justify-between">
    <nav class="flex h-full justify-between px-horizontal-padding" aria-label="Main navigation">
      <ul class="m-0 flex list-none flex-row flex-nowrap items-center gap-2">
        <li>
                <a id="about" href="/" class="hover:bg-hover relative flex items-center justify-center rounded border-0 py-1 px-2 transition-colors duration-300">
                  About
                </a>
              </li><li>
                <a id="posts" href="/posts" class="bg-primary text-on-primary card hover:bg-primary-hover relative flex items-center justify-center rounded border-0 py-1 px-2 transition-colors duration-300" aria-current="page">
                  Posts
                </a>
              </li><li>
                <a id="resume" href="/resume" class="hover:bg-hover relative flex items-center justify-center rounded border-0 py-1 px-2 transition-colors duration-300">
                  Résumé
                </a>
              </li>
      </ul>
    </nav>

    <div class="h-full flex flex-row gap-2">
      <div class="relative flex h-full flex-row items-center">
  <span class="pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-sm">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages" slot="start-icon"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg>
      </span>

  <select class="card h-full appearance-none bg-surface py-1 text-center pl-8 pr-2" data-language-select aria-label="Choose a language">
    
  <option selected="true" value="en">English</option>
  <option value="pt">Português</option>

  

  </select>

  
</div>

      <div class="relative flex h-full flex-row items-center">
  <span class="pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-sm">
        <svg class="feather" viewBox="0 0 24 24" width="24" height="24">
    <title>Theme icon</title>

    <defs>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon" id="moon"><path d="M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun" id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor" id="monitor"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
    </defs>

    <use data-theme-select-icon href="#monitor"></use>
  </svg>
      </span>

  <select class="card h-full appearance-none bg-surface py-1 text-center px-10" data-theme-select aria-label="Choose a theme">
    
  <option value="light">Light</option>
  <option value="dark">Dark</option>
  <option value="system">System</option>

  

  

  </select>

  <span class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-sm">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down" slot="end-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
      </span>
</div>
    </div>
  </div>
</div>
  </div>
</div>
    <aside data-a11y-dialog="sidenav" aria-hidden="true" class="fixed z-50 h-full w-full" style="visibility: hidden;">
  <div data-a11y-dialog-hide class="fixed inset-0 -z-1 w-full bg-neutral-700 bg-opacity-75 backdrop-blur-sm">
  </div>

  <div role="document" class="ml-auto h-full w-3/4 rounded-none bg-background py-0 will-change-transform">
    <div class="flex h-full flex-col justify-between">
      <div class="mb-2 flex h-nav-height items-center justify-end px-horizontal-padding">
        <button data-a11y-dialog-hide class="btn btn-icon" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
      </div>

      <nav class="flex flex-1 flex-col" aria-label="Main navigation">
        <ul class="m-0 flex list-none flex-col items-center justify-center gap-4 px-horizontal-padding">
          <li class="w-full">
                  <a id="about" href="/" class="hover:bg-hover block w-full rounded border-0 p-2 text-center text-xl transition-colors duration-300">
                    About
                  </a>
                </li><li class="w-full">
                  <a id="posts" href="/posts" class="card bg-primary text-on-primary hover:bg-primary-hover block w-full rounded border-0 p-2 text-center text-xl transition-colors duration-300" aria-current="page">
                    Posts
                  </a>
                </li><li class="w-full">
                  <a id="resume" href="/resume" class="hover:bg-hover block w-full rounded border-0 p-2 text-center text-xl transition-colors duration-300">
                    Résumé
                  </a>
                </li>
        </ul>
      </nav>

      <div class="mb-4 flex h-12 flex-row items-center px-horizontal-padding">
        <div class="relative flex h-full flex-row items-center">
  <span class="pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-sm">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages" slot="start-icon"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg>
      </span>

  <select class="card h-full appearance-none bg-surface py-1 text-center pl-8 pr-2" data-language-select aria-label="Choose a language">
    
  <option selected="true" value="en">English</option>
  <option value="pt">Português</option>

  

  </select>

  
</div>
        <div class="relative flex h-full flex-row items-center">
  <span class="pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-sm">
        <svg class="feather" viewBox="0 0 24 24" width="24" height="24">
    <title>Theme icon</title>

    <defs>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon" id="moon"><path d="M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun" id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor" id="monitor"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
    </defs>

    <use data-theme-select-icon href="#monitor"></use>
  </svg>
      </span>

  <select class="card h-full appearance-none bg-surface py-1 text-center px-10" data-theme-select aria-label="Choose a theme">
    
  <option value="light">Light</option>
  <option value="dark">Dark</option>
  <option value="system">System</option>

  

  

  </select>

  <span class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-sm">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down" slot="end-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
      </span>
</div>
      </div>
    </div>
  </div>
</aside>

    
  

  <main class="grid grid-cols-layout">
    <div class="col-full max-w-full rounded-none px-horizontal-padding pt-8 shadow-none sm:col-content sm:px-0">
      <article>
        <header>
          <h1 class="mb-4 text-4xl">
            A Vim errorformat for pytest
          </h1>

          <div class="mb-4 flex flex-col gap-2">
            <div class="flex items-center gap-2">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-timer"><line x1="10" x2="14" y1="2" y2="2"></line><line x1="12" x2="15" y1="14" y2="11"></line><circle cx="12" cy="14" r="8"></circle></svg>

  <div>6 min.</div>
</div>

            <div class="flex items-center gap-2">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>

  <time datetime="2020-10-07">
    October 07, 2020
  </time>
</div>
          </div>

          <div class="mb-4 flex flex-wrap gap-2">
                <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em]" href="/tags/python">
  <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M49.33 62h29.159C86.606 62 93 55.132 93 46.981V19.183c0-7.912-6.632-13.856-14.555-15.176-5.014-.835-10.195-1.215-15.187-1.191-4.99.023-9.612.448-13.805 1.191C37.098 6.188 35 10.758 35 19.183V30h29v4H23.776c-8.484 0-15.914 5.108-18.237 14.811-2.681 11.12-2.8 17.919 0 29.53C7.614 86.983 12.569 93 21.054 93H31V79.952C31 70.315 39.428 62 49.33 62zm-1.838-39.11c-3.026 0-5.478-2.479-5.478-5.545 0-3.079 2.451-5.581 5.478-5.581 3.015 0 5.479 2.502 5.479 5.581-.001 3.066-2.465 5.545-5.479 5.545zm74.789 25.921C120.183 40.363 116.178 34 107.682 34H97v12.981C97 57.031 88.206 65 78.489 65H49.33C41.342 65 35 72.326 35 80.326v27.8c0 7.91 6.745 12.564 14.462 14.834 9.242 2.717 17.994 3.208 29.051 0C85.862 120.831 93 116.549 93 108.126V97H64v-4h43.682c8.484 0 11.647-5.776 14.599-14.66 3.047-9.145 2.916-17.799 0-29.529zm-41.955 55.606c3.027 0 5.479 2.479 5.479 5.547 0 3.076-2.451 5.579-5.479 5.579-3.015 0-5.478-2.502-5.478-5.579 0-3.068 2.463-5.547 5.478-5.547z"></path></svg>

  python

  
</a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em]" href="/tags/vim">
  <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M72.6 80.5c.2.2.6.5.9.5h5.3c.3 0 .7-.3.9-.5l1.4-1.5c.2-.2.3-.4.3-.6l1.5-5.1c.1-.5 0-1-.3-1.3l-1.1-.9c-.2-.2-.6-.1-.9-.1h-4.8l-.2-.2-.1-.1c-.2 0-.4-.1-.6.1L73 72c-.2 0-.3.5-.4.7L71 77.6c-.2.5-.1 1.1.3 1.5l1.3 1.4zm.8 26.4-.4.1h-1.2L79 85.9c.2-.7-.1-1.5-.8-1.7l-.4-.1H65.7c-.5.1-.9.5-1 1l-.7 2.5c-.2.7.3 1.3 1 1.5l.3-.1h1.8l-7.3 20.9c-.2.7.1 1.6.8 1.9l.4.3h11.2c.6 0 1.1-.5 1.3-1.1l.7-2.4c.3-.7-.1-1.5-.8-1.7zm53.1-19.7-1.9-2.5v-.1c-.3-.3-.6-.6-1-.6h-7.2c-.4 0-.7.4-1 .6l-2 2.4h-3.1l-2.1-2.4v-.1c-.2-.3-.6-.5-1-.5h-4l20.2-20.2-22.6-22.4L121 20.6v-9L118.2 8H77.3L74 11.5v2.9L62.7 3 55 10.5 52.6 8H12.2L9 11.7v9.4l3 2.9h3v26.1l-14 14 14 14v32l5.2 2.9h11.6l9.1-9.5 21.6 21.6L77 110.6c.1.4.4.5.9.7l.4-.2h9.4c.6 0 1.1-.1 1.2-.6l.7-2c.2-.7-.1-1.3-.8-1.5l-.4.1H88l3.4-10.7 2.3-2.3h5l-5 15.9c-.2.7.2 1.1.9 1.4l.4-.2h9.1c.5 0 1-.1 1.2-.6l.8-1.8c.3-.7-.1-1.3-.7-1.6-.1-.1-.3 0-.5 0h-.4l4.2-13h6.1l-5.1 15.9c-.2.7.2 1.1.9 1.3l.4-.3h10c.5 0 1-.1 1.2-.6l.8-2c.3-.7-.1-1.3-.8-1.5-.1-.1-.3.1-.5.1h-.7l5.6-18.5c.2-.5.1-1.1-.1-1.4zM62.7 4.9 74 16.2v4.7l3.4 4.1H79L50 53V25h3.3l2.7-4.2v-8.9l-.2-.3 6.9-6.7zM2.9 64.1 15 52v24.2L2.9 64.1zm38.9 38.3 58.4-60 21.4 21.5-20.2 20.2h-.1c-.3.1-.5.3-.7.5L98.5 87h-2.9l-2.2-2.4c-.2-.3-.6-.6-1-.6h-8.8c-.6 0-1.1.4-1.3 1l-.8 2.5c-.2.7.1 1.3.8 1.6h1.5L77.4 108l-15.1 15.2-20.5-20.8z"></path></svg>

  vim

  
</a>

                <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em]" href="/tags">
  

  ...

  
</a>
              </div>
        </header>

        <hr class="my-8">

        <div class="flex flex-col-reverse lg:grid lg:grid-cols-[minmax(65ch,1fr),1fr] lg:gap-8">
          <div data-blog-post class="[&#38;>pre]:full-width-on-mobile [&#38;>figure]:full-width-on-mobile [&#38;>[data-codeblock]]:full-width-on-mobile [&#38;>[data-codeblock]_pre]:max-sm:rounded-none [&#38;>[data-codeblock-with-header]]:mt-16 [&#38;_img]:mx-auto [&#38;>hr]:border-0 [&#38;>hr]:text-center [&#38;>hr]:after:content-['⁂'] [&#38;>pre]:my-8 [&#38;>figure]:my-8 [&#38;>img]:my-8 [&#38;>astro-island>div]:my-8 [&#38;>lite-youtube]:my-8 [&#38;>blockquote]:my-8 [&#38;>figure_video]:min-h-[15em] [&#38;_.katex-display]:overflow-x-auto [&#38;_.katex-display]:overflow-y-hidden [&#38;_*:where(h2,h3,h4,h5,h6)]:mb-8 [&#38;_*:where(h2,h3,h4,h5,h6)]:mt-4 [&#38;_*:where(h2,h3,h4,h5,h6)]:pt-4 [&#38;_*:where(h2,h3,h4,h5,h6)_a]:text-primary [&#38;_*:where(h2,h3,h4,h5,h6)_a]:border-0 [&#38;_*:where(h2,h3,h4,h5,h6)_a]:before:content-[&#34;_#&#34;]">
            
  <blockquote>
<p>Ah, errorformat, the feature everybody loves to hate. :) — lcd047, on
<a href="https://stackoverflow.com/a/29102995">Stack Overflow</a></p>
</blockquote>
<p>I really like Vim’s <code>:h errorformat</code> feature, but only when I manage to get it
right. Until then, I’m sure it will frustrate me more than once. It’s very
awkward to write one if the program’s output you’re trying to capture is not
trivial (e.g., <code>LaTeX</code>).</p>
<p>Recently, I committed to get it right for <code>pytest</code>. The cli allows customizing
how tracebacks are shown with the <code>--tb</code> option, e.g., <code>pytest --tb=short</code>, and
to control verbosity level with <code>-v</code>, <code>-vv</code> and <code>-q</code>. I went with
<code>pytest --tb=short -vv</code>.</p>
<p>To run pytest in Vim I then put this line in a <code>:h compiler</code> plugin (see
<code>:h write-compiler-plugin</code>):</p>


<div data-codeblock class="mt-16 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded"><code class="language-vim"><span class="line"><span style="color:#ABB2BF">CompilerSet makeprg=pytest\ --tb=short\ -vv\ $*\ %</span></span><span class="line"></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M72.6 80.5c.2.2.6.5.9.5h5.3c.3 0 .7-.3.9-.5l1.4-1.5c.2-.2.3-.4.3-.6l1.5-5.1c.1-.5 0-1-.3-1.3l-1.1-.9c-.2-.2-.6-.1-.9-.1h-4.8l-.2-.2-.1-.1c-.2 0-.4-.1-.6.1L73 72c-.2 0-.3.5-.4.7L71 77.6c-.2.5-.1 1.1.3 1.5l1.3 1.4zm.8 26.4-.4.1h-1.2L79 85.9c.2-.7-.1-1.5-.8-1.7l-.4-.1H65.7c-.5.1-.9.5-1 1l-.7 2.5c-.2.7.3 1.3 1 1.5l.3-.1h1.8l-7.3 20.9c-.2.7.1 1.6.8 1.9l.4.3h11.2c.6 0 1.1-.5 1.3-1.1l.7-2.4c.3-.7-.1-1.5-.8-1.7zm53.1-19.7-1.9-2.5v-.1c-.3-.3-.6-.6-1-.6h-7.2c-.4 0-.7.4-1 .6l-2 2.4h-3.1l-2.1-2.4v-.1c-.2-.3-.6-.5-1-.5h-4l20.2-20.2-22.6-22.4L121 20.6v-9L118.2 8H77.3L74 11.5v2.9L62.7 3 55 10.5 52.6 8H12.2L9 11.7v9.4l3 2.9h3v26.1l-14 14 14 14v32l5.2 2.9h11.6l9.1-9.5 21.6 21.6L77 110.6c.1.4.4.5.9.7l.4-.2h9.4c.6 0 1.1-.1 1.2-.6l.7-2c.2-.7-.1-1.3-.8-1.5l-.4.1H88l3.4-10.7 2.3-2.3h5l-5 15.9c-.2.7.2 1.1.9 1.4l.4-.2h9.1c.5 0 1-.1 1.2-.6l.8-1.8c.3-.7-.1-1.3-.7-1.6-.1-.1-.3 0-.5 0h-.4l4.2-13h6.1l-5.1 15.9c-.2.7.2 1.1.9 1.3l.4-.3h10c.5 0 1-.1 1.2-.6l.8-2c.3-.7-.1-1.3-.8-1.5-.1-.1-.3.1-.5.1h-.7l5.6-18.5c.2-.5.1-1.1-.1-1.4zM62.7 4.9 74 16.2v4.7l3.4 4.1H79L50 53V25h3.3l2.7-4.2v-8.9l-.2-.3 6.9-6.7zM2.9 64.1 15 52v24.2L2.9 64.1zm38.9 38.3 58.4-60 21.4 21.5-20.2 20.2h-.1c-.3.1-.5.3-.7.5L98.5 87h-2.9l-2.2-2.4c-.2-.3-.6-.6-1-.6h-8.8c-.6 0-1.1.4-1.3 1l-.8 2.5c-.2.7.1 1.3.8 1.6h1.5L77.4 108l-15.1 15.2-20.5-20.8z"></path></svg>
          </div>

          <div class="capitalize">vim</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="Z1CbIj1" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;CompilerSet makeprg=pytest\\ --tb=short\\ -vv\\ $*\\ %\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>So that I can run <code>pytest</code> with <code>:make</code> or even with more arguments with
<code>:make -k mytest</code>, which will replace the token <code>$*</code>.</p>
<p>It outputs something like this:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>============================= test session starts ==============================</span></span><span class="line"><span>platform linux -- Python 3.7.5, pytest-5.3.4, py-1.8.1, pluggy-0.13.1 -- /usr/bin/python3</span></span><span class="line"><span>cachedir: .pytest_cache</span></span><span class="line"><span>rootdir: /home/phelipe/Documentos/python/tests</span></span><span class="line"><span>plugins: cov-2.8.1</span></span><span class="line"><span>collecting ... collected 3 items</span></span><span class="line"><span></span></span><span class="line"><span>test_assert2.py::test_zero_division FAILED                               [ 33%]</span></span><span class="line"><span>test_assert2.py::test_recursion_depth FAILED                             [ 66%]</span></span><span class="line"><span>test_assert2.py::test_set_comparison FAILED                              [100%]</span></span><span class="line"><span></span></span><span class="line"><span>=================================== FAILURES ===================================</span></span><span class="line"><span>______________________________ test_zero_division ______________________________</span></span><span class="line"><span>test_assert2.py:5: in test_zero_division</span></span><span class="line"><span>    assert 1 / 0</span></span><span class="line"><span>E   ZeroDivisionError: division by zero</span></span><span class="line"><span>_____________________________ test_recursion_depth _____________________________</span></span><span class="line"><span>test_assert2.py:15: in test_recursion_depth</span></span><span class="line"><span>    f()</span></span><span class="line"><span>test_assert2.py:12: in f</span></span><span class="line"><span>    f()</span></span><span class="line"><span>test_assert2.py:12: in f</span></span><span class="line"><span>    f()</span></span><span class="line"><span>E   RecursionError: maximum recursion depth exceeded</span></span><span class="line"><span>!!! Recursion detected (same locals &amp; position)</span></span><span class="line"><span>_____________________________ test_set_comparison ______________________________</span></span><span class="line"><span>test_assert2.py:22: in test_set_comparison</span></span><span class="line"><span>    assert set1 == set2</span></span><span class="line"><span>E   AssertionError: assert {&#39;3&#39;, &#39;8&#39;, &#39;1&#39;, &#39;0&#39;} == {&#39;3&#39;, &#39;8&#39;, &#39;0&#39;, &#39;5&#39;}</span></span><span class="line"><span>E     Extra items in the left set:</span></span><span class="line"><span>E     &#39;1&#39;</span></span><span class="line"><span>E     Extra items in the right set:</span></span><span class="line"><span>E     &#39;5&#39;</span></span><span class="line"><span>E     Full diff:</span></span><span class="line"><span>E     - {&#39;3&#39;, &#39;8&#39;, &#39;1&#39;, &#39;0&#39;}</span></span><span class="line"><span>E     ?            -----</span></span><span class="line"><span>E     + {&#39;3&#39;, &#39;8&#39;, &#39;0&#39;, &#39;5&#39;}</span></span><span class="line"><span>E     ?               +++++</span></span><span class="line"><span>============================== 3 failed in 0.03s ===============================</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="Z2voufs" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;============================= test session starts ==============================\nplatform linux -- Python 3.7.5, pytest-5.3.4, py-1.8.1, pluggy-0.13.1 -- /usr/bin/python3\ncachedir: .pytest_cache\nrootdir: /home/phelipe/Documentos/python/tests\nplugins: cov-2.8.1\ncollecting ... collected 3 items\n\ntest_assert2.py::test_zero_division FAILED                               [ 33%]\ntest_assert2.py::test_recursion_depth FAILED                             [ 66%]\ntest_assert2.py::test_set_comparison FAILED                              [100%]\n\n=================================== FAILURES ===================================\n______________________________ test_zero_division ______________________________\ntest_assert2.py:5: in test_zero_division\n    assert 1 / 0\nE   ZeroDivisionError: division by zero\n_____________________________ test_recursion_depth _____________________________\ntest_assert2.py:15: in test_recursion_depth\n    f()\ntest_assert2.py:12: in f\n    f()\ntest_assert2.py:12: in f\n    f()\nE   RecursionError: maximum recursion depth exceeded\n!!! Recursion detected (same locals &amp; position)\n_____________________________ test_set_comparison ______________________________\ntest_assert2.py:22: in test_set_comparison\n    assert set1 == set2\nE   AssertionError: assert {&#39;3&#39;, &#39;8&#39;, &#39;1&#39;, &#39;0&#39;} == {&#39;3&#39;, &#39;8&#39;, &#39;0&#39;, &#39;5&#39;}\nE     Extra items in the left set:\nE     &#39;1&#39;\nE     Extra items in the right set:\nE     &#39;5&#39;\nE     Full diff:\nE     - {&#39;3&#39;, &#39;8&#39;, &#39;1&#39;, &#39;0&#39;}\nE     ?            -----\nE     + {&#39;3&#39;, &#39;8&#39;, &#39;0&#39;, &#39;5&#39;}\nE     ?               +++++\n============================== 3 failed in 0.03s ===============================\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>Now, for the difficult part.</p>
<h2 id="writing-an-errorformat">Writing an errorformat<a aria-hidden="true" tabindex="-1" href="#writing-an-errorformat"><span class="icon icon-link"></span></a></h2>
<p>To make Vim understand these lines so that we can jump to each error, we must
give patterns. It will then go through every line testing against those
patterns. From <code>:h errorformat</code>:</p>
<blockquote>
<p>Error format strings are always parsed pattern by pattern until the first
match occurs.</p>
</blockquote>
<p>The order is, thus, important here.</p>
<p>Also, the pattern has to match the entire line. That is to say the pattern is
always implicitly surrounded by a <code>^</code> and <code>$</code>.</p>
<p>We will need to use <code>:h errorformat-multi-line</code> because a single error spans
multiple lines.</p>
<p>I found out that <code>pytest</code> gives inconsistent patterns depending on the error
(test failure, missing fixture and syntax error), so I had to handle them
separately.</p>
<h2 id="handling-test-failures">Handling test failures<a aria-hidden="true" tabindex="-1" href="#handling-test-failures"><span class="icon icon-link"></span></a></h2>
<p>A test failure starts like this:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>______________________________ TEST_NAME ______________________________</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="rpDOm" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;______________________________ TEST_NAME ______________________________\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>The pattern for this is <code>%E_%\\+\ %o\ _%\\+</code>. Notice the overwhelming number of
escape characters needed because I’m passing the pattern as an option value,
like in <code>:set errorformat=%E_%\\+\ %o\ _%\\+</code> (see <code>:h option-backslash</code> to
understand).</p>
<p><code>%E</code> tells Vim how an error starts. <code>%o</code> matches a string and means <code>module</code> for
Vim (it’s just useful to give more context, the test name will be shown in the
quickfix list in place of the file name).</p>
<p>The error then continues with</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>/home/phelipe/test_py.py:5: in test_add</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="Z1c9Rgq" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;/home/phelipe/test_py.py:5: in test_add\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>So we add the pattern <code>%C%f:%l:\ in\ %o</code>. Where <code>%f</code> is filename, <code>%l</code> is line
number and <code>%C</code> says that this a continuation line.</p>
<p>I’m not really interested in capturing anything else. So I just give a pattern
that will match anything until the end pattern: <code>%C\ %.%#</code> (where <code>%.%#</code> is the
same as regular expression <code>.*</code>).</p>
<p>Now, I need to captura how a test failure ends:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>E   assert 3 == 1</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="1KfFoz" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;E   assert 3 == 1\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>A pattern for that may be <code>%ZE\ %\\{3}%m</code>. Where <code>%Z</code> is the token for end of
multi-line error.</p>
<p>I also want to filter out all the other lines that didn’t match, except the ones
starting with E, so I include <code>%-G%[%^E]%.%#</code>. To also exclude empty lines also:
<code>%-G</code>.</p>
<p><code>%G</code> has the purpose to capture (when prefixed with <code>+</code>) or ignore (when
prefixed with <code>-</code>) “general” messages.</p>
<p>The quickfix list will then look like:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>test_zero_division|5|  ZeroDivisionError: division by zero</span></span><span class="line"><span>test_recursion_depth|15|  RecursionError: maximum recursion depth exceeded</span></span><span class="line"><span>test_set_comparison|22|  AssertionError: assert {&#39;1&#39;, &#39;0&#39;, &#39;3&#39;, &#39;8&#39;} == {&#39;0&#39;, &#39;3&#39;, &#39;8&#39;, &#39;5&#39;}</span></span><span class="line"><span>|| E     Extra items in the left set:</span></span><span class="line"><span>|| E     &#39;1&#39;</span></span><span class="line"><span>|| E     Extra items in the right set:</span></span><span class="line"><span>|| E     &#39;5&#39;</span></span><span class="line"><span>|| E     Full diff:</span></span><span class="line"><span>|| E     - {&#39;1&#39;, &#39;0&#39;, &#39;3&#39;, &#39;8&#39;}</span></span><span class="line"><span>|| E     ?  -----</span></span><span class="line"><span>|| E     + {&#39;0&#39;, &#39;3&#39;, &#39;8&#39;, &#39;5&#39;}</span></span><span class="line"><span>|| E     ?               +++++</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="1zHGCx" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;test_zero_division|5|  ZeroDivisionError: division by zero\ntest_recursion_depth|15|  RecursionError: maximum recursion depth exceeded\ntest_set_comparison|22|  AssertionError: assert {&#39;1&#39;, &#39;0&#39;, &#39;3&#39;, &#39;8&#39;} == {&#39;0&#39;, &#39;3&#39;, &#39;8&#39;, &#39;5&#39;}\n|| E     Extra items in the left set:\n|| E     &#39;1&#39;\n|| E     Extra items in the right set:\n|| E     &#39;5&#39;\n|| E     Full diff:\n|| E     - {&#39;1&#39;, &#39;0&#39;, &#39;3&#39;, &#39;8&#39;}\n|| E     ?  -----\n|| E     + {&#39;0&#39;, &#39;3&#39;, &#39;8&#39;, &#39;5&#39;}\n|| E     ?               +++++\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>So far, it will understand tests failures but not syntax errors, import errors
and fixture errors, which would fail silently. This is no good.</p>
<h2 id="syntax-errors">Syntax errors<a aria-hidden="true" tabindex="-1" href="#syntax-errors"><span class="icon icon-link"></span></a></h2>
<p>For syntax errors, we need to parse something like this:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>============================= test session starts ==============================</span></span><span class="line"><span>platform linux -- Python 3.7.5, pytest-5.3.4, py-1.8.1, pluggy-0.13.1 -- /usr/bin/python3</span></span><span class="line"><span>cachedir: .pytest_cache</span></span><span class="line"><span>rootdir: /home/phelipe/Documentos/python/tests</span></span><span class="line"><span>plugins: cov-2.8.1</span></span><span class="line"><span>collecting ... collected 0 items / 1 error</span></span><span class="line"><span></span></span><span class="line"><span>==================================== ERRORS ====================================</span></span><span class="line"><span>_______________________ ERROR collecting test_assert2.py _______________________</span></span><span class="line"><span>../../../.local/lib/python3.7/site-packages/_pytest/python.py:493: in _importtestmodule</span></span><span class="line"><span>    mod = self.fspath.pyimport(ensuresyspath=importmode)</span></span><span class="line"><span>../../../.local/lib/python3.7/site-packages/py/_path/local.py:701: in pyimport</span></span><span class="line"><span>    __import__(modname)</span></span><span class="line"><span>&lt;frozen importlib._bootstrap&gt;:983: in _find_and_load</span></span><span class="line"><span>    ???</span></span><span class="line"><span>&lt;frozen importlib._bootstrap&gt;:967: in _find_and_load_unlocked</span></span><span class="line"><span>    ???</span></span><span class="line"><span>&lt;frozen importlib._bootstrap&gt;:677: in _load_unlocked</span></span><span class="line"><span>    ???</span></span><span class="line"><span>../../../.local/lib/python3.7/site-packages/_pytest/assertion/rewrite.py:134: in exec_module</span></span><span class="line"><span>    source_stat, co = _rewrite_test(fn, self.config)</span></span><span class="line"><span>../../../.local/lib/python3.7/site-packages/_pytest/assertion/rewrite.py:319: in _rewrite_test</span></span><span class="line"><span>    tree = ast.parse(source, filename=fn)</span></span><span class="line"><span>/usr/lib/python3.7/ast.py:35: in parse</span></span><span class="line"><span>    return compile(source, filename, mode, PyCF_ONLY_AST)</span></span><span class="line"><span>E     File &quot;/home/phelipe/Documentos/python/tests/test_assert2.py&quot;, line 5</span></span><span class="line"><span>E       assert 1  0</span></span><span class="line"><span>E                 ^</span></span><span class="line"><span>E   SyntaxError: invalid syntax</span></span><span class="line"><span>!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!</span></span><span class="line"><span>=============================== 1 error in 0.09s ===============================</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="Zl2gU" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;============================= test session starts ==============================\nplatform linux -- Python 3.7.5, pytest-5.3.4, py-1.8.1, pluggy-0.13.1 -- /usr/bin/python3\ncachedir: .pytest_cache\nrootdir: /home/phelipe/Documentos/python/tests\nplugins: cov-2.8.1\ncollecting ... collected 0 items / 1 error\n\n==================================== ERRORS ====================================\n_______________________ ERROR collecting test_assert2.py _______________________\n../../../.local/lib/python3.7/site-packages/_pytest/python.py:493: in _importtestmodule\n    mod = self.fspath.pyimport(ensuresyspath=importmode)\n../../../.local/lib/python3.7/site-packages/py/_path/local.py:701: in pyimport\n    __import__(modname)\n&lt;frozen importlib._bootstrap&gt;:983: in _find_and_load\n    ???\n&lt;frozen importlib._bootstrap&gt;:967: in _find_and_load_unlocked\n    ???\n&lt;frozen importlib._bootstrap&gt;:677: in _load_unlocked\n    ???\n../../../.local/lib/python3.7/site-packages/_pytest/assertion/rewrite.py:134: in exec_module\n    source_stat, co = _rewrite_test(fn, self.config)\n../../../.local/lib/python3.7/site-packages/_pytest/assertion/rewrite.py:319: in _rewrite_test\n    tree = ast.parse(source, filename=fn)\n/usr/lib/python3.7/ast.py:35: in parse\n    return compile(source, filename, mode, PyCF_ONLY_AST)\nE     File \&quot;/home/phelipe/Documentos/python/tests/test_assert2.py\&quot;, line 5\nE       assert 1  0\nE                 ^\nE   SyntaxError: invalid syntax\n!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!\n=============================== 1 error in 0.09s ===============================\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>What matters starts with an E. So this <code>errorformat</code> does the job:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>%EE\ \ \ \ \ File\ \&quot;%f\&quot;\\,\ line\ %l,</span></span><span class="line"><span>%CE\ \ \ %p^,</span></span><span class="line"><span>%ZE\ \ \ %[%^\ ]%\\@=%m,</span></span><span class="line"><span>%CE\ %.%#,</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="1vMv6t" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;%EE\\ \\ \\ \\ \\ File\\ \\\&quot;%f\\\&quot;\\\\,\\ line\\ %l,\n%CE\\ \\ \\ %p^,\n%ZE\\ \\ \\ %[%^\\ ]%\\\\@=%m,\n%CE\\ %.%#,\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>The second line has the pattern <code>%p</code>, which matches a sequence of <code>[ -.]</code> to get
its length to later use as column number.</p>
<p>The end pattern <code>%ZE %[%^ ]%\@=%m</code> matches a line starting with E, three spaces
exactly, which is needed to distinguish it from the others, see <code>:h \@=</code>.</p>
<p>We also need to include a continuation format (any line starting with E and
space that didn’t match the earlier ones).</p>
<h2 id="import-errors">Import errors<a aria-hidden="true" tabindex="-1" href="#import-errors"><span class="icon icon-link"></span></a></h2>
<p>Import errors are also slightly different:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>============================= test session starts ==============================</span></span><span class="line"><span>platform linux -- Python 3.7.5, pytest-5.3.4, py-1.8.1, pluggy-0.13.1 -- /usr/bin/python3</span></span><span class="line"><span>cachedir: .pytest_cache</span></span><span class="line"><span>rootdir: /home/phelipe</span></span><span class="line"><span>plugins: cov-2.8.1</span></span><span class="line"><span>collecting ... collected 0 items / 1 error</span></span><span class="line"><span></span></span><span class="line"><span>==================================== ERRORS ====================================</span></span><span class="line"><span>_________________________ ERROR collecting test_py.py __________________________</span></span><span class="line"><span>ImportError while importing test module &#39;/home/phelipe/test_py.py&#39;.</span></span><span class="line"><span>Hint: make sure your test modules/packages have valid Python names.</span></span><span class="line"><span>Traceback:</span></span><span class="line"><span>/home/phelipe/.local/lib/python3.7/site-packages/_pytest/python.py:493: in _importtestmodule</span></span><span class="line"><span>    mod = self.fspath.pyimport(ensuresyspath=importmode)</span></span><span class="line"><span>/home/phelipe/.local/lib/python3.7/site-packages/py/_path/local.py:701: in pyimport</span></span><span class="line"><span>    __import__(modname)</span></span><span class="line"><span>/home/phelipe/.local/lib/python3.7/site-packages/_pytest/assertion/rewrite.py:143: in exec_module</span></span><span class="line"><span>    exec(co, module.__dict__)</span></span><span class="line"><span>/home/phelipe/test_py.py:1: in &lt;module&gt;</span></span><span class="line"><span>    import pytes</span></span><span class="line"><span>E   ModuleNotFoundError: No module named &#39;pytes&#39;</span></span><span class="line"><span>!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!</span></span><span class="line"><span>=============================== 1 error in 0.09s ===============================</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="QDCUe" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;============================= test session starts ==============================\nplatform linux -- Python 3.7.5, pytest-5.3.4, py-1.8.1, pluggy-0.13.1 -- /usr/bin/python3\ncachedir: .pytest_cache\nrootdir: /home/phelipe\nplugins: cov-2.8.1\ncollecting ... collected 0 items / 1 error\n\n==================================== ERRORS ====================================\n_________________________ ERROR collecting test_py.py __________________________\nImportError while importing test module &#39;/home/phelipe/test_py.py&#39;.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\n/home/phelipe/.local/lib/python3.7/site-packages/_pytest/python.py:493: in _importtestmodule\n    mod = self.fspath.pyimport(ensuresyspath=importmode)\n/home/phelipe/.local/lib/python3.7/site-packages/py/_path/local.py:701: in pyimport\n    __import__(modname)\n/home/phelipe/.local/lib/python3.7/site-packages/_pytest/assertion/rewrite.py:143: in exec_module\n    exec(co, module.__dict__)\n/home/phelipe/test_py.py:1: in &lt;module&gt;\n    import pytes\nE   ModuleNotFoundError: No module named &#39;pytes&#39;\n!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!\n=============================== 1 error in 0.09s ===============================\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>It starts with <code>ImportError while...</code> so I included <code>%EImportError%.%#\&#39;%f\&#39;\.</code>
to capture the filename. It ends with an <code>E %m</code> and we already a pattern to
capture this. But we do need to tell how it continues, and it’s fine to just put
something that would match anything like <code>%C%.%#</code>.</p>
<h2 id="fixture-errors">Fixture errors<a aria-hidden="true" tabindex="-1" href="#fixture-errors"><span class="icon icon-link"></span></a></h2>
<p>Fixture errors are also in a different format:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>_____________________ ERROR at setup of test_zero_division _____________________</span></span><span class="line"><span>file /home/phelipe/Documentos/python/tests/test_assert2.py, line 4</span></span><span class="line"><span>  def test_zero_division(oi):</span></span><span class="line"><span>E       fixture &#39;oi&#39; not found</span></span><span class="line"><span>&gt;       available fixtures: cache, capfd, capfdbinary, caplog, capsys, capsysbinary, cov, doctest_namespace, monkeypatch, no_cover, pytestconfig, record_property, record_testsuite_property, re</span></span><span class="line"><span>cord_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory</span></span><span class="line"><span>&gt;       use &#39;pytest --fixtures [testpath]&#39; for help on them.</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="S0WgG" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;_____________________ ERROR at setup of test_zero_division _____________________\nfile /home/phelipe/Documentos/python/tests/test_assert2.py, line 4\n  def test_zero_division(oi):\nE       fixture &#39;oi&#39; not found\n&gt;       available fixtures: cache, capfd, capfdbinary, caplog, capsys, capsysbinary, cov, doctest_namespace, monkeypatch, no_cover, pytestconfig, record_property, record_testsuite_property, re\ncord_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory\n&gt;       use &#39;pytest --fixtures [testpath]&#39; for help on them.\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>Which can be handled by:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>\%Efile\ %f\\,\ line\ %l,</span></span><span class="line"><span>\%+ZE\ %mnot\ found,</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="Z1zbFkJ" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;\\%Efile\\ %f\\\\,\\ line\\ %l,\n\\%+ZE\\ %mnot\\ found,\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>The line <code>%+ZE %.%#not found</code> means that the error will match <code>E .*not found</code>,
the preceding <code>+</code> will include the whole line as a message.</p>
<h2 id="further-improvements">Further improvements<a aria-hidden="true" tabindex="-1" href="#further-improvements"><span class="icon icon-link"></span></a></h2>
<p>Notice how syntax, import and fixture errors are preceded with something like</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>    ______________________________ ERROR.* ______________________________</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="Z1XDSfp" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;    ______________________________ ERROR.* ______________________________\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>Which will match our pattern to catch the start of a test failure. There’s an
easy fix for this, just put <code>%-G_%\\+\ ERROR%.%#\ _%\\+</code> before that pattern, so
it will ignore it first.</p>
<p>Also, if all tests passed, capture it too:</p>


<div data-codeblock class="mt-8 group relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="relative shiki shadow shadow-shadow overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:mt-2 [&#38;_.popover]:mb-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700 [&#38;_.popover]:text-white rounded rounded-tl-none"><code><span class="line"><span>\%+G%[=]%\\+\ %*\\d\ passed%.%#,</span></span><span class="line"><span></span></span></code></pre>

  

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500 [&#38;_:is(button,a):focus-visible]:opacity-100 [&#38;_:is(button,a):focus-visible]:pointer-events-auto group-hover:[&#38;_:is(button,a)]:opacity-100 group-hover:[&#38;_:is(button,a)]:pointer-events-auto">
    

    <astro-island uid="1cRTY1" component-url="/_astro/CopyCodeBlockButton.1b831d65.js" component-export="default" renderer-url="/_astro/client.47a71f61.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;\\%+G%[=]%\\\\+\\ %*\\\\d\\ passed%.%#,\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<h2 id="conclusion">Conclusion<a aria-hidden="true" tabindex="-1" href="#conclusion"><span class="icon icon-link"></span></a></h2>
<p>Check out the whole
<a href="https://github.com/phelipetls/dotfiles/blob/master/.config/nvim/compiler/pytest.vim">compiler plugin</a>
in my dotfiles repo.</p>
<p>It’s tricky to figure out how to order the patterns, which I didn’t risk to
explain here since I wouldn’t say I fully understand how it works. It was mostly
by trial and error.</p>
<p>But be careful to not put more generic patterns first, because then they will
take precedence and the more specific ones will be ignored. At least, I did this
a lot.</p>
<p>If you’re interested, I recommend reading the
<a href="https://stackoverflow.com/a/29102995">Stack Overflow answer</a> and, of course,
<code>:h errorformat</code>.</p>
<p>If you’re committed to learn Vim, It’s worth it to know about this in order to
integrate a command line program into Vim.</p>

          </div>

          <aside class="min-w-0">
            <div style="--offset-from-top:1rem" class="w-full rounded shadow-sm shadow-shadow lg:sticky lg:top-[var(--offset-from-top)] lg:h-[calc(100vh-var(--offset-from-top)_*_2)] lg:bg-surface lg:p-4">
      <div class="hidden lg:flex lg:h-full lg:flex-col">
        <div class="flex justify-between gap-2">
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>

            <h2 class="m-0">Table of Contents</h2>
          </div>

          <div class="flex items-center transition-transform duration-100 ease-in group-open:rotate-180 lg:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
          </div>
        </div>

        <nav data-toc-wrapper class="mt-4 min-h-0 sm:overflow-y-auto [&#38;_a_*]:indent-0 [&#38;_ol]:m-0 [&#38;_ol]:list-none [&#38;_ol]:indent-4 [&#38;_ol_li[data-active]>a]:text-primary [&#38;_ol_li[data-active]]:before:bg-primary [&#38;_ol_li]:relative [&#38;_ol_li]:before:absolute [&#38;_ol_li]:before:left-0 [&#38;_ol_li]:before:top-0 [&#38;_ol_li]:before:h-full [&#38;_ol_li]:before:w-[1px] [&#38;_ol_li]:before:bg-divider [&#38;_ol_li]:before:content-[''] [&#38;_ol_li_a:hover]:bg-hover [&#38;_ol_li_a]:block [&#38;_ol_li_a]:truncate [&#38;_ol_li_a]:border-b-0 [&#38;_ol_li_a]:transition-colors [&#38;_ol_li_a]:duration-300 [&#38;_ol_ol]:indent-8 [&#38;_ol_ol_ol]:indent-12 [&#38;_ol_ol_ol_ol]:indent-16">
          <ol data-astro-toc="1"><li data-astro-toc="1">
          <a href="#writing-an-errorformat">Writing an errorformat</a>
          
        </li><li data-astro-toc="1">
          <a href="#handling-test-failures">Handling test failures</a>
          
        </li><li data-astro-toc="1">
          <a href="#syntax-errors">Syntax errors</a>
          
        </li><li data-astro-toc="1">
          <a href="#import-errors">Import errors</a>
          
        </li><li data-astro-toc="1">
          <a href="#fixture-errors">Fixture errors</a>
          
        </li><li data-astro-toc="1">
          <a href="#further-improvements">Further improvements</a>
          
        </li><li data-astro-toc="1">
          <a href="#conclusion">Conclusion</a>
          
        </li></ol>
        </nav>
      </div>

      <details class="card group mb-8 max-w-prose px-horizontal-padding py-4 lg:hidden" aria-label="Table of Contents">
        <summary class="list-none">
          <div class="flex justify-between gap-2">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>

              <h2 class="m-0">Table of Contents</h2>
            </div>

            <div class="flex items-center transition-transform duration-100 ease-in group-open:rotate-180 lg:hidden">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </div>
          </div>
        </summary>

        <nav data-toc-wrapper class="mt-4 [&#38;_ol]:m-0 [&#38;_ol]:list-outside [&#38;_ol]:px-horizontal-padding [&#38;_ol_li:not(:first-child)]:mt-1">
          <ol data-astro-toc="1"><li data-astro-toc="1">
          <a href="#writing-an-errorformat">Writing an errorformat</a>
          
        </li><li data-astro-toc="1">
          <a href="#handling-test-failures">Handling test failures</a>
          
        </li><li data-astro-toc="1">
          <a href="#syntax-errors">Syntax errors</a>
          
        </li><li data-astro-toc="1">
          <a href="#import-errors">Import errors</a>
          
        </li><li data-astro-toc="1">
          <a href="#fixture-errors">Fixture errors</a>
          
        </li><li data-astro-toc="1">
          <a href="#further-improvements">Further improvements</a>
          
        </li><li data-astro-toc="1">
          <a href="#conclusion">Conclusion</a>
          
        </li></ol>
        </nav>
      </details>
    </div>
          </aside>
        </div>
      </article>

      <hr class="full-width-on-mobile mt-8">

      <nav class="flex items-stretch sm:gap-4 full-width-on-mobile sm:my-8" aria-label="Posts navigation">
  <a class="sm:card flex max-w-1/2 flex-1 flex-col gap-2 border-0 px-horizontal-padding py-4 transition-colors duration-300 hover:bg-hover" href="/posts/async-make-in-nvim-with-lua">
        <span class="text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
        </span>

        Asynchronous :make in Neovim with Lua
      </a>

  <div class="border-l border-divider sm:hidden"></div>

  <a class="sm:card flex max-w-1/2 flex-1 flex-col-reverse items-end justify-end gap-2 border-0 px-horizontal-padding py-4 text-right transition-colors duration-300 hover:bg-hover" href="/posts/deploying-flask-app-on-heroku">
        Deploying a Flask app on a Heroku free dyno

        <span class="text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
        </span>
      </a>
</nav>

      <hr class="full-width-on-mobile mb-8">
    </div>
  </main>


    <footer class="border-t border-divider bg-background sm:border-0">
  <div class="mx-auto flex w-full max-w-content flex-col items-center px-horizontal-padding pt-4 pb-8 sm:justify-between">
    <nav aria-label="Contacts" class="flex gap-2">
  <a class="rounded-full transition-colors duration-300 hover:bg-hover p-2 [&_svg]:transition-colors [&_svg]:duration-300 hover:text-primary border-0" id="contact-email" href="phelipe_teles@hotmail.com" aria-label="E-mail">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
  
</a>

  <a class="rounded-full transition-colors duration-300 hover:bg-hover p-2 [&_svg]:transition-colors [&_svg]:duration-300 hover:text-primary border-0" id="contact-linkedin" href="https://linkedin.com/in/phelipeteles" aria-label="LinkedIn">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
  
</a>

  <a class="rounded-full transition-colors duration-300 hover:bg-hover p-2 [&_svg]:transition-colors [&_svg]:duration-300 hover:text-primary border-0" id="contact-github" href="https://github.com/phelipetls" aria-label="GitHub">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>
  
</a>
</nav>

    <span class="text-center">All content is under a
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>
license.
</span>
  </div>
</footer>
  </body></html>