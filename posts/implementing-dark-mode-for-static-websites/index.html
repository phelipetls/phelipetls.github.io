<!DOCTYPE html>
<html class="h-full min-h-0 text-base sm:text-lg selection:bg-primary selection:text-on-primary scroll-smooth scroll-pt-nav-height sm:scroll-pt-0" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="deploy-date" content="2023-05-31">
    <meta name="author" content="Phelipe Teles">
    <meta name="color-scheme" content="dark light">

    <title>Implementing dark mode for static websites - Phelipe Teles | Phelipe Teles</title>



<link rel="canonical" href="https://phelipetls.github.io/posts/implementing-dark-mode-for-static-websites/">

<meta name="description" content="Implementing dark mode for a static website is not as simple as you may
initially think. There are some hacky things we should do to provide the best
experience and avoid things like flash of incorrect
theme on reload,
handling transitions, persistence etc.">

<meta name="robots" content="index, follow">

<meta property="og:title" content="Implementing dark mode for static websites">
<meta property="og:type" content="article">
<meta property="og:image" content="/posts/implementing-dark-mode-for-static-websites/image.png">
<meta property="og:url" content="https://phelipetls.github.io/posts/implementing-dark-mode-for-static-websites/">


<meta property="article:published_time" content="2021-04-29T00:00:00Z">


<meta property="article:author" content="Phelipe Teles">

<meta property="article:tag" content="hugo"><meta property="article:tag" content="html"><meta property="article:tag" content="css"><meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary_large_image">



<meta content="/posts/implementing-dark-mode-for-static-websites/image.png" name="twitter:image">

    
    <meta name="publish-date" content="2021-04-29">
    <meta name="keywords" content="hugo, html, css, javascript"><meta name="description" content="Implementing dark mode for a static website is not as simple as you may
initially think. There are some hacky things we should do to provide the best
experience and avoid things like flash of incorrect
theme on reload,
handling transitions, persistence etc.">

    <style id="sandpack">--sxs{--sxs:1 sp-k-eyOShd sp-k-iOHdLQ}@media{@keyframes sp-k-eyOShd{0%{opacity:0}100%{opacity:1}}@keyframes sp-k-iOHdLQ{0%{transform:rotateX(-25.5deg) rotateY(45deg)}100%{transform:rotateX(-25.5deg) rotateY(405deg)}}}--sxs{--sxs:2 sp-c-gMfcns sp-c-bxeRRt sp-c-hfoyCM sp-c-fWymNx sp-c-euXojQ sp-c-bpmgvy sp-c-PJLV}@media{.sp-c-gMfcns svg{margin:auto}.sp-c-bxeRRt{-webkit-appearance:none;appearance:none;outline:none;display:flex;align-items:center;font-size:inherit;font-family:inherit;background-color:transparent;transition:color var(--sp-transitions-default), background var(--sp-transitions-default);cursor:pointer;color:var(--sp-colors-clickable);border:0;text-decoration:none}.sp-c-bxeRRt:disabled{color:var(--sp-colors-disabled)}.sp-c-bxeRRt:hover:not(:disabled,[data-active='true']){color:var(--sp-colors-hover)}.sp-c-bxeRRt[data-active="true"]{color:var(--sp-colors-accent)}.sp-c-bxeRRt svg{min-width:var(--sp-space-4);width:var(--sp-space-4);height:var(--sp-space-4)}.sp-c-bxeRRt.sp-c-gMfcns{padding:var(--sp-space-1);height:var(--sp-space-7);display:flex}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:not(:has(span)){width:var(--sp-space-7)}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:has(svg + span){padding-right:var(--sp-space-3);padding-left:var(--sp-space-2);gap:var(--sp-space-1)}.sp-c-hfoyCM{padding:0 var(--sp-space-1) 0 var(--sp-space-1);border-radius:var(--sp-border-radius);margin-left:var(--sp-space-1);width:var(--sp-space-5);visibility:hidden}.sp-c-hfoyCM svg{width:var(--sp-space-3);height:var(--sp-space-3);display:block;position:relative;top:1px}.sp-c-fWymNx{margin:0;display:block;font-family:var(--sp-font-mono);font-size:var(--sp-font-size);color:var(--sp-syntax-color-plain);line-height:var(--sp-font-lineHeight)}.sp-c-euXojQ{display:flex;flex-direction:column;width:100%;position:relative;background-color:var(--sp-colors-surface1);gap:1px}.sp-c-euXojQ:has(.sp-stack){background-color:var(--sp-colors-surface2)}.sp-c-bpmgvy{transform:translate(-4px, 9px) scale(0.13, 0.13)}.sp-c-bpmgvy *{position:absolute;width:96px;height:96px}}--sxs{--sxs:3 sp-c-PJLV-kCOVwI-status-pass sp-c-PJLV-kEzYsr-status-fail sp-c-PJLV-gHAhSA-status-skip sp-c-PJLV-jgnHyR-status-title sp-c-PJLV-iCgxLS-status-run sp-c-PJLV-bnDZSy-status-pass sp-c-PJLV-eYuGwt-status-fail}@media{.sp-c-PJLV-kCOVwI-status-pass{color:var(--test-pass)}.sp-c-PJLV-kEzYsr-status-fail{color:var(--test-fail)}.sp-c-PJLV-gHAhSA-status-skip{color:var(--test-skip)}.sp-c-PJLV-jgnHyR-status-title{color:var(--test-title)}.sp-c-PJLV-iCgxLS-status-run{background:var(--test-run);color:var(--sp-colors-surface1)}.sp-c-PJLV-bnDZSy-status-pass{background:var(--test-pass);color:var(--sp-colors-surface1)}.sp-c-PJLV-eYuGwt-status-fail{background:var(--test-fail);color:var(--sp-colors-surface1)}}</style>
  
  <link rel="stylesheet" href="/_astro/_id_.83973bf1.css" />
<link rel="stylesheet" href="/_astro/_id_.f7b41e74.css" /><script type="module" src="/_astro/hoisted.e7ae9d25.js"></script></head>

  <body data-preload class="relative flex h-full flex-col bg-background font-sans text-on-background">
    <script>
  // @ts-check
  const storedThemeChoice = window.localStorage.getItem('__theme') ?? 'system'

  window.__setTheme = setTheme
  // prettier-ignore
  window.__setTheme(/** @type {ThemeChoice} */ (storedThemeChoice))

  /**
   * @type {(themeChoice: ThemeChoice) => void}
   */
  function setTheme(themeChoice) {
    let theme = themeChoice

    if (themeChoice === 'system') {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    document.body.classList.toggle('dark', theme === 'dark')

    window.localStorage.setItem('__theme', themeChoice)

    document.body.dispatchEvent(
      new CustomEvent('newTheme', {
        detail: {
          themeChoice,
          theme,
        },
      })
    )
  }

  window.addEventListener('storage', function (e) {
    const newTheme = e.newValue
    if (newTheme && newTheme && e.key === '__theme') {
      // prettier-ignore
      window.__setTheme(/** @type {ThemeChoice} */ (newTheme))
    }
  })

  window.addEventListener('load', function () {
    document.body.removeAttribute('data-preload')
  })
</script>

    <div class="w-full">
  <div class="pt-nav-height sm:hidden">
    <div class="fixed top-0 left-0 z-30 flex w-screen justify-between rounded-none border-b border-divider bg-background/90 py-4 px-horizontal-padding backdrop-blur">
  <div class="flex flex-row items-center gap-2 overflow-hidden">
    <a href="/posts/" data-testid="parent-page-link" aria-label="Go back to previous page">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
        </a>

    <h2 class="m-0 truncate font-sans font-normal">Implementing dark mode for static websites - Phelipe Teles</h2>
  </div>

  <button type="button" class="hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-full p-2 bg-transparent" data-a11y-dialog-show="sidenav" data-testid="open-sidenav" aria-label="Open navigation sidebar">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg>
  </button>
</div>
  </div>

  <div class="hidden h-full w-full sm:block">
    <div class="flex h-full w-full items-center justify-between bg-background pr-horizontal-padding">
  <div class="mx-auto py-3 flex h-full w-full max-w-content justify-between">
    <nav class="flex h-full justify-between px-horizontal-padding" aria-label="Main navigation">
      <ul class="m-0 flex list-none flex-row flex-nowrap items-center gap-2">
        <li>
                <a id="about" href="/" class="p-2 group">
                  <span class="underline underline-offset-8 decoration-2 decoration-transparent group-hover:decoration-hover">
                    About
                  </span>
                </a>
              </li><li>
                <a id="posts" href="/posts" class="p-2 group" aria-current="page">
                  <span class="underline underline-offset-8 decoration-2 decoration-primary group-hover:decoration-primary-hover">
                    Posts
                  </span>
                </a>
              </li><li>
                <a id="resume" href="/resume" class="p-2 group">
                  <span class="underline underline-offset-8 decoration-2 decoration-transparent group-hover:decoration-hover">
                    Résumé
                  </span>
                </a>
              </li>
      </ul>
    </nav>

    <div class="h-full flex flex-row gap-2">
      

      <div style="--cols:3" class="rounded items-center grid grid-cols-[repeat(var(--cols),1fr)] bg-surface shadow-sm shadow-shadow">
  <select class="py-1 rounded bg-inherit appearance-none text-center row-start-1 col-[1_/_calc(var(--cols)+1)] px-8" data-theme-select aria-label="Choose a theme">
    
  <option value="light">Light</option>
  <option value="dark">Dark</option>
  <option value="system">System</option>

  

  </select>

  <span class="pointer-events-none col-start-1 row-start-1 px-1 text-sm">
        <svg class="feather" viewBox="0 0 24 24" width="24" height="24">
    <title>Theme icon</title>

    <defs>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon" id="moon"><path d="M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun" id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor" id="monitor"><rect width="20" height="14" x="2" y="3" rx="2" ry="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg>
    </defs>

    <use data-theme-select-icon href="#monitor"></use>
  </svg>
      </span>

  <span class="flex flex-row justify-end pointer-events-none text-sm row-start-1 px-1 col-[var(--cols)_/_var(--cols)]">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down" slot="end-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
  </span>
</div>
    </div>
  </div>
</div>
  </div>
</div>
    <aside data-a11y-dialog="sidenav" aria-hidden="true" class="fixed z-50 h-full w-full" style="visibility: hidden;">
  <div data-a11y-dialog-hide class="fixed inset-0 -z-1 w-full bg-neutral-700 bg-opacity-75 backdrop-blur-sm">
  </div>

  <div role="document" class="ml-auto h-full flex flex-col w-3/4 rounded-none bg-background py-0 will-change-transform">
    <div class="mb-2 flex h-nav-height items-center justify-end px-horizontal-padding">
      <button type="button" data-a11y-dialog-hide="true" aria-label="Close" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-full p-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><line x1="18" x2="6" y1="6" y2="18"></line><line x1="6" x2="18" y1="6" y2="18"></line></svg>
      </button>
    </div>

    <nav class="flex flex-col" aria-label="Main navigation">
      <ul class="m-0 flex list-none flex-col items-center justify-center gap-2 px-horizontal-padding">
        <li class="w-full">
                <a id="about" href="/" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded py-1 px-2 bg-background text-on-background">About</a>
              </li><li class="w-full">
                <a id="posts" href="/posts" aria-current="page" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded py-1 px-2 bg-primary text-on-primary hover:bg-primary-hover shadow-sm shadow-shadow">Posts</a>
              </li><li class="w-full">
                <a id="resume" href="/resume" class="flex items-center justify-center flex-row gap-2 transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded py-1 px-2 bg-background text-on-background">Résumé</a>
              </li>
      </ul>
    </nav>

    <div class="flex flex-col gap-2 pb-4 mt-auto px-horizontal-padding [&_div]:flex-1">
      
      <div style="--cols:3" class="rounded items-center grid grid-cols-[repeat(var(--cols),1fr)] bg-surface shadow-sm shadow-shadow">
  <select class="py-1 rounded bg-inherit appearance-none text-center row-start-1 col-[1_/_calc(var(--cols)+1)] px-8" data-theme-select aria-label="Choose a theme">
    
  <option value="light">Light</option>
  <option value="dark">Dark</option>
  <option value="system">System</option>

  

  </select>

  <span class="pointer-events-none col-start-1 row-start-1 px-1 text-sm">
        <svg class="feather" viewBox="0 0 24 24" width="24" height="24">
    <title>Theme icon</title>

    <defs>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon" id="moon"><path d="M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun" id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor" id="monitor"><rect width="20" height="14" x="2" y="3" rx="2" ry="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg>
    </defs>

    <use data-theme-select-icon href="#monitor"></use>
  </svg>
      </span>

  <span class="flex flex-row justify-end pointer-events-none text-sm row-start-1 px-1 col-[var(--cols)_/_var(--cols)]">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down" slot="end-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
  </span>
</div>
    </div>
  </div>
</aside>

    
  

  <main class="grid grid-cols-layout">
    <div class="pt-8 sm:col-content px-0">
      <article>
        <header class="flex flex-col sm:items-center">
          <h1 class="mb-4 text-4xl max-w-prose">
            Implementing dark mode for static websites
          </h1>

          <div class="mb-4 flex gap-2 flex-row">
            <div class="flex items-center gap-2">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>

  <time datetime="2021-04-29">
    April 29, 2021
  </time>
</div>
            <div class="flex items-center gap-2">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-timer"><line x1="10" x2="14" y1="2" y2="2"></line><line x1="12" x2="15" y1="14" y2="11"></line><circle cx="12" cy="14" r="8"></circle></svg>

  <div>3 min.</div>
</div>
          </div>

          <div class="mb-4 flex max-w-lg flex-wrap gap-2">
                <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-2" href="/tags/hugo">
  

  hugo

  
</a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-1" href="/tags/html">
  <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="m9.032 2 10.005 112.093 44.896 12.401 45.02-12.387L118.968 2H9.032zm89.126 26.539-.627 7.172L97.255 39H44.59l1.257 14h50.156l-.336 3.471-3.233 36.119-.238 2.27L64 102.609v.002l-.034.018-28.177-7.423L33.876 74h13.815l.979 10.919L63.957 89H64v-.546l15.355-3.875L80.959 67H33.261l-3.383-38.117L29.549 25h68.939l-.33 3.539z"></path></svg>

  html

  
</a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-1" href="/tags/css">
  <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="m8.76 1 10.055 112.883 45.118 12.58 45.244-12.626L119.24 1H8.76zm89.591 25.862-3.347 37.605.01.203-.014.467v-.004l-2.378 26.294-.262 2.336L64 101.607v.001l-.022.019-28.311-7.888L33.75 72h13.883l.985 11.054 15.386 4.17-.004.008v-.002l15.443-4.229L81.075 65H48.792l-.277-3.043-.631-7.129L47.553 51h34.749l1.264-14H30.64l-.277-3.041-.63-7.131L29.401 23h69.281l-.331 3.862z"></path></svg>

  css

  
</a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-1" href="/tags/javascript">
  <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z"></path></svg>

  javascript

  
</a>

                <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-sm shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap [&#38;_svg]:w-[1em] [&#38;_svg]:h-[1em] order-2" href="/tags">
  

  ...

  
</a>
              </div>
        </header>

        <hr class="my-8">

        <div data-has-toc="true" class="group data-[has-toc=true]:flex data-[has-toc=true]:flex-col-reverse data-[has-toc=true]:lg:grid data-[has-toc=true]:lg:gap-8 data-[has-toc=true]:lg:grid-cols-[minmax(70ch,1fr),1fr]">
          <div data-blog-post class="sm:group-data-[has-toc=false]:max-w-prose sm:group-data-[has-toc=false]:mx-auto [&#38;>pre]:my-8 [&#38;>pre]:full-width-on-mobile [&#38;>img]:my-8 [&#38;_img]:mx-auto [&#38;>hr]:border-0 [&#38;>hr]:text-center [&#38;>hr]:after:content-['⁂'] [&#38;>figure]:my-8 [&#38;>figure]:full-width-on-mobile [&#38;>astro-island>div]:my-8 [&#38;>lite-youtube]:my-8 [&#38;>blockquote]:my-8 [&#38;>figure_video]:min-h-[15em] [&#38;_.katex-display]:overflow-x-auto [&#38;_.katex-display]:overflow-y-hidden">
            
  <p>Implementing dark mode for a static website is not as simple as you may
initially think. There are some hacky things we should do to provide the best
experience and avoid things like <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://css-tricks.com/flash-of-inaccurate-color-theme-fart/">flash of incorrect
theme</a> on reload,
handling transitions, persistence etc.</p>
<p>In this blog post I’ll dive into the implementation details on how to make it
work in general and then on how to implement it in Hugo-powered websites.</p>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="css">
  
  CSS<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#css"><span class="icon icon-link"></span></a>

</h2>
<p>CSS variables makes it very easy to define which colors you’ll use for dark or
light mode:</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-css"><span class="line"><span style="color:#56B6C2">:root</span><span style="color:#ABB2BF"> {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">--black</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">#000000</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">--white</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">#ffffff</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">}</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#E06C75">body</span><span style="color:#C678DD">[</span><span style="color:#D19A66">data-theme</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;light&quot;</span><span style="color:#C678DD">]</span><span style="color:#ABB2BF"> {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">--bg-color</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">var</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">--white</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">--fg-color</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">var</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">--black</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">}</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#E06C75">body</span><span style="color:#C678DD">[</span><span style="color:#D19A66">data-theme</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;dark&quot;</span><span style="color:#C678DD">]</span><span style="color:#ABB2BF"> {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">--bg-color</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">var</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">--black</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">--fg-color</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">var</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">--white</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="m8.76 1 10.055 112.883 45.118 12.58 45.244-12.626L119.24 1H8.76zm89.591 25.862-3.347 37.605.01.203-.014.467v-.004l-2.378 26.294-.262 2.336L64 101.607v.001l-.022.019-28.311-7.888L33.75 72h13.883l.985 11.054 15.386 4.17-.004.008v-.002l15.443-4.229L81.075 65H48.792l-.277-3.043-.631-7.129L47.553 51h34.749l1.264-14H30.64l-.277-3.041-.63-7.131L29.401 23h69.281l-.331 3.862z"></path></svg>
          </div>

          <div class="capitalize">CSS</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="Z1U0hAm" prefix="r0" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;:root {\n  --black: #000000;\n  --white: #ffffff;\n}\n\nbody[data-theme=\&quot;light\&quot;] {\n  --bg-color: var(--white);\n  --fg-color: var(--black);\n}\n\nbody[data-theme=\&quot;dark\&quot;] {\n  --bg-color: var(--black);\n  --fg-color: var(--white);\n}\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>And that’s it.</p>
<p>To toggle from one theme to another we just need some JavaScript:</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-js"><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">button</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">querySelector</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;button.theme-toggler&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#E5C07B">button</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addEventListener</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;click&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF">() {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">body</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">dataset</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">theme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">===</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;dark&quot;</span><span style="color:#ABB2BF">) {</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">body</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">setAttribute</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;data-theme&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;light&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">  }</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">body</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">setAttribute</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;data-theme&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;dark&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">});</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z"></path></svg>
          </div>

          <div class="capitalize">JavaScript</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="1q0TAM" prefix="r1" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;const button = document.querySelector(\&quot;button.theme-toggler\&quot;);\n\nbutton.addEventListener(\&quot;click\&quot;, function() {\n  if (document.body.dataset.theme === \&quot;dark\&quot;) {\n    document.body.setAttribute(\&quot;data-theme\&quot;, \&quot;light\&quot;);\n    return;\n  }\n  document.body.setAttribute(\&quot;data-theme\&quot;, \&quot;dark\&quot;);\n});\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="theme-persistence">
  
  Theme persistence<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#theme-persistence"><span class="icon icon-link"></span></a>

</h2>
<p>To make the theme persist, we’ll use
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage"><code>localStorage</code></a>.</p>
<p>Every time the theme changes, we save it to <code>localStorage</code>. When the page
reloads, we read from <code>localStorage</code> and change the theme:</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-js"><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">storedTheme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">localStorage</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getItem</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;__theme&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">storedTheme</span><span style="color:#ABB2BF">) {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E">/* Change theme to storedTheme */</span></span><span class="line"><span style="color:#ABB2BF">}</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">button</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">querySelector</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;button.theme-switcher&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#E5C07B">button</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addEventListener</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;click&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF">() {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E">/* Toggle theme */</span></span><span class="line"><span style="color:#ABB2BF">});</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z"></path></svg>
          </div>

          <div class="capitalize">JavaScript</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="Z1sGJRX" prefix="r2" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;const storedTheme = localStorage.getItem(\&quot;__theme\&quot;);\n\nif (storedTheme) {\n  /* Change theme to storedTheme */\n}\n\nconst button = document.querySelector(\&quot;button.theme-switcher\&quot;);\n\nbutton.addEventListener(\&quot;click\&quot;, function() {\n  /* Toggle theme */\n});\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>We just need to put this in a <code>script</code> tag at the end of the <code>body</code> tag to make
it work!… except the page will flash on reload.</p>
<p>This is because, at the time the script runs, the page has already been drawn in
light mode, and just then we change it to dark mode.</p>
<p>The fix is to set the theme from <code>localStorage</code> <em>as early as possible</em>. But this
also means that we won’t be able to add an event listener to the button because
it has yet to be created:</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-html"><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">body</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">data-theme</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;light&quot;</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span style="color:#ABB2BF">  &lt;</span><span style="color:#E06C75">script</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#56B6C2">&lt;!--</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">load</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">theme</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">from</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">localStorage</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">--&gt;</span></span><span class="line"><span style="color:#ABB2BF">  &lt;/</span><span style="color:#E06C75">script</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">  ...</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">  &lt;</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">&gt;Change theme&lt;/</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">  &lt;</span><span style="color:#E06C75">script</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#56B6C2">&lt;!--</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">add</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">button</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">logic</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">--&gt;</span></span><span class="line"><span style="color:#ABB2BF">  &lt;/</span><span style="color:#E06C75">script</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span style="color:#ABB2BF">&lt;/</span><span style="color:#E06C75">body</span><span style="color:#ABB2BF">&gt;</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="m9.032 2 10.005 112.093 44.896 12.401 45.02-12.387L118.968 2H9.032zm89.126 26.539-.627 7.172L97.255 39H44.59l1.257 14h50.156l-.336 3.471-3.233 36.119-.238 2.27L64 102.609v.002l-.034.018-28.177-7.423L33.876 74h13.815l.979 10.919L63.957 89H64v-.546l15.355-3.875L80.959 67H33.261l-3.383-38.117L29.549 25h68.939l-.33 3.539z"></path></svg>
          </div>

          <div class="capitalize">HTML</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="9xeIq" prefix="r3" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;&lt;body data-theme=\&quot;light\&quot;&gt;\n  &lt;script&gt;\n    &lt;!-- load theme from localStorage --&gt;\n  &lt;/script&gt;\n\n  ...\n\n  &lt;button&gt;Change theme&lt;/button&gt;\n\n  &lt;script&gt;\n    &lt;!-- add button logic --&gt;\n  &lt;/script&gt;\n&lt;/body&gt;\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>But that way we won’t be able to share logic between scripts unless (here comes
the hack) we use a global variable.</p>
<p>In the first script, right after the body tag, we set the theme from
<code>localStorage</code>.</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-js"><span class="line"><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">__setTheme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">newTheme</span><span style="color:#ABB2BF">) {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">body</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">setAttribute</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;data-theme&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">newTheme</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">localStorage</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">setItem</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;__theme&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">newTheme</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E">// More logic...</span></span><span class="line"><span style="color:#ABB2BF">};</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">storedTheme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">localStorage</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getItem</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;__theme&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">storedTheme</span><span style="color:#ABB2BF">) {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">__setTheme</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">storedTheme</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z"></path></svg>
          </div>

          <div class="capitalize">JavaScript</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="ycCA" prefix="r4" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;window.__setTheme = function(newTheme) {\n  document.body.setAttribute(\&quot;data-theme\&quot;, newTheme);\n  localStorage.setItem(\&quot;__theme\&quot;, newTheme);\n  // More logic...\n};\n\nconst storedTheme = localStorage.getItem(\&quot;__theme\&quot;);\n\nif (storedTheme) {\n  window.__setTheme(storedTheme);\n}\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>Then we make the button change the theme:</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-js"><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">button</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">querySelector</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;button.theme-toggler&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#E5C07B">button</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addEventListener</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;click&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF">() {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">body</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">dataset</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">theme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">===</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;dark&quot;</span><span style="color:#ABB2BF">) {</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">__setTheme</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;light&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">  }</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">__setTheme</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;dark&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">});</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z"></path></svg>
          </div>

          <div class="capitalize">JavaScript</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="5JeMU" prefix="r5" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;const button = document.querySelector(\&quot;button.theme-toggler\&quot;);\n\nbutton.addEventListener(\&quot;click\&quot;, function() {\n  if (document.body.dataset.theme === \&quot;dark\&quot;) {\n    window.__setTheme(\&quot;light\&quot;);\n    return;\n  }\n  window.__setTheme(\&quot;dark\&quot;);\n});\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<aside class="my-8 flex gap-4 sm:rounded border-y sm:border-y-0 sm:border-l bg-surface full-width-on-mobile px-horizontal-padding py-4 sm:shadow-sm sm:shadow-shadow sm:mx-0 flex-row border-note">
  <div class="">
    <div class="text-note">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info"><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="16" y2="12"></line><line x1="12" x2="12.01" y1="8" y2="8"></line></svg>
  </div>
  </div>

  <article class="overflow-x-hidden max-w-prose [&_h2]:first-of-type:mt-0 [&_h2]:first-of-type:pt-0">
    
  

  <p>The script tag <em>has</em> to be inline, otherwise the flash will still
happen.</p>

  </article>
</aside>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="transition-between-themes">
  
  Transition between themes<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#transition-between-themes"><span class="icon icon-link"></span></a>

</h2>
<p>This works, but we want some animations:</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-css"><span class="line"><span style="color:#E06C75">body</span><span style="color:#ABB2BF"> {</span></span><span class="line"><span style="color:#ABB2BF">  transition: </span><span style="color:#D19A66">color</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0.25</span><span style="color:#E06C75">s</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">ease-out</span><span style="color:#ABB2BF">, </span><span style="color:#FFFFFF">background</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0.25</span><span style="color:#E06C75">s</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">ease-out</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="m8.76 1 10.055 112.883 45.118 12.58 45.244-12.626L119.24 1H8.76zm89.591 25.862-3.347 37.605.01.203-.014.467v-.004l-2.378 26.294-.262 2.336L64 101.607v.001l-.022.019-28.311-7.888L33.75 72h13.883l.985 11.054 15.386 4.17-.004.008v-.002l15.443-4.229L81.075 65H48.792l-.277-3.043-.631-7.129L47.553 51h34.749l1.264-14H30.64l-.277-3.041-.63-7.131L29.401 23h69.281l-.331 3.862z"></path></svg>
          </div>

          <div class="capitalize">CSS</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="Z28xctD" prefix="r6" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;body {\n  transition: color 0.25s ease-out, background 0.25s ease-out;\n}\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>Now you reload the page and things are broken again, because the transition will
happen on reload.
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://css-tricks.com/transitions-only-after-page-load/">To prevent this, I used this trick from CSS-Tricks:</a></p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-html"><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">body</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;preload&quot;</span><span style="color:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75">body</span><span style="color:#ABB2BF">&gt;</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="m9.032 2 10.005 112.093 44.896 12.401 45.02-12.387L118.968 2H9.032zm89.126 26.539-.627 7.172L97.255 39H44.59l1.257 14h50.156l-.336 3.471-3.233 36.119-.238 2.27L64 102.609v.002l-.034.018-28.177-7.423L33.876 74h13.815l.979 10.919L63.957 89H64v-.546l15.355-3.875L80.959 67H33.261l-3.383-38.117L29.549 25h68.939l-.33 3.539z"></path></svg>
          </div>

          <div class="capitalize">HTML</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="1kyjXi" prefix="r7" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;&lt;body class=\&quot;preload\&quot;&gt;&lt;/body&gt;\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-css"><span class="line"><span style="color:#D19A66">.preload</span><span style="color:#ABB2BF"> {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#56B6C2">-webkit-transition</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">none</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">!important</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#56B6C2">-moz-transition</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">none</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">!important</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#56B6C2">-ms-transition</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">none</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">!important</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#56B6C2">-o-transition</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">none</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">!important</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="m8.76 1 10.055 112.883 45.118 12.58 45.244-12.626L119.24 1H8.76zm89.591 25.862-3.347 37.605.01.203-.014.467v-.004l-2.378 26.294-.262 2.336L64 101.607v.001l-.022.019-28.311-7.888L33.75 72h13.883l.985 11.054 15.386 4.17-.004.008v-.002l15.443-4.229L81.075 65H48.792l-.277-3.043-.631-7.129L47.553 51h34.749l1.264-14H30.64l-.277-3.041-.63-7.131L29.401 23h69.281l-.331 3.862z"></path></svg>
          </div>

          <div class="capitalize">CSS</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="Z1uRTjq" prefix="r8" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;.preload {\n  -webkit-transition: none !important;\n  -moz-transition: none !important;\n  -ms-transition: none !important;\n  -o-transition: none !important;\n}\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-js"><span class="line"><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addEventListener</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;load&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF">() {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">body</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">classList</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">remove</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;preload&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">});</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z"></path></svg>
          </div>

          <div class="capitalize">JavaScript</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="Z2qFkf" prefix="r9" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;window.addEventListener(\&quot;load\&quot;, function() {\n  document.body.classList.remove(\&quot;preload\&quot;);\n});\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="respect-system-preferences">
  
  Respect system preferences<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#respect-system-preferences"><span class="icon icon-link"></span></a>

</h2>
<p>Finally, to respect the
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme"><code>prefers-color-scheme</code></a>
media query, we add to our first script:</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-js"><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">storedTheme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">localStorage</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getItem</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;__theme&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">storedTheme</span><span style="color:#ABB2BF">) {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">__setTheme</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">storedTheme</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">} </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">matchMedia</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;(prefers-color-scheme: dark)&quot;</span><span style="color:#ABB2BF">).</span><span style="color:#E06C75">matches</span><span style="color:#ABB2BF">) {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">__setTheme</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;dark&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z"></path></svg>
          </div>

          <div class="capitalize">JavaScript</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="9WNbX" prefix="r10" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;const storedTheme = localStorage.getItem(\&quot;__theme\&quot;);\n\nif (storedTheme) {\n  window.__setTheme(storedTheme);\n} else if (window.matchMedia(\&quot;(prefers-color-scheme: dark)\&quot;).matches) {\n  window.__setTheme(\&quot;dark\&quot;);\n}\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>So that, if there’s nothing in <code>localStorage</code>, we respect system settings.</p>
<h2 class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2" id="hugo-implementation-details">
  
  Hugo implementation details<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#hugo-implementation-details"><span class="icon icon-link"></span></a>

</h2>
<p>In <code>layouts/_default/baseof.html</code> template, we need something like this:</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-html"><span class="line"><span style="color:#ABB2BF">&lt;!</span><span style="color:#E06C75">DOCTYPE</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">html</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">html</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span style="color:#ABB2BF">  &lt;</span><span style="color:#E06C75">head</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span style="color:#ABB2BF">  &lt;/</span><span style="color:#E06C75">head</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">  &lt;</span><span style="color:#E06C75">body</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">data-theme</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;light&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;preload&quot;</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span style="color:#ABB2BF">    {{ partial &quot;theme.html&quot; }}</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">    ...</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">    {{ partial &quot;theme-button.html&quot; }}</span></span><span class="line"><span style="color:#ABB2BF">  &lt;/</span><span style="color:#E06C75">body</span><span style="color:#ABB2BF">&gt;</span></span><span class="line"><span style="color:#ABB2BF">&lt;/</span><span style="color:#E06C75">html</span><span style="color:#ABB2BF">&gt;</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="m9.032 2 10.005 112.093 44.896 12.401 45.02-12.387L118.968 2H9.032zm89.126 26.539-.627 7.172L97.255 39H44.59l1.257 14h50.156l-.336 3.471-3.233 36.119-.238 2.27L64 102.609v.002l-.034.018-28.177-7.423L33.876 74h13.815l.979 10.919L63.957 89H64v-.546l15.355-3.875L80.959 67H33.261l-3.383-38.117L29.549 25h68.939l-.33 3.539z"></path></svg>
          </div>

          <div class="capitalize">HTML</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="Z2bHwXm" prefix="r11" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n  &lt;/head&gt;\n\n  &lt;body data-theme=\&quot;light\&quot; class=\&quot;preload\&quot;&gt;\n    {{ partial \&quot;theme.html\&quot; }}\n\n    ...\n\n    {{ partial \&quot;theme-button.html\&quot; }}\n  &lt;/body&gt;\n&lt;/html&gt;\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>In <code>partials/theme.html</code> we change theme based on <code>localStorage</code> or
<code>prefers-color-scheme</code>. In <code>layouts/partials/theme-button.html</code> we customize the
button.</p>
<p>Also, to change syntax highlighting colorscheme, we need to add
<code>pygmentsUseClasses = true</code> to our configuration file.</p>
<p>Then, we need to generate stylesheets for each different colorscheme and move
them to our assets folder.</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-shell"><span class="line"><span style="color:#ABB2BF">$ hugo gen chromastyles --style=monokai &gt; dark-syntax-highlight.css</span></span><span class="line"><span style="color:#ABB2BF">$ hugo gen chromastyles --style=lovelace &gt; light-syntax-highlight.css</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="none" d="M4.24 4.24h119.53v119.53H4.24z"></path><path fill="currentColor" d="M109.01 28.64 71.28 6.24c-2.25-1.33-4.77-2-7.28-2s-5.03.67-7.28 2.01l-37.74 22.4c-4.5 2.67-7.28 7.61-7.28 12.96v44.8c0 5.35 2.77 10.29 7.28 12.96l37.73 22.4c2.25 1.34 4.76 2 7.28 2 2.51 0 5.03-.67 7.28-2l37.74-22.4c4.5-2.67 7.28-7.62 7.28-12.96V41.6c0-5.34-2.77-10.29-7.28-12.96zM79.79 98.59l.06 3.22c0 .39-.25.83-.55.99l-1.91 1.1c-.3.15-.56-.03-.56-.42l-.03-3.17c-1.63.68-3.29.84-4.34.42-.2-.08-.29-.37-.21-.71l.69-2.91c.06-.23.18-.46.34-.6.06-.06.12-.1.18-.13.11-.06.22-.07.31-.03 1.14.38 2.59.2 3.99-.5 1.78-.9 2.97-2.72 2.95-4.52-.02-1.64-.9-2.31-3.05-2.33-2.74.01-5.3-.53-5.34-4.57-.03-3.32 1.69-6.78 4.43-8.96l-.03-3.25c0-.4.24-.84.55-1l1.85-1.18c.3-.15.56.04.56.43l.03 3.25c1.36-.54 2.54-.69 3.61-.44.23.06.34.38.24.75l-.72 2.88c-.06.22-.18.44-.33.58a.77.77 0 0 1-.19.14c-.1.05-.19.06-.28.05-.49-.11-1.65-.36-3.48.56-1.92.97-2.59 2.64-2.58 3.88.02 1.48.77 1.93 3.39 1.97 3.49.06 4.99 1.58 5.03 5.09.05 3.44-1.79 7.15-4.61 9.41zm26.34-60.5-35.7 22.05c-4.45 2.6-7.73 5.52-7.74 10.89v43.99c0 3.21 1.3 5.29 3.29 5.9-.65.11-1.32.19-1.98.19-2.09 0-4.15-.57-5.96-1.64l-37.73-22.4c-3.69-2.19-5.98-6.28-5.98-10.67V41.6c0-4.39 2.29-8.48 5.98-10.67l37.74-22.4c1.81-1.07 3.87-1.64 5.96-1.64s4.15.57 5.96 1.64l37.74 22.4c3.11 1.85 5.21 5.04 5.8 8.63-1.27-2.67-4.09-3.39-7.38-1.47z"></path><path fill="currentColor" d="m99.12 90.73-9.4 5.62c-.25.15-.43.31-.43.61v2.46c0 .3.2.43.45.28l9.54-5.8c.25-.15.29-.42.29-.72v-2.17c0-.3-.2-.42-.45-.28z"></path></svg>
          </div>

          <div class="capitalize">Bash</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="3MOOk" prefix="r12" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;$ hugo gen chromastyles --style=monokai &gt; dark-syntax-highlight.css\n$ hugo gen chromastyles --style=lovelace &gt; light-syntax-highlight.css\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>Add them to our html (with the dark stylesheet disabled).</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-html"><span class="line"><span style="color:#ABB2BF">{{ $syntaxHighlight := resources.Get &quot;css/light-syntax-highlight.css&quot; }}</span></span><span class="line"><span style="color:#ABB2BF">{{ $darkSyntaxHighlight := resources.Get &quot;css/dark-syntax-highlight.css&quot; }}</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">link</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">rel</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;stylesheet&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;{{ $syntaxHighlight.RelPermalink }}&quot;</span><span style="color:#ABB2BF"> /&gt;</span></span><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">link</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">rel</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;stylesheet&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;{{ $darkSyntaxHighlight.RelPermalink }}&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">disabled</span><span style="color:#ABB2BF"> /&gt;</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="m9.032 2 10.005 112.093 44.896 12.401 45.02-12.387L118.968 2H9.032zm89.126 26.539-.627 7.172L97.255 39H44.59l1.257 14h50.156l-.336 3.471-3.233 36.119-.238 2.27L64 102.609v.002l-.034.018-28.177-7.423L33.876 74h13.815l.979 10.919L63.957 89H64v-.546l15.355-3.875L80.959 67H33.261l-3.383-38.117L29.549 25h68.939l-.33 3.539z"></path></svg>
          </div>

          <div class="capitalize">HTML</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="Z2qOgfr" prefix="r13" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;{{ $syntaxHighlight := resources.Get \&quot;css/light-syntax-highlight.css\&quot; }}\n{{ $darkSyntaxHighlight := resources.Get \&quot;css/dark-syntax-highlight.css\&quot; }}\n\n&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;{{ $syntaxHighlight.RelPermalink }}\&quot; /&gt;\n&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;{{ $darkSyntaxHighlight.RelPermalink }}\&quot; disabled /&gt;\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>And handle enabling/disabling stylesheet when theme changes with JavaScript:</p>


<div data-codeblock class="mt-16 full-width-on-mobile [&#38;_pre]:max-sm:rounded-none relative mb-8 last:mb-0" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <pre class="peer relative shiki shadow-sm shadow-shadow rounded rounded-tl-none overflow-x-auto bg-[var(--code-bg)] text-[var(--code-fg)] [color-scheme:dark] [&#38;_code]:py-4 [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlight]:bg-[#272115] [&#38;_code>.line.highlight]:border-[#624710] [&#38;_.error]:text-sm [&#38;_.error]:px-8 [&#38;_.error]:py-1 [&#38;_.popover]:my-2 [&#38;_.popover]:rounded-sm [&#38;_.popover]:bg-gray-700 [&#38;_.popover]:text-white [&#38;_.arrow]:bg-gray-700 [&#38;_.arrow]:border-gray-700"><code class="language-js"><span class="line"><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">__setTheme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">newTheme</span><span style="color:#ABB2BF">) {</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">oldTheme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">newTheme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">===</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;dark&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;light&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;dark&quot;</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">document</span></span><span class="line"><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">querySelector</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;link[href*=&#39;&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">oldTheme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;&#39;]&quot;</span><span style="color:#ABB2BF">)</span></span><span class="line"><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">setAttribute</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;disabled&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">document</span></span><span class="line"><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">querySelector</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;link[href*=&#39;&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">newTheme</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&quot;&#39;]&quot;</span><span style="color:#ABB2BF">)</span></span><span class="line"><span style="color:#ABB2BF">    .</span><span style="color:#61AFEF">removeAttribute</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&quot;disabled&quot;</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">};</span></span></code></pre>

  <div class="text-md dark absolute left-horizontal-padding top-0 mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[100%] overflow-hidden sm:left-0">
        <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
          <div class="shrink-0">
            <svg viewBox="0 0 128 128" width="1em" height="1em"><path fill="currentColor" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z"></path></svg>
          </div>

          <div class="capitalize">JavaScript</div>
        </div>
      </div>

  <div class="dark flex flex-row gap-2 absolute top-3 right-[var(--horizontal-padding)] text-2xl [&#38;_svg]:h-[1em] [&#38;_svg]:w-[1em] [&#38;_:is(button,a)]:opacity-0 [&#38;_:is(button,a)]:pointer-events-none peer-hover:[&#38;_:where(button,a)]:opacity-100 peer-hover:[&#38;_:where(button,a)]:pointer-events-auto [&#38;_:where(button,a)]:hover:opacity-100 [&#38;_:where(button,a)]:hover:pointer-events-auto [&#38;_:is(button,a)]:transition-opacity [&#38;_:is(button,a)]:duration-500">
    

    <astro-island uid="Z1IQCql" prefix="r14" component-url="/_astro/CopyCodeBlockButton.b1689508.js" component-export="default" renderer-url="/_astro/client.e7e19699.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;successTooltipText&quot;:[0,&quot;Copied!&quot;],&quot;errorTooltipText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;window.__setTheme = function(newTheme) {\n  // ...\n  const oldTheme = newTheme === \&quot;dark\&quot; ? \&quot;light\&quot; : \&quot;dark\&quot;;\n  document\n    .querySelector(\&quot;link[href*=&#39;\&quot; + oldTheme + \&quot;&#39;]\&quot;)\n    .setAttribute(\&quot;disabled\&quot;, \&quot;\&quot;);\n  document\n    .querySelector(\&quot;link[href*=&#39;\&quot; + newTheme + \&quot;&#39;]\&quot;)\n    .removeAttribute(\&quot;disabled\&quot;);\n};\n&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded border border-divider p-1 shadow-sm shadow-shadow" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
  </div>
</div>
<p>And that’s it, hopefully we can enjoy dark mode now.</p>

          </div>

          <aside class="min-w-0 invisible group-data-[has-toc]:visible">
            <div style="--offset-from-top:1rem" class="w-full rounded lg:sticky lg:top-[var(--offset-from-top)] lg:h-[calc(100vh-var(--offset-from-top)_*_2)] lg:bg-surface lg:p-4 lg:shadow-sm lg:shadow-shadow">
      <div class="hidden lg:flex lg:h-full lg:flex-col">
        <div class="flex justify-between gap-2">
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg>

            <h2 class="m-0">Table of Contents</h2>
          </div>

          <div class="flex items-center transition-transform duration-100 ease-in group-open:rotate-180 lg:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
          </div>
        </div>

        <nav data-toc-wrapper class="mt-4 min-h-0 sm:overflow-y-auto [&#38;_a_*]:indent-0 [&#38;_ol]:m-0 [&#38;_ol]:list-none [&#38;_ol]:indent-4 [&#38;_ol_li[data-active]>a]:text-primary [&#38;_ol_li[data-active]]:before:bg-primary [&#38;_ol_li]:relative [&#38;_ol_li]:before:absolute [&#38;_ol_li]:before:left-0 [&#38;_ol_li]:before:top-0 [&#38;_ol_li]:before:h-full [&#38;_ol_li]:before:w-[1px] [&#38;_ol_li]:before:bg-divider [&#38;_ol_li]:before:content-[''] [&#38;_ol_li_a:hover]:bg-hover [&#38;_ol_li_a]:block [&#38;_ol_li_a]:truncate [&#38;_ol_li_a]:border-b-0 [&#38;_ol_li_a]:transition-colors [&#38;_ol_li_a]:duration-300 [&#38;_ol_ol]:indent-8 [&#38;_ol_ol_ol]:indent-12 [&#38;_ol_ol_ol_ol]:indent-16">
          <ol data-astro-toc="1"><li data-astro-toc="1">
          <a href="#css">CSS</a>
          
        </li><li data-astro-toc="1">
          <a href="#theme-persistence">Theme persistence</a>
          
        </li><li data-astro-toc="1">
          <a href="#transition-between-themes">Transition between themes</a>
          
        </li><li data-astro-toc="1">
          <a href="#respect-system-preferences">Respect system preferences</a>
          
        </li><li data-astro-toc="1">
          <a href="#hugo-implementation-details">Hugo implementation details</a>
          
        </li></ol>
        </nav>
      </div>

      <details class="card group mb-8 px-horizontal-padding py-4 lg:hidden" aria-label="Table of Contents">
        <summary class="list-none">
          <div class="flex justify-between gap-2">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg>

              <h2 class="m-0">Table of Contents</h2>
            </div>

            <div class="flex items-center transition-transform duration-100 ease-in group-open:rotate-180 lg:hidden">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </div>
          </div>
        </summary>

        <nav data-toc-wrapper class="mt-4 [&#38;_ol]:m-0 [&#38;_ol]:list-outside [&#38;_ol]:px-horizontal-padding [&#38;_ol_li:not(:first-child)]:mt-1">
          <ol data-astro-toc="1"><li data-astro-toc="1">
          <a href="#css">CSS</a>
          
        </li><li data-astro-toc="1">
          <a href="#theme-persistence">Theme persistence</a>
          
        </li><li data-astro-toc="1">
          <a href="#transition-between-themes">Transition between themes</a>
          
        </li><li data-astro-toc="1">
          <a href="#respect-system-preferences">Respect system preferences</a>
          
        </li><li data-astro-toc="1">
          <a href="#hugo-implementation-details">Hugo implementation details</a>
          
        </li></ol>
        </nav>
      </details>
    </div>
          </aside>
        </div>
      </article>

      <hr class="full-width-on-mobile mt-8">

      <nav class="flex items-stretch sm:gap-4 full-width-on-mobile sm:my-8" aria-label="Posts navigation">
  <a class="sm:card flex flex-1 flex-col gap-2 border-0 px-horizontal-padding py-4 transition-colors duration-300 hover:bg-hover" href="/posts/my-experience-testing-react-applications">
        <span class="text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><line x1="19" x2="5" y1="12" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
        </span>

        My experience testing React applications
      </a>

  <div class="border-l border-divider sm:hidden"></div>

  <a class="sm:card flex flex-1 flex-col-reverse items-end justify-end gap-2 border-0 px-horizontal-padding py-4 text-right transition-colors duration-300 hover:bg-hover" href="/posts/extending-vim-with-ripgrep">
        Extending Vim with ripgrep

        <span class="text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right"><line x1="5" x2="19" y1="12" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
        </span>
      </a>
</nav>

      <hr class="full-width-on-mobile mb-8">
    </div>
  </main>


    <footer class="border-t border-divider bg-background sm:border-0">
  <div class="mx-auto flex w-full max-w-content flex-col items-center px-horizontal-padding pt-4 pb-8 sm:justify-between">
    <nav aria-label="Contacts" class="flex gap-2">
  <a id="contact-email" href="mailto:phelipe_teles@hotmail.com" aria-label="E-mail" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-full p-2">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
  
</a>

  <a id="contact-linkedin" href="https://linkedin.com/in/phelipeteles" aria-label="LinkedIn" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-full p-2">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg>
  
</a>

  <a id="contact-github" href="https://github.com/phelipetls" aria-label="GitHub" class="bg-background hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-full p-2">
  
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>
  
</a>
</nav>

    <span class="text-center">
      
            Todo conteúdo está sob a licença <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>.
          
    </span>
  </div>
</footer>
  </body></html>