<!DOCTYPE html>
<html class="h-full text-lg selection:bg-primary selection:text-on-primary scroll-smooth scroll-pt-nav-height sm:scroll-pt-0" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="deploy-date" content="2023-01-30">
    <meta name="author" content="Phelipe Teles">
    <meta name="color-scheme" content="dark light">

    <title>Improving the Android Studio experience in dwm - Phelipe Teles | Phelipe Teles</title>



<link rel="canonical" href="https://phelipetls.github.io/posts/improving-the-android-studio-experience-in-dwm/">

<meta name="description" content="In this post, I want to share how I started to change dwm
source code in order to improve my experience with Android Emulator.">

<meta name="robots" content="index, follow">

<meta property="og:title" content="Improving the Android Studio experience in dwm">
<meta property="og:type" content="article">
<meta property="og:image" content="/posts/improving-the-android-studio-experience-in-dwm/image.png">
<meta property="og:url" content="https://phelipetls.github.io/posts/improving-the-android-studio-experience-in-dwm/">



<meta property="article:published_time" content="2022-01-25T00:00:00Z">


<meta property="article:author" content="Phelipe Teles">

<meta property="article:tag" content="c"><meta property="article:tag" content="linux"><meta property="article:tag" content="dwm"><meta property="article:tag" content="x11">

<meta name="twitter:card" content="summary_large_image">




<meta content="/posts/improving-the-android-studio-experience-in-dwm/image.png" name="twitter:image">


    


    <meta name="publish-date" content="2022-01-25"><meta name="keywords" content="c, linux, dwm, x11"><meta name="description" content="In this post, I want to share how I started to change dwm
source code in order to improve my experience with Android Emulator."><style id="sandpack">--sxs{--sxs:1 sp-k-cESbVh sp-k-iOHdLQ}@media{@keyframes sp-k-cESbVh{0%{opacity:0;transform:translateY(4px)}100%{opacity:1;transform:translateY(0)}}@keyframes sp-k-iOHdLQ{0%{transform:rotateX(-25.5deg) rotateY(45deg)}100%{transform:rotateX(-25.5deg) rotateY(405deg)}}}--sxs{--sxs:2 sp-c-gMfcns sp-c-hfoyCM sp-c-fWymNx sp-c-dRhJti sp-c-bpmgvy sp-c-kLppIp sp-c-PJLV}@media{.sp-c-gMfcns svg{margin:auto}.sp-c-hfoyCM{padding:0 var(--sp-space-1) 0 var(--sp-space-1);border-radius:var(--sp-border-radius);margin-left:var(--sp-space-1);width:var(--sp-space-5);visibility:hidden}.sp-c-hfoyCM svg{width:var(--sp-space-3);height:var(--sp-space-3);display:block;position:relative;top:1px}.sp-c-fWymNx{margin:0;display:block;font-family:var(--sp-font-mono);font-size:var(--sp-font-size);color:var(--sp-syntax-color-plain);line-height:var(--sp-font-lineHeight)}.sp-c-dRhJti{-webkit-appearance:none;appearance:none;border:0;outline:none;display:flex;align-items:center;font-size:inherit;font-family:inherit;background-color:transparent;transition:color var(--sp-transitions-default), background var(--sp-transitions-default);cursor:pointer;color:var(--sp-colors-clickable)}.sp-c-dRhJti:disabled{color:var(--sp-colors-disabled)}.sp-c-dRhJti:hover:not(:disabled,[data-active='true']){color:var(--sp-colors-hover)}.sp-c-dRhJti[data-active="true"]{color:var(--sp-colors-accent)}.sp-c-dRhJti svg{min-width:var(--sp-space-4);width:var(--sp-space-4);height:var(--sp-space-4)}.sp-c-dRhJti.sp-c-gMfcns{padding:var(--sp-space-1);width:var(--sp-space-7);height:var(--sp-space-7);display:flex}.sp-c-bpmgvy{transform:translate(-4px, 9px) scale(0.13, 0.13)}.sp-c-bpmgvy *{position:absolute;width:96px;height:96px}.sp-c-kLppIp{display:flex;flex-direction:column;width:100%;position:relative;background-color:var(--sp-colors-surface1);transition:flex var(--sp-transitions-default);gap:1px}.sp-c-kLppIp:has(.sp-stack){background-color:var(--sp-colors-surface2)}}--sxs{--sxs:3 sp-c-PJLV-kCOVwI-status-pass sp-c-PJLV-kEzYsr-status-fail sp-c-PJLV-gHAhSA-status-skip sp-c-PJLV-jgnHyR-status-title sp-c-PJLV-iCgxLS-status-run sp-c-PJLV-bnDZSy-status-pass sp-c-PJLV-eYuGwt-status-fail}@media{.sp-c-PJLV-kCOVwI-status-pass{color:var(--test-pass)}.sp-c-PJLV-kEzYsr-status-fail{color:var(--test-fail)}.sp-c-PJLV-gHAhSA-status-skip{color:var(--test-skip)}.sp-c-PJLV-jgnHyR-status-title{color:var(--test-title)}.sp-c-PJLV-iCgxLS-status-run{background:var(--test-run);color:var(--sp-colors-surface1)}.sp-c-PJLV-bnDZSy-status-pass{background:var(--test-pass);color:var(--sp-colors-surface1)}.sp-c-PJLV-eYuGwt-status-fail{background:var(--test-fail);color:var(--sp-colors-surface1)}}</style>
  <link rel="stylesheet" href="/assets/index.json.3889a60a.css" />
<link rel="stylesheet" href="/assets/_id_.126aee33.css" />
<link rel="stylesheet" href="/assets/_id_.caa77277.css" /><script type="module" src="/hoisted.77198776.js"></script></head>

  <body data-preload class="relative flex h-full flex-col bg-background font-sans text-on-background">
    <script>
  // @ts-check
  const storedThemeChoice = window.localStorage.getItem('__theme') ?? 'system'

  window.__setTheme = setTheme
  // prettier-ignore
  window.__setTheme(/** @type {ThemeChoice} */ (storedThemeChoice))

  /**
   * @type {(themeChoice: ThemeChoice) => void}
   */
  function setTheme(themeChoice) {
    let theme = themeChoice

    if (themeChoice === 'system') {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    document.body.classList.toggle('dark', theme === 'dark')

    window.localStorage.setItem('__theme', themeChoice)

    document.body.dispatchEvent(
      new CustomEvent('newTheme', {
        detail: {
          themeChoice,
          theme,
        },
      })
    )
  }

  window.addEventListener('storage', function (e) {
    const newTheme = e.newValue
    if (newTheme && newTheme && e.key === '__theme') {
      // prettier-ignore
      window.__setTheme(/** @type {ThemeChoice} */ (newTheme))
    }
  })

  window.addEventListener('load', function () {
    document.body.removeAttribute('data-preload')
  })
</script>


    <div class="mb-8 w-full">
  <div class="pt-nav-height sm:hidden">
    <div class="fixed top-0 left-0 z-30 flex w-screen justify-between rounded-none border-b border-divider bg-background/90 py-4 px-horizontal-padding backdrop-blur">
  <div class="flex flex-row items-center gap-2 overflow-hidden">
    <a class="border-0" href="/posts/" data-testid="parent-page-link" aria-label="Go back to previous page">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
        </a>

    <h2 class="m-0 truncate font-sans font-normal">Improving the Android Studio experience in dwm - Phelipe Teles</h2>
  </div>

  <button data-a11y-dialog-show="sidenav" class="btn btn-icon" data-testid="open-sidenav" aria-label="Open navigation sidebar">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="6" x2="20" y2="6"></line><line x1="4" y1="18" x2="20" y2="18"></line></svg>
  </button>
</div>
  </div>

  <div class="hidden h-full w-full sm:block">
    <div class="flex h-full w-full items-center justify-between bg-background pr-horizontal-padding">
  <div class="mx-auto flex h-full w-full max-w-content justify-between">
    <nav class="flex h-full justify-between overflow-x-auto px-horizontal-padding" aria-label="Main navigation">
      <ul class="m-0 flex list-none flex-row flex-nowrap items-center gap-2">
        <li>
                <a id="about" href="/" class="hover:bg-hover relative flex items-center justify-center rounded border-0 py-1 px-2 transition-colors duration-300">
                  About
                </a>
              </li><li>
                <a id="posts" href="/posts" class="bg-primary text-on-primary card hover:bg-primary-hover relative flex items-center justify-center rounded border-0 py-1 px-2 transition-colors duration-300" aria-current="page">
                  Posts
                </a>
              </li><li>
                <a id="projects" href="/projects" class="hover:bg-hover relative flex items-center justify-center rounded border-0 py-1 px-2 transition-colors duration-300">
                  Projects
                </a>
              </li><li>
                <a id="resume" href="/resume" class="hover:bg-hover relative flex items-center justify-center rounded border-0 py-1 px-2 transition-colors duration-300">
                  Résumé
                </a>
              </li>
      </ul>
    </nav>

    <div class="h-full py-3">
      <div class="flex h-full flex-row items-stretch gap-2 pl-2">
        <div class="relative flex h-full flex-row items-center">
  <span class="pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-sm">
    <svg class="feather" viewBox="0 0 24 24" width="24" height="24">
      <title>Theme icon</title>

      <defs>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon" id="moon"><path d="M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun" id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor" id="monitor"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
      </defs>

      <use data-theme-select-icon href="#monitor"></use>
    </svg>
  </span>

  <select class="card h-full appearance-none bg-surface py-1 px-8 text-center" data-theme-select aria-label="Choose a theme">
    <option value="light">Light</option>
    <option value="dark">Dark</option>
    <option value="system">System</option>
  </select>

  <span class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-sm">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
  </span>
</div>


      </div>
    </div>
  </div>
</div>
  </div>
</div>
    <aside data-a11y-dialog="sidenav" aria-hidden="true" class="fixed z-50 h-full w-full" style="visibility: hidden;">
  <div data-a11y-dialog-hide class="fixed inset-0 -z-1 w-full bg-neutral-700 bg-opacity-75 backdrop-blur-sm">
  </div>

  <div role="document" class="ml-auto h-full w-3/4 rounded-none bg-background py-0 will-change-transform">
    <div class="flex h-full flex-col justify-between">
      <div class="mb-2 flex h-nav-height items-center justify-end px-horizontal-padding">
        <button data-a11y-dialog-hide class="btn btn-icon" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
      </div>

      <nav class="flex flex-1 flex-col" aria-label="Main navigation">
        <ul class="m-0 flex list-none flex-col items-center justify-center gap-4 px-horizontal-padding">
          <li class="w-full">
                  <a id="about" href="/" class="hover:bg-hover block w-full rounded border-0 p-2 text-center text-xl transition-colors duration-300">
                    About
                  </a>
                </li><li class="w-full">
                  <a id="posts" href="/posts" class="card bg-primary text-on-primary hover:bg-primary-hover block w-full rounded border-0 p-2 text-center text-xl transition-colors duration-300" aria-current="page">
                    Posts
                  </a>
                </li><li class="w-full">
                  <a id="projects" href="/projects" class="hover:bg-hover block w-full rounded border-0 p-2 text-center text-xl transition-colors duration-300">
                    Projects
                  </a>
                </li><li class="w-full">
                  <a id="resume" href="/resume" class="hover:bg-hover block w-full rounded border-0 p-2 text-center text-xl transition-colors duration-300">
                    Résumé
                  </a>
                </li>
        </ul>
      </nav>

      <div class="mb-4 flex h-12 flex-row items-center justify-center px-horizontal-padding">
        <div class="relative flex h-full flex-row items-center">
  <span class="pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-sm">
    <svg class="feather" viewBox="0 0 24 24" width="24" height="24">
      <title>Theme icon</title>

      <defs>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon" id="moon"><path d="M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun" id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor" id="monitor"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
      </defs>

      <use data-theme-select-icon href="#monitor"></use>
    </svg>
  </span>

  <select class="card h-full appearance-none bg-surface py-1 px-8 text-center" data-theme-select aria-label="Choose a theme">
    <option value="light">Light</option>
    <option value="dark">Dark</option>
    <option value="system">System</option>
  </select>

  <span class="pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-sm">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
  </span>
</div>


      </div>
    </div>
  </div>
</aside>



    <main class="grid grid-cols-layout">
    <div class="col-full max-w-full rounded-none px-horizontal-padding pt-8 shadow-none sm:col-content sm:px-0">
      <article>
        <header>
          <h1 class="mb-4 text-4xl">
            Improving the Android Studio experience in dwm
          </h1>

          <div class="mb-4 flex flex-col gap-2">
            <div class="flex items-center gap-2">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>

  <div>6 min.</div>
</div>

            <div class="flex items-center gap-2">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>

  <time datetime="2022-01-25">
    January 25, 2022
  </time>
</div>
          </div>

          <div class="mb-4 flex flex-wrap gap-2">
                <a class="inline-flex w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap" href="/tags/c">
  c
</a><a class="inline-flex w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap" href="/tags/linux">
  linux
</a><a class="inline-flex w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap" href="/tags/dwm">
  dwm
</a><a class="inline-flex w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap" href="/tags/x11">
  x11
</a>

                <a class="inline-flex w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap" href="/tags">
  ...
</a>
              </div>
        </header>

        <hr class="my-8">

        <div class="flex flex-col-reverse lg:grid lg:grid-cols-[1fr,minmax(0,1fr)]">
          <div data-blog-post class="[&#38;>pre]:full-width-on-mobile [&#38;>figure]:full-width-on-mobile [&#38;>[data-codeblock]]:full-width-on-mobile max-w-prose [&#38;>[data-codeblock]_pre]:max-sm:rounded-none [&#38;>[data-codeblock-with-header]]:mt-16 [&#38;_img]:mx-auto [&#38;>hr]:border-0 [&#38;>hr]:text-center [&#38;>hr]:after:content-['⁂'] [&#38;>pre]:my-8 [&#38;>figure]:my-8 [&#38;>img]:my-8 [&#38;>astro-island>div]:my-8 [&#38;>lite-youtube]:my-8 [&#38;>blockquote]:my-8 [&#38;>figure_video]:min-h-[15em] [&#38;_.katex-display]:overflow-x-auto [&#38;_.katex-display]:overflow-y-hidden [&#38;_*:where(h2,h3,h4,h5,h6)]:mb-8 [&#38;_*:where(h2,h3,h4,h5,h6)]:mt-4 [&#38;_*:where(h2,h3,h4,h5,h6)]:pt-4 [&#38;_*:where(h2,h3,h4,h5,h6)_a]:text-primary [&#38;_*:where(h2,h3,h4,h5,h6)_a]:border-0 [&#38;_*:where(h2,h3,h4,h5,h6)_a]:before:content-[&#34;_#&#34;]">
            <p>In this post, I want to share how I started to change <a href="dwm.suckless.org/">dwm</a>
source code in order to improve my experience with Android Emulator.</p>
<p>First, let me briefly explain the problem. When you launch Android Emulator, a
window with the Android device and a window with buttons to control it appear
(maybe a modal window saying “Loading state…” too).</p>
<p>The device window is usually the one I’m mostly interested in. I don’t recall
ever wanting to focus the other ones (except by interacting with the mouse) and
I don’t want them to show up in the taskbar (since I use the
<a href="https://dwm.suckless.org/patches/awesomebar/"><code>awesomebar</code></a> patch).</p>
<p>At first, I went in and modified the source code to ignore these windows by
their <code>WM_NAME</code> properties, which is easy to find out with <code>xprop</code>. But these
windows are very badly named and their names are not very distinct from the
device window.</p>
<p>Later I learned that these other windows are <a href="https://en.wikipedia.org/wiki/Transient_(computer_programming)"><em>transient
windows</em></a> in
X11:</p>
<blockquote>
<p>A window is said to be transient for another window if it belongs to that
other window and may not outlast it: a dialog box, such as an alert message,
is a common example.</p>
</blockquote>
<p>These windows have a property called
<a href="https://tronche.com/gui/x/icccm/sec-4.html#WM_TRANSIENT_FOR"><code>WM_TRANSIENT_FOR</code></a>,
whose value we can get with an Xlib function named
<a href="https://tronche.com/gui/x/xlib/ICC/client-to-window-manager/XGetTransientForHint.html"><code>XGetTransientForHint</code></a>.</p>
<p>Here’s an example on how to use this function, taken from the <a href="https://git.suckless.org/dwm/file/dwm.c.html#l1038"><code>dwm</code> source
code</a>:</p>


<link rel="stylesheet" href="/assets/index.json.3889a60a.css" />
<link rel="stylesheet" href="/assets/_id_.126aee33.css" />
<link rel="stylesheet" href="/assets/_id_.caa77277.css" /><script type="module" src="/hoisted.77198776.js"></script><div data-codeblock class="mt-16 group relative mb-8" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div class="dark absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[calc(100%-1px)] overflow-hidden sm:left-0">
    <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
      <div class="shrink-0">
        <svg viewBox="0 0 128 128" width="1em" height="1em" class="text-2xl"><path fill="currentColor" d="m117.5 33.5.3-.2c-.6-1.1-1.5-2.1-2.4-2.6L67.1 2.9c-.8-.5-1.9-.7-3.1-.7-1.2 0-2.3.3-3.1.7l-48 27.9c-1.7 1-2.9 3.5-2.9 5.4v55.7c0 1.1.2 2.3.9 3.4l-.2.1c.5.8 1.2 1.5 1.9 1.9l48.2 27.9c.8.5 1.9.7 3.1.7 1.2 0 2.3-.3 3.1-.7l48-27.9c1.7-1 2.9-3.5 2.9-5.4V36.1c.1-.8 0-1.7-.4-2.6zM64 88.5c9.1 0 17.1-5 21.3-12.4l12.9 7.6c-6.8 11.8-19.6 19.8-34.2 19.8-21.8 0-39.5-17.7-39.5-39.5S42.2 24.5 64 24.5c14.7 0 27.5 8.1 34.3 20l-13 7.5C81.1 44.5 73.1 39.5 64 39.5c-13.5 0-24.5 11-24.5 24.5s11 24.5 24.5 24.5z"></path></svg>
      </div>

      <div class="capitalize">c</div>
    </div>
  </div>

  <pre class="shadow shadow-shadow overflow-x-auto rounded rounded-tl-none bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlighted]:bg-[#272115] [&#38;_code>.line.highlighted]:border-[#624710]"><code class="language-c" metastring="{4-5, 9-11}"><span class="line"><span style="color:#C678DD">void</span></span><span class="line"><span style="color:#61AFEF">manage</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">Window </span><span style="color:#E06C75">w</span><span style="color:#ABB2BF">,</span><span style="color:#E06C75"> XWindowAttributes </span><span style="color:#C678DD">*</span><span style="color:#E06C75">wa</span><span style="color:#ABB2BF">)</span></span><span class="line"><span style="color:#ABB2BF">{</span></span><span class="line highlighted"><span style="color:#ABB2BF">	Client </span><span style="color:#C678DD">*</span><span style="color:#ABB2BF">c, </span><span style="color:#C678DD">*</span><span style="color:#ABB2BF">t </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">;</span></span><span class="line highlighted"><span style="color:#ABB2BF">	Window trans </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> None;</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#7F848E">// ...</span></span><span class="line"><span> </span></span><span class="line highlighted"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">XGetTransientForHint</span><span style="color:#ABB2BF">(dpy, w, </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF">trans) </span><span style="color:#56B6C2">&amp;&amp;</span><span style="color:#ABB2BF"> (t </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">wintoclient</span><span style="color:#ABB2BF">(trans))) {</span></span><span class="line highlighted"><span style="color:#ABB2BF">		</span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">mon</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">t</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">mon</span><span style="color:#ABB2BF">;</span></span><span class="line highlighted"><span style="color:#ABB2BF">		</span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">tags</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">t</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">tags</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">	} </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">	}</span></span><span class="line"><span style="color:#ABB2BF">}</span></span><span class="line"></span></code></pre>

  <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="1fNumi" component-url="/CopyCodeBlockButton.cbf359cc.js" component-export="default" renderer-url="/client.c636c68e.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;tooltipText&quot;:[0,&quot;Copied!&quot;],&quot;code&quot;:[0,&quot;void\nmanage(Window w, XWindowAttributes *wa)\n{\n\tClient *c, *t = NULL;\n\tWindow trans = None;\n\n\t// ...\n\n\tif (XGetTransientForHint(dpy, w, &amp;trans) &amp;&amp; (t = wintoclient(trans))) {\n\t\tc-&gt;mon = t-&gt;mon;\n\t\tc-&gt;tags = t-&gt;tags;\n\t} else {\n\t\t// ...\n\t}\n}\n&quot;],&quot;className&quot;:[0,&quot;transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow dark absolute right-0 top-3 -translate-x-1/2 text-2xl [&amp;_svg]:h-[1em] [&amp;_svg]:w-[1em] transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
</div>
<p>As you can see, it’s pretty simple, <code>XGetTransientForHint</code> assigns a <code>Window</code>
to the <code>trans</code> variable (if it succeeds), and then we get the respective
<code>Client</code> with the <code>wintoclient</code> function.</p>
<p>This example provided me with enough knowledge to solve most of my problems:</p>
<ul>
<li>I don’t want them in the taskbar.</li>
<li>I don’t want them in the monocle layout count.</li>
<li>I never want to focus them with the keyboard.</li>
<li>When I apply the nth tag to the leader window, the same tag should be applied
to its transient windows.</li>
<li>On floating layout, if I focus on a leader window, I want its transient
windows to be raised into view as well.</li>
</ul>
<h2 id="skipping-transient-windows-in-the-taskbar">Skipping transient windows in the taskbar<a aria-hidden="true" tabIndex="-1" href="#skipping-transient-windows-in-the-taskbar"><span class="icon icon-link"></span></a></h2>
<p>The taskbar is drawn by the <code>drawbar</code> function.</p>
<p>I just need to check if a window is transient and, if so, skip:</p>


<div data-codeblock class="mt-16 group relative mb-8" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div class="dark absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[calc(100%-1px)] overflow-hidden sm:left-0">
    <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
      <div class="shrink-0">
        <svg viewBox="0 0 128 128" width="1em" height="1em" class="text-2xl"><path fill="currentColor" d="m117.5 33.5.3-.2c-.6-1.1-1.5-2.1-2.4-2.6L67.1 2.9c-.8-.5-1.9-.7-3.1-.7-1.2 0-2.3.3-3.1.7l-48 27.9c-1.7 1-2.9 3.5-2.9 5.4v55.7c0 1.1.2 2.3.9 3.4l-.2.1c.5.8 1.2 1.5 1.9 1.9l48.2 27.9c.8.5 1.9.7 3.1.7 1.2 0 2.3-.3 3.1-.7l48-27.9c1.7-1 2.9-3.5 2.9-5.4V36.1c.1-.8 0-1.7-.4-2.6zM64 88.5c9.1 0 17.1-5 21.3-12.4l12.9 7.6c-6.8 11.8-19.6 19.8-34.2 19.8-21.8 0-39.5-17.7-39.5-39.5S42.2 24.5 64 24.5c14.7 0 27.5 8.1 34.3 20l-13 7.5C81.1 44.5 73.1 39.5 64 39.5c-13.5 0-24.5 11-24.5 24.5s11 24.5 24.5 24.5z"></path></svg>
      </div>

      <div class="capitalize">c</div>
    </div>
  </div>

  <pre class="shadow shadow-shadow overflow-x-auto rounded rounded-tl-none bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlighted]:bg-[#272115] [&#38;_code>.line.highlighted]:border-[#624710]"><code class="language-c" metastring="{10-11, 21-22}"><span class="line"><span style="color:#C678DD">void</span></span><span class="line"><span style="color:#61AFEF">drawbar</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">Monitor </span><span style="color:#C678DD">*</span><span style="color:#E06C75">m</span><span style="color:#ABB2BF">)</span></span><span class="line"><span style="color:#ABB2BF">{</span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">	Client </span><span style="color:#C678DD">*</span><span style="color:#ABB2BF">c, </span><span style="color:#C678DD">*</span><span style="color:#ABB2BF">t </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">	Window trans;</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> (c </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">m</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">clients</span><span style="color:#ABB2BF">; c; c </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">next</span><span style="color:#ABB2BF">) {</span></span><span class="line highlighted"><span style="color:#ABB2BF">		</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">ISVISIBLE</span><span style="color:#ABB2BF">(c) </span><span style="color:#56B6C2">&amp;&amp;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">!</span><span style="color:#61AFEF">XGetTransientForHint</span><span style="color:#ABB2BF">(dpy, </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">win</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF">trans))</span></span><span class="line highlighted"><span style="color:#ABB2BF">			n</span><span style="color:#C678DD">++</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">	}</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#7F848E">// ...</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> ((w </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">m</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">ww</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">-</span><span style="color:#ABB2BF"> sw </span><span style="color:#C678DD">-</span><span style="color:#ABB2BF"> stw </span><span style="color:#C678DD">-</span><span style="color:#ABB2BF"> x) </span><span style="color:#C678DD">&gt;</span><span style="color:#ABB2BF"> bh) {</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (n </span><span style="color:#C678DD">&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">) {</span></span><span class="line"><span style="color:#ABB2BF">			</span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">			</span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> (c </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">m</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">clients</span><span style="color:#ABB2BF">; c; c </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">next</span><span style="color:#ABB2BF">) {</span></span><span class="line highlighted"><span style="color:#ABB2BF">				</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#61AFEF">ISVISIBLE</span><span style="color:#ABB2BF">(c) </span><span style="color:#56B6C2">||</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">XGetTransientForHint</span><span style="color:#ABB2BF">(dpy, </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">win</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF">trans))</span></span><span class="line highlighted"><span style="color:#ABB2BF">					</span><span style="color:#C678DD">continue</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">				</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">m</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">sel</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">==</span><span style="color:#ABB2BF"> c)</span></span><span class="line"><span style="color:#ABB2BF">					scm </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> SchemeSel;</span></span><span class="line"><span style="color:#ABB2BF">				</span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">HIDDEN</span><span style="color:#ABB2BF">(c))</span></span><span class="line"><span style="color:#ABB2BF">					scm </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> SchemeHid;</span></span><span class="line"><span style="color:#ABB2BF">				</span><span style="color:#C678DD">else</span></span><span class="line"><span style="color:#ABB2BF">					scm </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> SchemeNorm;</span></span><span class="line"><span style="color:#ABB2BF">				</span><span style="color:#61AFEF">drw_setscheme</span><span style="color:#ABB2BF">(drw, </span><span style="color:#E06C75">scheme</span><span style="color:#ABB2BF">[scm]);</span></span><span class="line"><span style="color:#ABB2BF">				</span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">			}</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">		}</span></span><span class="line"><span style="color:#ABB2BF">	}</span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">}</span></span><span class="line"></span></code></pre>

  <astro-island uid="Jm8px" component-url="/CopyCodeBlockButton.cbf359cc.js" component-export="default" renderer-url="/client.c636c68e.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;tooltipText&quot;:[0,&quot;Copied!&quot;],&quot;code&quot;:[0,&quot;void\ndrawbar(Monitor *m)\n{\n\t// ...\n\tClient *c, *t = NULL;\n\tWindow trans;\n\n\t// ...\n\tfor (c = m-&gt;clients; c; c = c-&gt;next) {\n\t\tif (ISVISIBLE(c) &amp;&amp; !XGetTransientForHint(dpy, c-&gt;win, &amp;trans))\n\t\t\tn++;\n\t\t// ...\n\t}\n\n\t// ...\n\n\tif ((w = m-&gt;ww - sw - stw - x) &gt; bh) {\n\t\tif (n &gt; 0) {\n\t\t\t// ...\n\t\t\tfor (c = m-&gt;clients; c; c = c-&gt;next) {\n\t\t\t\tif (!ISVISIBLE(c) || XGetTransientForHint(dpy, c-&gt;win, &amp;trans))\n\t\t\t\t\tcontinue;\n\t\t\t\tif (m-&gt;sel == c)\n\t\t\t\t\tscm = SchemeSel;\n\t\t\t\telse if (HIDDEN(c))\n\t\t\t\t\tscm = SchemeHid;\n\t\t\t\telse\n\t\t\t\t\tscm = SchemeNorm;\n\t\t\t\tdrw_setscheme(drw, scheme[scm]);\n\t\t\t\t// ...\n\t\t\t}\n\t\t// ...\n\t\t}\n\t}\n\t// ...\n}\n&quot;],&quot;className&quot;:[0,&quot;transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow dark absolute right-0 top-3 -translate-x-1/2 text-2xl [&amp;_svg]:h-[1em] [&amp;_svg]:w-[1em] transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
</div>
<p>We need to be careful here and also change the <code>buttonpress</code> function, which
handles clicks in the taskbar:</p>


<div data-codeblock class="mt-16 group relative mb-8" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div class="dark absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[calc(100%-1px)] overflow-hidden sm:left-0">
    <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
      <div class="shrink-0">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>
      </div>

      <div class="capitalize">diff</div>
    </div>
  </div>

  <pre class="shadow shadow-shadow overflow-x-auto rounded rounded-tl-none bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlighted]:bg-[#272115] [&#38;_code>.line.highlighted]:border-[#624710]"><code class="language-diff"><span class="line"><span style="color:#ABB2BF">diff --git a/dwm.c b/dwm.c</span></span><span class="line"><span style="color:#61AFEF">--- a/dwm.c</span></span><span class="line"><span style="color:#61AFEF">+++ b/dwm.c</span></span><span class="line"><span style="color:#ABB2BF">@@ -518,6 +518,7 @@ buttonpress(XEvent *e)</span></span><span class="line"><span style="color:#ABB2BF">	Client *c;</span></span><span class="line"><span style="color:#ABB2BF">	Monitor *m;</span></span><span class="line"><span style="color:#ABB2BF">	XButtonPressedEvent *ev = &amp;e-&gt;xbutton;</span></span><span class="line"><span style="color:#98C379">+	Window trans = None;</span></span><span class="line"><span style="color:#ABB2BF"> </span></span><span class="line"><span style="color:#ABB2BF">	click = ClkRootWin;</span></span><span class="line"><span style="color:#ABB2BF">	/* focus monitor if necessary */</span></span><span class="line"><span style="color:#ABB2BF">@@ -546,7 +547,7 @@ buttonpress(XEvent *e)</span></span><span class="line"><span style="color:#ABB2BF"> </span></span><span class="line"><span style="color:#ABB2BF">			if (c) {</span></span><span class="line"><span style="color:#ABB2BF">				do {</span></span><span class="line"><span style="color:#E06C75">-					if (!ISVISIBLE(c))</span></span><span class="line"><span style="color:#98C379">+					if (!ISVISIBLE(c) || XGetTransientForHint(dpy, c-&gt;win, &amp;trans))</span></span><span class="line"><span style="color:#ABB2BF">						continue;</span></span><span class="line"><span style="color:#ABB2BF">					else</span></span><span class="line"><span style="color:#ABB2BF">						x += (1.0 / (double)m-&gt;bt) * m-&gt;btw;</span></span><span class="line"></span></code></pre>

  <astro-island uid="Z2n9dC4" component-url="/CopyCodeBlockButton.cbf359cc.js" component-export="default" renderer-url="/client.c636c68e.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;tooltipText&quot;:[0,&quot;Copied!&quot;],&quot;code&quot;:[0,&quot;diff --git a/dwm.c b/dwm.c\n--- a/dwm.c\n+++ b/dwm.c\n@@ -518,6 +518,7 @@ buttonpress(XEvent *e)\n\tClient *c;\n\tMonitor *m;\n\tXButtonPressedEvent *ev = &amp;e-&gt;xbutton;\n+\tWindow trans = None;\n \n\tclick = ClkRootWin;\n\t/* focus monitor if necessary */\n@@ -546,7 +547,7 @@ buttonpress(XEvent *e)\n \n\t\t\tif (c) {\n\t\t\t\tdo {\n-\t\t\t\t\tif (!ISVISIBLE(c))\n+\t\t\t\t\tif (!ISVISIBLE(c) || XGetTransientForHint(dpy, c-&gt;win, &amp;trans))\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\telse\n\t\t\t\t\t\tx += (1.0 / (double)m-&gt;bt) * m-&gt;btw;\n&quot;],&quot;className&quot;:[0,&quot;transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow dark absolute right-0 top-3 -translate-x-1/2 text-2xl [&amp;_svg]:h-[1em] [&amp;_svg]:w-[1em] transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
</div>
<p>Later, by investigating <code>xprop</code> output, I found that some windows give a hint
called <code>_NET_WM_STATE_SKIP_TASKBAR</code> so window managers shouldn’t include them
in the taskbar, this seemed like a better idea too so <a href="https://github.com/phelipetls/dotfiles/commit/7333e85b50abc63da0193705d204cf40c19b63bc">I implemented it as
well</a>.</p>
<h2 id="skipping-transient-windows-in-monocle-layout-count">Skipping transient windows in monocle layout count<a aria-hidden="true" tabIndex="-1" href="#skipping-transient-windows-in-monocle-layout-count"><span class="icon icon-link"></span></a></h2>
<p>This is simple, we just need to <em>not</em> increment a counter when the window is
transient, in the <code>monocle</code> function:</p>


<div data-codeblock class="mt-16 group relative mb-8" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div class="dark absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[calc(100%-1px)] overflow-hidden sm:left-0">
    <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
      <div class="shrink-0">
        <svg viewBox="0 0 128 128" width="1em" height="1em" class="text-2xl"><path fill="currentColor" d="m117.5 33.5.3-.2c-.6-1.1-1.5-2.1-2.4-2.6L67.1 2.9c-.8-.5-1.9-.7-3.1-.7-1.2 0-2.3.3-3.1.7l-48 27.9c-1.7 1-2.9 3.5-2.9 5.4v55.7c0 1.1.2 2.3.9 3.4l-.2.1c.5.8 1.2 1.5 1.9 1.9l48.2 27.9c.8.5 1.9.7 3.1.7 1.2 0 2.3-.3 3.1-.7l48-27.9c1.7-1 2.9-3.5 2.9-5.4V36.1c.1-.8 0-1.7-.4-2.6zM64 88.5c9.1 0 17.1-5 21.3-12.4l12.9 7.6c-6.8 11.8-19.6 19.8-34.2 19.8-21.8 0-39.5-17.7-39.5-39.5S42.2 24.5 64 24.5c14.7 0 27.5 8.1 34.3 20l-13 7.5C81.1 44.5 73.1 39.5 64 39.5c-13.5 0-24.5 11-24.5 24.5s11 24.5 24.5 24.5z"></path></svg>
      </div>

      <div class="capitalize">c</div>
    </div>
  </div>

  <pre class="shadow shadow-shadow overflow-x-auto rounded rounded-tl-none bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlighted]:bg-[#272115] [&#38;_code>.line.highlighted]:border-[#624710]"><code class="language-c" metastring="{5-6, 9-10}"><span class="line"><span style="color:#C678DD">void</span></span><span class="line"><span style="color:#61AFEF">monocle</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">Monitor </span><span style="color:#C678DD">*</span><span style="color:#E06C75">m</span><span style="color:#ABB2BF">)</span></span><span class="line"><span style="color:#ABB2BF">{</span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">unsigned</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">int</span><span style="color:#ABB2BF"> n </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">;</span></span><span class="line highlighted"><span style="color:#ABB2BF">	Client </span><span style="color:#C678DD">*</span><span style="color:#ABB2BF">c;</span></span><span class="line highlighted"><span style="color:#ABB2BF">	Window trans;</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> (c </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">m</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">clients</span><span style="color:#ABB2BF">; c; c </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">next</span><span style="color:#ABB2BF">)</span></span><span class="line highlighted"><span style="color:#ABB2BF">		</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">ISVISIBLE</span><span style="color:#ABB2BF">(c) </span><span style="color:#56B6C2">&amp;&amp;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">!</span><span style="color:#61AFEF">XGetTransientForHint</span><span style="color:#ABB2BF">(dpy, </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">win</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF">trans))</span></span><span class="line highlighted"><span style="color:#ABB2BF">			n</span><span style="color:#C678DD">++</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (n </span><span style="color:#C678DD">&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">)</span><span style="color:#7F848E"> /* override layout symbol */</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#61AFEF">snprintf</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">m</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">ltsymbol</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">sizeof</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">m</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">ltsymbol</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">&quot;[</span><span style="color:#D19A66">%d</span><span style="color:#98C379">]&quot;</span><span style="color:#ABB2BF">, n);</span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#7F848E">// ...</span></span><span class="line"><span style="color:#ABB2BF">}</span></span><span class="line"></span></code></pre>

  <astro-island uid="1qOm8" component-url="/CopyCodeBlockButton.cbf359cc.js" component-export="default" renderer-url="/client.c636c68e.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;tooltipText&quot;:[0,&quot;Copied!&quot;],&quot;code&quot;:[0,&quot;void\nmonocle(Monitor *m)\n{\n\tunsigned int n = 0;\n\tClient *c;\n\tWindow trans;\n\n\tfor (c = m-&gt;clients; c; c = c-&gt;next)\n\t\tif (ISVISIBLE(c) &amp;&amp; !XGetTransientForHint(dpy, c-&gt;win, &amp;trans))\n\t\t\tn++;\n\tif (n &gt; 0) /* override layout symbol */\n\t\tsnprintf(m-&gt;ltsymbol, sizeof m-&gt;ltsymbol, \&quot;[%d]\&quot;, n);\n\t// ...\n}\n&quot;],&quot;className&quot;:[0,&quot;transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow dark absolute right-0 top-3 -translate-x-1/2 text-2xl [&amp;_svg]:h-[1em] [&amp;_svg]:w-[1em] transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
</div>
<h2 id="do-not-focus-transient-windows-with-mod--j-and-mod--k">Do not focus transient windows with <kbd>mod</kbd> + <kbd>j</kbd> and <kbd>mod</kbd> + <kbd>k</kbd><a aria-hidden="true" tabIndex="-1" href="#do-not-focus-transient-windows-with-mod--j-and-mod--k"><span class="icon icon-link"></span></a></h2>
<p>I started by checking which function is bound to these keys in <code>config.h</code>: the
<code>focusstack</code> function.</p>
<p>Then it’s quick to realize I just need to add another condition to the various
if statements (careful not to mix up the <code>i</code> and <code>c</code> variables):</p>


<div data-codeblock class="mt-16 group relative mb-8" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div class="dark absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[calc(100%-1px)] overflow-hidden sm:left-0">
    <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
      <div class="shrink-0">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>
      </div>

      <div class="capitalize">diff</div>
    </div>
  </div>

  <pre class="shadow shadow-shadow overflow-x-auto rounded rounded-tl-none bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlighted]:bg-[#272115] [&#38;_code>.line.highlighted]:border-[#624710]"><code class="language-diff"><span class="line"><span style="color:#ABB2BF">diff --git a/suckless/dwm/dwm.c b/suckless/dwm/dwm.c</span></span><span class="line"><span style="color:#ABB2BF">index 86e4a41..852666b 100644</span></span><span class="line"><span style="color:#61AFEF">--- a/suckless/dwm/dwm.c</span></span><span class="line"><span style="color:#61AFEF">+++ b/suckless/dwm/dwm.c</span></span><span class="line"><span style="color:#ABB2BF">@@ -1053,6 +1053,7 @@ void</span></span><span class="line"><span style="color:#ABB2BF"> focusstack(int inc, int hid)</span></span><span class="line"><span style="color:#ABB2BF"> {</span></span><span class="line"><span style="color:#ABB2BF">	Client *c = NULL, *i;</span></span><span class="line"><span style="color:#98C379">+	Window trans = None;</span></span><span class="line"><span style="color:#ABB2BF"> </span></span><span class="line"><span style="color:#ABB2BF">	if (!selmon-&gt;sel &amp;&amp; !hid)</span></span><span class="line"><span style="color:#ABB2BF">		return;</span></span><span class="line"><span style="color:#ABB2BF">@@ -1062,22 +1063,22 @@ focusstack(int inc, int hid)</span></span><span class="line"><span style="color:#ABB2BF">	if (inc &gt; 0) {</span></span><span class="line"><span style="color:#ABB2BF">		if (selmon-&gt;sel)</span></span><span class="line"><span style="color:#ABB2BF">			for (c = selmon-&gt;sel-&gt;next;</span></span><span class="line"><span style="color:#E06C75">-					 c &amp;&amp; (!ISVISIBLE(c) || (!hid &amp;&amp; HIDDEN(c)));</span></span><span class="line"><span style="color:#98C379">+					 c &amp;&amp; (!ISVISIBLE(c) || (!hid &amp;&amp; HIDDEN(c)) || XGetTransientForHint(dpy, c-&gt;win, &amp;trans));</span></span><span class="line"><span style="color:#ABB2BF">					 c = c-&gt;next);</span></span><span class="line"><span style="color:#ABB2BF">		if (!c)</span></span><span class="line"><span style="color:#ABB2BF">			for (c = selmon-&gt;clients;</span></span><span class="line"><span style="color:#E06C75">-					 c &amp;&amp; (!ISVISIBLE(c) || (!hid &amp;&amp; HIDDEN(c)));</span></span><span class="line"><span style="color:#98C379">+					 c &amp;&amp; (!ISVISIBLE(c) || (!hid &amp;&amp; HIDDEN(c)) || XGetTransientForHint(dpy, c-&gt;win, &amp;trans));</span></span><span class="line"><span style="color:#ABB2BF">					 c = c-&gt;next);</span></span><span class="line"><span style="color:#ABB2BF">	} else {</span></span><span class="line"><span style="color:#ABB2BF">		if (selmon-&gt;sel) {</span></span><span class="line"><span style="color:#ABB2BF">			for (i = selmon-&gt;clients; i != selmon-&gt;sel; i = i-&gt;next)</span></span><span class="line"><span style="color:#E06C75">-				if (ISVISIBLE(i) &amp;&amp; !(!hid &amp;&amp; HIDDEN(i)))</span></span><span class="line"><span style="color:#98C379">+				if (ISVISIBLE(i) &amp;&amp; !(!hid &amp;&amp; HIDDEN(i)) &amp;&amp; !XGetTransientForHint(dpy, i-&gt;win, &amp;trans))</span></span><span class="line"><span style="color:#ABB2BF">					c = i;</span></span><span class="line"><span style="color:#ABB2BF">		} else</span></span><span class="line"><span style="color:#ABB2BF">			c = selmon-&gt;clients;</span></span><span class="line"><span style="color:#ABB2BF">		if (!c)</span></span><span class="line"><span style="color:#ABB2BF">			for (; i; i = i-&gt;next)</span></span><span class="line"><span style="color:#E06C75">-				if (ISVISIBLE(i) &amp;&amp; !(!hid &amp;&amp; HIDDEN(i)))</span></span><span class="line"><span style="color:#98C379">+				if (ISVISIBLE(i) &amp;&amp; !(!hid &amp;&amp; HIDDEN(i)) &amp;&amp; !XGetTransientForHint(dpy, i-&gt;win, &amp;trans))</span></span><span class="line"><span style="color:#ABB2BF">					c = i;</span></span><span class="line"><span style="color:#ABB2BF">	}</span></span><span class="line"></span></code></pre>

  <astro-island uid="ZVSePy" component-url="/CopyCodeBlockButton.cbf359cc.js" component-export="default" renderer-url="/client.c636c68e.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;tooltipText&quot;:[0,&quot;Copied!&quot;],&quot;code&quot;:[0,&quot;diff --git a/suckless/dwm/dwm.c b/suckless/dwm/dwm.c\nindex 86e4a41..852666b 100644\n--- a/suckless/dwm/dwm.c\n+++ b/suckless/dwm/dwm.c\n@@ -1053,6 +1053,7 @@ void\n focusstack(int inc, int hid)\n {\n\tClient *c = NULL, *i;\n+\tWindow trans = None;\n \n\tif (!selmon-&gt;sel &amp;&amp; !hid)\n\t\treturn;\n@@ -1062,22 +1063,22 @@ focusstack(int inc, int hid)\n\tif (inc &gt; 0) {\n\t\tif (selmon-&gt;sel)\n\t\t\tfor (c = selmon-&gt;sel-&gt;next;\n-\t\t\t\t\t c &amp;&amp; (!ISVISIBLE(c) || (!hid &amp;&amp; HIDDEN(c)));\n+\t\t\t\t\t c &amp;&amp; (!ISVISIBLE(c) || (!hid &amp;&amp; HIDDEN(c)) || XGetTransientForHint(dpy, c-&gt;win, &amp;trans));\n\t\t\t\t\t c = c-&gt;next);\n\t\tif (!c)\n\t\t\tfor (c = selmon-&gt;clients;\n-\t\t\t\t\t c &amp;&amp; (!ISVISIBLE(c) || (!hid &amp;&amp; HIDDEN(c)));\n+\t\t\t\t\t c &amp;&amp; (!ISVISIBLE(c) || (!hid &amp;&amp; HIDDEN(c)) || XGetTransientForHint(dpy, c-&gt;win, &amp;trans));\n\t\t\t\t\t c = c-&gt;next);\n\t} else {\n\t\tif (selmon-&gt;sel) {\n\t\t\tfor (i = selmon-&gt;clients; i != selmon-&gt;sel; i = i-&gt;next)\n-\t\t\t\tif (ISVISIBLE(i) &amp;&amp; !(!hid &amp;&amp; HIDDEN(i)))\n+\t\t\t\tif (ISVISIBLE(i) &amp;&amp; !(!hid &amp;&amp; HIDDEN(i)) &amp;&amp; !XGetTransientForHint(dpy, i-&gt;win, &amp;trans))\n\t\t\t\t\tc = i;\n\t\t} else\n\t\t\tc = selmon-&gt;clients;\n\t\tif (!c)\n\t\t\tfor (; i; i = i-&gt;next)\n-\t\t\t\tif (ISVISIBLE(i) &amp;&amp; !(!hid &amp;&amp; HIDDEN(i)))\n+\t\t\t\tif (ISVISIBLE(i) &amp;&amp; !(!hid &amp;&amp; HIDDEN(i)) &amp;&amp; !XGetTransientForHint(dpy, i-&gt;win, &amp;trans))\n\t\t\t\t\tc = i;\n\t}\n&quot;],&quot;className&quot;:[0,&quot;transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow dark absolute right-0 top-3 -translate-x-1/2 text-2xl [&amp;_svg]:h-[1em] [&amp;_svg]:w-[1em] transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
</div>
<h2 id="applying-nth-tag-to-a-leader-windows-transient-windows">Applying nth tag to a leader window’s transient windows<a aria-hidden="true" tabIndex="-1" href="#applying-nth-tag-to-a-leader-windows-transient-windows"><span class="icon icon-link"></span></a></h2>
<p>To achieve this, I also started by checking which function is bound to
<kbd>Mod</kbd> + <kbd>Shift</kbd> + <kbd>n</kbd> in <code>config.h</code>, which is the
<code>tag</code> function.</p>
<p>Then I modified it to apply the same tag to all transient windows whose window
leader is the selected client:</p>


<div data-codeblock class="mt-16 group relative mb-8" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div class="dark absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[calc(100%-1px)] overflow-hidden sm:left-0">
    <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
      <div class="shrink-0">
        <svg viewBox="0 0 128 128" width="1em" height="1em" class="text-2xl"><path fill="currentColor" d="m117.5 33.5.3-.2c-.6-1.1-1.5-2.1-2.4-2.6L67.1 2.9c-.8-.5-1.9-.7-3.1-.7-1.2 0-2.3.3-3.1.7l-48 27.9c-1.7 1-2.9 3.5-2.9 5.4v55.7c0 1.1.2 2.3.9 3.4l-.2.1c.5.8 1.2 1.5 1.9 1.9l48.2 27.9c.8.5 1.9.7 3.1.7 1.2 0 2.3-.3 3.1-.7l48-27.9c1.7-1 2.9-3.5 2.9-5.4V36.1c.1-.8 0-1.7-.4-2.6zM64 88.5c9.1 0 17.1-5 21.3-12.4l12.9 7.6c-6.8 11.8-19.6 19.8-34.2 19.8-21.8 0-39.5-17.7-39.5-39.5S42.2 24.5 64 24.5c14.7 0 27.5 8.1 34.3 20l-13 7.5C81.1 44.5 73.1 39.5 64 39.5c-13.5 0-24.5 11-24.5 24.5s11 24.5 24.5 24.5z"></path></svg>
      </div>

      <div class="capitalize">c</div>
    </div>
  </div>

  <pre class="shadow shadow-shadow overflow-x-auto rounded rounded-tl-none bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlighted]:bg-[#272115] [&#38;_code>.line.highlighted]:border-[#624710]"><code class="language-c" metastring="{10-16}"><span class="line"><span style="color:#C678DD">void</span></span><span class="line"><span style="color:#61AFEF">tag</span><span style="color:#ABB2BF">(</span><span style="color:#C678DD">const</span><span style="color:#E06C75"> Arg </span><span style="color:#C678DD">*</span><span style="color:#E06C75">arg</span><span style="color:#ABB2BF">)</span></span><span class="line"><span style="color:#ABB2BF">{</span></span><span class="line"><span style="color:#ABB2BF">	Client </span><span style="color:#C678DD">*</span><span style="color:#ABB2BF">c, </span><span style="color:#C678DD">*</span><span style="color:#ABB2BF">t </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">	Window trans </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> None;</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">selmon</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">sel</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">&amp;&amp;</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">arg</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">ui</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF"> TAGMASK) {</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#E5C07B">selmon</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E5C07B">sel</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">tags</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">arg</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">ui</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF"> TAGMASK;</span></span><span class="line"><span> </span></span><span class="line highlighted"><span style="color:#ABB2BF">		</span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> (c </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">selmon</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">stack</span><span style="color:#ABB2BF">; c; c </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">snext</span><span style="color:#ABB2BF">) {</span></span><span class="line highlighted"><span style="color:#ABB2BF">			</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">XGetTransientForHint</span><span style="color:#ABB2BF">(dpy, </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">win</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF">trans) </span><span style="color:#56B6C2">&amp;&amp;</span><span style="color:#ABB2BF"> (t </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">wintoclient</span><span style="color:#ABB2BF">(trans))) {</span></span><span class="line highlighted"><span style="color:#ABB2BF">				</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">selmon</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">sel</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">==</span><span style="color:#ABB2BF"> t) {</span></span><span class="line highlighted"><span style="color:#ABB2BF">					</span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">tags</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">arg</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">ui</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF"> TAGMASK;</span></span><span class="line highlighted"><span style="color:#ABB2BF">				}</span></span><span class="line highlighted"><span style="color:#ABB2BF">			}</span></span><span class="line highlighted"><span style="color:#ABB2BF">		}</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#61AFEF">focus</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">NULL</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#61AFEF">arrange</span><span style="color:#ABB2BF">(selmon);</span></span><span class="line"><span style="color:#ABB2BF">	}</span></span><span class="line"><span style="color:#ABB2BF">}</span></span><span class="line"></span></code></pre>

  <astro-island uid="qwbmQ" component-url="/CopyCodeBlockButton.cbf359cc.js" component-export="default" renderer-url="/client.c636c68e.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;tooltipText&quot;:[0,&quot;Copied!&quot;],&quot;code&quot;:[0,&quot;void\ntag(const Arg *arg)\n{\n\tClient *c, *t = NULL;\n\tWindow trans = None;\n\n\tif (selmon-&gt;sel &amp;&amp; arg-&gt;ui &amp; TAGMASK) {\n\t\tselmon-&gt;sel-&gt;tags = arg-&gt;ui &amp; TAGMASK;\n\n\t\tfor (c = selmon-&gt;stack; c; c = c-&gt;snext) {\n\t\t\tif (XGetTransientForHint(dpy, c-&gt;win, &amp;trans) &amp;&amp; (t = wintoclient(trans))) {\n\t\t\t\tif (selmon-&gt;sel == t) {\n\t\t\t\t\tc-&gt;tags = arg-&gt;ui &amp; TAGMASK;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfocus(NULL);\n\t\tarrange(selmon);\n\t}\n}\n&quot;],&quot;className&quot;:[0,&quot;transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow dark absolute right-0 top-3 -translate-x-1/2 text-2xl [&amp;_svg]:h-[1em] [&amp;_svg]:w-[1em] transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
</div>
<h2 id="raising-all-transient-windows-when-the-leader-window-gets-focused">Raising all transient windows when the leader window gets focused<a aria-hidden="true" tabIndex="-1" href="#raising-all-transient-windows-when-the-leader-window-gets-focused"><span class="icon icon-link"></span></a></h2>
<p>Since the transient windows do not appear in the taskbar and we also ignore
them in the <code>focusstack</code> function, there is no way to focus on them if they’re
not visible on the screen.</p>
<p>So in floating layout there’s an usability problem: transient windows are never
visible.</p>
<p>The fix is to raise all transient windows when a window gets focused. Also,
if a transient window gets focused in a non-floating layout, we should raise it
as well since transient windows are always floating in dwm). Here’s the code:</p>


<div data-codeblock class="mt-16 group relative mb-8" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div class="dark absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[calc(100%-1px)] overflow-hidden sm:left-0">
    <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
      <div class="shrink-0">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>
      </div>

      <div class="capitalize">diff</div>
    </div>
  </div>

  <pre class="shadow shadow-shadow overflow-x-auto rounded rounded-tl-none bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlighted]:bg-[#272115] [&#38;_code>.line.highlighted]:border-[#624710]"><code class="language-diff"><span class="line"><span style="color:#ABB2BF">diff --git a/suckless/dwm/dwm.c b/suckless/dwm/dwm.c</span></span><span class="line"><span style="color:#ABB2BF">index 389c61d..70a6dc1 100644</span></span><span class="line"><span style="color:#61AFEF">--- a/suckless/dwm/dwm.c</span></span><span class="line"><span style="color:#61AFEF">+++ b/suckless/dwm/dwm.c</span></span><span class="line"><span style="color:#ABB2BF">@@ -1001,6 +1001,9 @@ expose(XEvent *e)</span></span><span class="line"><span style="color:#ABB2BF"> void</span></span><span class="line"><span style="color:#ABB2BF"> focus(Client *c)</span></span><span class="line"><span style="color:#ABB2BF"> {</span></span><span class="line"><span style="color:#98C379">+	Client *i, *t;</span></span><span class="line"><span style="color:#98C379">+	Window trans = None;</span></span><span class="line"><span style="color:#98C379">+</span></span><span class="line"><span style="color:#ABB2BF"> 	if (!c || !ISVISIBLE(c))</span></span><span class="line"><span style="color:#ABB2BF"> 		for (c = selmon-&gt;stack; c &amp;&amp; (!ISVISIBLE(c) || HIDDEN(c)); c = c-&gt;snext);</span></span><span class="line"><span style="color:#ABB2BF"> 	if (selmon-&gt;sel &amp;&amp; selmon-&gt;sel != c) {</span></span><span class="line"><span style="color:#ABB2BF">@@ -1023,6 +1026,12 @@ focus(Client *c)</span></span><span class="line"><span style="color:#ABB2BF"> 		grabbuttons(c, 1);</span></span><span class="line"><span style="color:#ABB2BF"> 		XSetWindowBorder(dpy, c-&gt;win, scheme[SchemeSel][ColBorder].pixel);</span></span><span class="line"><span style="color:#ABB2BF"> 		setfocus(c);</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#98C379">+		if (XGetTransientForHint(dpy, c-&gt;win, &amp;trans)) {</span></span><span class="line"><span style="color:#98C379">+			XRaiseWindow(dpy, c-&gt;win);</span></span><span class="line"><span style="color:#98C379">+		}</span></span><span class="line"><span style="color:#98C379">+</span></span><span class="line"><span style="color:#98C379">+		for (i = selmon-&gt;stack; i; i = i-&gt;snext) {</span></span><span class="line"><span style="color:#98C379">+			if (ISVISIBLE(i) &amp;&amp; (XGetTransientForHint(dpy, i-&gt;win, &amp;trans) &amp;&amp; (t = wintoclient(trans)) &amp;&amp; (t == c))) {</span></span><span class="line"><span style="color:#98C379">+				XRaiseWindow(dpy, i-&gt;win);</span></span><span class="line"><span style="color:#98C379">+			}</span></span><span class="line"><span style="color:#98C379">+		}</span></span><span class="line"><span style="color:#ABB2BF"> 	} else {</span></span><span class="line"><span style="color:#ABB2BF"> 		XSetInputFocus(dpy, root, RevertToPointerRoot, CurrentTime);</span></span><span class="line"><span style="color:#ABB2BF"> 		XDeleteProperty(dpy, root, netatom[NetActiveWindow]);</span></span><span class="line"></span></code></pre>

  <astro-island uid="ZhCKmG" component-url="/CopyCodeBlockButton.cbf359cc.js" component-export="default" renderer-url="/client.c636c68e.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;tooltipText&quot;:[0,&quot;Copied!&quot;],&quot;code&quot;:[0,&quot;diff --git a/suckless/dwm/dwm.c b/suckless/dwm/dwm.c\nindex 389c61d..70a6dc1 100644\n--- a/suckless/dwm/dwm.c\n+++ b/suckless/dwm/dwm.c\n@@ -1001,6 +1001,9 @@ expose(XEvent *e)\n void\n focus(Client *c)\n {\n+\tClient *i, *t;\n+\tWindow trans = None;\n+\n \tif (!c || !ISVISIBLE(c))\n \t\tfor (c = selmon-&gt;stack; c &amp;&amp; (!ISVISIBLE(c) || HIDDEN(c)); c = c-&gt;snext);\n \tif (selmon-&gt;sel &amp;&amp; selmon-&gt;sel != c) {\n@@ -1023,6 +1026,12 @@ focus(Client *c)\n \t\tgrabbuttons(c, 1);\n \t\tXSetWindowBorder(dpy, c-&gt;win, scheme[SchemeSel][ColBorder].pixel);\n \t\tsetfocus(c);\n\n+\t\tif (XGetTransientForHint(dpy, c-&gt;win, &amp;trans)) {\n+\t\t\tXRaiseWindow(dpy, c-&gt;win);\n+\t\t}\n+\n+\t\tfor (i = selmon-&gt;stack; i; i = i-&gt;snext) {\n+\t\t\tif (ISVISIBLE(i) &amp;&amp; (XGetTransientForHint(dpy, i-&gt;win, &amp;trans) &amp;&amp; (t = wintoclient(trans)) &amp;&amp; (t == c))) {\n+\t\t\t\tXRaiseWindow(dpy, i-&gt;win);\n+\t\t\t}\n+\t\t}\n \t} else {\n \t\tXSetInputFocus(dpy, root, RevertToPointerRoot, CurrentTime);\n \t\tXDeleteProperty(dpy, root, netatom[NetActiveWindow]);\n&quot;],&quot;className&quot;:[0,&quot;transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow dark absolute right-0 top-3 -translate-x-1/2 text-2xl [&amp;_svg]:h-[1em] [&amp;_svg]:w-[1em] transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
</div>
<p>This create another problem though… When the leader window gets unfocused,
their transient windows would always reamin on top of everything else!</p>
<p>Thanks to <a href="https://www.reddit.com/r/dwm/comments/sctdxt/comment/huaveje">a comment by
/u/bakkeby</a>, I
found out that I could use
<a href="https://tronche.com/gui/x/xlib/window/XLowerWindow.html"><code>XLowerWindow</code></a> in
the <code>unfocus</code> function to fix this:</p>


<div data-codeblock class="mt-16 group relative mb-8" style="--code-bg: #282c34;--code-fg: #abb2bf;">
  <div class="dark absolute top-0 left-horizontal-padding mx-auto max-w-[calc(100%-var(--horizontal-padding)*2)] -translate-y-[calc(100%-1px)] overflow-hidden sm:left-0">
    <div class="flex items-center gap-2 rounded-t border-t border-primary bg-[var(--code-bg)] px-2 py-1 text-[var(--code-fg)]">
      <div class="shrink-0">
        <svg viewBox="0 0 128 128" width="1em" height="1em" class="text-2xl"><path fill="currentColor" d="m117.5 33.5.3-.2c-.6-1.1-1.5-2.1-2.4-2.6L67.1 2.9c-.8-.5-1.9-.7-3.1-.7-1.2 0-2.3.3-3.1.7l-48 27.9c-1.7 1-2.9 3.5-2.9 5.4v55.7c0 1.1.2 2.3.9 3.4l-.2.1c.5.8 1.2 1.5 1.9 1.9l48.2 27.9c.8.5 1.9.7 3.1.7 1.2 0 2.3-.3 3.1-.7l48-27.9c1.7-1 2.9-3.5 2.9-5.4V36.1c.1-.8 0-1.7-.4-2.6zM64 88.5c9.1 0 17.1-5 21.3-12.4l12.9 7.6c-6.8 11.8-19.6 19.8-34.2 19.8-21.8 0-39.5-17.7-39.5-39.5S42.2 24.5 64 24.5c14.7 0 27.5 8.1 34.3 20l-13 7.5C81.1 44.5 73.1 39.5 64 39.5c-13.5 0-24.5 11-24.5 24.5s11 24.5 24.5 24.5z"></path></svg>
      </div>

      <div class="capitalize">c</div>
    </div>
  </div>

  <pre class="shadow shadow-shadow overflow-x-auto rounded rounded-tl-none bg-[var(--code-bg)] text-[var(--code-fg)] py-4 [color-scheme:dark] [&#38;_code]:grid [&#38;_code>.line]:px-8 [&#38;_code>.line]:border-l-[2px] [&#38;_code>.line]:border-[var(--code-bg)] [&#38;_code>.line.highlighted]:bg-[#272115] [&#38;_code>.line.highlighted]:border-[#624710]"><code class="language-c" metastring="{12-19}"><span class="line"><span style="color:#C678DD">void</span></span><span class="line"><span style="color:#61AFEF">unfocus</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">Client </span><span style="color:#C678DD">*</span><span style="color:#E06C75">c</span><span style="color:#ABB2BF">,</span><span style="color:#E06C75"> </span><span style="color:#C678DD">int</span><span style="color:#E06C75"> </span><span style="color:#E06C75">setfocus</span><span style="color:#ABB2BF">)</span></span><span class="line"><span style="color:#ABB2BF">{</span></span><span class="line"><span style="color:#ABB2BF">	Client </span><span style="color:#C678DD">*</span><span style="color:#ABB2BF">i, </span><span style="color:#C678DD">*</span><span style="color:#ABB2BF">t;</span></span><span class="line"><span style="color:#ABB2BF">	Window trans </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> None;</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#ABB2BF">c)</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#C678DD">return</span><span style="color:#ABB2BF">;</span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#61AFEF">grabbuttons</span><span style="color:#ABB2BF">(c, </span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">);</span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#61AFEF">XSetWindowBorder</span><span style="color:#ABB2BF">(dpy, </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">win</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">scheme</span><span style="color:#ABB2BF">[SchemeNorm][ColBorder].</span><span style="color:#E06C75">pixel</span><span style="color:#ABB2BF">);</span></span><span class="line"><span> </span></span><span class="line highlighted"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">XGetTransientForHint</span><span style="color:#ABB2BF">(dpy, </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">win</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF">trans))</span></span><span class="line highlighted"><span style="color:#ABB2BF">		</span><span style="color:#61AFEF">XLowerWindow</span><span style="color:#ABB2BF">(dpy, </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">win</span><span style="color:#ABB2BF">);</span></span><span class="line highlighted"><span> </span></span><span class="line highlighted"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">for</span><span style="color:#ABB2BF"> (i </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">c</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E5C07B">mon</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">stack</span><span style="color:#ABB2BF">; i; i </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">i</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">snext</span><span style="color:#ABB2BF">) {</span></span><span class="line highlighted"><span style="color:#ABB2BF">		</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">ISVISIBLE</span><span style="color:#ABB2BF">(i) </span><span style="color:#56B6C2">&amp;&amp;</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">XGetTransientForHint</span><span style="color:#ABB2BF">(dpy, </span><span style="color:#E5C07B">i</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">win</span><span style="color:#ABB2BF">, </span><span style="color:#C678DD">&amp;</span><span style="color:#ABB2BF">trans) </span><span style="color:#56B6C2">&amp;&amp;</span><span style="color:#ABB2BF"> (t </span><span style="color:#C678DD">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">wintoclient</span><span style="color:#ABB2BF">(trans)) </span><span style="color:#56B6C2">&amp;&amp;</span><span style="color:#ABB2BF"> (t </span><span style="color:#C678DD">==</span><span style="color:#ABB2BF"> c))) {</span></span><span class="line highlighted"><span style="color:#ABB2BF">			</span><span style="color:#61AFEF">XLowerWindow</span><span style="color:#ABB2BF">(dpy, </span><span style="color:#E5C07B">i</span><span style="color:#ABB2BF">-&gt;</span><span style="color:#E06C75">win</span><span style="color:#ABB2BF">);</span></span><span class="line highlighted"><span style="color:#ABB2BF">		}</span></span><span class="line highlighted"><span style="color:#ABB2BF">	}</span></span><span class="line"><span> </span></span><span class="line"><span style="color:#ABB2BF">	</span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (setfocus) {</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#61AFEF">XSetInputFocus</span><span style="color:#ABB2BF">(dpy, root, RevertToPointerRoot, CurrentTime);</span></span><span class="line"><span style="color:#ABB2BF">		</span><span style="color:#61AFEF">XDeleteProperty</span><span style="color:#ABB2BF">(dpy, root, </span><span style="color:#E06C75">netatom</span><span style="color:#ABB2BF">[NetActiveWindow]);</span></span><span class="line"><span style="color:#ABB2BF">	}</span></span><span class="line"><span style="color:#ABB2BF">}</span></span><span class="line"></span></code></pre>

  <astro-island uid="2oqYAM" component-url="/CopyCodeBlockButton.cbf359cc.js" component-export="default" renderer-url="/client.c636c68e.js" props="{&quot;aria-label&quot;:[0,&quot;Copy code&quot;],&quot;tooltipText&quot;:[0,&quot;Copied!&quot;],&quot;code&quot;:[0,&quot;void\nunfocus(Client *c, int setfocus)\n{\n\tClient *i, *t;\n\tWindow trans = None;\n\n\tif (!c)\n\t\treturn;\n\tgrabbuttons(c, 0);\n\tXSetWindowBorder(dpy, c-&gt;win, scheme[SchemeNorm][ColBorder].pixel);\n\n\tif (XGetTransientForHint(dpy, c-&gt;win, &amp;trans))\n\t\tXLowerWindow(dpy, c-&gt;win);\n\n\tfor (i = c-&gt;mon-&gt;stack; i; i = i-&gt;snext) {\n\t\tif (ISVISIBLE(i) &amp;&amp; (XGetTransientForHint(dpy, i-&gt;win, &amp;trans) &amp;&amp; (t = wintoclient(trans)) &amp;&amp; (t == c))) {\n\t\t\tXLowerWindow(dpy, i-&gt;win);\n\t\t}\n\t}\n\n\tif (setfocus) {\n\t\tXSetInputFocus(dpy, root, RevertToPointerRoot, CurrentTime);\n\t\tXDeleteProperty(dpy, root, netatom[NetActiveWindow]);\n\t}\n}\n&quot;],&quot;className&quot;:[0,&quot;transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children=""><button type="button" class="flex items-center justify-center flex-row gap-2 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled bg-background text-on-background rounded border border-divider p-1 shadow shadow-shadow dark absolute right-0 top-3 -translate-x-1/2 text-2xl [&amp;_svg]:h-[1em] [&amp;_svg]:w-[1em] transition-opacity duration-500 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto focus:opacity-100 focus:pointer-events-auto" aria-label="Copy code"><span class="text-[var(--code-fg)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button></astro-island>
</div>
<aside class="my-8 flex max-w-prose gap-4 sm:rounded border-y sm:border-y-0 sm:border-l bg-surface full-width-on-mobile px-horizontal-padding py-4 sm:shadow sm:shadow-shadow sm:mx-0 flex-row border-warn">
  <div class="">
    <div class="text-warn">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-xoctagon"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
  </div>
  </div>

  <article class="overflow-x-hidden [&_h2]:first-of-type:mt-0 [&_h2]:first-of-type:pt-0">
    <p>This is pretty cutting-edge and coming from a person with
no expertise in C, so it might be broken in several ways. I’m just messing
around.</p>
  </article>
</aside>
<h2 id="final-result">Final result<a aria-hidden="true" tabIndex="-1" href="#final-result"><span class="icon icon-link"></span></a></h2>
<p>Here’s a demonstration of the final result:</p>
<figure>
  
  <video class="mx-auto" controls src="/assets/demo.a69bb5bc.webm"></video>

  <figcaption class="mt-2 px-horizontal-padding text-center">
        Demo of Android Studio running in dwm
      </figcaption>
</figure>
          </div>

          <aside class="">
            <div data-toc-wrapper class="w-full sm:overflow-y-auto lg:sticky lg:top-[1rem] lg:max-h-[calc(100vh-1rem)] lg:pb-8 lg:pl-8">
      <div class="hidden lg:block">
        <div class="flex justify-between gap-2">
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>

            <h2 class="m-0">Table of Contents</h2>
          </div>

          <div class="flex items-center transition-transform duration-100 ease-in group-open:rotate-180 lg:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
          </div>
        </div>

        <div class="
          mt-4
          [&_a_*]:indent-0
          [&_nav_ol]:m-0
          [&_nav_ol]:list-none
          [&_nav_ol]:indent-4
          [&_nav_ol_ol]:indent-8
          [&_nav_ol_ol_ol]:indent-12
          [&_nav_ol_ol_ol_ol]:indent-16
          [&_nav_ol_li]:relative
          [&_nav_ol_li]:before:absolute
          [&_nav_ol_li]:before:top-0
          [&_nav_ol_li]:before:left-0
          [&_nav_ol_li]:before:h-full
          [&_nav_ol_li]:before:w-[1px]
          [&_nav_ol_li]:before:bg-divider
          [&_nav_ol_li]:before:content-['']
          [&_nav_ol_li_a]:block
          [&_nav_ol_li_a]:truncate
          [&_nav_ol_li_a]:border-b-0
          [&_nav_ol_li_a]:transition-colors
          [&_nav_ol_li_a]:duration-300
          [&_nav_ol_li_a:hover]:bg-hover
          [&_nav_ol_li[data-active]]:before:bg-primary
          [&_nav_ol_li[data-active]>a]:text-primary
       ">
          <nav data-toc>
  <ol>
  <li>
          <a href="#skipping-transient-windows-in-the-taskbar">Skipping transient windows in the taskbar</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#skipping-transient-windows-in-monocle-layout-count">Skipping transient windows in monocle layout count</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#do-not-focus-transient-windows-with-mod--j-and-mod--k">Do not focus transient windows with mod + j and mod + k</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#applying-nth-tag-to-a-leader-windows-transient-windows">Applying nth tag to a leader window’s transient windows</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#raising-all-transient-windows-when-the-leader-window-gets-focused">Raising all transient windows when the leader window gets focused</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#final-result">Final result</a>

          <ol>
  
</ol>
        </li>
</ol>
</nav>
        </div>
      </div>

      <details class="card group mb-8 max-w-prose px-horizontal-padding py-4 lg:hidden" aria-label="Table of Contents">
        <summary class="list-none">
          <div class="flex justify-between gap-2">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>

              <h2 class="m-0">Table of Contents</h2>
            </div>

            <div class="flex items-center transition-transform duration-100 ease-in group-open:rotate-180 lg:hidden">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </div>
          </div>
        </summary>

        <div class="
          mt-4
          [&_ol]:m-0
          [&_ol]:list-outside
          [&_ol]:px-horizontal-padding
          [&_ol_li:not(:first-child)]:mt-1
        ">
          <nav data-toc>
  <ol>
  <li>
          <a href="#skipping-transient-windows-in-the-taskbar">Skipping transient windows in the taskbar</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#skipping-transient-windows-in-monocle-layout-count">Skipping transient windows in monocle layout count</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#do-not-focus-transient-windows-with-mod--j-and-mod--k">Do not focus transient windows with mod + j and mod + k</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#applying-nth-tag-to-a-leader-windows-transient-windows">Applying nth tag to a leader window’s transient windows</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#raising-all-transient-windows-when-the-leader-window-gets-focused">Raising all transient windows when the leader window gets focused</a>

          <ol>
  
</ol>
        </li><li>
          <a href="#final-result">Final result</a>

          <ol>
  
</ol>
        </li>
</ol>
</nav>
        </div>
      </details>
    </div>


          </aside>
        </div>
      </article>

      <hr class="full-width-on-mobile mt-8">

      <div class="full-width-on-mobile sm:my-8">
        <nav class="flex items-stretch sm:gap-4" aria-label="Posts navigation">
  <a class="sm:card flex flex-none basis-1/2 flex-col gap-2 border-0 py-4 px-horizontal-padding transition-colors duration-300 hover:bg-hover" href="https://phelipetls.github.io/posts/making-vim-understand-typescript-path-mapping">
        <span class="text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
        </span>

        Making Vim understand TypeScript path mapping
      </a>

  <div class="border-l border-divider sm:hidden"></div>

  <a class="sm:card flex flex-none basis-1/2 flex-col-reverse items-end justify-end gap-2 border-0 py-4 px-horizontal-padding text-right transition-colors duration-300 hover:bg-hover" href="https://phelipetls.github.io/posts/nodejs-one-liner-to-read-json-files">
        Node.js one-liner to read JSON files

        <span class="text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
        </span>
      </a>
</nav>
      </div>

      <hr class="full-width-on-mobile mb-8">
    </div>
  </main>

    <footer class="mt-8 border-t border-divider bg-background sm:border-0">
  <div class="mx-auto flex w-full max-w-content flex-col items-center gap-2 px-horizontal-padding pt-4 pb-8 sm:justify-between">
    <nav aria-label="Contacts" class="flex gap-2">
  <a class="rounded-full transition-colors duration-300 hover:bg-hover p-2 [&_svg]:transition-colors [&_svg]:duration-300 hover:text-primary border-0" id="contact-email" href="phelipe_teles@hotmail.com" aria-label="E-mail">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
</a>

  <a class="rounded-full transition-colors duration-300 hover:bg-hover p-2 [&_svg]:transition-colors [&_svg]:duration-300 hover:text-primary border-0" id="contact-linkedin" href="https://linkedin.com/in/phelipeteles" aria-label="LinkedIn">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
</a>

  <a class="rounded-full transition-colors duration-300 hover:bg-hover p-2 [&_svg]:transition-colors [&_svg]:duration-300 hover:text-primary border-0" id="contact-github" href="https://github.com/phelipetls" aria-label="GitHub">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>
</a>
</nav>

    <span class="text-center">All content is under a
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>
license.
</span>
  </div>
</footer>
  </body></html>