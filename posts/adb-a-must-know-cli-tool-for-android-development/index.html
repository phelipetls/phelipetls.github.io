<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="description" content="adb is a CLI that lets you control your Android device from your computer. In this post I want to share its features that made me enjoy more mobile development." />
<meta name="deploy-date" content="2022-02-14">
<meta name="publish-date" content="2022-02-07">
<meta name="last-modified-date" content="2022-02-13">
<meta name="author" content="">
<meta name="color-scheme" content="dark light">


<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/icon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Fira+Sans&display=swap" rel="stylesheet">





  
  


<link rel="stylesheet" href="/css/main.min.css" />
<link rel="stylesheet" href="/css/dark-syntax-highlight.min.css" />

<title>
  adb: a must-know CLI tool for Android development | Phelipe Teles
</title>



<meta property="og:title" content="adb: a must-know CLI tool for Android development" />
<meta property="og:description" content="adb is a CLI that lets you control your Android device from your computer. In this post I want to share its features that made me enjoy more mobile development." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://phelipetls.github.io/posts/adb-a-must-know-cli-tool-for-android-development/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-02-13T19:01:51-03:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="adb: a must-know CLI tool for Android development"/>
<meta name="twitter:description" content="adb is a CLI that lets you control your Android device from your computer. In this post I want to share its features that made me enjoy more mobile development."/>





    
      
    
  </head>

  <body class="preload text-foreground bg-background transition transition-colors duration-75 ease-out">
    

    
      
    

    <script>window.__setTheme = function (newTheme) {
  document.body.setAttribute('data-theme', newTheme)
  localStorage.setItem('__theme', newTheme)
}

const storedTheme = localStorage.getItem('__theme')

if (storedTheme) {
  window.__setTheme(storedTheme)
} else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
  window.__setTheme('dark')
}

/* Enable animations */
window.addEventListener('load', function () {
  document.body.classList.remove('preload')
})
</script>

    <div class="flex flex-col min-h-screen">
      <div class="nav-container overflow-hidden sticky bg-background bg-opacity-80 backdrop-filter backdrop-blur-sm top-0 py-4 mt-6 flex-shrink-0 z-50">
  <div class="flex items-center justify-between mx-auto max-w-prose px-4">
    <nav class="" aria-label="Main navigation">
      

      <div class="flex flex-row flex-wrap gap-2"><a
            id=""
            class="text-foreground "
            href="https://phelipetls.github.io/"
          >
            About
          </a><a
            id=""
            class="text-foreground border-primary"
            href="https://phelipetls.github.io/posts/"
          >
            Posts
          </a><a
            id=""
            class="text-foreground "
            href="https://phelipetls.github.io/projects/"
          >
            Projects
          </a><a
            id=""
            class="text-foreground "
            href="https://phelipetls.github.io/embedded-resume/"
          >
            Resumé
          </a></div>
    </nav>

    <button
  id="theme-button"
  class="rounded-full p-1"
  aria-label="Change theme"
>
  <svg width="24" height="24" viewBox="0 0 24 24">
    <title>Theme icon</title>

    <defs>
      <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><title>Moon</title><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>

      <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><title>Sun</title><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>

    </defs>

    <use id="theme-button-svg-icon" href="#sun" />
  </svg>
</button>

  </div>
</div>


      <div class="py-16 px-4 flex-1 max-w-prose mx-auto flex flex-col container mx-auto">
        <main class="flex flex-1 flex-col">
          
  <article>
    <h1 class="text-4xl mb-4">
      adb: a must-know CLI tool for Android development
    </h1>

    <div class="mb-4">
      <time datetime="2022-02-07">
        
          February 07, 2022
        
      </time>

      <br class="inline sm:hidden" />

      
        <span class="hidden sm:inline">
          &nbsp;·&nbsp;
        </span>

        <time class="italic" datetime="2022-02-13">
          Last modified at February 13, 2022
        </time>
      
    </div>

    
      <div>
        <span class="mr-1">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag" style="display: inline;"><title>Tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>

</span>


  <a href="/tags/react-native/" class="no-underline">react native</a><span class="last:hidden">,</span>

  <a href="/tags/android/" class="no-underline">android</a><span class="last:hidden">,</span>

  <a href="/tags/mobile/" class="no-underline">mobile</a><span class="last:hidden">,</span>


      </div>
    

    <hr class="my-8" />

    <p><a
  href="https://developer.android.com/studio/command-line/adb"
  
  class="border-foreground"
><code>adb</code></a>
 is a CLI that
lets you control your Android device from your computer. In this post I want to
share its features that made me enjoy more mobile development.</p>
<!-- more -->
<h2 class="text-primary group mb-8 mt-16" id="initial-setup">
  Initial Setup
  <a class="border-0 hidden text-highlight group-hover:inline" href="#initial-setup">#</a>
</h2>
<p>First, you&rsquo;ll need to connect your device to your computer, either <a
  href="https://developer.android.com/studio/command-line/adb#Enabling"
  
  class=""
>through
USB</a>
 or <a
  href="https://developer.android.com/studio/command-line/adb#connect-to-a-device-over-wi-fi-android-11&#43;"
  
  class=""
>purely
via
Wi-Fi</a>

(<em>if you&rsquo;re on Android 11+</em>), but it&rsquo;s also possible to use <code>adb</code> over Wi-Fi on
Android 10 or lower if you follow some <a
  href="https://developer.android.com/studio/command-line/adb#wireless"
  
  class=""
>initial
steps</a>
 while
connected over USB.</p>
<p>If everything works correctly, by running <code>adb devices</code> you should see
something like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ adb devices

List of devices attached
emulator-5554	device
0035714150	device
</code></pre></div><h2 class="text-primary group mb-8 mt-16" id="record-screen-with-adb-shell-screenrecord">
  Record screen with <code>adb shell screenrecord</code>
  <a class="border-0 hidden text-highlight group-hover:inline" href="#record-screen-with-adb-shell-screenrecord">#</a>
</h2>
<p>To record your screen, it&rsquo;s as simple as running <code>adb shell screenrecord /sdcard/video.mp4</code>. After you&rsquo;re done, press <kbd>Ctrl</kbd> + <kbd>C</kbd>.
Run <code>adb pull /sdcard/video.mp4 ~/Videos/video.mp4</code> to get the video into your
computer.</p>
<p>It&rsquo;s also useful to know some of the <a
  href="https://developer.android.com/studio/command-line/adb#screenrecord"
  
  class=""
>command line
options</a>
,
my favorite ones being to limit the video size with <code>--size</code> and recording time
with <code>--time-limit</code>.</p>
<p>For example, I typically run <code>adb shell screenrecord --size 320x568 --time-limit=120 /sdcard/video.mp4</code>.</p>
<h2 class="text-primary group mb-8 mt-16" id="capture-screen-with-adb-shell-screencap">
  Capture screen with <code>adb shell screencap</code>
  <a class="border-0 hidden text-highlight group-hover:inline" href="#capture-screen-with-adb-shell-screencap">#</a>
</h2>
<p>This is straightforward, it just captures the screen with <code>adb shell screencap /sdcard/img.png</code>, then getit locally with <code>adb pull /sdcard/img.png ~/Images/img.png</code>.</p>
<h2 class="text-primary group mb-8 mt-16" id="debugging-with-adb-logcat">
  Debugging with <code>adb logcat</code>
  <a class="border-0 hidden text-highlight group-hover:inline" href="#debugging-with-adb-logcat">#</a>
</h2>
<p>This has proved useful to me so many times. In the context of React Native
development, this is usually less useful in debug builds. But in release builds
it&rsquo;s sometimes the only way to debug when something wrong happens.</p>
<p>For example, when an app crashes or some SDK call is not working, you&rsquo;ll
probably be able to see why with <code>adb logcat</code>.</p>
<p>The downside is that the output can be overwhelming, since it&rsquo;s a huge wall of
text that is growing constantly. So it pays off to know how to filter it, e.g.
if I wanted to see only logs tagged with <code>Sentry</code>, <code>ReactNative</code> and
<code>ReactNativeJS</code> at any priority level:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">adb logcat Sentry:* ReactNative:* ReactNativeJS:* *:S
</code></pre></div><p>The official Google
<a
  href="https://developer.android.com/studio/command-line/logcat#filteringOutput"
  
  class=""
>documentation</a>

explains nicely how this works.</p>
<h2 class="text-primary group mb-8 mt-16" id="networking-with-adb-reverse">
  Networking with <code>adb reverse</code>
  <a class="border-0 hidden text-highlight group-hover:inline" href="#networking-with-adb-reverse">#</a>
</h2>
<p>Imagine you want to see your <a
  href="https://storybook.js.org/"
  
  class=""
>Storybook</a>
 files in a
mobile web browser. If you go to <code>localhost:6006</code> in your computer&rsquo;s browser,
it works, but nothing shows up in your mobile device&rsquo;s browser, since no
process is bound to port <code>6060</code> there.</p>
<p>You can solve this problem by running <code>adb reverse tcp:6006 tcp:6006</code>. Now your
mobile device will have access to the server running on your computer.</p>
<p>An example from React Native is the Metro bundler, that usually serves the
bundled JS of your app at port <code>8081</code>, so we need to run <code>adb reverse tcp:8081 tcp:8081</code> to make the server available in your mobile device. This is usually
done under the hood when we run <code>npx react-native run-android</code>, but if the
device can&rsquo;t find the JS bundle or is stuck loading it we usually need to run
it again.</p>
<p>There&rsquo;s also <code>adb forward</code>, in case you need to make a web server running on
your phone also available in your computer.</p>
<h2 class="text-primary group mb-8 mt-16" id="startkill-apps">
  Start/kill apps
  <a class="border-0 hidden text-highlight group-hover:inline" href="#startkill-apps">#</a>
</h2>
<p>You can start and kill an app with the <code>adb shell am</code>, in which <code>am</code> stands for
<a
  href="https://developer.android.com/studio/command-line/adb#am"
  
  class=""
><em>Activity Manager</em></a>
.</p>
<p>Given the app&rsquo;s package name, you can start it with:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">adb shell am start -n com.company.app/.MainActivity
</code></pre></div><p>And kill it with:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">adb shell am force-stop com.company.app
</code></pre></div><p>You can also open a URL, this is specially useful to test deep links:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">adb shell am start -a android.intent.action.VIEW -d company://Screen
</code></pre></div><h2 class="text-primary group mb-8 mt-16" id="installuninstall-apps">
  Install/uninstall apps
  <a class="border-0 hidden text-highlight group-hover:inline" href="#installuninstall-apps">#</a>
</h2>
<p>You can install an <code>.apk</code> file with <code>adb install app.apk</code>.</p>
<p>And uninstall it with <code>adb uninstall com.company.app</code>.</p>
<p>This is usually how I do it, but there&rsquo;s also the <code>pm</code> command, which stands
for <a
  href="https://developer.android.com/studio/command-line/adb#pm"
  
  class=""
>Package
Manager</a>
, that is a
more powerful interface to manage apps. Apart from enabling you to install and
uninstall apps, you can also clear data, grant/revoke permissions etc.</p>


    <hr class="my-8" />

    <nav class="grid grid-cols-1 gap-2 sm:grid-cols-2" aria-label="Posts navigation">
  <div class="sm:col-start-1 sm:col-end-1 h-full flex items-center gap-2 group">
    
      <div class="flex items-center group-hover:text-highlight">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
      </div>

      <a class="border-0" href="/posts/nodejs-one-liner-to-read-json-files/" title="Previous post">
        Node.js one-liner to read JSON files
      </a>
    
  </div>

  <div class="sm:col-start-2 sm:col-end-2 text-right mt-2 sm:mt-0 h-full flex justify-end gap-2 group">
    
  </div>
</nav>

  </article>

        </main>

        <footer class="flex flex-col items-center gap-8 mt-16">
  <nav
    class="flex gap-4"
    aria-label="Links"
  >
    <a class="border-0" href="mailto:" title="E-mail">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail"><title>E-Mail</title><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>

</a>

<a class="border-0" href="" title="LinkedIn">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><title>LinkedIn</title><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>

</a>

<a class="border-0" href="" title="GitHub">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><title>GitHub</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>

</a>

  </nav>

  <p class="text-center">
    This content is under a
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>
license.

  </p>
</footer>

      </div>
    </div>

    

    
    

    
      
      
    

    <script src="https://phelipetls.github.io/js/toggle-theme.js"></script>
    <script src="https://phelipetls.github.io/js/nav.js"></script>

    
    
  </body>
</html>
