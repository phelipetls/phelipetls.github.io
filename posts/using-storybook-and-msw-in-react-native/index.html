<!DOCTYPE html><html class="h-full min-h-0 text-base sm:text-lg selection:bg-primary selection:text-on-primary scroll-smooth scroll-pt-nav-height sm:scroll-pt-0" lang="en-US" data-notransition> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="deploy-date" content="2025-10-16"><meta name="author" content="Phelipe Teles"><meta name="color-scheme" content="dark light"><title>Using Storybook and MSW in React Native - Phelipe Teles | Phelipe Teles</title><link rel="canonical" href="https://phelipetls.github.io/posts/using-storybook-and-msw-in-react-native/"><meta name="description" content="The integration between Storybook and
Mock Service Worker enables you to develop components
isolated from your app and your back-end server."><meta name="robots" content="index, follow"><meta property="og:title" content="Using Storybook and MSW in React Native"><meta property="og:type" content="article"><meta property="og:image" content="https://phelipetls.github.io/posts/using-storybook-and-msw-in-react-native/image.png"><meta property="og:url" content="https://phelipetls.github.io/posts/using-storybook-and-msw-in-react-native/"><meta property="og:image:url" content="https://phelipetls.github.io/posts/using-storybook-and-msw-in-react-native/image.png"><meta property="og:image:height"><meta property="og:image:alt" content="Blog Post Using Storybook and MSW in React Native Preview Image"><meta property="article:published_time" content="2022-03-02T00:00:00Z"><meta property="article:author" content="Phelipe Teles"><meta property="article:tag" content="react native"><meta property="article:tag" content="javascript"><meta property="article:tag" content="storybook"><meta name="twitter:card" content="summary_large_image"><meta content="https://phelipetls.github.io/posts/using-storybook-and-msw-in-react-native/image.png" name="twitter:image"> <meta name="publish-date" content="2022-03-02"> <meta name="keywords" content="react native, javascript, storybook"><meta name="description" content="The integration between Storybook and
Mock Service Worker enables you to develop components
isolated from your app and your back-end server."> <style id="sandpack">--sxs{--sxs:1 sp-k-eyOShd sp-k-iOHdLQ}@media{@keyframes sp-k-eyOShd{0%{opacity:0}100%{opacity:1}}@keyframes sp-k-iOHdLQ{0%{transform:rotateX(-25.5deg) rotateY(45deg)}100%{transform:rotateX(-25.5deg) rotateY(405deg)}}}--sxs{--sxs:2 sp-c-gMfcns sp-c-bxeRRt sp-c-hfoyCM sp-c-fWymNx sp-c-euXojQ sp-c-bpmgvy sp-c-PJLV}@media{.sp-c-gMfcns svg{margin:auto}.sp-c-bxeRRt{-webkit-appearance:none;appearance:none;outline:none;display:flex;align-items:center;font-size:inherit;font-family:inherit;background-color:transparent;transition:color var(--sp-transitions-default), background var(--sp-transitions-default);cursor:pointer;color:var(--sp-colors-clickable);border:0;text-decoration:none}.sp-c-bxeRRt:disabled{color:var(--sp-colors-disabled)}.sp-c-bxeRRt:hover:not(:disabled,[data-active='true']){color:var(--sp-colors-hover)}.sp-c-bxeRRt[data-active="true"]{color:var(--sp-colors-accent)}.sp-c-bxeRRt svg{min-width:var(--sp-space-4);width:var(--sp-space-4);height:var(--sp-space-4)}.sp-c-bxeRRt.sp-c-gMfcns{padding:var(--sp-space-1);height:var(--sp-space-7);display:flex}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:not(:has(span)){width:var(--sp-space-7)}.sp-c-bxeRRt.sp-c-gMfcns.sp-c-bxeRRt:has(svg + span){padding-right:var(--sp-space-3);padding-left:var(--sp-space-2);gap:var(--sp-space-1)}.sp-c-hfoyCM{padding:0 var(--sp-space-1) 0 var(--sp-space-1);border-radius:var(--sp-border-radius);margin-left:var(--sp-space-1);width:var(--sp-space-5);visibility:hidden}.sp-c-hfoyCM svg{width:var(--sp-space-3);height:var(--sp-space-3);display:block;position:relative;top:1px}.sp-c-fWymNx{margin:0;display:block;font-family:var(--sp-font-mono);font-size:var(--sp-font-size);color:var(--sp-syntax-color-plain);line-height:var(--sp-font-lineHeight)}.sp-c-euXojQ{display:flex;flex-direction:column;width:100%;position:relative;background-color:var(--sp-colors-surface1);gap:1px}.sp-c-euXojQ:has(.sp-stack){background-color:var(--sp-colors-surface2)}.sp-c-bpmgvy{transform:translate(-4px, 9px) scale(0.13, 0.13)}.sp-c-bpmgvy *{position:absolute;width:96px;height:96px}}--sxs{--sxs:3 sp-c-PJLV-kCOVwI-status-pass sp-c-PJLV-kEzYsr-status-fail sp-c-PJLV-gHAhSA-status-skip sp-c-PJLV-jgnHyR-status-title sp-c-PJLV-iCgxLS-status-run sp-c-PJLV-bnDZSy-status-pass sp-c-PJLV-eYuGwt-status-fail}@media{.sp-c-PJLV-kCOVwI-status-pass{color:var(--test-pass)}.sp-c-PJLV-kEzYsr-status-fail{color:var(--test-fail)}.sp-c-PJLV-gHAhSA-status-skip{color:var(--test-skip)}.sp-c-PJLV-jgnHyR-status-title{color:var(--test-title)}.sp-c-PJLV-iCgxLS-status-run{background:var(--test-run);color:var(--sp-colors-surface1)}.sp-c-PJLV-bnDZSy-status-pass{background:var(--test-pass);color:var(--sp-colors-surface1)}.sp-c-PJLV-eYuGwt-status-fail{background:var(--test-fail);color:var(--sp-colors-surface1)}}</style> <link rel="stylesheet" href="/_astro/_id_.ubW0JEXm.css">
<link rel="stylesheet" href="/_astro/_id_.Ck7a8zcL.css"></head> <body class="relative flex h-full flex-col bg-background font-sans text-on-background [&_main]:my-6"> <script>
  // @ts-check
  const storedThemeChoice = window.localStorage.getItem('__theme') ?? 'system'

  window.__setTheme = setTheme
  // prettier-ignore
  window.__setTheme(/** @type {ThemeChoice} */ (storedThemeChoice))

  /**
   * @type {(themeChoice: ThemeChoice) => Promise<void>}
   */
  async function setTheme(themeChoice) {
    let theme = themeChoice

    if (themeChoice === 'system') {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    const changeTheme = () => {
      document.body.classList.toggle('dark', theme === 'dark')
    }

    let viewTransition = null

    if (
      document.startViewTransition &&
      !document.documentElement.hasAttribute('data-notransition')
    ) {
      document.documentElement.setAttribute('data-notransition', '')

      const width = document.documentElement.clientWidth
      const height = document.documentElement.clientHeight
      const diagonal = Math.sqrt(width ** 2 + height ** 2)
      const circleRadius = height > width ? height : diagonal
      document.documentElement.style.setProperty(
        '--circle-radius',
        `${circleRadius}px`,
      )

      viewTransition = document.startViewTransition(() => {
        changeTheme()
      })
    } else {
      changeTheme()
    }

    window.localStorage.setItem('__theme', themeChoice)

    document.body.dispatchEvent(
      new CustomEvent('newTheme', {
        detail: {
          themeChoice,
          theme,
        },
      }),
    )

    if (viewTransition) {
      await viewTransition.finished
      document.documentElement.removeAttribute('data-notransition')
    }
  }

  window.addEventListener('storage', function (e) {
    const newTheme = e.newValue
    if (newTheme && newTheme && e.key === '__theme') {
      // prettier-ignore
      window.__setTheme(/** @type {ThemeChoice} */ (newTheme))
    }
  })

  window.addEventListener('load', function () {
    document.documentElement.removeAttribute('data-notransition')
  })
</script> <div class="w-full"> <div class="pt-nav-height sm:hidden"> <div class="h-nav-height fixed top-0 left-0 z-30 flex w-screen items-center justify-between rounded-none bg-background/90 backdrop-blur-xs px-horizontal-padding"> <div class="flex flex-row items-center gap-2 min-w-0"> <a href="/posts/" data-testid="parent-page-link" aria-label="Go back to previous page"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left "><path d="m15 18-6-6 6-6"></path></svg> </a> <h2 class="m-0 truncate font-sans font-normal">Using Storybook and MSW in React Native - Phelipe Teles</h2> </div> <button type="button" class="hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 bg-transparent" data-a11y-dialog-show="sidenav" data-testid="open-sidenav" aria-label="Open navigation sidebar"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu "><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg> </button> </div> </div> <div class="hidden h-full w-full sm:block"> <div class="grid grid-cols-layout"> <div class="flex w-full items-center justify-between"> <div class="mx-auto flex w-full max-w-content justify-between"> <nav class="flex justify-between" aria-label="Main navigation"> <ul class="m-0 flex flex-row list-none gap-4"> <li class=""> <a id="about" href="/" class="py-2 inline-block h-full w-full group"> <span class="underline underline-offset-8 decoration-2 decoration-transparent group-hover:decoration-hover"> About </span> </a> </li><li class=""> <a id="posts" href="/posts/" class="py-2 inline-block h-full w-full group" aria-current="page"> <span class="underline underline-offset-8 decoration-2 decoration-primary group-hover:decoration-primary-hover"> Posts </span> </a> </li> </ul> </nav> <div class="flex flex-row items-center gap-2">  <div style="--gap:2px;--icon-size:24px;--select-padding:calc(var(--icon-size) + var(--gap) * 2)" class="h-[32px] rounded-sm items-center grid justify-between bg-surface shadow-xs shadow-shadow"> <select class="h-full sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-theme-select="true" aria-label="Choose a theme">  <option value="light">Light</option> <option value="dark">Dark</option> <option value="system">System</option>   </select> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="col-span-1 col-start-1 row-start-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg class="feather" viewBox="0 0 24 24" width="24" height="24"> <title>Theme icon</title> <defs> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon " id="moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun " id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor " id="monitor"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg> </defs> <use data-theme-select-icon href="#monitor"></use> </svg>  </span> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="justify-self-end row-start-1 col-start-3 col-span-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div> <script type="module">const i=document.querySelectorAll("[data-theme-select]");i?.forEach(e=>{const t=window.localStorage.getItem("__theme")??"system";s(t);const o=Array.from(e.options).find(n=>n.value===t);o&&o.setAttribute("selected",""),e.addEventListener("change",function(n){if(!n.target)return;const c=n.target.selectedOptions[0];c&&window.__setTheme(c.value)})});document.body.addEventListener("newTheme",function(e){const t=e.detail.themeChoice;s(t)});function s(e){const t={dark:"#moon",light:"#sun",system:"#monitor"}[e];i.forEach(o=>{o.parentElement?.querySelector("[data-theme-select-icon]")?.setAttribute("href",t)})}</script> </div> </div> </div> </div> </div> </div> <aside data-a11y-dialog="sidenav" aria-hidden="true" class="fixed z-50 h-full w-full" style="visibility: hidden;"> <div data-a11y-dialog-hide class="fixed inset-0 -z-1 w-full bg-neutral-700/75 backdrop-blur-xs"></div> <div role="document" class="ml-auto h-full flex flex-col w-3/4 rounded-none bg-background py-0 will-change-transform"> <div class="mb-2 flex h-nav-height items-center justify-end px-horizontal-padding"> <button type="button" data-a11y-dialog-hide="true" aria-label="Close" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x "><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> </button> </div> <nav class="flex flex-col" aria-label="Main navigation"> <ul class="m-0 flex list-none flex-col items-center justify-center gap-2 px-horizontal-padding"> <li class="w-full"> <a id="about" href="/" class="flex items-center justify-center flex-row transition-colors duration-300 hover:bg-hover disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded-sm whitespace-nowrap py-1 px-2 bg-surface text-on-background"><div class="pr-2"></div>About<div class="pl-2"></div></a> </li><li class="w-full"> <a id="posts" href="/posts/" aria-current="page" class="flex items-center justify-center flex-row transition-colors duration-300 disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled rounded-sm whitespace-nowrap py-1 px-2 bg-primary text-on-primary hover:bg-primary-hover shadow-xs shadow-shadow"><div class="pr-2"></div>Posts<div class="pl-2"></div></a> </li> </ul> </nav> <div class="flex flex-col gap-2 pb-4 mt-auto px-horizontal-padding"> <div style="--gap:2px;--icon-size:24px;--select-padding:calc(var(--icon-size) + var(--gap) * 2)" class="h-[32px] rounded-sm items-center grid justify-between bg-background"> <select class="h-full sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-language-select="true" aria-label="Choose a language">  <option selected value="en">English</option> <option value="pt">Português</option>   </select> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="col-span-1 col-start-1 row-start-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages " slot="start-icon"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg>  </span> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="justify-self-end row-start-1 col-start-3 col-span-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div> <script type="module">const a=document.querySelectorAll("[data-language-select]");a?.forEach(e=>{e.addEventListener("change",function(){window.location.href=n()})});function n(){const e=window.location.pathname;let t=e;switch(e){case"/pt":t="/";break;case"/":t="/pt/";break;default:e.startsWith("/pt/")?t=e.replace("/pt/","/"):t="/pt"+e;break}return t}</script> <div style="--gap:2px;--icon-size:24px;--select-padding:calc(var(--icon-size) + var(--gap) * 2)" class="h-[32px] rounded-sm items-center grid justify-between bg-surface shadow-xs shadow-shadow"> <select class="h-full sm:py-0 rounded-sm bg-inherit appearance-none text-center row-start-1 col-start-1 col-end-4 px-(--select-padding)" data-theme-select="true" aria-label="Choose a theme">  <option value="light">Light</option> <option value="dark">Dark</option> <option value="system">System</option>   </select> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="col-span-1 col-start-1 row-start-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg class="feather" viewBox="0 0 24 24" width="24" height="24"> <title>Theme icon</title> <defs> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon " id="moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun " id="sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-monitor " id="monitor"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg> </defs> <use data-theme-select-icon href="#monitor"></use> </svg>  </span> <span style="--svg-size:calc(var(--icon-size) - 8px)" class="justify-self-end row-start-1 col-start-3 col-span-1 flex items-center justify-center w-(--icon-size) h-(--icon-size) [&#38;_svg]:w-(--svg-size) [&#38;_svg]:h-(--svg-size) pointer-events-none">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg>  </span> </div>  </div> </div> </aside> <script type="module" src="/_astro/SideNav.astro_astro_type_script_index_0_lang.DwDLKeHA.js"></script>   <main class="grid grid-cols-layout"> <div class="sm:col-content px-0"> <article> <header class="flex flex-col"> <h1 class="mb-4 text-4xl max-w-prose"> Using Storybook and MSW in React Native </h1> <div class="mb-4 flex gap-2 flex-row flex-wrap"> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="1.25em" height="1.25em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar shrink-0"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg> <time datetime="2022-03-02"> March 02, 2022 </time> </div> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="1.25em" height="1.25em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-timer shrink-0"><line x1="10" x2="14" y1="2" y2="2"></line><line x1="12" x2="15" y1="14" y2="11"></line><circle cx="12" cy="14" r="8"></circle></svg> <div>4 min.</div> </div> <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover flex flex-row gap-2 items-center shrink-0" target="_blank" href="https://github.com/phelipetls/blog/blob/master/src/content/posts/using-storybook-and-msw-in-react-native/index.mdx"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-code2 "><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m9 18 3-3-3-3"></path><path d="m5 12-3 3 3 3"></path></svg> Source code</a> </div> <div class="mb-4 flex max-w-xl flex-wrap gap-2"> <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-1" href="/tags/react native/"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <g fill="#61DAFB">
    <circle cx="64" cy="64" r="11.4" />
    <path d="M107.3 45.2c-2.2-.8-4.5-1.6-6.9-2.3.6-2.4 1.1-4.8 1.5-7.1 2.1-13.2-.2-22.5-6.6-26.1-1.9-1.1-4-1.6-6.4-1.6-7 0-15.9 5.2-24.9 13.9-9-8.7-17.9-13.9-24.9-13.9-2.4 0-4.5.5-6.4 1.6-6.4 3.7-8.7 13-6.6 26.1.4 2.3.9 4.7 1.5 7.1-2.4.7-4.7 1.4-6.9 2.3C8.2 50 1.4 56.6 1.4 64s6.9 14 19.3 18.8c2.2.8 4.5 1.6 6.9 2.3-.6 2.4-1.1 4.8-1.5 7.1-2.1 13.2.2 22.5 6.6 26.1 1.9 1.1 4 1.6 6.4 1.6 7.1 0 16-5.2 24.9-13.9 9 8.7 17.9 13.9 24.9 13.9 2.4 0 4.5-.5 6.4-1.6 6.4-3.7 8.7-13 6.6-26.1-.4-2.3-.9-4.7-1.5-7.1 2.4-.7 4.7-1.4 6.9-2.3 12.5-4.8 19.3-11.4 19.3-18.8s-6.8-14-19.3-18.8zM92.5 14.7c4.1 2.4 5.5 9.8 3.8 20.3-.3 2.1-.8 4.3-1.4 6.6-5.2-1.2-10.7-2-16.5-2.5-3.4-4.8-6.9-9.1-10.4-13 7.4-7.3 14.9-12.3 21-12.3 1.3 0 2.5.3 3.5.9zM81.3 74c-1.8 3.2-3.9 6.4-6.1 9.6-3.7.3-7.4.4-11.2.4-3.9 0-7.6-.1-11.2-.4-2.2-3.2-4.2-6.4-6-9.6-1.9-3.3-3.7-6.7-5.3-10 1.6-3.3 3.4-6.7 5.3-10 1.8-3.2 3.9-6.4 6.1-9.6 3.7-.3 7.4-.4 11.2-.4 3.9 0 7.6.1 11.2.4 2.2 3.2 4.2 6.4 6 9.6 1.9 3.3 3.7 6.7 5.3 10-1.7 3.3-3.4 6.6-5.3 10zm8.3-3.3c1.5 3.5 2.7 6.9 3.8 10.3-3.4.8-7 1.4-10.8 1.9 1.2-1.9 2.5-3.9 3.6-6 1.2-2.1 2.3-4.2 3.4-6.2zM64 97.8c-2.4-2.6-4.7-5.4-6.9-8.3 2.3.1 4.6.2 6.9.2 2.3 0 4.6-.1 6.9-.2-2.2 2.9-4.5 5.7-6.9 8.3zm-18.6-15c-3.8-.5-7.4-1.1-10.8-1.9 1.1-3.3 2.3-6.8 3.8-10.3 1.1 2 2.2 4.1 3.4 6.1 1.2 2.2 2.4 4.1 3.6 6.1zm-7-25.5c-1.5-3.5-2.7-6.9-3.8-10.3 3.4-.8 7-1.4 10.8-1.9-1.2 1.9-2.5 3.9-3.6 6-1.2 2.1-2.3 4.2-3.4 6.2zM64 30.2c2.4 2.6 4.7 5.4 6.9 8.3-2.3-.1-4.6-.2-6.9-.2-2.3 0-4.6.1-6.9.2 2.2-2.9 4.5-5.7 6.9-8.3zm22.2 21-3.6-6c3.8.5 7.4 1.1 10.8 1.9-1.1 3.3-2.3 6.8-3.8 10.3-1.1-2.1-2.2-4.2-3.4-6.2zM31.7 35c-1.7-10.5-.3-17.9 3.8-20.3 1-.6 2.2-.9 3.5-.9 6 0 13.5 4.9 21 12.3-3.5 3.8-7 8.2-10.4 13-5.8.5-11.3 1.4-16.5 2.5-.6-2.3-1-4.5-1.4-6.6zM7 64c0-4.7 5.7-9.7 15.7-13.4 2-.8 4.2-1.5 6.4-2.1 1.6 5 3.6 10.3 6 15.6-2.4 5.3-4.5 10.5-6 15.5C15.3 75.6 7 69.6 7 64zm28.5 49.3c-4.1-2.4-5.5-9.8-3.8-20.3.3-2.1.8-4.3 1.4-6.6 5.2 1.2 10.7 2 16.5 2.5 3.4 4.8 6.9 9.1 10.4 13-7.4 7.3-14.9 12.3-21 12.3-1.3 0-2.5-.3-3.5-.9zM96.3 93c1.7 10.5.3 17.9-3.8 20.3-1 .6-2.2.9-3.5.9-6 0-13.5-4.9-21-12.3 3.5-3.8 7-8.2 10.4-13 5.8-.5 11.3-1.4 16.5-2.5.6 2.3 1 4.5 1.4 6.6zm9-15.6c-2 .8-4.2 1.5-6.4 2.1-1.6-5-3.6-10.3-6-15.6 2.4-5.3 4.5-10.5 6-15.5 13.8 4 22.1 10 22.1 15.6 0 4.7-5.8 9.7-15.7 13.4z" />
  </g>
</svg> react native  </a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-1" href="/tags/javascript/"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path class="fill-[#323330] dark:fill-[#F0DB4F]" fill="#F0DB4F" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z" />
</svg> javascript  </a><a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-1" href="/tags/storybook/"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path d="M107.346 2.012l-6.914.431.539 14.377c.028.795-.889 1.259-1.514.766l-4.63-3.65-5.485 4.162a.934.934 0 01-1.498-.784l.617-14.123L19.873 7.48a6.264 6.264 0 00-5.87 6.488l3.86 102.838a6.264 6.264 0 005.98 6.023l83.612 3.754a6.273 6.273 0 004.609-1.73 6.255 6.255 0 001.936-4.526V8.264a6.258 6.258 0 00-1.975-4.566 6.257 6.257 0 00-4.679-1.686zm-41.46 21.187c16.308 0 25.214 8.723 25.214 25.319-2.204 1.713-18.62 2.88-18.62.443.346-9.3-3.817-9.707-6.13-9.707-2.198 0-5.899.662-5.899 5.644 0 12.288 31.69 11.625 31.69 36.424 0 13.95-11.335 21.655-25.791 21.655-14.92 0-27.957-6.036-26.485-26.963.578-2.457 19.545-1.873 19.545 0-.23 8.635 1.735 11.175 6.707 11.175 3.817 0 5.553-2.103 5.553-5.646 0-12.621-31.227-13.063-31.227-36.201 0-13.285 9.138-22.143 25.444-22.143z" fill="#FF4785"></path>
</svg> storybook  </a> <a class="inline-flex gap-2 w-fit items-center justify-center rounded-full border border-divider bg-surface px-4 no-underline shadow-xs shadow-shadow transition-colors duration-300 hover:border-divider hover:bg-hover whitespace-nowrap order-2" href="/tags/">  ...  </a> </div> </header> <hr class="my-8"> <div data-blog-post-container data-toc="open" class="group flex flex-col lg:gap-8 lg:flex-row-reverse"> <aside style="--offset-from-top:1rem" class="relative shrink-0 mb-8 lg:ml-auto lg:mb-0 lg:basis-1/3 lg:sticky lg:top-(--offset-from-top) lg:h-[calc(100vh-var(--offset-from-top)*2)] overflow-hidden"> <button type="button" data-toggle-toc="true" data-open-toc-label="Open table of contents" data-closed-toc-label="Close table of contents" aria-label="Close table of contents" style="--duration:150ms" data-preload="true" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary duration-300 min-w-[40px] h-[40px] justify-center items-center rounded-full px-2 z-1 absolute top-4 right-4 hidden lg:grid lg:min-w-0 lg:group-data-toc-open:grid-cols-[0fr_max-content] lg:group-data-toc-closed:grid-cols-[1fr_max-content] transition-all duration-(--duration) ease-in-out lg:justify-center"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-(--duration) ease-out group-data-toc-open:scale-100 group-data-toc-open:delay-(--duration)"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-(--duration) ease-in group-data-toc-closed:scale-100 group-data-toc-closed:delay-[var(--duration)"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg> <div class="col-start-1 col-end-1 group-data-toc-closed:mx-2 truncate"> Open table of contents </div> </button> <div data-blog-post-toc-container data-preload class="card lg:h-full lg:p-4 lg:ml-auto lg:opacity-100 lg:group-data-toc-closed:opacity-0 lg:group-data-toc-closed:pointer-events-none transition-opacity duration-300 ease-in-out"> <div class="hidden lg:flex lg:h-full lg:flex-col"> <div class="flex items-center gap-2 h-10 flex-none"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list "><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg> <h2 class="m-0">Table of Contents</h2> <div class="ml-auto flex items-center transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg> </div> </div> <nav data-toc-wrapper class="pt-4 h-full min-h-0 lg:overflow-y-auto [&#38;_a_*]:indent-0 [&#38;_ol]:m-0 [&#38;_ol]:list-none [&#38;_ol]:indent-4 [&#38;_ol_li[data-active]>a]:text-primary [&#38;_ol_li[data-active]]:before:bg-primary [&#38;_ol_li]:relative [&#38;_ol_li]:before:absolute [&#38;_ol_li]:before:left-0 [&#38;_ol_li]:before:top-0 [&#38;_ol_li]:before:h-full [&#38;_ol_li]:before:w-px [&#38;_ol_li]:before:bg-divider [&#38;_ol_li]:before:content-[''] [&#38;_ol_li_a:hover]:bg-hover [&#38;_ol_li_a]:block [&#38;_ol_li_a]:truncate [&#38;_ol_li_a]:border-b-0 [&#38;_ol_li_a]:transition-colors [&#38;_ol_li_a]:duration-300 [&#38;_ol_ol]:indent-8 [&#38;_ol_ol_ol]:indent-12 [&#38;_ol_ol_ol_ol]:indent-16"> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#how-msw-storybook-addon-works">How msw-storybook-addon works?</a>  </li><li data-astro-toc="1"> <a href="#porting-msw-storybook-addon-to-react-native">Porting msw-storybook-addon to React Native</a> <ol data-astro-toc="2"><li data-astro-toc="2"> <a href="#first-problem-how-to-initialize-the-server">First problem: how to initialize the server?</a>  </li><li data-astro-toc="2"> <a href="#implementation">Implementation</a>  </li></ol> </li><li data-astro-toc="1"> <a href="#usage">Usage</a>  </li><li data-astro-toc="1"> <a href="#example-repository-using-the-official-react-native-cli">Example repository using the official react-native CLI</a>  </li><li data-astro-toc="1"> <a href="#advice-for-react-query-users">Advice for react-query users</a>  </li></ol> </nav> </div> <details class="group px-horizontal-padding py-4 lg:hidden" aria-label="Table of Contents"> <summary class="list-none"> <div class="flex items-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list "><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg> <h2 class="m-0">Table of Contents</h2> <div class="flex items-center ml-auto transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down "><path d="m6 9 6 6 6-6"></path></svg> </div> </div> </summary> <nav data-toc-wrapper class="mt-4 [&#38;_ol]:m-0 [&#38;_ol]:list-outside [&#38;_ol]:px-horizontal-padding [&#38;_ol_li:not(:first-child)]:mt-1"> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#how-msw-storybook-addon-works">How msw-storybook-addon works?</a>  </li><li data-astro-toc="1"> <a href="#porting-msw-storybook-addon-to-react-native">Porting msw-storybook-addon to React Native</a> <ol data-astro-toc="2"><li data-astro-toc="2"> <a href="#first-problem-how-to-initialize-the-server">First problem: how to initialize the server?</a>  </li><li data-astro-toc="2"> <a href="#implementation">Implementation</a>  </li></ol> </li><li data-astro-toc="1"> <a href="#usage">Usage</a>  </li><li data-astro-toc="1"> <a href="#example-repository-using-the-official-react-native-cli">Example repository using the official react-native CLI</a>  </li><li data-astro-toc="1"> <a href="#advice-for-react-query-users">Advice for react-query users</a>  </li></ol> </nav> </details> <script type="module">const s=document.querySelector("nav[data-toc-wrapper] ol"),o=s?.closest("[data-toc-wrapper]"),l=document.querySelector("[data-blog-post]"),a=s?.querySelector("li");function u(t){t.setAttribute("data-active","")}function d(t){t.removeAttribute("data-active")}function f(){s?.querySelectorAll("li").forEach(d)}function g(t){const e=t.getAttribute("id"),c=s?.querySelector(`li a[href="#${e}"]`);return c?c.closest("li"):null}const h=new IntersectionObserver(t=>{t.forEach(e=>{if(!o)return;const c=e.target;if(e.isIntersecting){const n=g(c);if(!n)return;f(),u(n);const r=o.getBoundingClientRect(),i=n.getBoundingClientRect();if(n===a){o.scrollTop=0;return}if(r.top>i.top){o.scrollTop-=r.top-i.top;return}i.bottom>r.bottom&&(o.scrollTop+=i.bottom-r.bottom)}})},{threshold:1}),m=l.querySelectorAll("h2, h3, h4, h4, h6");for(const t of m)h.observe(t);</script> </div> </aside> <div data-blog-post class="min-w-0 [&#38;>pre]:my-8 max-sm:[&#38;>pre]:full-bleed *:data-codeblock:my-8 max-sm:*:data-codeblock:full-bleed max-sm:[&#38;>[data-codeblock]_pre]:rounded-none max-sm:[&#38;>[data-codeblock]_[data-codeblock-header]]:rounded-none [&#38;>hr]:border-0 [&#38;>hr]:text-center [&#38;>hr]:after:content-['⁂'] max-sm:[&#38;>figure]:full-bleed [&#38;>astro-island>div]:my-8 [&#38;>lite-youtube]:my-8 [&#38;>blockquote]:my-8 [&#38;>figure_video]:min-h-[15em] [&#38;_.katex-display]:max-w-prose [&#38;_.katex-display]:overflow-x-auto [&#38;_.katex-display]:overflow-y-hidden"> <p class="max-w-prose">The integration between <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="storybook.js.org/">Storybook</a> and
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://mswjs.io/">Mock Service Worker</a> enables you to develop components
isolated from your app and your back-end server.</p>
<p class="max-w-prose">This is
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://hmh.engineering/storybook-and-mock-service-worker-a-match-made-in-heaven-e762bd7951ce">not</a>
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://blog.logrocket.com/using-storybook-and-mock-service-worker-for-mocked-api-responses/">new</a>
on the web, the
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://storybook.js.org/addons/msw-storybook-addon"><code>msw-storybook-addon</code></a>
makes it easy to get started. It’s another story for React Native though, since
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/mswjs/msw/issues/203">MSW has only recently started supporting it</a>.</p>
<p class="max-w-prose">I find this combination of tools invaluable, so I couldn’t resist attempting to
make it work in React Native, even though it’s pretty new.</p>
<p class="max-w-prose">In this post, I’m gonna explain in detail how I did it.</p>
<aside class="my-8 max-w-2xl flex gap-4 sm:rounded-sm border-y sm:border-y-0 sm:border-l bg-surface max-sm:full-bleed px-horizontal-padding py-4 sm:shadow-xs sm:shadow-shadow sm:mx-0 flex-row border-note"> <div class=""> <div class="text-note"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info "><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg> </div> </div> <article class="min-w-0 [&_p]:max-w-prose first-of-type:[&_h2]:mt-0 first-of-type:[&_h2]:pt-0">   <p class="max-w-prose"><strong>tl;dr:</strong> You can read the <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/phelipetls/react-native-storybook-msw">example
repository</a> or this
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/phelipetls/react-native-storybook-msw/pull/1">pull request</a>
instead.</p>  </article> </aside>
<h2 id="how-msw-storybook-addon-works" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  How <code>msw-storybook-addon</code> works?<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#how-msw-storybook-addon-works"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Our end goal is to port <code>msw-storybook-addon</code> to React Native. So let’s first
understand how it works.</p>
<p class="max-w-prose">This is a library by the MSW team that provides you with a
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://storybook.js.org/docs/react/writing-stories/decorators">global Storybook decorator</a>.
From the docs,
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/mswjs/msw-storybook-addon">here’s how you add to your Storybook configuration</a>:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path class="fill-[#323330] dark:fill-[#F0DB4F]" fill="#F0DB4F" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <bdi style="--code-bg: #282c34;--code-fg: #abb2bf;">./storybook/preview.js</bdi> </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="2uJU40" prefix="r43" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;import { initialize, mswDecorator } from &#39;msw-storybook-addon&#39;\n\ninitialize()\nexport const decorators = [mswDecorator]&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">initialize</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">mswDecorator</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> 'msw-storybook-addon'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">initialize</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#C678DD"> const</span><span style="color:#E5C07B"> decorators</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> [</span><span style="color:#E06C75">mswDecorator</span><span style="color:#ABB2BF">]</span></span></code></pre> </div> <script type="module" src="/_astro/CodeBlock.astro_astro_type_script_index_0_lang.CZ7V3yCn.js"></script>
<p class="max-w-prose">And <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/mswjs/msw-storybook-addon#usage">here’s how you use it</a>:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path class="fill-[#323330] dark:fill-[#F0DB4F]" fill="#F0DB4F" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> JavaScript </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="2vol2L" prefix="r44" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;import { rest } from &#39;msw&#39;\nimport { UserProfile } from &#39;./UserProfile&#39;\n\nexport const SuccessBehavior = () =&gt; &lt;UserProfile /&gt;\n\nSuccessBehavior.parameters = {\n  msw: {\n    handlers: [\n      rest.get(&#39;/user&#39;, (req, res, ctx) =&gt; {\n        return res(\n          ctx.json({\n            firstName: &#39;Neil&#39;,\n            lastName: &#39;Maverick&#39;,\n          })\n        )\n      }),\n    ],\n  },\n}&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">rest</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> 'msw'</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">UserProfile</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> './UserProfile'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#C678DD"> const</span><span style="color:#61AFEF"> SuccessBehavior</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> &#x3C;</span><span style="color:#E5C07B">UserProfile</span><span style="color:#ABB2BF"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B">SuccessBehavior</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">parameters</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">  msw</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75">    handlers</span><span style="color:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#E5C07B">      rest</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'/user'</span><span style="color:#ABB2BF">, (</span><span style="color:#E06C75;font-style:italic">req</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">res</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">ctx</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">        return</span><span style="color:#61AFEF"> res</span><span style="color:#ABB2BF">(</span></span>
<span class="line"><span style="color:#E5C07B">          ctx</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">            firstName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'Neil'</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">            lastName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'Maverick'</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">          })</span></span>
<span class="line"><span style="color:#ABB2BF">        )</span></span>
<span class="line"><span style="color:#ABB2BF">      }),</span></span>
<span class="line"><span style="color:#ABB2BF">    ],</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre> </div> 
<p class="max-w-prose">This code is using Storybook v6, but only Storybook v5 is available for React
Native. Fortunately, both versions support decorators, they differ mostly about
how you configure/use it:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path class="fill-[#323330] dark:fill-[#F0DB4F]" fill="#F0DB4F" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <bdi style="--code-bg: #282c34;--code-fg: #abb2bf;">storybook/index.js</bdi> </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="2cYpNc" prefix="r45" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;import { getStorybookUI, configure } from &#39;@storybook/react-native&#39;\nimport { addDecorator } from &#39;@storybook/react-native&#39;\nimport { withMsw, initialize } from &#39;./mswDecorator&#39;\n\nimport &#39;./rn-addons&#39;\n\ninitialize()\naddDecorator(withMsw)\n\n// import stories\nconfigure(() =&gt; {\n  require(&#39;../components/Task.stories.js&#39;)\n}, module)\n\nconst StorybookUIRoot = getStorybookUI({\n  asyncStorage: null,\n})\n\nexport default StorybookUIRoot&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">getStorybookUI</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">configure</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> '@storybook/react-native'</span></span>
<span class="line highlighted"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">addDecorator</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> '@storybook/react-native'</span></span>
<span class="line highlighted"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">withMsw</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">initialize</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> './mswDecorator'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#98C379"> './rn-addons'</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#61AFEF">initialize</span><span style="color:#ABB2BF">()</span></span>
<span class="line highlighted"><span style="color:#61AFEF">addDecorator</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">withMsw</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// import stories</span></span>
<span class="line"><span style="color:#61AFEF">configure</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#61AFEF">  require</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'../components/Task.stories.js'</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">}, </span><span style="color:#E5C07B">module</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> StorybookUIRoot</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> getStorybookUI</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">  asyncStorage</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">null</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#C678DD"> default</span><span style="color:#E06C75"> StorybookUIRoot</span></span></code></pre> </div> 
<h2 id="porting-msw-storybook-addon-to-react-native" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Porting <code>msw-storybook-addon</code> to React Native<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#porting-msw-storybook-addon-to-react-native"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">A decorator is simply a function that does something before rendering the story,
which is a React component.</p>
<p class="max-w-prose">Here is what we need to do:</p>
<ul>
<li>Initialize the MSW server.</li>
<li>Clean it up, which means to reset old request handlers.</li>
<li>Set up the new request handlers, if any.</li>
</ul>
<p class="max-w-prose">Our implementation should not differ very much from the <code>msw-storybook-addon</code>
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/mswjs/msw-storybook-addon/blob/35a4b198a4b4eead9a2d0771f81460c6788e77a7/packages/msw-addon/src/mswDecorator.ts#L69-L102">implementation</a>.</p>
<h3 id="first-problem-how-to-initialize-the-server" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  First problem: how to initialize the server?<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#first-problem-how-to-initialize-the-server"><span class="icon icon-link"></span></a>  </h3>
<p class="max-w-prose">We can’t use <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://mswjs.io/docs/api/setup-worker"><code>setupWorker</code></a> because
we’re not in a browser, we don’t have service workers.
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://mswjs.io/docs/api/setup-server"><code>setupServer</code></a> also won’t work, because
we’re not in a Node.js environment.</p>
<p class="max-w-prose">It turns out that we need to use the <code>setupServer</code> function from the
<code>msw/native</code> module. This is still undocumented, you’ll only read about it in
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/mswjs/msw/issues/203">this GitHub issue</a> and in
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/mswjs/examples/pull/60">this example with more details on how to use it</a>.</p>
<h3 id="implementation" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Implementation<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#implementation"><span class="icon icon-link"></span></a>  </h3>
<p class="max-w-prose">What follows is an implementation that worked for me. You can ignore all non
highlighted code, since it’s only meant to stay compatible with the
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/mswjs/msw-storybook-addon/blob/35a4b198a4b4eead9a2d0771f81460c6788e77a7/packages/msw-addon/src/mswDecorator.ts#L69-L102"><code>msw-storybook-addon</code> API</a>.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path class="fill-[#323330] dark:fill-[#F0DB4F]" fill="#F0DB4F" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <bdi style="--code-bg: #282c34;--code-fg: #abb2bf;">./mswDecorator.js</bdi> </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1awN65" prefix="r46" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;import &#39;react-native-url-polyfill/auto&#39;\nimport { setupServer } from &#39;msw/native&#39;\n\nconst server = setupServer()\n\nexport const initialize = () =&gt; {\n  // Do not warn or error out if a non-mocked request happens.\n  // If we don&#39;t use this, Storybook will be spammy about requests made to\n  // fetch the JS bundle etc.\n  server.listen({ onUnhandledRequest: &#39;bypass&#39; })\n}\n\nexport const withMsw = (storyFn, { parameters: { msw } }) =&gt; {\n  server.resetHandlers()\n\n  if (msw) {\n    if (Array.isArray(msw) &amp;&amp; msw.length &gt; 0) {\n      // Support an Array of request handlers (backwards compatibility).\n      server.use(...msw)\n    } else if (&#39;handlers&#39; in msw &amp;&amp; msw.handlers) {\n      // Support an Array named request handlers handlers\n      // or an Object of named request handlers with named arrays of handlers\n      const handlers = Object.values(msw.handlers)\n        .filter(Boolean)\n        .reduce((handlers, handlersList) =&gt; handlers.concat(handlersList), [])\n\n      if (handlers.length &gt; 0) {\n        server.use(...handlers)\n      }\n    }\n  }\n\n  return storyFn()\n}&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line highlighted"><span style="color:#C678DD">import</span><span style="color:#98C379"> 'react-native-url-polyfill/auto'</span></span>
<span class="line highlighted"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">setupServer</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> 'msw/native'</span></span>
<span class="line highlighted"></span>
<span class="line highlighted"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> server</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> setupServer</span><span style="color:#ABB2BF">()</span></span>
<span class="line highlighted"></span>
<span class="line highlighted"><span style="color:#C678DD">export</span><span style="color:#C678DD"> const</span><span style="color:#61AFEF"> initialize</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line highlighted"><span style="color:#7F848E;font-style:italic">  // Do not warn or error out if a non-mocked request happens.</span></span>
<span class="line highlighted"><span style="color:#7F848E;font-style:italic">  // If we don't use this, Storybook will be spammy about requests made to</span></span>
<span class="line highlighted"><span style="color:#7F848E;font-style:italic">  // fetch the JS bundle etc.</span></span>
<span class="line highlighted"><span style="color:#E5C07B">  server</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">listen</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">onUnhandledRequest</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'bypass'</span><span style="color:#ABB2BF"> })</span></span>
<span class="line highlighted"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#C678DD"> const</span><span style="color:#61AFEF"> withMsw</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">storyFn</span><span style="color:#ABB2BF">, { </span><span style="color:#E06C75">parameters</span><span style="color:#ABB2BF">: { </span><span style="color:#E06C75;font-style:italic">msw</span><span style="color:#ABB2BF"> } }) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line highlighted"><span style="color:#E5C07B">  server</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">resetHandlers</span><span style="color:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">msw</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">Array</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">isArray</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">msw</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">&#x26;&#x26;</span><span style="color:#E5C07B"> msw</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">length</span><span style="color:#56B6C2"> ></span><span style="color:#D19A66"> 0</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">      // Support an Array of request handlers (backwards compatibility).</span></span>
<span class="line"><span style="color:#E5C07B">      server</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(...</span><span style="color:#E06C75">msw</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">    } </span><span style="color:#C678DD">else</span><span style="color:#C678DD"> if</span><span style="color:#ABB2BF"> (</span><span style="color:#98C379">'handlers'</span><span style="color:#C678DD"> in</span><span style="color:#E06C75"> msw</span><span style="color:#56B6C2"> &#x26;&#x26;</span><span style="color:#E5C07B"> msw</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">handlers</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">      // Support an Array named request handlers handlers</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">      // or an Object of named request handlers with named arrays of handlers</span></span>
<span class="line"><span style="color:#C678DD">      const</span><span style="color:#E5C07B"> handlers</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> Object</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">values</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">msw</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">handlers</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">filter</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">Boolean</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">reduce</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">handlers</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">handlersList</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#E5C07B"> handlers</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">concat</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">handlersList</span><span style="color:#ABB2BF">), [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">      if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">handlers</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">length</span><span style="color:#56B6C2"> ></span><span style="color:#D19A66"> 0</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B">        server</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">use</span><span style="color:#ABB2BF">(...</span><span style="color:#E06C75">handlers</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  return</span><span style="color:#61AFEF"> storyFn</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre> </div> 
<p class="max-w-prose">You’ll notice that we import a polyfill.
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/mswjs/examples/pull/60/files">This is required, as explained in this Pull Request with an example</a>:</p>
<blockquote>
<p class="max-w-prose">The polyfill <code>react-native-url-polyfill</code> is required or else calling
<code>server.start()</code> will result in an Error: not implemented message followed by
Error: Invariant Violation: Module AppRegistry is not a registered callable
module (calling runApplication)… due to the barebones React Native URL
polyfill that throws Not Implemented exceptions for functions that MSW calls
such as
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/facebook/react-native/blob/cd347a7e0ed29ae1049e041fcb34588e1aac76f9/Libraries/Blob/URL.js#L194">search()</a>.</p>
</blockquote>
<h2 id="usage" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Usage<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#usage"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">Now things should work exactly like <code>msw-storybook-addon</code>, except that you’ll be
using Storybook v5, so it’s a little bit different:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path class="fill-[#323330] dark:fill-[#F0DB4F]" fill="#F0DB4F" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> JavaScript </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="1HdwkL" prefix="r47" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;import React from &#39;react&#39;\nimport { storiesOf } from &#39;@storybook/react-native&#39;\nimport { rest } from &#39;msw&#39;\nimport { UserProfile } from &#39;./UserProfile&#39;\n\nstoriesOf(&#39;Routes&#39;, module).add(&#39;SuccessBehavior&#39;, () =&gt; &lt;UserProfile /&gt;, {\n  msw: {\n    handlers: [\n      rest.get(&#39;/user&#39;, (req, res, ctx) =&gt; {\n        return res(\n          ctx.json({\n            firstName: &#39;Neil&#39;,\n            lastName: &#39;Maverick&#39;,\n          })\n        )\n      }),\n    ],\n  },\n})&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD">import</span><span style="color:#E06C75"> React</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> 'react'</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">storiesOf</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> '@storybook/react-native'</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">rest</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> 'msw'</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">UserProfile</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> './UserProfile'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">storiesOf</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'Routes'</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">module</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">add</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'SuccessBehavior'</span><span style="color:#ABB2BF">, () </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> &#x3C;</span><span style="color:#E5C07B">UserProfile</span><span style="color:#ABB2BF"> />, {</span></span>
<span class="line"><span style="color:#E06C75">  msw</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75">    handlers</span><span style="color:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#E5C07B">      rest</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'/user'</span><span style="color:#ABB2BF">, (</span><span style="color:#E06C75;font-style:italic">req</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">res</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">ctx</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">        return</span><span style="color:#61AFEF"> res</span><span style="color:#ABB2BF">(</span></span>
<span class="line"><span style="color:#E5C07B">          ctx</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">            firstName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'Neil'</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">            lastName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'Maverick'</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">          })</span></span>
<span class="line"><span style="color:#ABB2BF">        )</span></span>
<span class="line"><span style="color:#ABB2BF">      }),</span></span>
<span class="line"><span style="color:#ABB2BF">    ],</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF">})</span></span></code></pre> </div> 
<h2 id="example-repository-using-the-official-react-native-cli" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Example repository using the official <code>react-native</code> CLI<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#example-repository-using-the-official-react-native-cli"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">To prove my point, I implemented the whole thing in a brand new React Native
project using <code>react-native</code> CLI:</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path fill="none" d="M4.24 4.24h119.53v119.53H4.24z" />
  <path class="dark:fill-[#ffffff]" fill="#293138" d="M109.01 28.64 71.28 6.24c-2.25-1.33-4.77-2-7.28-2s-5.03.67-7.28 2.01l-37.74 22.4c-4.5 2.67-7.28 7.61-7.28 12.96v44.8c0 5.35 2.77 10.29 7.28 12.96l37.73 22.4c2.25 1.34 4.76 2 7.28 2 2.51 0 5.03-.67 7.28-2l37.74-22.4c4.5-2.67 7.28-7.62 7.28-12.96V41.6c0-5.34-2.77-10.29-7.28-12.96zM79.79 98.59l.06 3.22c0 .39-.25.83-.55.99l-1.91 1.1c-.3.15-.56-.03-.56-.42l-.03-3.17c-1.63.68-3.29.84-4.34.42-.2-.08-.29-.37-.21-.71l.69-2.91c.06-.23.18-.46.34-.6.06-.06.12-.1.18-.13.11-.06.22-.07.31-.03 1.14.38 2.59.2 3.99-.5 1.78-.9 2.97-2.72 2.95-4.52-.02-1.64-.9-2.31-3.05-2.33-2.74.01-5.3-.53-5.34-4.57-.03-3.32 1.69-6.78 4.43-8.96l-.03-3.25c0-.4.24-.84.55-1l1.85-1.18c.3-.15.56.04.56.43l.03 3.25c1.36-.54 2.54-.69 3.61-.44.23.06.34.38.24.75l-.72 2.88c-.06.22-.18.44-.33.58a.77.77 0 0 1-.19.14c-.1.05-.19.06-.28.05-.49-.11-1.65-.36-3.48.56-1.92.97-2.59 2.64-2.58 3.88.02 1.48.77 1.93 3.39 1.97 3.49.06 4.99 1.58 5.03 5.09.05 3.44-1.79 7.15-4.61 9.41zm26.34-60.5-35.7 22.05c-4.45 2.6-7.73 5.52-7.74 10.89v43.99c0 3.21 1.3 5.29 3.29 5.9-.65.11-1.32.19-1.98.19-2.09 0-4.15-.57-5.96-1.64l-37.73-22.4c-3.69-2.19-5.98-6.28-5.98-10.67V41.6c0-4.39 2.29-8.48 5.98-10.67l37.74-22.4c1.81-1.07 3.87-1.64 5.96-1.64s4.15.57 5.96 1.64l37.74 22.4c3.11 1.85 5.21 5.04 5.8 8.63-1.27-2.67-4.09-3.39-7.38-1.47z" />
  <path fill="#4FA847" d="m99.12 90.73-9.4 5.62c-.25.15-.43.31-.43.61v2.46c0 .3.2.43.45.28l9.54-5.8c.25-.15.29-.42.29-.72v-2.17c0-.3-.2-.42-.45-.28z" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> Bash </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="131aeE" prefix="r48" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;$ npx react-native init projectName&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF">$</span><span style="color:#98C379"> npx</span><span style="color:#98C379"> react-native</span><span style="color:#98C379"> init</span><span style="color:#98C379"> projectName</span></span></code></pre> </div> 
<p class="max-w-prose"><a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/phelipetls/react-native-storybook-msw">You can check the final result in this GitHub repository</a>.
Here’s a video:</p>
<p class="max-w-prose">{{&lt; video src=”./demo-msw-storybook-react-native.webm” caption=“A demo showing
Storybook and MSW working in React Native” &gt;}}</p>
<p class="max-w-prose">To my surprise, I struggled the most to get Storybook working. I came up with
issues related with a Promise polyfill that caused <code>Promises</code> to never resolve
and to
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/storybookjs/react-native/issues/20"><code>Promise.finally</code> being undefined</a>.
I fixed it by using <code>patch-package</code> to remove the line importing the polyfill,
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://github.com/storybookjs/react-native/issues/20#issuecomment-1046101914">as the <code>@storybook/react-native</code> maintainer recommended</a>.
This is unfortunate… I hope that a stable Storybook v6 comes soon enough for
React Native.</p>
<p class="max-w-prose">Besides that, everything worked as expected and I hope it works for your project
too! I didn’t have this problem with a project using Expo’s Bare Workflow, not
sure why though.</p>
<h2 id="advice-for-react-query-users" class="mb-8 mt-4 pt-4 [&#38;_a]:text-primary [&#38;_a]:border-0 [&#38;_a]:before:content-['#'] [&#38;_a]:before:text-xl [&#38;_a]:before:ml-2">  Advice for <code>react-query</code> users<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" aria-hidden="true" tabindex="-1" href="#advice-for-react-query-users"><span class="icon icon-link"></span></a>  </h2>
<p class="max-w-prose">If you use <code>react-query</code>, I think it’s also wise to call
<a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" href="https://react-query.tanstack.com/reference/QueryClient#queryclientclear"><code>QueryClient.clear</code></a>
in a decorator, to avoid surprises with the cache.</p>
<div data-codeblock class="last:mb-0 max-w-2xl text-sm [&#38;_>_pre]:shadow-xs [&#38;_>_pre]:shadow-shadow [&#38;_>_pre]:rounded-b [&#38;_>_pre]:overflow-x-auto [&#38;_>_pre]:scheme-dark [&#38;_>_pre_>_code]:py-4 [&#38;_>_pre_>_code]:grid [&#38;_.line]:px-horizontal-padding [&#38;_.line]:border-l-2 [&#38;_.line]:border-(--code-bg) [&#38;_.line]:min-h-[1lh] [&#38;_.line]:empty:last:min-h-0 [&#38;_.line.highlighted]:bg-[#272115] [&#38;_.line.highlighted]:border-[#624710] [&#38;_.twoslash-query-line]:px-horizontal-padding [&#38;_.twoslash-error-line]:border-l-2 [&#38;_.twoslash-error-line]:border-(--code-bg) [&#38;_.twoslash-error-line]:py-1 [&#38;_.twoslash-error-line]:px-4 [&#38;_.twoslash-error-line]:bg-[#d4565620] [&#38;_.twoslash-error-line]:text-[#d45656] [&#38;_.twoslash-error-line]:border-[#d45656] [&#38;_.twoslash-popup-arrow]:bg-(--code-bg) [&#38;_.twoslash-popup-container]:bg-(--code-bg)" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div data-codeblock-header class="dark flex items-center gap-2 rounded-t py-1 bg-(--code-bg) text-(--code-fg) border-b border-divider" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <div class="flex pl-horizontal-padding items-center gap-2" style="--code-bg: #282c34;--code-fg: #abb2bf;"> <svg viewBox="0 0 128 128" height="1em" width="1em">
  <path class="fill-[#323330] dark:fill-[#F0DB4F]" fill="#F0DB4F" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z" />
</svg> <div class="rtl truncate text-lg" style="--code-bg: #282c34;--code-fg: #abb2bf;"> JavaScript </div> </div> <div class="ml-auto flex flex-row gap-2 pr-2" style="--code-bg: #282c34;--code-fg: #abb2bf;">  <astro-island uid="Z1OHw72" prefix="r49" component-url="/_astro/CopyCodeBlockButton.CunNfTy3.js" component-export="default" renderer-url="/_astro/client.BXosma6P.js" props="{&quot;successText&quot;:[0,&quot;Copied!&quot;],&quot;errorText&quot;:[0,&quot;Failed to copy&quot;],&quot;code&quot;:[0,&quot;// storybook/index.js\nimport { addDecorator } from &#39;@storybook/react-native&#39;\nimport { queryClient } from &#39;../lib/react-query&#39;\n\naddDecorator((storyFn) =&gt; {\n  queryClient.clear()\n\n  return storyFn()\n})&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;CopyCodeBlockButton&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Copy code" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 rounded-sm border border-divider p-1 shadow-xs shadow-shadow"><span class="text-(--code-fg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard "><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></span></button><!--astro:end--></astro-island> </div> </div> <pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic">// storybook/index.js</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">addDecorator</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> '@storybook/react-native'</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">queryClient</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> '../lib/react-query'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">addDecorator</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">storyFn</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B">  queryClient</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">clear</span><span style="color:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  return</span><span style="color:#61AFEF"> storyFn</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">})</span></span></code></pre> </div>  </div> </div> </article> <hr class="max-sm:full-bleed mt-8"> <nav class="flex items-stretch sm:gap-4 max-sm:full-bleed sm:my-8" aria-label="Posts navigation"> <a class="sm:card flex flex-1 flex-col gap-2 border-0 px-horizontal-padding py-4 transition-colors duration-300 hover:bg-hover" href="/posts/adb-a-must-know-cli-tool-for-android-development/"> <span class="text-primary"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left "><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg> </span> adb: a must-know CLI tool for Android development </a> <div class="border-l border-divider sm:hidden"></div> <a class="sm:card flex flex-1 flex-col-reverse items-end justify-end gap-2 border-0 px-horizontal-padding py-4 text-right transition-colors duration-300 hover:bg-hover" href="/posts/demystifying-git-rebase/"> Demystifying git rebase <span class="text-primary"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right "><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg> </span> </a> </nav> <hr class="max-sm:full-bleed mb-8"> </div> </main>  <footer class="bg-background grid grid-cols-layout mt-auto sm:mt-0"> <div class="mx-auto flex w-full max-w-content flex-col pt-4 pb-8 sm:justify-between"> <nav aria-label="Contacts" class="flex gap-2 mb-2"> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-email" href="mailto:phelipe_teles@hotmail.com" aria-label="E-mail">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail "><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>  </a> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-linkedin" href="https://linkedin.com/in/phelipeteles" aria-label="LinkedIn">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin "><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg>  </a> <a class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary transition-colors duration-300 min-w-[40px] h-[40px] flex justify-center items-center rounded-full px-2 shadow" id="contact-github" href="https://github.com/phelipetls" aria-label="GitHub">  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>  </a> </nav> <span class="text-sm"> 
All content is under a <a class="underline underline-offset-4 decoration-primary hover:decoration-primary-hover" rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a>
license.
 </span> </div> </footer> </body></html> <script type="module">const e=document.querySelector("[data-blog-post-container]"),t=document.querySelector("[data-toggle-toc]"),o=document.querySelector("[data-blog-post-toc-container]");let n=new AbortController;const a=localStorage.getItem("__preferred_toc_state");a!==null&&(a==="open"?s():(c(),o?.classList.add("invisible")));function s(){n.abort(),o?.classList.remove("invisible"),e instanceof HTMLElement&&t instanceof HTMLButtonElement&&(e.setAttribute("data-toc","open"),localStorage.setItem("__preferred_toc_state","open"),t.setAttribute("aria-label",t.dataset.closedTocLabel??""))}function c(){n=new AbortController,o?.addEventListener("transitionend",()=>{o?.classList.add("invisible")},{signal:n.signal}),e instanceof HTMLElement&&t instanceof HTMLButtonElement&&(e.setAttribute("data-toc","closed"),localStorage.setItem("__preferred_toc_state","closed"),t.setAttribute("aria-label",t.dataset.openTocLabel??""))}t?.addEventListener("click",()=>{if(!(e instanceof HTMLDivElement))return;e.dataset.toc==="open"?c():s()});</script>